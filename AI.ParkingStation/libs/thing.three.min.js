!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}({"./node_modules/babel-runtime/core-js/array/from.js":
/*!**********************************************************!*\
  !*** ./node_modules/babel-runtime/core-js/array/from.js ***!
  \**********************************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){e.exports={default:r(/*! core-js/library/fn/array/from */"./node_modules/core-js/library/fn/array/from.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/map.js":
/*!***************************************************!*\
  !*** ./node_modules/babel-runtime/core-js/map.js ***!
  \***************************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){e.exports={default:r(/*! core-js/library/fn/map */"./node_modules/core-js/library/fn/map.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/number/epsilon.js":
/*!**************************************************************!*\
  !*** ./node_modules/babel-runtime/core-js/number/epsilon.js ***!
  \**************************************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){e.exports={default:r(/*! core-js/library/fn/number/epsilon */"./node_modules/core-js/library/fn/number/epsilon.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/object/assign.js":
/*!*************************************************************!*\
  !*** ./node_modules/babel-runtime/core-js/object/assign.js ***!
  \*************************************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){e.exports={default:r(/*! core-js/library/fn/object/assign */"./node_modules/core-js/library/fn/object/assign.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/object/create.js":
/*!*************************************************************!*\
  !*** ./node_modules/babel-runtime/core-js/object/create.js ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){e.exports={default:r(/*! core-js/library/fn/object/create */"./node_modules/core-js/library/fn/object/create.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/object/define-property.js":
/*!**********************************************************************!*\
  !*** ./node_modules/babel-runtime/core-js/object/define-property.js ***!
  \**********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){e.exports={default:r(/*! core-js/library/fn/object/define-property */"./node_modules/core-js/library/fn/object/define-property.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/object/keys.js":
/*!***********************************************************!*\
  !*** ./node_modules/babel-runtime/core-js/object/keys.js ***!
  \***********************************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){e.exports={default:r(/*! core-js/library/fn/object/keys */"./node_modules/core-js/library/fn/object/keys.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/object/set-prototype-of.js":
/*!***********************************************************************!*\
  !*** ./node_modules/babel-runtime/core-js/object/set-prototype-of.js ***!
  \***********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){e.exports={default:r(/*! core-js/library/fn/object/set-prototype-of */"./node_modules/core-js/library/fn/object/set-prototype-of.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/set.js":
/*!***************************************************!*\
  !*** ./node_modules/babel-runtime/core-js/set.js ***!
  \***************************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){e.exports={default:r(/*! core-js/library/fn/set */"./node_modules/core-js/library/fn/set.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/symbol.js":
/*!******************************************************!*\
  !*** ./node_modules/babel-runtime/core-js/symbol.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){e.exports={default:r(/*! core-js/library/fn/symbol */"./node_modules/core-js/library/fn/symbol/index.js"),__esModule:!0}},"./node_modules/babel-runtime/core-js/symbol/iterator.js":
/*!***************************************************************!*\
  !*** ./node_modules/babel-runtime/core-js/symbol/iterator.js ***!
  \***************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){e.exports={default:r(/*! core-js/library/fn/symbol/iterator */"./node_modules/core-js/library/fn/symbol/iterator.js"),__esModule:!0}},"./node_modules/babel-runtime/helpers/classCallCheck.js":
/*!**************************************************************!*\
  !*** ./node_modules/babel-runtime/helpers/classCallCheck.js ***!
  \**************************************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},"./node_modules/babel-runtime/helpers/createClass.js":
/*!***********************************************************!*\
  !*** ./node_modules/babel-runtime/helpers/createClass.js ***!
  \***********************************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";t.__esModule=!0;var n,i=r(/*! ../core-js/object/define-property */"./node_modules/babel-runtime/core-js/object/define-property.js"),o=(n=i)&&n.__esModule?n:{default:n};t.default=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,o.default)(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}()},"./node_modules/babel-runtime/helpers/inherits.js":
/*!********************************************************!*\
  !*** ./node_modules/babel-runtime/helpers/inherits.js ***!
  \********************************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";t.__esModule=!0;var n=a(r(/*! ../core-js/object/set-prototype-of */"./node_modules/babel-runtime/core-js/object/set-prototype-of.js")),i=a(r(/*! ../core-js/object/create */"./node_modules/babel-runtime/core-js/object/create.js")),o=a(r(/*! ../helpers/typeof */"./node_modules/babel-runtime/helpers/typeof.js"));function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,o.default)(t)));e.prototype=(0,i.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(n.default?(0,n.default)(e,t):e.__proto__=t)}},"./node_modules/babel-runtime/helpers/possibleConstructorReturn.js":
/*!*************************************************************************!*\
  !*** ./node_modules/babel-runtime/helpers/possibleConstructorReturn.js ***!
  \*************************************************************************/
/*! no static exports found */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";t.__esModule=!0;var n,i=r(/*! ../helpers/typeof */"./node_modules/babel-runtime/helpers/typeof.js"),o=(n=i)&&n.__esModule?n:{default:n};t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,o.default)(t))&&"function"!=typeof t?e:t}},"./node_modules/babel-runtime/helpers/typeof.js":
/*!******************************************************!*\
  !*** ./node_modules/babel-runtime/helpers/typeof.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";t.__esModule=!0;var n=a(r(/*! ../core-js/symbol/iterator */"./node_modules/babel-runtime/core-js/symbol/iterator.js")),i=a(r(/*! ../core-js/symbol */"./node_modules/babel-runtime/core-js/symbol.js")),o="function"==typeof i.default&&"symbol"==typeof n.default?function(e){return typeof e}:function(e){return e&&"function"==typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":typeof e};function a(e){return e&&e.__esModule?e:{default:e}}t.default="function"==typeof i.default&&"symbol"===o(n.default)?function(e){return void 0===e?"undefined":o(e)}:function(e){return e&&"function"==typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":void 0===e?"undefined":o(e)}},"./node_modules/core-js/library/fn/array/from.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/library/fn/array/from.js ***!
  \*******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){r(/*! ../../modules/es6.string.iterator */"./node_modules/core-js/library/modules/es6.string.iterator.js"),r(/*! ../../modules/es6.array.from */"./node_modules/core-js/library/modules/es6.array.from.js"),e.exports=r(/*! ../../modules/_core */"./node_modules/core-js/library/modules/_core.js").Array.from},"./node_modules/core-js/library/fn/map.js":
/*!************************************************!*\
  !*** ./node_modules/core-js/library/fn/map.js ***!
  \************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){r(/*! ../modules/es6.object.to-string */"./node_modules/core-js/library/modules/es6.object.to-string.js"),r(/*! ../modules/es6.string.iterator */"./node_modules/core-js/library/modules/es6.string.iterator.js"),r(/*! ../modules/web.dom.iterable */"./node_modules/core-js/library/modules/web.dom.iterable.js"),r(/*! ../modules/es6.map */"./node_modules/core-js/library/modules/es6.map.js"),r(/*! ../modules/es7.map.to-json */"./node_modules/core-js/library/modules/es7.map.to-json.js"),r(/*! ../modules/es7.map.of */"./node_modules/core-js/library/modules/es7.map.of.js"),r(/*! ../modules/es7.map.from */"./node_modules/core-js/library/modules/es7.map.from.js"),e.exports=r(/*! ../modules/_core */"./node_modules/core-js/library/modules/_core.js").Map},"./node_modules/core-js/library/fn/number/epsilon.js":
/*!***********************************************************!*\
  !*** ./node_modules/core-js/library/fn/number/epsilon.js ***!
  \***********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){r(/*! ../../modules/es6.number.epsilon */"./node_modules/core-js/library/modules/es6.number.epsilon.js"),e.exports=Math.pow(2,-52)},"./node_modules/core-js/library/fn/object/assign.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/library/fn/object/assign.js ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){r(/*! ../../modules/es6.object.assign */"./node_modules/core-js/library/modules/es6.object.assign.js"),e.exports=r(/*! ../../modules/_core */"./node_modules/core-js/library/modules/_core.js").Object.assign},"./node_modules/core-js/library/fn/object/create.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/library/fn/object/create.js ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){r(/*! ../../modules/es6.object.create */"./node_modules/core-js/library/modules/es6.object.create.js");var n=r(/*! ../../modules/_core */"./node_modules/core-js/library/modules/_core.js").Object;e.exports=function(e,t){return n.create(e,t)}},"./node_modules/core-js/library/fn/object/define-property.js":
/*!*******************************************************************!*\
  !*** ./node_modules/core-js/library/fn/object/define-property.js ***!
  \*******************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){r(/*! ../../modules/es6.object.define-property */"./node_modules/core-js/library/modules/es6.object.define-property.js");var n=r(/*! ../../modules/_core */"./node_modules/core-js/library/modules/_core.js").Object;e.exports=function(e,t,r){return n.defineProperty(e,t,r)}},"./node_modules/core-js/library/fn/object/keys.js":
/*!********************************************************!*\
  !*** ./node_modules/core-js/library/fn/object/keys.js ***!
  \********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){r(/*! ../../modules/es6.object.keys */"./node_modules/core-js/library/modules/es6.object.keys.js"),e.exports=r(/*! ../../modules/_core */"./node_modules/core-js/library/modules/_core.js").Object.keys},"./node_modules/core-js/library/fn/object/set-prototype-of.js":
/*!********************************************************************!*\
  !*** ./node_modules/core-js/library/fn/object/set-prototype-of.js ***!
  \********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){r(/*! ../../modules/es6.object.set-prototype-of */"./node_modules/core-js/library/modules/es6.object.set-prototype-of.js"),e.exports=r(/*! ../../modules/_core */"./node_modules/core-js/library/modules/_core.js").Object.setPrototypeOf},"./node_modules/core-js/library/fn/set.js":
/*!************************************************!*\
  !*** ./node_modules/core-js/library/fn/set.js ***!
  \************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){r(/*! ../modules/es6.object.to-string */"./node_modules/core-js/library/modules/es6.object.to-string.js"),r(/*! ../modules/es6.string.iterator */"./node_modules/core-js/library/modules/es6.string.iterator.js"),r(/*! ../modules/web.dom.iterable */"./node_modules/core-js/library/modules/web.dom.iterable.js"),r(/*! ../modules/es6.set */"./node_modules/core-js/library/modules/es6.set.js"),r(/*! ../modules/es7.set.to-json */"./node_modules/core-js/library/modules/es7.set.to-json.js"),r(/*! ../modules/es7.set.of */"./node_modules/core-js/library/modules/es7.set.of.js"),r(/*! ../modules/es7.set.from */"./node_modules/core-js/library/modules/es7.set.from.js"),e.exports=r(/*! ../modules/_core */"./node_modules/core-js/library/modules/_core.js").Set},"./node_modules/core-js/library/fn/symbol/index.js":
/*!*********************************************************!*\
  !*** ./node_modules/core-js/library/fn/symbol/index.js ***!
  \*********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){r(/*! ../../modules/es6.symbol */"./node_modules/core-js/library/modules/es6.symbol.js"),r(/*! ../../modules/es6.object.to-string */"./node_modules/core-js/library/modules/es6.object.to-string.js"),r(/*! ../../modules/es7.symbol.async-iterator */"./node_modules/core-js/library/modules/es7.symbol.async-iterator.js"),r(/*! ../../modules/es7.symbol.observable */"./node_modules/core-js/library/modules/es7.symbol.observable.js"),e.exports=r(/*! ../../modules/_core */"./node_modules/core-js/library/modules/_core.js").Symbol},"./node_modules/core-js/library/fn/symbol/iterator.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/library/fn/symbol/iterator.js ***!
  \************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){r(/*! ../../modules/es6.string.iterator */"./node_modules/core-js/library/modules/es6.string.iterator.js"),r(/*! ../../modules/web.dom.iterable */"./node_modules/core-js/library/modules/web.dom.iterable.js"),e.exports=r(/*! ../../modules/_wks-ext */"./node_modules/core-js/library/modules/_wks-ext.js").f("iterator")},"./node_modules/core-js/library/modules/_a-function.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_a-function.js ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},"./node_modules/core-js/library/modules/_add-to-unscopables.js":
/*!*********************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_add-to-unscopables.js ***!
  \*********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(){}},"./node_modules/core-js/library/modules/_an-instance.js":
/*!**************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_an-instance.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e,t,r,n){if(!(e instanceof t)||void 0!==n&&n in e)throw TypeError(r+": incorrect invocation!");return e}},"./node_modules/core-js/library/modules/_an-object.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_an-object.js ***!
  \************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_is-object */"./node_modules/core-js/library/modules/_is-object.js");e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},"./node_modules/core-js/library/modules/_array-from-iterable.js":
/*!**********************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_array-from-iterable.js ***!
  \**********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_for-of */"./node_modules/core-js/library/modules/_for-of.js");e.exports=function(e,t){var r=[];return n(e,!1,r.push,r,t),r}},"./node_modules/core-js/library/modules/_array-includes.js":
/*!*****************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_array-includes.js ***!
  \*****************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_to-iobject */"./node_modules/core-js/library/modules/_to-iobject.js"),i=r(/*! ./_to-length */"./node_modules/core-js/library/modules/_to-length.js"),o=r(/*! ./_to-absolute-index */"./node_modules/core-js/library/modules/_to-absolute-index.js");e.exports=function(e){return function(t,r,a){var s,c=n(t),l=i(c.length),u=o(a,l);if(e&&r!=r){for(;l>u;)if((s=c[u++])!=s)return!0}else for(;l>u;u++)if((e||u in c)&&c[u]===r)return e||u||0;return!e&&-1}}},"./node_modules/core-js/library/modules/_array-methods.js":
/*!****************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_array-methods.js ***!
  \****************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_ctx */"./node_modules/core-js/library/modules/_ctx.js"),i=r(/*! ./_iobject */"./node_modules/core-js/library/modules/_iobject.js"),o=r(/*! ./_to-object */"./node_modules/core-js/library/modules/_to-object.js"),a=r(/*! ./_to-length */"./node_modules/core-js/library/modules/_to-length.js"),s=r(/*! ./_array-species-create */"./node_modules/core-js/library/modules/_array-species-create.js");e.exports=function(e,t){var r=1==e,c=2==e,l=3==e,u=4==e,h=6==e,d=5==e||h,p=t||s;return function(t,s,f){for(var m,g,v=o(t),y=i(v),_=n(s,f,3),b=a(y.length),x=0,w=r?p(t,b):c?p(t,0):void 0;b>x;x++)if((d||x in y)&&(g=_(m=y[x],x,v),e))if(r)w[x]=g;else if(g)switch(e){case 3:return!0;case 5:return m;case 6:return x;case 2:w.push(m)}else if(u)return!1;return h?-1:l||u?u:w}}},"./node_modules/core-js/library/modules/_array-species-constructor.js":
/*!****************************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_array-species-constructor.js ***!
  \****************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_is-object */"./node_modules/core-js/library/modules/_is-object.js"),i=r(/*! ./_is-array */"./node_modules/core-js/library/modules/_is-array.js"),o=r(/*! ./_wks */"./node_modules/core-js/library/modules/_wks.js")("species");e.exports=function(e){var t;return i(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!i(t.prototype)||(t=void 0),n(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},"./node_modules/core-js/library/modules/_array-species-create.js":
/*!***********************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_array-species-create.js ***!
  \***********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_array-species-constructor */"./node_modules/core-js/library/modules/_array-species-constructor.js");e.exports=function(e,t){return new(n(e))(t)}},"./node_modules/core-js/library/modules/_classof.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/library/modules/_classof.js ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_cof */"./node_modules/core-js/library/modules/_cof.js"),i=r(/*! ./_wks */"./node_modules/core-js/library/modules/_wks.js")("toStringTag"),o="Arguments"==n(function(){return arguments}());e.exports=function(e){var t,r,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?r:o?n(t):"Object"==(a=n(t))&&"function"==typeof t.callee?"Arguments":a}},"./node_modules/core-js/library/modules/_cof.js":
/*!******************************************************!*\
  !*** ./node_modules/core-js/library/modules/_cof.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},"./node_modules/core-js/library/modules/_collection-strong.js":
/*!********************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_collection-strong.js ***!
  \********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! ./_object-dp */"./node_modules/core-js/library/modules/_object-dp.js").f,i=r(/*! ./_object-create */"./node_modules/core-js/library/modules/_object-create.js"),o=r(/*! ./_redefine-all */"./node_modules/core-js/library/modules/_redefine-all.js"),a=r(/*! ./_ctx */"./node_modules/core-js/library/modules/_ctx.js"),s=r(/*! ./_an-instance */"./node_modules/core-js/library/modules/_an-instance.js"),c=r(/*! ./_for-of */"./node_modules/core-js/library/modules/_for-of.js"),l=r(/*! ./_iter-define */"./node_modules/core-js/library/modules/_iter-define.js"),u=r(/*! ./_iter-step */"./node_modules/core-js/library/modules/_iter-step.js"),h=r(/*! ./_set-species */"./node_modules/core-js/library/modules/_set-species.js"),d=r(/*! ./_descriptors */"./node_modules/core-js/library/modules/_descriptors.js"),p=r(/*! ./_meta */"./node_modules/core-js/library/modules/_meta.js").fastKey,f=r(/*! ./_validate-collection */"./node_modules/core-js/library/modules/_validate-collection.js"),m=d?"_s":"size",g=function(e,t){var r,n=p(t);if("F"!==n)return e._i[n];for(r=e._f;r;r=r.n)if(r.k==t)return r};e.exports={getConstructor:function(e,t,r,l){var u=e((function(e,n){s(e,u,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[m]=0,null!=n&&c(n,r,e[l],e)}));return o(u.prototype,{clear:function(){for(var e=f(this,t),r=e._i,n=e._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete r[n.i];e._f=e._l=void 0,e[m]=0},delete:function(e){var r=f(this,t),n=g(r,e);if(n){var i=n.n,o=n.p;delete r._i[n.i],n.r=!0,o&&(o.n=i),i&&(i.p=o),r._f==n&&(r._f=i),r._l==n&&(r._l=o),r[m]--}return!!n},forEach:function(e){f(this,t);for(var r,n=a(e,arguments.length>1?arguments[1]:void 0,3);r=r?r.n:this._f;)for(n(r.v,r.k,this);r&&r.r;)r=r.p},has:function(e){return!!g(f(this,t),e)}}),d&&n(u.prototype,"size",{get:function(){return f(this,t)[m]}}),u},def:function(e,t,r){var n,i,o=g(e,t);return o?o.v=r:(e._l=o={i:i=p(t,!0),k:t,v:r,p:n=e._l,n:void 0,r:!1},e._f||(e._f=o),n&&(n.n=o),e[m]++,"F"!==i&&(e._i[i]=o)),e},getEntry:g,setStrong:function(e,t,r){l(e,t,(function(e,r){this._t=f(e,t),this._k=r,this._l=void 0}),(function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?u(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,u(1))}),r?"entries":"values",!r,!0),h(t)}}},"./node_modules/core-js/library/modules/_collection-to-json.js":
/*!*********************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_collection-to-json.js ***!
  \*********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_classof */"./node_modules/core-js/library/modules/_classof.js"),i=r(/*! ./_array-from-iterable */"./node_modules/core-js/library/modules/_array-from-iterable.js");e.exports=function(e){return function(){if(n(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},"./node_modules/core-js/library/modules/_collection.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_collection.js ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! ./_global */"./node_modules/core-js/library/modules/_global.js"),i=r(/*! ./_export */"./node_modules/core-js/library/modules/_export.js"),o=r(/*! ./_meta */"./node_modules/core-js/library/modules/_meta.js"),a=r(/*! ./_fails */"./node_modules/core-js/library/modules/_fails.js"),s=r(/*! ./_hide */"./node_modules/core-js/library/modules/_hide.js"),c=r(/*! ./_redefine-all */"./node_modules/core-js/library/modules/_redefine-all.js"),l=r(/*! ./_for-of */"./node_modules/core-js/library/modules/_for-of.js"),u=r(/*! ./_an-instance */"./node_modules/core-js/library/modules/_an-instance.js"),h=r(/*! ./_is-object */"./node_modules/core-js/library/modules/_is-object.js"),d=r(/*! ./_set-to-string-tag */"./node_modules/core-js/library/modules/_set-to-string-tag.js"),p=r(/*! ./_object-dp */"./node_modules/core-js/library/modules/_object-dp.js").f,f=r(/*! ./_array-methods */"./node_modules/core-js/library/modules/_array-methods.js")(0),m=r(/*! ./_descriptors */"./node_modules/core-js/library/modules/_descriptors.js");e.exports=function(e,t,r,g,v,y){var _=n[e],b=_,x=v?"set":"add",w=b&&b.prototype,M={};return m&&"function"==typeof b&&(y||w.forEach&&!a((function(){(new b).entries().next()})))?(b=t((function(t,r){u(t,b,e,"_c"),t._c=new _,null!=r&&l(r,v,t[x],t)})),f("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),(function(e){var t="add"==e||"set"==e;e in w&&(!y||"clear"!=e)&&s(b.prototype,e,(function(r,n){if(u(this,b,e),!t&&y&&!h(r))return"get"==e&&void 0;var i=this._c[e](0===r?0:r,n);return t?this:i}))})),y||p(b.prototype,"size",{get:function(){return this._c.size}})):(b=g.getConstructor(t,e,v,x),c(b.prototype,r),o.NEED=!0),d(b,e),M[e]=b,i(i.G+i.W+i.F,M),y||g.setStrong(b,e,v),b}},"./node_modules/core-js/library/modules/_core.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/library/modules/_core.js ***!
  \*******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){var r=e.exports={version:"2.6.10"};"number"==typeof __e&&(__e=r)},"./node_modules/core-js/library/modules/_create-property.js":
/*!******************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_create-property.js ***!
  \******************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! ./_object-dp */"./node_modules/core-js/library/modules/_object-dp.js"),i=r(/*! ./_property-desc */"./node_modules/core-js/library/modules/_property-desc.js");e.exports=function(e,t,r){t in e?n.f(e,t,i(0,r)):e[t]=r}},"./node_modules/core-js/library/modules/_ctx.js":
/*!******************************************************!*\
  !*** ./node_modules/core-js/library/modules/_ctx.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_a-function */"./node_modules/core-js/library/modules/_a-function.js");e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,i){return e.call(t,r,n,i)}}return function(){return e.apply(t,arguments)}}},"./node_modules/core-js/library/modules/_defined.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/library/modules/_defined.js ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},"./node_modules/core-js/library/modules/_descriptors.js":
/*!**************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_descriptors.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){e.exports=!r(/*! ./_fails */"./node_modules/core-js/library/modules/_fails.js")((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},"./node_modules/core-js/library/modules/_dom-create.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_dom-create.js ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_is-object */"./node_modules/core-js/library/modules/_is-object.js"),i=r(/*! ./_global */"./node_modules/core-js/library/modules/_global.js").document,o=n(i)&&n(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},"./node_modules/core-js/library/modules/_enum-bug-keys.js":
/*!****************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_enum-bug-keys.js ***!
  \****************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"./node_modules/core-js/library/modules/_enum-keys.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_enum-keys.js ***!
  \************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_object-keys */"./node_modules/core-js/library/modules/_object-keys.js"),i=r(/*! ./_object-gops */"./node_modules/core-js/library/modules/_object-gops.js"),o=r(/*! ./_object-pie */"./node_modules/core-js/library/modules/_object-pie.js");e.exports=function(e){var t=n(e),r=i.f;if(r)for(var a,s=r(e),c=o.f,l=0;s.length>l;)c.call(e,a=s[l++])&&t.push(a);return t}},"./node_modules/core-js/library/modules/_export.js":
/*!*********************************************************!*\
  !*** ./node_modules/core-js/library/modules/_export.js ***!
  \*********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_global */"./node_modules/core-js/library/modules/_global.js"),i=r(/*! ./_core */"./node_modules/core-js/library/modules/_core.js"),o=r(/*! ./_ctx */"./node_modules/core-js/library/modules/_ctx.js"),a=r(/*! ./_hide */"./node_modules/core-js/library/modules/_hide.js"),s=r(/*! ./_has */"./node_modules/core-js/library/modules/_has.js"),c=function(e,t,r){var l,u,h,d=e&c.F,p=e&c.G,f=e&c.S,m=e&c.P,g=e&c.B,v=e&c.W,y=p?i:i[t]||(i[t]={}),_=y.prototype,b=p?n:f?n[t]:(n[t]||{}).prototype;for(l in p&&(r=t),r)(u=!d&&b&&void 0!==b[l])&&s(y,l)||(h=u?b[l]:r[l],y[l]=p&&"function"!=typeof b[l]?r[l]:g&&u?o(h,n):v&&b[l]==h?function(e){var t=function(t,r,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,r)}return new e(t,r,n)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(h):m&&"function"==typeof h?o(Function.call,h):h,m&&((y.virtual||(y.virtual={}))[l]=h,e&c.R&&_&&!_[l]&&a(_,l,h)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},"./node_modules/core-js/library/modules/_fails.js":
/*!********************************************************!*\
  !*** ./node_modules/core-js/library/modules/_fails.js ***!
  \********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},"./node_modules/core-js/library/modules/_for-of.js":
/*!*********************************************************!*\
  !*** ./node_modules/core-js/library/modules/_for-of.js ***!
  \*********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_ctx */"./node_modules/core-js/library/modules/_ctx.js"),i=r(/*! ./_iter-call */"./node_modules/core-js/library/modules/_iter-call.js"),o=r(/*! ./_is-array-iter */"./node_modules/core-js/library/modules/_is-array-iter.js"),a=r(/*! ./_an-object */"./node_modules/core-js/library/modules/_an-object.js"),s=r(/*! ./_to-length */"./node_modules/core-js/library/modules/_to-length.js"),c=r(/*! ./core.get-iterator-method */"./node_modules/core-js/library/modules/core.get-iterator-method.js"),l={},u={};(t=e.exports=function(e,t,r,h,d){var p,f,m,g,v=d?function(){return e}:c(e),y=n(r,h,t?2:1),_=0;if("function"!=typeof v)throw TypeError(e+" is not iterable!");if(o(v)){for(p=s(e.length);p>_;_++)if((g=t?y(a(f=e[_])[0],f[1]):y(e[_]))===l||g===u)return g}else for(m=v.call(e);!(f=m.next()).done;)if((g=i(m,y,f.value,t))===l||g===u)return g}).BREAK=l,t.RETURN=u},"./node_modules/core-js/library/modules/_global.js":
/*!*********************************************************!*\
  !*** ./node_modules/core-js/library/modules/_global.js ***!
  \*********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},"./node_modules/core-js/library/modules/_has.js":
/*!******************************************************!*\
  !*** ./node_modules/core-js/library/modules/_has.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},"./node_modules/core-js/library/modules/_hide.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/library/modules/_hide.js ***!
  \*******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_object-dp */"./node_modules/core-js/library/modules/_object-dp.js"),i=r(/*! ./_property-desc */"./node_modules/core-js/library/modules/_property-desc.js");e.exports=r(/*! ./_descriptors */"./node_modules/core-js/library/modules/_descriptors.js")?function(e,t,r){return n.f(e,t,i(1,r))}:function(e,t,r){return e[t]=r,e}},"./node_modules/core-js/library/modules/_html.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/library/modules/_html.js ***!
  \*******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_global */"./node_modules/core-js/library/modules/_global.js").document;e.exports=n&&n.documentElement},"./node_modules/core-js/library/modules/_ie8-dom-define.js":
/*!*****************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_ie8-dom-define.js ***!
  \*****************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){e.exports=!r(/*! ./_descriptors */"./node_modules/core-js/library/modules/_descriptors.js")&&!r(/*! ./_fails */"./node_modules/core-js/library/modules/_fails.js")((function(){return 7!=Object.defineProperty(r(/*! ./_dom-create */"./node_modules/core-js/library/modules/_dom-create.js")("div"),"a",{get:function(){return 7}}).a}))},"./node_modules/core-js/library/modules/_iobject.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/library/modules/_iobject.js ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_cof */"./node_modules/core-js/library/modules/_cof.js");e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},"./node_modules/core-js/library/modules/_is-array-iter.js":
/*!****************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_is-array-iter.js ***!
  \****************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_iterators */"./node_modules/core-js/library/modules/_iterators.js"),i=r(/*! ./_wks */"./node_modules/core-js/library/modules/_wks.js")("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||o[i]===e)}},"./node_modules/core-js/library/modules/_is-array.js":
/*!***********************************************************!*\
  !*** ./node_modules/core-js/library/modules/_is-array.js ***!
  \***********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_cof */"./node_modules/core-js/library/modules/_cof.js");e.exports=Array.isArray||function(e){return"Array"==n(e)}},"./node_modules/core-js/library/modules/_is-object.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_is-object.js ***!
  \************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},"./node_modules/core-js/library/modules/_iter-call.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_iter-call.js ***!
  \************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_an-object */"./node_modules/core-js/library/modules/_an-object.js");e.exports=function(e,t,r,i){try{return i?t(n(r)[0],r[1]):t(r)}catch(t){var o=e.return;throw void 0!==o&&n(o.call(e)),t}}},"./node_modules/core-js/library/modules/_iter-create.js":
/*!**************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_iter-create.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! ./_object-create */"./node_modules/core-js/library/modules/_object-create.js"),i=r(/*! ./_property-desc */"./node_modules/core-js/library/modules/_property-desc.js"),o=r(/*! ./_set-to-string-tag */"./node_modules/core-js/library/modules/_set-to-string-tag.js"),a={};r(/*! ./_hide */"./node_modules/core-js/library/modules/_hide.js")(a,r(/*! ./_wks */"./node_modules/core-js/library/modules/_wks.js")("iterator"),(function(){return this})),e.exports=function(e,t,r){e.prototype=n(a,{next:i(1,r)}),o(e,t+" Iterator")}},"./node_modules/core-js/library/modules/_iter-define.js":
/*!**************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_iter-define.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! ./_library */"./node_modules/core-js/library/modules/_library.js"),i=r(/*! ./_export */"./node_modules/core-js/library/modules/_export.js"),o=r(/*! ./_redefine */"./node_modules/core-js/library/modules/_redefine.js"),a=r(/*! ./_hide */"./node_modules/core-js/library/modules/_hide.js"),s=r(/*! ./_iterators */"./node_modules/core-js/library/modules/_iterators.js"),c=r(/*! ./_iter-create */"./node_modules/core-js/library/modules/_iter-create.js"),l=r(/*! ./_set-to-string-tag */"./node_modules/core-js/library/modules/_set-to-string-tag.js"),u=r(/*! ./_object-gpo */"./node_modules/core-js/library/modules/_object-gpo.js"),h=r(/*! ./_wks */"./node_modules/core-js/library/modules/_wks.js")("iterator"),d=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,r,f,m,g,v){c(r,t,f);var y,_,b,x=function(e){if(!d&&e in T)return T[e];switch(e){case"keys":case"values":return function(){return new r(this,e)}}return function(){return new r(this,e)}},w=t+" Iterator",M="values"==m,S=!1,T=e.prototype,E=T[h]||T["@@iterator"]||m&&T[m],A=E||x(m),L=m?M?x("entries"):A:void 0,R="Array"==t&&T.entries||E;if(R&&(b=u(R.call(new e)))!==Object.prototype&&b.next&&(l(b,w,!0),n||"function"==typeof b[h]||a(b,h,p)),M&&E&&"values"!==E.name&&(S=!0,A=function(){return E.call(this)}),n&&!v||!d&&!S&&T[h]||a(T,h,A),s[t]=A,s[w]=p,m)if(y={values:M?A:x("values"),keys:g?A:x("keys"),entries:L},v)for(_ in y)_ in T||o(T,_,y[_]);else i(i.P+i.F*(d||S),t,y);return y}},"./node_modules/core-js/library/modules/_iter-detect.js":
/*!**************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_iter-detect.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_wks */"./node_modules/core-js/library/modules/_wks.js")("iterator"),i=!1;try{var o=[7][n]();o.return=function(){i=!0},Array.from(o,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var r=!1;try{var o=[7],a=o[n]();a.next=function(){return{done:r=!0}},o[n]=function(){return a},e(o)}catch(e){}return r}},"./node_modules/core-js/library/modules/_iter-step.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_iter-step.js ***!
  \************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},"./node_modules/core-js/library/modules/_iterators.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_iterators.js ***!
  \************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports={}},"./node_modules/core-js/library/modules/_library.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/library/modules/_library.js ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=!0},"./node_modules/core-js/library/modules/_meta.js":
/*!*******************************************************!*\
  !*** ./node_modules/core-js/library/modules/_meta.js ***!
  \*******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_uid */"./node_modules/core-js/library/modules/_uid.js")("meta"),i=r(/*! ./_is-object */"./node_modules/core-js/library/modules/_is-object.js"),o=r(/*! ./_has */"./node_modules/core-js/library/modules/_has.js"),a=r(/*! ./_object-dp */"./node_modules/core-js/library/modules/_object-dp.js").f,s=0,c=Object.isExtensible||function(){return!0},l=!r(/*! ./_fails */"./node_modules/core-js/library/modules/_fails.js")((function(){return c(Object.preventExtensions({}))})),u=function(e){a(e,n,{value:{i:"O"+ ++s,w:{}}})},h=e.exports={KEY:n,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,n)){if(!c(e))return"F";if(!t)return"E";u(e)}return e[n].i},getWeak:function(e,t){if(!o(e,n)){if(!c(e))return!0;if(!t)return!1;u(e)}return e[n].w},onFreeze:function(e){return l&&h.NEED&&c(e)&&!o(e,n)&&u(e),e}}},"./node_modules/core-js/library/modules/_object-assign.js":
/*!****************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_object-assign.js ***!
  \****************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! ./_descriptors */"./node_modules/core-js/library/modules/_descriptors.js"),i=r(/*! ./_object-keys */"./node_modules/core-js/library/modules/_object-keys.js"),o=r(/*! ./_object-gops */"./node_modules/core-js/library/modules/_object-gops.js"),a=r(/*! ./_object-pie */"./node_modules/core-js/library/modules/_object-pie.js"),s=r(/*! ./_to-object */"./node_modules/core-js/library/modules/_to-object.js"),c=r(/*! ./_iobject */"./node_modules/core-js/library/modules/_iobject.js"),l=Object.assign;e.exports=!l||r(/*! ./_fails */"./node_modules/core-js/library/modules/_fails.js")((function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach((function(e){t[e]=e})),7!=l({},e)[r]||Object.keys(l({},t)).join("")!=n}))?function(e,t){for(var r=s(e),l=arguments.length,u=1,h=o.f,d=a.f;l>u;)for(var p,f=c(arguments[u++]),m=h?i(f).concat(h(f)):i(f),g=m.length,v=0;g>v;)p=m[v++],n&&!d.call(f,p)||(r[p]=f[p]);return r}:l},"./node_modules/core-js/library/modules/_object-create.js":
/*!****************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_object-create.js ***!
  \****************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_an-object */"./node_modules/core-js/library/modules/_an-object.js"),i=r(/*! ./_object-dps */"./node_modules/core-js/library/modules/_object-dps.js"),o=r(/*! ./_enum-bug-keys */"./node_modules/core-js/library/modules/_enum-bug-keys.js"),a=r(/*! ./_shared-key */"./node_modules/core-js/library/modules/_shared-key.js")("IE_PROTO"),s=function(){},c=function(){var e,t=r(/*! ./_dom-create */"./node_modules/core-js/library/modules/_dom-create.js")("iframe"),n=o.length;for(t.style.display="none",r(/*! ./_html */"./node_modules/core-js/library/modules/_html.js").appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),c=e.F;n--;)delete c.prototype[o[n]];return c()};e.exports=Object.create||function(e,t){var r;return null!==e?(s.prototype=n(e),r=new s,s.prototype=null,r[a]=e):r=c(),void 0===t?r:i(r,t)}},"./node_modules/core-js/library/modules/_object-dp.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_object-dp.js ***!
  \************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_an-object */"./node_modules/core-js/library/modules/_an-object.js"),i=r(/*! ./_ie8-dom-define */"./node_modules/core-js/library/modules/_ie8-dom-define.js"),o=r(/*! ./_to-primitive */"./node_modules/core-js/library/modules/_to-primitive.js"),a=Object.defineProperty;t.f=r(/*! ./_descriptors */"./node_modules/core-js/library/modules/_descriptors.js")?Object.defineProperty:function(e,t,r){if(n(e),t=o(t,!0),n(r),i)try{return a(e,t,r)}catch(e){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(e[t]=r.value),e}},"./node_modules/core-js/library/modules/_object-dps.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_object-dps.js ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_object-dp */"./node_modules/core-js/library/modules/_object-dp.js"),i=r(/*! ./_an-object */"./node_modules/core-js/library/modules/_an-object.js"),o=r(/*! ./_object-keys */"./node_modules/core-js/library/modules/_object-keys.js");e.exports=r(/*! ./_descriptors */"./node_modules/core-js/library/modules/_descriptors.js")?Object.defineProperties:function(e,t){i(e);for(var r,a=o(t),s=a.length,c=0;s>c;)n.f(e,r=a[c++],t[r]);return e}},"./node_modules/core-js/library/modules/_object-gopd.js":
/*!**************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_object-gopd.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_object-pie */"./node_modules/core-js/library/modules/_object-pie.js"),i=r(/*! ./_property-desc */"./node_modules/core-js/library/modules/_property-desc.js"),o=r(/*! ./_to-iobject */"./node_modules/core-js/library/modules/_to-iobject.js"),a=r(/*! ./_to-primitive */"./node_modules/core-js/library/modules/_to-primitive.js"),s=r(/*! ./_has */"./node_modules/core-js/library/modules/_has.js"),c=r(/*! ./_ie8-dom-define */"./node_modules/core-js/library/modules/_ie8-dom-define.js"),l=Object.getOwnPropertyDescriptor;t.f=r(/*! ./_descriptors */"./node_modules/core-js/library/modules/_descriptors.js")?l:function(e,t){if(e=o(e),t=a(t,!0),c)try{return l(e,t)}catch(e){}if(s(e,t))return i(!n.f.call(e,t),e[t])}},"./node_modules/core-js/library/modules/_object-gopn-ext.js":
/*!******************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_object-gopn-ext.js ***!
  \******************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_to-iobject */"./node_modules/core-js/library/modules/_to-iobject.js"),i=r(/*! ./_object-gopn */"./node_modules/core-js/library/modules/_object-gopn.js").f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?function(e){try{return i(e)}catch(e){return a.slice()}}(e):i(n(e))}},"./node_modules/core-js/library/modules/_object-gopn.js":
/*!**************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_object-gopn.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_object-keys-internal */"./node_modules/core-js/library/modules/_object-keys-internal.js"),i=r(/*! ./_enum-bug-keys */"./node_modules/core-js/library/modules/_enum-bug-keys.js").concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,i)}},"./node_modules/core-js/library/modules/_object-gops.js":
/*!**************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_object-gops.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){t.f=Object.getOwnPropertySymbols},"./node_modules/core-js/library/modules/_object-gpo.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_object-gpo.js ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_has */"./node_modules/core-js/library/modules/_has.js"),i=r(/*! ./_to-object */"./node_modules/core-js/library/modules/_to-object.js"),o=r(/*! ./_shared-key */"./node_modules/core-js/library/modules/_shared-key.js")("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),n(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},"./node_modules/core-js/library/modules/_object-keys-internal.js":
/*!***********************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_object-keys-internal.js ***!
  \***********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_has */"./node_modules/core-js/library/modules/_has.js"),i=r(/*! ./_to-iobject */"./node_modules/core-js/library/modules/_to-iobject.js"),o=r(/*! ./_array-includes */"./node_modules/core-js/library/modules/_array-includes.js")(!1),a=r(/*! ./_shared-key */"./node_modules/core-js/library/modules/_shared-key.js")("IE_PROTO");e.exports=function(e,t){var r,s=i(e),c=0,l=[];for(r in s)r!=a&&n(s,r)&&l.push(r);for(;t.length>c;)n(s,r=t[c++])&&(~o(l,r)||l.push(r));return l}},"./node_modules/core-js/library/modules/_object-keys.js":
/*!**************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_object-keys.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_object-keys-internal */"./node_modules/core-js/library/modules/_object-keys-internal.js"),i=r(/*! ./_enum-bug-keys */"./node_modules/core-js/library/modules/_enum-bug-keys.js");e.exports=Object.keys||function(e){return n(e,i)}},"./node_modules/core-js/library/modules/_object-pie.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_object-pie.js ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){t.f={}.propertyIsEnumerable},"./node_modules/core-js/library/modules/_object-sap.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_object-sap.js ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_export */"./node_modules/core-js/library/modules/_export.js"),i=r(/*! ./_core */"./node_modules/core-js/library/modules/_core.js"),o=r(/*! ./_fails */"./node_modules/core-js/library/modules/_fails.js");e.exports=function(e,t){var r=(i.Object||{})[e]||Object[e],a={};a[e]=t(r),n(n.S+n.F*o((function(){r(1)})),"Object",a)}},"./node_modules/core-js/library/modules/_property-desc.js":
/*!****************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_property-desc.js ***!
  \****************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},"./node_modules/core-js/library/modules/_redefine-all.js":
/*!***************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_redefine-all.js ***!
  \***************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_hide */"./node_modules/core-js/library/modules/_hide.js");e.exports=function(e,t,r){for(var i in t)r&&e[i]?e[i]=t[i]:n(e,i,t[i]);return e}},"./node_modules/core-js/library/modules/_redefine.js":
/*!***********************************************************!*\
  !*** ./node_modules/core-js/library/modules/_redefine.js ***!
  \***********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){e.exports=r(/*! ./_hide */"./node_modules/core-js/library/modules/_hide.js")},"./node_modules/core-js/library/modules/_set-collection-from.js":
/*!**********************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_set-collection-from.js ***!
  \**********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! ./_export */"./node_modules/core-js/library/modules/_export.js"),i=r(/*! ./_a-function */"./node_modules/core-js/library/modules/_a-function.js"),o=r(/*! ./_ctx */"./node_modules/core-js/library/modules/_ctx.js"),a=r(/*! ./_for-of */"./node_modules/core-js/library/modules/_for-of.js");e.exports=function(e){n(n.S,e,{from:function(e){var t,r,n,s,c=arguments[1];return i(this),(t=void 0!==c)&&i(c),null==e?new this:(r=[],t?(n=0,s=o(c,arguments[2],2),a(e,!1,(function(e){r.push(s(e,n++))}))):a(e,!1,r.push,r),new this(r))}})}},"./node_modules/core-js/library/modules/_set-collection-of.js":
/*!********************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_set-collection-of.js ***!
  \********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! ./_export */"./node_modules/core-js/library/modules/_export.js");e.exports=function(e){n(n.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},"./node_modules/core-js/library/modules/_set-proto.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_set-proto.js ***!
  \************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_is-object */"./node_modules/core-js/library/modules/_is-object.js"),i=r(/*! ./_an-object */"./node_modules/core-js/library/modules/_an-object.js"),o=function(e,t){if(i(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{(n=r(/*! ./_ctx */"./node_modules/core-js/library/modules/_ctx.js")(Function.call,r(/*! ./_object-gopd */"./node_modules/core-js/library/modules/_object-gopd.js").f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,r){return o(e,r),t?e.__proto__=r:n(e,r),e}}({},!1):void 0),check:o}},"./node_modules/core-js/library/modules/_set-species.js":
/*!**************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_set-species.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! ./_global */"./node_modules/core-js/library/modules/_global.js"),i=r(/*! ./_core */"./node_modules/core-js/library/modules/_core.js"),o=r(/*! ./_object-dp */"./node_modules/core-js/library/modules/_object-dp.js"),a=r(/*! ./_descriptors */"./node_modules/core-js/library/modules/_descriptors.js"),s=r(/*! ./_wks */"./node_modules/core-js/library/modules/_wks.js")("species");e.exports=function(e){var t="function"==typeof i[e]?i[e]:n[e];a&&t&&!t[s]&&o.f(t,s,{configurable:!0,get:function(){return this}})}},"./node_modules/core-js/library/modules/_set-to-string-tag.js":
/*!********************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_set-to-string-tag.js ***!
  \********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_object-dp */"./node_modules/core-js/library/modules/_object-dp.js").f,i=r(/*! ./_has */"./node_modules/core-js/library/modules/_has.js"),o=r(/*! ./_wks */"./node_modules/core-js/library/modules/_wks.js")("toStringTag");e.exports=function(e,t,r){e&&!i(e=r?e:e.prototype,o)&&n(e,o,{configurable:!0,value:t})}},"./node_modules/core-js/library/modules/_shared-key.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_shared-key.js ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_shared */"./node_modules/core-js/library/modules/_shared.js")("keys"),i=r(/*! ./_uid */"./node_modules/core-js/library/modules/_uid.js");e.exports=function(e){return n[e]||(n[e]=i(e))}},"./node_modules/core-js/library/modules/_shared.js":
/*!*********************************************************!*\
  !*** ./node_modules/core-js/library/modules/_shared.js ***!
  \*********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_core */"./node_modules/core-js/library/modules/_core.js"),i=r(/*! ./_global */"./node_modules/core-js/library/modules/_global.js"),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:n.version,mode:r(/*! ./_library */"./node_modules/core-js/library/modules/_library.js")?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/library/modules/_string-at.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_string-at.js ***!
  \************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_to-integer */"./node_modules/core-js/library/modules/_to-integer.js"),i=r(/*! ./_defined */"./node_modules/core-js/library/modules/_defined.js");e.exports=function(e){return function(t,r){var o,a,s=String(i(t)),c=n(r),l=s.length;return c<0||c>=l?e?"":void 0:(o=s.charCodeAt(c))<55296||o>56319||c+1===l||(a=s.charCodeAt(c+1))<56320||a>57343?e?s.charAt(c):o:e?s.slice(c,c+2):a-56320+(o-55296<<10)+65536}}},"./node_modules/core-js/library/modules/_to-absolute-index.js":
/*!********************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_to-absolute-index.js ***!
  \********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_to-integer */"./node_modules/core-js/library/modules/_to-integer.js"),i=Math.max,o=Math.min;e.exports=function(e,t){return(e=n(e))<0?i(e+t,0):o(e,t)}},"./node_modules/core-js/library/modules/_to-integer.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_to-integer.js ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},"./node_modules/core-js/library/modules/_to-iobject.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_to-iobject.js ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_iobject */"./node_modules/core-js/library/modules/_iobject.js"),i=r(/*! ./_defined */"./node_modules/core-js/library/modules/_defined.js");e.exports=function(e){return n(i(e))}},"./node_modules/core-js/library/modules/_to-length.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_to-length.js ***!
  \************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_to-integer */"./node_modules/core-js/library/modules/_to-integer.js"),i=Math.min;e.exports=function(e){return e>0?i(n(e),9007199254740991):0}},"./node_modules/core-js/library/modules/_to-object.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_to-object.js ***!
  \************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_defined */"./node_modules/core-js/library/modules/_defined.js");e.exports=function(e){return Object(n(e))}},"./node_modules/core-js/library/modules/_to-primitive.js":
/*!***************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_to-primitive.js ***!
  \***************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_is-object */"./node_modules/core-js/library/modules/_is-object.js");e.exports=function(e,t){if(!n(e))return e;var r,i;if(t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;if("function"==typeof(r=e.valueOf)&&!n(i=r.call(e)))return i;if(!t&&"function"==typeof(r=e.toString)&&!n(i=r.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/library/modules/_uid.js":
/*!******************************************************!*\
  !*** ./node_modules/core-js/library/modules/_uid.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){var r=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+n).toString(36))}},"./node_modules/core-js/library/modules/_validate-collection.js":
/*!**********************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_validate-collection.js ***!
  \**********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_is-object */"./node_modules/core-js/library/modules/_is-object.js");e.exports=function(e,t){if(!n(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},"./node_modules/core-js/library/modules/_wks-define.js":
/*!*************************************************************!*\
  !*** ./node_modules/core-js/library/modules/_wks-define.js ***!
  \*************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_global */"./node_modules/core-js/library/modules/_global.js"),i=r(/*! ./_core */"./node_modules/core-js/library/modules/_core.js"),o=r(/*! ./_library */"./node_modules/core-js/library/modules/_library.js"),a=r(/*! ./_wks-ext */"./node_modules/core-js/library/modules/_wks-ext.js"),s=r(/*! ./_object-dp */"./node_modules/core-js/library/modules/_object-dp.js").f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},"./node_modules/core-js/library/modules/_wks-ext.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/library/modules/_wks-ext.js ***!
  \**********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){t.f=r(/*! ./_wks */"./node_modules/core-js/library/modules/_wks.js")},"./node_modules/core-js/library/modules/_wks.js":
/*!******************************************************!*\
  !*** ./node_modules/core-js/library/modules/_wks.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_shared */"./node_modules/core-js/library/modules/_shared.js")("wks"),i=r(/*! ./_uid */"./node_modules/core-js/library/modules/_uid.js"),o=r(/*! ./_global */"./node_modules/core-js/library/modules/_global.js").Symbol,a="function"==typeof o;(e.exports=function(e){return n[e]||(n[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=n},"./node_modules/core-js/library/modules/core.get-iterator-method.js":
/*!**************************************************************************!*\
  !*** ./node_modules/core-js/library/modules/core.get-iterator-method.js ***!
  \**************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_classof */"./node_modules/core-js/library/modules/_classof.js"),i=r(/*! ./_wks */"./node_modules/core-js/library/modules/_wks.js")("iterator"),o=r(/*! ./_iterators */"./node_modules/core-js/library/modules/_iterators.js");e.exports=r(/*! ./_core */"./node_modules/core-js/library/modules/_core.js").getIteratorMethod=function(e){if(null!=e)return e[i]||e["@@iterator"]||o[n(e)]}},"./node_modules/core-js/library/modules/es6.array.from.js":
/*!****************************************************************!*\
  !*** ./node_modules/core-js/library/modules/es6.array.from.js ***!
  \****************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! ./_ctx */"./node_modules/core-js/library/modules/_ctx.js"),i=r(/*! ./_export */"./node_modules/core-js/library/modules/_export.js"),o=r(/*! ./_to-object */"./node_modules/core-js/library/modules/_to-object.js"),a=r(/*! ./_iter-call */"./node_modules/core-js/library/modules/_iter-call.js"),s=r(/*! ./_is-array-iter */"./node_modules/core-js/library/modules/_is-array-iter.js"),c=r(/*! ./_to-length */"./node_modules/core-js/library/modules/_to-length.js"),l=r(/*! ./_create-property */"./node_modules/core-js/library/modules/_create-property.js"),u=r(/*! ./core.get-iterator-method */"./node_modules/core-js/library/modules/core.get-iterator-method.js");i(i.S+i.F*!r(/*! ./_iter-detect */"./node_modules/core-js/library/modules/_iter-detect.js")((function(e){Array.from(e)})),"Array",{from:function(e){var t,r,i,h,d=o(e),p="function"==typeof this?this:Array,f=arguments.length,m=f>1?arguments[1]:void 0,g=void 0!==m,v=0,y=u(d);if(g&&(m=n(m,f>2?arguments[2]:void 0,2)),null==y||p==Array&&s(y))for(r=new p(t=c(d.length));t>v;v++)l(r,v,g?m(d[v],v):d[v]);else for(h=y.call(d),r=new p;!(i=h.next()).done;v++)l(r,v,g?a(h,m,[i.value,v],!0):i.value);return r.length=v,r}})},"./node_modules/core-js/library/modules/es6.array.iterator.js":
/*!********************************************************************!*\
  !*** ./node_modules/core-js/library/modules/es6.array.iterator.js ***!
  \********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! ./_add-to-unscopables */"./node_modules/core-js/library/modules/_add-to-unscopables.js"),i=r(/*! ./_iter-step */"./node_modules/core-js/library/modules/_iter-step.js"),o=r(/*! ./_iterators */"./node_modules/core-js/library/modules/_iterators.js"),a=r(/*! ./_to-iobject */"./node_modules/core-js/library/modules/_to-iobject.js");e.exports=r(/*! ./_iter-define */"./node_modules/core-js/library/modules/_iter-define.js")(Array,"Array",(function(e,t){this._t=a(e),this._i=0,this._k=t}),(function(){var e=this._t,t=this._k,r=this._i++;return!e||r>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?r:"values"==t?e[r]:[r,e[r]])}),"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},"./node_modules/core-js/library/modules/es6.map.js":
/*!*********************************************************!*\
  !*** ./node_modules/core-js/library/modules/es6.map.js ***!
  \*********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! ./_collection-strong */"./node_modules/core-js/library/modules/_collection-strong.js"),i=r(/*! ./_validate-collection */"./node_modules/core-js/library/modules/_validate-collection.js");e.exports=r(/*! ./_collection */"./node_modules/core-js/library/modules/_collection.js")("Map",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(e){var t=n.getEntry(i(this,"Map"),e);return t&&t.v},set:function(e,t){return n.def(i(this,"Map"),0===e?0:e,t)}},n,!0)},"./node_modules/core-js/library/modules/es6.number.epsilon.js":
/*!********************************************************************!*\
  !*** ./node_modules/core-js/library/modules/es6.number.epsilon.js ***!
  \********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_export */"./node_modules/core-js/library/modules/_export.js");n(n.S,"Number",{EPSILON:Math.pow(2,-52)})},"./node_modules/core-js/library/modules/es6.object.assign.js":
/*!*******************************************************************!*\
  !*** ./node_modules/core-js/library/modules/es6.object.assign.js ***!
  \*******************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_export */"./node_modules/core-js/library/modules/_export.js");n(n.S+n.F,"Object",{assign:r(/*! ./_object-assign */"./node_modules/core-js/library/modules/_object-assign.js")})},"./node_modules/core-js/library/modules/es6.object.create.js":
/*!*******************************************************************!*\
  !*** ./node_modules/core-js/library/modules/es6.object.create.js ***!
  \*******************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_export */"./node_modules/core-js/library/modules/_export.js");n(n.S,"Object",{create:r(/*! ./_object-create */"./node_modules/core-js/library/modules/_object-create.js")})},"./node_modules/core-js/library/modules/es6.object.define-property.js":
/*!****************************************************************************!*\
  !*** ./node_modules/core-js/library/modules/es6.object.define-property.js ***!
  \****************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_export */"./node_modules/core-js/library/modules/_export.js");n(n.S+n.F*!r(/*! ./_descriptors */"./node_modules/core-js/library/modules/_descriptors.js"),"Object",{defineProperty:r(/*! ./_object-dp */"./node_modules/core-js/library/modules/_object-dp.js").f})},"./node_modules/core-js/library/modules/es6.object.keys.js":
/*!*****************************************************************!*\
  !*** ./node_modules/core-js/library/modules/es6.object.keys.js ***!
  \*****************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_to-object */"./node_modules/core-js/library/modules/_to-object.js"),i=r(/*! ./_object-keys */"./node_modules/core-js/library/modules/_object-keys.js");r(/*! ./_object-sap */"./node_modules/core-js/library/modules/_object-sap.js")("keys",(function(){return function(e){return i(n(e))}}))},"./node_modules/core-js/library/modules/es6.object.set-prototype-of.js":
/*!*****************************************************************************!*\
  !*** ./node_modules/core-js/library/modules/es6.object.set-prototype-of.js ***!
  \*****************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_export */"./node_modules/core-js/library/modules/_export.js");n(n.S,"Object",{setPrototypeOf:r(/*! ./_set-proto */"./node_modules/core-js/library/modules/_set-proto.js").set})},"./node_modules/core-js/library/modules/es6.object.to-string.js":
/*!**********************************************************************!*\
  !*** ./node_modules/core-js/library/modules/es6.object.to-string.js ***!
  \**********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){},"./node_modules/core-js/library/modules/es6.set.js":
/*!*********************************************************!*\
  !*** ./node_modules/core-js/library/modules/es6.set.js ***!
  \*********************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! ./_collection-strong */"./node_modules/core-js/library/modules/_collection-strong.js"),i=r(/*! ./_validate-collection */"./node_modules/core-js/library/modules/_validate-collection.js");e.exports=r(/*! ./_collection */"./node_modules/core-js/library/modules/_collection.js")("Set",(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{add:function(e){return n.def(i(this,"Set"),e=0===e?0:e,e)}},n)},"./node_modules/core-js/library/modules/es6.string.iterator.js":
/*!*********************************************************************!*\
  !*** ./node_modules/core-js/library/modules/es6.string.iterator.js ***!
  \*********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! ./_string-at */"./node_modules/core-js/library/modules/_string-at.js")(!0);r(/*! ./_iter-define */"./node_modules/core-js/library/modules/_iter-define.js")(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})}))},"./node_modules/core-js/library/modules/es6.symbol.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/library/modules/es6.symbol.js ***!
  \************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){"use strict";var n=r(/*! ./_global */"./node_modules/core-js/library/modules/_global.js"),i=r(/*! ./_has */"./node_modules/core-js/library/modules/_has.js"),o=r(/*! ./_descriptors */"./node_modules/core-js/library/modules/_descriptors.js"),a=r(/*! ./_export */"./node_modules/core-js/library/modules/_export.js"),s=r(/*! ./_redefine */"./node_modules/core-js/library/modules/_redefine.js"),c=r(/*! ./_meta */"./node_modules/core-js/library/modules/_meta.js").KEY,l=r(/*! ./_fails */"./node_modules/core-js/library/modules/_fails.js"),u=r(/*! ./_shared */"./node_modules/core-js/library/modules/_shared.js"),h=r(/*! ./_set-to-string-tag */"./node_modules/core-js/library/modules/_set-to-string-tag.js"),d=r(/*! ./_uid */"./node_modules/core-js/library/modules/_uid.js"),p=r(/*! ./_wks */"./node_modules/core-js/library/modules/_wks.js"),f=r(/*! ./_wks-ext */"./node_modules/core-js/library/modules/_wks-ext.js"),m=r(/*! ./_wks-define */"./node_modules/core-js/library/modules/_wks-define.js"),g=r(/*! ./_enum-keys */"./node_modules/core-js/library/modules/_enum-keys.js"),v=r(/*! ./_is-array */"./node_modules/core-js/library/modules/_is-array.js"),y=r(/*! ./_an-object */"./node_modules/core-js/library/modules/_an-object.js"),_=r(/*! ./_is-object */"./node_modules/core-js/library/modules/_is-object.js"),b=r(/*! ./_to-object */"./node_modules/core-js/library/modules/_to-object.js"),x=r(/*! ./_to-iobject */"./node_modules/core-js/library/modules/_to-iobject.js"),w=r(/*! ./_to-primitive */"./node_modules/core-js/library/modules/_to-primitive.js"),M=r(/*! ./_property-desc */"./node_modules/core-js/library/modules/_property-desc.js"),S=r(/*! ./_object-create */"./node_modules/core-js/library/modules/_object-create.js"),T=r(/*! ./_object-gopn-ext */"./node_modules/core-js/library/modules/_object-gopn-ext.js"),E=r(/*! ./_object-gopd */"./node_modules/core-js/library/modules/_object-gopd.js"),A=r(/*! ./_object-gops */"./node_modules/core-js/library/modules/_object-gops.js"),L=r(/*! ./_object-dp */"./node_modules/core-js/library/modules/_object-dp.js"),R=r(/*! ./_object-keys */"./node_modules/core-js/library/modules/_object-keys.js"),P=E.f,C=L.f,j=T.f,O=n.Symbol,D=n.JSON,I=D&&D.stringify,N=p("_hidden"),U=p("toPrimitive"),z={}.propertyIsEnumerable,F=u("symbol-registry"),B=u("symbols"),G=u("op-symbols"),V=Object.prototype,H="function"==typeof O&&!!A.f,k=n.QObject,W=!k||!k.prototype||!k.prototype.findChild,q=o&&l((function(){return 7!=S(C({},"a",{get:function(){return C(this,"a",{value:7}).a}})).a}))?function(e,t,r){var n=P(V,t);n&&delete V[t],C(e,t,r),n&&e!==V&&C(V,t,n)}:C,X=function(e){var t=B[e]=S(O.prototype);return t._k=e,t},Y=H&&"symbol"==typeof O.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof O},Z=function(e,t,r){return e===V&&Z(G,t,r),y(e),t=w(t,!0),y(r),i(B,t)?(r.enumerable?(i(e,N)&&e[N][t]&&(e[N][t]=!1),r=S(r,{enumerable:M(0,!1)})):(i(e,N)||C(e,N,M(1,{})),e[N][t]=!0),q(e,t,r)):C(e,t,r)},J=function(e,t){y(e);for(var r,n=g(t=x(t)),i=0,o=n.length;o>i;)Z(e,r=n[i++],t[r]);return e},K=function(e){var t=z.call(this,e=w(e,!0));return!(this===V&&i(B,e)&&!i(G,e))&&(!(t||!i(this,e)||!i(B,e)||i(this,N)&&this[N][e])||t)},Q=function(e,t){if(e=x(e),t=w(t,!0),e!==V||!i(B,t)||i(G,t)){var r=P(e,t);return!r||!i(B,t)||i(e,N)&&e[N][t]||(r.enumerable=!0),r}},$=function(e){for(var t,r=j(x(e)),n=[],o=0;r.length>o;)i(B,t=r[o++])||t==N||t==c||n.push(t);return n},ee=function(e){for(var t,r=e===V,n=j(r?G:x(e)),o=[],a=0;n.length>a;)!i(B,t=n[a++])||r&&!i(V,t)||o.push(B[t]);return o};H||(s((O=function(){if(this instanceof O)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(r){this===V&&t.call(G,r),i(this,N)&&i(this[N],e)&&(this[N][e]=!1),q(this,e,M(1,r))};return o&&W&&q(V,e,{configurable:!0,set:t}),X(e)}).prototype,"toString",(function(){return this._k})),E.f=Q,L.f=Z,r(/*! ./_object-gopn */"./node_modules/core-js/library/modules/_object-gopn.js").f=T.f=$,r(/*! ./_object-pie */"./node_modules/core-js/library/modules/_object-pie.js").f=K,A.f=ee,o&&!r(/*! ./_library */"./node_modules/core-js/library/modules/_library.js")&&s(V,"propertyIsEnumerable",K,!0),f.f=function(e){return X(p(e))}),a(a.G+a.W+a.F*!H,{Symbol:O});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),re=0;te.length>re;)p(te[re++]);for(var ne=R(p.store),ie=0;ne.length>ie;)m(ne[ie++]);a(a.S+a.F*!H,"Symbol",{for:function(e){return i(F,e+="")?F[e]:F[e]=O(e)},keyFor:function(e){if(!Y(e))throw TypeError(e+" is not a symbol!");for(var t in F)if(F[t]===e)return t},useSetter:function(){W=!0},useSimple:function(){W=!1}}),a(a.S+a.F*!H,"Object",{create:function(e,t){return void 0===t?S(e):J(S(e),t)},defineProperty:Z,defineProperties:J,getOwnPropertyDescriptor:Q,getOwnPropertyNames:$,getOwnPropertySymbols:ee});var oe=l((function(){A.f(1)}));a(a.S+a.F*oe,"Object",{getOwnPropertySymbols:function(e){return A.f(b(e))}}),D&&a(a.S+a.F*(!H||l((function(){var e=O();return"[null]"!=I([e])||"{}"!=I({a:e})||"{}"!=I(Object(e))}))),"JSON",{stringify:function(e){for(var t,r,n=[e],i=1;arguments.length>i;)n.push(arguments[i++]);if(r=t=n[1],(_(t)||void 0!==e)&&!Y(e))return v(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!Y(t))return t}),n[1]=t,I.apply(D,n)}}),O.prototype[U]||r(/*! ./_hide */"./node_modules/core-js/library/modules/_hide.js")(O.prototype,U,O.prototype.valueOf),h(O,"Symbol"),h(Math,"Math",!0),h(n.JSON,"JSON",!0)},"./node_modules/core-js/library/modules/es7.map.from.js":
/*!**************************************************************!*\
  !*** ./node_modules/core-js/library/modules/es7.map.from.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){r(/*! ./_set-collection-from */"./node_modules/core-js/library/modules/_set-collection-from.js")("Map")},"./node_modules/core-js/library/modules/es7.map.of.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/library/modules/es7.map.of.js ***!
  \************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){r(/*! ./_set-collection-of */"./node_modules/core-js/library/modules/_set-collection-of.js")("Map")},"./node_modules/core-js/library/modules/es7.map.to-json.js":
/*!*****************************************************************!*\
  !*** ./node_modules/core-js/library/modules/es7.map.to-json.js ***!
  \*****************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_export */"./node_modules/core-js/library/modules/_export.js");n(n.P+n.R,"Map",{toJSON:r(/*! ./_collection-to-json */"./node_modules/core-js/library/modules/_collection-to-json.js")("Map")})},"./node_modules/core-js/library/modules/es7.set.from.js":
/*!**************************************************************!*\
  !*** ./node_modules/core-js/library/modules/es7.set.from.js ***!
  \**************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){r(/*! ./_set-collection-from */"./node_modules/core-js/library/modules/_set-collection-from.js")("Set")},"./node_modules/core-js/library/modules/es7.set.of.js":
/*!************************************************************!*\
  !*** ./node_modules/core-js/library/modules/es7.set.of.js ***!
  \************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){r(/*! ./_set-collection-of */"./node_modules/core-js/library/modules/_set-collection-of.js")("Set")},"./node_modules/core-js/library/modules/es7.set.to-json.js":
/*!*****************************************************************!*\
  !*** ./node_modules/core-js/library/modules/es7.set.to-json.js ***!
  \*****************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){var n=r(/*! ./_export */"./node_modules/core-js/library/modules/_export.js");n(n.P+n.R,"Set",{toJSON:r(/*! ./_collection-to-json */"./node_modules/core-js/library/modules/_collection-to-json.js")("Set")})},"./node_modules/core-js/library/modules/es7.symbol.async-iterator.js":
/*!***************************************************************************!*\
  !*** ./node_modules/core-js/library/modules/es7.symbol.async-iterator.js ***!
  \***************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){r(/*! ./_wks-define */"./node_modules/core-js/library/modules/_wks-define.js")("asyncIterator")},"./node_modules/core-js/library/modules/es7.symbol.observable.js":
/*!***********************************************************************!*\
  !*** ./node_modules/core-js/library/modules/es7.symbol.observable.js ***!
  \***********************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){r(/*! ./_wks-define */"./node_modules/core-js/library/modules/_wks-define.js")("observable")},"./node_modules/core-js/library/modules/web.dom.iterable.js":
/*!******************************************************************!*\
  !*** ./node_modules/core-js/library/modules/web.dom.iterable.js ***!
  \******************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){r(/*! ./es6.array.iterator */"./node_modules/core-js/library/modules/es6.array.iterator.js");for(var n=r(/*! ./_global */"./node_modules/core-js/library/modules/_global.js"),i=r(/*! ./_hide */"./node_modules/core-js/library/modules/_hide.js"),o=r(/*! ./_iterators */"./node_modules/core-js/library/modules/_iterators.js"),a=r(/*! ./_wks */"./node_modules/core-js/library/modules/_wks.js")("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),c=0;c<s.length;c++){var l=s[c],u=n[l],h=u&&u.prototype;h&&!h[a]&&i(h,a,l),o[l]=o.Array}},"./src/common/Utils.js":
/*!*****************************!*\
  !*** ./src/common/Utils.js ***!
  \*****************************/
/*! exports provided: Utils */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is referenced from these modules with unsupported syntax: ./src/objects/Factory.js (referenced with cjs require) */function(e,t,r){"use strict";r.r(t),r.d(t,"Utils",(function(){return a}));var n=r(/*! ../libs/three/build/three.module.js */"./src/libs/three/build/three.module.js"),i=Object.prototype.toString,o=function(e){return function(t){return i.call(t)=="[object "+e+"]"}},a={isType:o,isArray:o("Array"),isObject:o("Object"),isString:o("String"),isNumber:o("Number"),isFunction:o("Function"),isRegExp:o("RegExp"),isUndefined:o("Undefined"),isNull:function(e){return null==e},isBoolean:function(e){return"boolean"==typeof e},parseValue:function(e,t){return a.isNull(e)?t:e},parseColor:function(e,t){if(!a.isNull(e)){if(e.isColor)return e;if(a.isArray(e))return new n.Color(e[0],e[1],e[2]);if(a.isNumber(e))return(r=new n.Color).setHex(e),r;if(a.isString(e)){if("#"==e[0])return(r=new n.Color).setHex(parseInt(e.substr(1),16)),r;if(!e.startsWith("rgb(")){var r=new n.Color;return isNaN(e)?r.setColorName(e.toLowerCase()):r.setHex(parseInt(e)),r}var i=e.substring(4).split(",");if(3===i.length){var o=parseInt(i[0].trimBoth(" )")),s=parseInt(i[1].trimBoth(" )")),c=parseInt(i[2].trimBoth(" )"));return new n.Color(o/255,s/255,c/255)}}}return t?a.parseColor(t):t},parseVector2:function(e,t){if(e){if(e.isVector2)return e;if(a.isArray(e)){var r=e[0],i=e.length>1?e[1]:0;return new n.Vector2(r,i)}a.isString(e)&&console.log("parseVector2 not impl")}return t},parseVector3:function(e,t){if(e){if(e.isVector3)return e;if(a.isArray(e))return 1===e.length?new n.Vector3(e[0],0,0):2===e.length?new n.Vector3(e[0],0,e[1]):new n.Vector3(e[0],e[1],e[2]);if(a.isString(e)){for(var r=e.split(/,| /),i=0;i<r.length;i++){var o=r[i].trimBoth("\\[\\]");o.isBlank()?r.splice(i--,1):r[i]=Number(o)}return a.parseVector3(r,t)}}return t},parseVector4:function(e,t){if(e){if(e.isVector4)return e;if(a.isArray(e))return 1===e.length?new n.Vector4(e[0],0,0,1):2===e.length?new n.Vector4(e[0],0,e[1],1):3===e.length?new n.Vector4(e[0],e[1],e[2],1):new n.Vector4(e[0],e[1],e[2],e[3]);if(a.isString(e)){for(var r=e.split(/,| /),i=0;i<r.length;i++){var o=r[i].trimBoth("\\[\\]");o.isBlank()?r.splice(i--,1):r[i]=Number(o)}return a.parseVector4(r,t)}}return t},parseEuler:function(e){if(e.isEuler)return e;if(a.isArray(e)){(e.length<3||e.length>4)&&console.log("parseEuler not impl");var t=n.Math.degToRad(e[0]%360),r=n.Math.degToRad(e[1]%360),i=n.Math.degToRad(e[2]%360);if(3==e.length)return new n.Euler(t,r,i);if(4==e.length)return new n.Euler(t,r,i,e[3])}else{if(e.isQuaternion){var o=new n.Euler;return o.setFromQuaternion(e),o}console.log("parseEuler not impl")}},parseQuaternion:function(e,t){if(!e)return t;if(e.isQuaternion)return e;var r=this.parseEuler(e),i=new n.Quaternion;return i.setFromEuler(r),i},parseAngles:function(e,t){if(e){if(e.isEuler)return[n.Math.radToDeg(e._x),n.Math.radToDeg(e._y),n.Math.radToDeg(e._z),e.order];if(e.isQuaternion){var r=new n.Euler;return a.parseAngles(r.setFromQuaternion(e,t))}}else e=[0,0,0];return e},parseSide:function(e){return"front"==e?n.FrontSide:"back"==e?n.BackSide:"double"==e?n.DoubleSide:void 0},getCurrentTime:function(){return("undefined"==typeof performance?Date:performance).now()},getElapsedTime:function(e){return this.getCurrentTime()-e},swapAttribute:function(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}}},"./src/libs/three/build/three.module.js":
/*!**********************************************!*\
  !*** ./src/libs/three/build/three.module.js ***!
  \**********************************************/
/*! exports provided: ACESFilmicToneMapping, AddEquation, AddOperation, AdditiveBlending, AlphaFormat, AlwaysDepth, AlwaysStencilFunc, AmbientLight, AmbientLightProbe, AnimationClip, AnimationLoader, AnimationMixer, AnimationObjectGroup, AnimationUtils, ArcCurve, ArrayCamera, ArrowHelper, Audio, AudioAnalyser, AudioContext, AudioListener, AudioLoader, AxesHelper, AxisHelper, BackSide, BasicDepthPacking, BasicShadowMap, BinaryTextureLoader, Bone, BooleanKeyframeTrack, BoundingBoxHelper, Box2, Box3, Box3Helper, BoxBufferGeometry, BoxGeometry, BoxHelper, BufferAttribute, BufferGeometry, BufferGeometryLoader, ByteType, Cache, Camera, CameraHelper, CanvasRenderer, CanvasTexture, CatmullRomCurve3, CineonToneMapping, CircleBufferGeometry, CircleGeometry, ClampToEdgeWrapping, Clock, ClosedSplineCurve3, Color, ColorKeyframeTrack, CompressedTexture, CompressedTextureLoader, ConeBufferGeometry, ConeGeometry, CubeCamera, CubeGeometry, CubeReflectionMapping, CubeRefractionMapping, CubeTexture, CubeTextureLoader, CubeUVReflectionMapping, CubeUVRefractionMapping, CubicBezierCurve, CubicBezierCurve3, CubicInterpolant, CullFaceBack, CullFaceFront, CullFaceFrontBack, CullFaceNone, Curve, CurvePath, CustomBlending, CylinderBufferGeometry, CylinderGeometry, Cylindrical, DataTexture, DataTexture2DArray, DataTexture3D, DataTextureLoader, DecrementStencilOp, DecrementWrapStencilOp, DefaultLoadingManager, DepthFormat, DepthStencilFormat, DepthTexture, DirectionalLight, DirectionalLightHelper, DirectionalLightShadow, DiscreteInterpolant, DodecahedronBufferGeometry, DodecahedronGeometry, DoubleSide, DstAlphaFactor, DstColorFactor, DynamicBufferAttribute, DynamicCopyUsage, DynamicDrawUsage, DynamicReadUsage, EdgesGeometry, EdgesHelper, EllipseCurve, EqualDepth, EqualStencilFunc, EquirectangularReflectionMapping, EquirectangularRefractionMapping, Euler, EventDispatcher, ExtrudeBufferGeometry, ExtrudeGeometry, Face3, Face4, FaceColors, FileLoader, FlatShading, Float32Attribute, Float32BufferAttribute, Float64Attribute, Float64BufferAttribute, FloatType, Fog, FogExp2, Font, FontLoader, FrontFaceDirectionCCW, FrontFaceDirectionCW, FrontSide, Frustum, GammaEncoding, Geometry, GeometryUtils, GreaterDepth, GreaterEqualDepth, GreaterEqualStencilFunc, GreaterStencilFunc, GridHelper, Group, HalfFloatType, HemisphereLight, HemisphereLightHelper, HemisphereLightProbe, IcosahedronBufferGeometry, IcosahedronGeometry, ImageBitmapLoader, ImageLoader, ImageUtils, ImmediateRenderObject, IncrementStencilOp, IncrementWrapStencilOp, InstancedBufferAttribute, InstancedBufferGeometry, InstancedInterleavedBuffer, InstancedMesh, Int16Attribute, Int16BufferAttribute, Int32Attribute, Int32BufferAttribute, Int8Attribute, Int8BufferAttribute, IntType, InterleavedBuffer, InterleavedBufferAttribute, Interpolant, InterpolateDiscrete, InterpolateLinear, InterpolateSmooth, InvertStencilOp, JSONLoader, KeepStencilOp, KeyframeTrack, LOD, LatheBufferGeometry, LatheGeometry, Layers, LensFlare, LessDepth, LessEqualDepth, LessEqualStencilFunc, LessStencilFunc, Light, LightProbe, LightShadow, Line, Line3, LineBasicMaterial, LineCurve, LineCurve3, LineDashedMaterial, LineLoop, LinePieces, LineSegments, LineStrip, LinearEncoding, LinearFilter, LinearInterpolant, LinearMipMapLinearFilter, LinearMipMapNearestFilter, LinearMipmapLinearFilter, LinearMipmapNearestFilter, LinearToneMapping, Loader, LoaderUtils, LoadingManager, LogLuvEncoding, LoopOnce, LoopPingPong, LoopRepeat, LuminanceAlphaFormat, LuminanceFormat, MOUSE, Material, MaterialLoader, Math, MathUtils, Matrix3, Matrix4, MaxEquation, Mesh, MeshBasicMaterial, MeshDepthMaterial, MeshDistanceMaterial, MeshFaceMaterial, MeshLambertMaterial, MeshMatcapMaterial, MeshNormalMaterial, MeshPhongMaterial, MeshPhysicalMaterial, MeshStandardMaterial, MeshToonMaterial, MinEquation, MirroredRepeatWrapping, MixOperation, MultiMaterial, MultiplyBlending, MultiplyOperation, NearestFilter, NearestMipMapLinearFilter, NearestMipMapNearestFilter, NearestMipmapLinearFilter, NearestMipmapNearestFilter, NeverDepth, NeverStencilFunc, NoBlending, NoColors, NoToneMapping, NormalBlending, NotEqualDepth, NotEqualStencilFunc, NumberKeyframeTrack, Object3D, ObjectLoader, ObjectSpaceNormalMap, OctahedronBufferGeometry, OctahedronGeometry, OneFactor, OneMinusDstAlphaFactor, OneMinusDstColorFactor, OneMinusSrcAlphaFactor, OneMinusSrcColorFactor, OrthographicCamera, PCFShadowMap, PCFSoftShadowMap, PMREMGenerator, ParametricBufferGeometry, ParametricGeometry, Particle, ParticleBasicMaterial, ParticleSystem, ParticleSystemMaterial, Path, PerspectiveCamera, Plane, PlaneBufferGeometry, PlaneGeometry, PlaneHelper, PointCloud, PointCloudMaterial, PointLight, PointLightHelper, Points, PointsMaterial, PolarGridHelper, PolyhedronBufferGeometry, PolyhedronGeometry, PositionalAudio, PropertyBinding, PropertyMixer, QuadraticBezierCurve, QuadraticBezierCurve3, Quaternion, QuaternionKeyframeTrack, QuaternionLinearInterpolant, REVISION, RGBADepthPacking, RGBAFormat, RGBAIntegerFormat, RGBA_ASTC_10x10_Format, RGBA_ASTC_10x5_Format, RGBA_ASTC_10x6_Format, RGBA_ASTC_10x8_Format, RGBA_ASTC_12x10_Format, RGBA_ASTC_12x12_Format, RGBA_ASTC_4x4_Format, RGBA_ASTC_5x4_Format, RGBA_ASTC_5x5_Format, RGBA_ASTC_6x5_Format, RGBA_ASTC_6x6_Format, RGBA_ASTC_8x5_Format, RGBA_ASTC_8x6_Format, RGBA_ASTC_8x8_Format, RGBA_PVRTC_2BPPV1_Format, RGBA_PVRTC_4BPPV1_Format, RGBA_S3TC_DXT1_Format, RGBA_S3TC_DXT3_Format, RGBA_S3TC_DXT5_Format, RGBDEncoding, RGBEEncoding, RGBEFormat, RGBFormat, RGBIntegerFormat, RGBM16Encoding, RGBM7Encoding, RGB_ETC1_Format, RGB_PVRTC_2BPPV1_Format, RGB_PVRTC_4BPPV1_Format, RGB_S3TC_DXT1_Format, RGFormat, RGIntegerFormat, RawShaderMaterial, Ray, Raycaster, RectAreaLight, RedFormat, RedIntegerFormat, ReinhardToneMapping, RepeatWrapping, ReplaceStencilOp, ReverseSubtractEquation, RingBufferGeometry, RingGeometry, Scene, SceneUtils, ShaderChunk, ShaderLib, ShaderMaterial, ShadowMaterial, Shape, ShapeBufferGeometry, ShapeGeometry, ShapePath, ShapeUtils, ShortType, Skeleton, SkeletonHelper, SkinnedMesh, SmoothShading, Sphere, SphereBufferGeometry, SphereGeometry, Spherical, SphericalHarmonics3, SphericalReflectionMapping, Spline, SplineCurve, SplineCurve3, SpotLight, SpotLightHelper, SpotLightShadow, Sprite, SpriteMaterial, SrcAlphaFactor, SrcAlphaSaturateFactor, SrcColorFactor, StaticCopyUsage, StaticDrawUsage, StaticReadUsage, StereoCamera, StreamCopyUsage, StreamDrawUsage, StreamReadUsage, StringKeyframeTrack, SubtractEquation, SubtractiveBlending, TOUCH, TangentSpaceNormalMap, TetrahedronBufferGeometry, TetrahedronGeometry, TextBufferGeometry, TextGeometry, Texture, TextureLoader, TorusBufferGeometry, TorusGeometry, TorusKnotBufferGeometry, TorusKnotGeometry, Triangle, TriangleFanDrawMode, TriangleStripDrawMode, TrianglesDrawMode, TubeBufferGeometry, TubeGeometry, UVMapping, Uint16Attribute, Uint16BufferAttribute, Uint32Attribute, Uint32BufferAttribute, Uint8Attribute, Uint8BufferAttribute, Uint8ClampedAttribute, Uint8ClampedBufferAttribute, Uncharted2ToneMapping, Uniform, UniformsLib, UniformsUtils, UnsignedByteType, UnsignedInt248Type, UnsignedIntType, UnsignedShort4444Type, UnsignedShort5551Type, UnsignedShort565Type, UnsignedShortType, VSMShadowMap, Vector2, Vector3, Vector4, VectorKeyframeTrack, Vertex, VertexColors, VideoTexture, WebGLCubeRenderTarget, WebGLMultisampleRenderTarget, WebGLRenderTarget, WebGLRenderTargetCube, WebGLRenderer, WebGLUtils, WireframeGeometry, WireframeHelper, WrapAroundEnding, XHRLoader, ZeroCurvatureEnding, ZeroFactor, ZeroSlopeEnding, ZeroStencilOp, sRGBEncoding */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is referenced from these modules with unsupported syntax: ./src/common/Utils.js (referenced with cjs require), ./src/external/external.js (referenced with cjs require), ./src/libs/three.path.module.js (referenced with cjs require), ./src/main.js (referenced with cjs require), ./src/objects/Factory.js (referenced with cjs require), ./src/objects/GPUPicker.js (referenced with cjs require), ./src/objects/HTMLMixer.js (referenced with cjs require), ./src/objects/InstancedMesh.js (referenced with cjs require), ./src/objects/Renderer/Renderer.js (referenced with cjs require), ./src/objects/Renderer/RendererDebugger.js (referenced with cjs require), ./src/objects/image/BaseImage.js (referenced with cjs require), ./src/objects/image/MeshImage2D.js (referenced with cjs require), ./src/objects/image/SpriteImage2D.js (referenced with cjs require), ./src/objects/line/BasePath.js (referenced with cjs require), ./src/objects/line/BasePoints.js (referenced with cjs require), ./src/objects/line/PixelLine.js (referenced with cjs require), ./src/objects/line/PolygonPipeLine.js (referenced with cjs require), ./src/objects/line/PolygonRouteLine.js (referenced with cjs require), ./src/objects/text/BaseText.js (referenced with cjs require), ./src/objects/text/CanvasText.js (referenced with cjs require), ./src/objects/text/MeshText2D.js (referenced with cjs require), ./src/objects/text/SpriteText2D.js (referenced with cjs require), ./src/pass/ShaderPass.js (referenced with cjs require) */function(e,t,r){"use strict";r.r(t),r.d(t,"ACESFilmicToneMapping",(function(){return ce})),r.d(t,"AddEquation",(function(){return P})),r.d(t,"AddOperation",(function(){return re})),r.d(t,"AdditiveBlending",(function(){return E})),r.d(t,"AlphaFormat",(function(){return Ve})),r.d(t,"AlwaysDepth",(function(){return X})),r.d(t,"AlwaysStencilFunc",(function(){return ur})),r.d(t,"AmbientLight",(function(){return rh})),r.d(t,"AmbientLightProbe",(function(){return Th})),r.d(t,"AnimationClip",(function(){return lu})),r.d(t,"AnimationLoader",(function(){return vu})),r.d(t,"AnimationMixer",(function(){return td})),r.d(t,"AnimationObjectGroup",(function(){return $h})),r.d(t,"AnimationUtils",(function(){return Jl})),r.d(t,"ArcCurve",(function(){return Tu})),r.d(t,"ArrayCamera",(function(){return bs})),r.d(t,"ArrowHelper",(function(){return Hd})),r.d(t,"Audio",(function(){return Ih})),r.d(t,"AudioAnalyser",(function(){return Gh})),r.d(t,"AudioContext",(function(){return bh})),r.d(t,"AudioListener",(function(){return Dh})),r.d(t,"AudioLoader",(function(){return xh})),r.d(t,"AxesHelper",(function(){return kd})),r.d(t,"AxisHelper",(function(){return $p})),r.d(t,"BackSide",(function(){return v})),r.d(t,"BasicDepthPacking",(function(){return Wt})),r.d(t,"BasicShadowMap",(function(){return d})),r.d(t,"BinaryTextureLoader",(function(){return of})),r.d(t,"Bone",(function(){return Qs})),r.d(t,"BooleanKeyframeTrack",(function(){return ru})),r.d(t,"BoundingBoxHelper",(function(){return ef})),r.d(t,"Box2",(function(){return ud})),r.d(t,"Box3",(function(){return Sn})),r.d(t,"Box3Helper",(function(){return zd})),r.d(t,"BoxBufferGeometry",(function(){return to})),r.d(t,"BoxGeometry",(function(){return eo})),r.d(t,"BoxHelper",(function(){return Ud})),r.d(t,"BufferAttribute",(function(){return li})),r.d(t,"BufferGeometry",(function(){return Li})),r.d(t,"BufferGeometryLoader",(function(){return ch})),r.d(t,"ByteType",(function(){return Ce})),r.d(t,"Cache",(function(){return hu})),r.d(t,"Camera",(function(){return co})),r.d(t,"CameraHelper",(function(){return Dd})),r.d(t,"CanvasRenderer",(function(){return cf})),r.d(t,"CanvasTexture",(function(){return Sc})),r.d(t,"CatmullRomCurve3",(function(){return Cu})),r.d(t,"CineonToneMapping",(function(){return se})),r.d(t,"CircleBufferGeometry",(function(){return Ul})),r.d(t,"CircleGeometry",(function(){return Nl})),r.d(t,"ClampToEdgeWrapping",(function(){return ye})),r.d(t,"Clock",(function(){return Rh})),r.d(t,"ClosedSplineCurve3",(function(){return Jp})),r.d(t,"Color",(function(){return ei})),r.d(t,"ColorKeyframeTrack",(function(){return nu})),r.d(t,"CompressedTexture",(function(){return Mc})),r.d(t,"CompressedTextureLoader",(function(){return yu})),r.d(t,"ConeBufferGeometry",(function(){return Il})),r.d(t,"ConeGeometry",(function(){return Dl})),r.d(t,"CubeCamera",(function(){return po})),r.d(t,"CubeGeometry",(function(){return eo})),r.d(t,"CubeReflectionMapping",(function(){return ue})),r.d(t,"CubeRefractionMapping",(function(){return he})),r.d(t,"CubeTexture",(function(){return Uo})),r.d(t,"CubeTextureLoader",(function(){return xu})),r.d(t,"CubeUVReflectionMapping",(function(){return me})),r.d(t,"CubeUVRefractionMapping",(function(){return ge})),r.d(t,"CubicBezierCurve",(function(){return Iu})),r.d(t,"CubicBezierCurve3",(function(){return Nu})),r.d(t,"CubicInterpolant",(function(){return Ql})),r.d(t,"CullFaceBack",(function(){return s})),r.d(t,"CullFaceFront",(function(){return c})),r.d(t,"CullFaceFrontBack",(function(){return l})),r.d(t,"CullFaceNone",(function(){return a})),r.d(t,"Curve",(function(){return Mu})),r.d(t,"CurvePath",(function(){return Hu})),r.d(t,"CustomBlending",(function(){return R})),r.d(t,"CylinderBufferGeometry",(function(){return Ol})),r.d(t,"CylinderGeometry",(function(){return jl})),r.d(t,"Cylindrical",(function(){return cd})),r.d(t,"DataTexture",(function(){return mo})),r.d(t,"DataTexture2DArray",(function(){return zo})),r.d(t,"DataTexture3D",(function(){return Fo})),r.d(t,"DataTextureLoader",(function(){return _u})),r.d(t,"DecrementStencilOp",(function(){return $t})),r.d(t,"DecrementWrapStencilOp",(function(){return tr})),r.d(t,"DefaultLoadingManager",(function(){return pu})),r.d(t,"DepthFormat",(function(){return Ye})),r.d(t,"DepthStencilFormat",(function(){return Ze})),r.d(t,"DepthTexture",(function(){return Tc})),r.d(t,"DirectionalLight",(function(){return th})),r.d(t,"DirectionalLightHelper",(function(){return Cd})),r.d(t,"DirectionalLightShadow",(function(){return eh})),r.d(t,"DiscreteInterpolant",(function(){return eu})),r.d(t,"DodecahedronBufferGeometry",(function(){return zc})),r.d(t,"DodecahedronGeometry",(function(){return Uc})),r.d(t,"DoubleSide",(function(){return y})),r.d(t,"DstAlphaFactor",(function(){return G})),r.d(t,"DstColorFactor",(function(){return H})),r.d(t,"DynamicBufferAttribute",(function(){return Bp})),r.d(t,"DynamicCopyUsage",(function(){return yr})),r.d(t,"DynamicDrawUsage",(function(){return dr})),r.d(t,"DynamicReadUsage",(function(){return mr})),r.d(t,"EdgesGeometry",(function(){return Cl})),r.d(t,"EdgesHelper",(function(){return tf})),r.d(t,"EllipseCurve",(function(){return Su})),r.d(t,"EqualDepth",(function(){return J})),r.d(t,"EqualStencilFunc",(function(){return or})),r.d(t,"EquirectangularReflectionMapping",(function(){return de})),r.d(t,"EquirectangularRefractionMapping",(function(){return pe})),r.d(t,"Euler",(function(){return Xr})),r.d(t,"EventDispatcher",(function(){return br})),r.d(t,"ExtrudeBufferGeometry",(function(){return vl})),r.d(t,"ExtrudeGeometry",(function(){return gl})),r.d(t,"Face3",(function(){return ii})),r.d(t,"Face4",(function(){return Lp})),r.d(t,"FaceColors",(function(){return w})),r.d(t,"FileLoader",(function(){return gu})),r.d(t,"FlatShading",(function(){return _})),r.d(t,"Float32Attribute",(function(){return Yp})),r.d(t,"Float32BufferAttribute",(function(){return vi})),r.d(t,"Float64Attribute",(function(){return Zp})),r.d(t,"Float64BufferAttribute",(function(){return yi})),r.d(t,"FloatType",(function(){return Ne})),r.d(t,"Fog",(function(){return Ts})),r.d(t,"FogExp2",(function(){return Ss})),r.d(t,"Font",(function(){return vh})),r.d(t,"FontLoader",(function(){return _h})),r.d(t,"FrontFaceDirectionCCW",(function(){return h})),r.d(t,"FrontFaceDirectionCW",(function(){return u})),r.d(t,"FrontSide",(function(){return g})),r.d(t,"Frustum",(function(){return yo})),r.d(t,"GammaEncoding",(function(){return Ft})),r.d(t,"Geometry",(function(){return $i})),r.d(t,"GeometryUtils",(function(){return sf})),r.d(t,"GreaterDepth",(function(){return Q})),r.d(t,"GreaterEqualDepth",(function(){return K})),r.d(t,"GreaterEqualStencilFunc",(function(){return lr})),r.d(t,"GreaterStencilFunc",(function(){return sr})),r.d(t,"GridHelper",(function(){return Ed})),r.d(t,"Group",(function(){return xs})),r.d(t,"HalfFloatType",(function(){return Ue})),r.d(t,"HemisphereLight",(function(){return Xu})),r.d(t,"HemisphereLightHelper",(function(){return Td})),r.d(t,"HemisphereLightProbe",(function(){return Sh})),r.d(t,"IcosahedronBufferGeometry",(function(){return Nc})),r.d(t,"IcosahedronGeometry",(function(){return Ic})),r.d(t,"ImageBitmapLoader",(function(){return mh})),r.d(t,"ImageLoader",(function(){return bu})),r.d(t,"ImageUtils",(function(){return Ar})),r.d(t,"ImmediateRenderObject",(function(){return fd})),r.d(t,"IncrementStencilOp",(function(){return Qt})),r.d(t,"IncrementWrapStencilOp",(function(){return er})),r.d(t,"InstancedBufferAttribute",(function(){return sh})),r.d(t,"InstancedBufferGeometry",(function(){return ah})),r.d(t,"InstancedInterleavedBuffer",(function(){return nd})),r.d(t,"InstancedMesh",(function(){return nc})),r.d(t,"Int16Attribute",(function(){return kp})),r.d(t,"Int16BufferAttribute",(function(){return pi})),r.d(t,"Int32Attribute",(function(){return qp})),r.d(t,"Int32BufferAttribute",(function(){return mi})),r.d(t,"Int8Attribute",(function(){return Gp})),r.d(t,"Int8BufferAttribute",(function(){return ui})),r.d(t,"IntType",(function(){return De})),r.d(t,"InterleavedBuffer",(function(){return Es})),r.d(t,"InterleavedBufferAttribute",(function(){return Rs})),r.d(t,"Interpolant",(function(){return Kl})),r.d(t,"InterpolateDiscrete",(function(){return Lt})),r.d(t,"InterpolateLinear",(function(){return Rt})),r.d(t,"InterpolateSmooth",(function(){return Pt})),r.d(t,"InvertStencilOp",(function(){return rr})),r.d(t,"JSONLoader",(function(){return lf})),r.d(t,"KeepStencilOp",(function(){return Jt})),r.d(t,"KeyframeTrack",(function(){return tu})),r.d(t,"LOD",(function(){return Xs})),r.d(t,"LatheBufferGeometry",(function(){return Al})),r.d(t,"LatheGeometry",(function(){return El})),r.d(t,"Layers",(function(){return Yr})),r.d(t,"LensFlare",(function(){return hf})),r.d(t,"LessDepth",(function(){return Y})),r.d(t,"LessEqualDepth",(function(){return Z})),r.d(t,"LessEqualStencilFunc",(function(){return ar})),r.d(t,"LessStencilFunc",(function(){return ir})),r.d(t,"Light",(function(){return qu})),r.d(t,"LightProbe",(function(){return Mh})),r.d(t,"LightShadow",(function(){return Yu})),r.d(t,"Line",(function(){return uc})),r.d(t,"Line3",(function(){return pd})),r.d(t,"LineBasicMaterial",(function(){return ic})),r.d(t,"LineCurve",(function(){return Uu})),r.d(t,"LineCurve3",(function(){return zu})),r.d(t,"LineDashedMaterial",(function(){return Yl})),r.d(t,"LineLoop",(function(){return fc})),r.d(t,"LinePieces",(function(){return Pp})),r.d(t,"LineSegments",(function(){return pc})),r.d(t,"LineStrip",(function(){return Rp})),r.d(t,"LinearEncoding",(function(){return Ut})),r.d(t,"LinearFilter",(function(){return Te})),r.d(t,"LinearInterpolant",(function(){return $l})),r.d(t,"LinearMipMapLinearFilter",(function(){return Re})),r.d(t,"LinearMipMapNearestFilter",(function(){return Ae})),r.d(t,"LinearMipmapLinearFilter",(function(){return Le})),r.d(t,"LinearMipmapNearestFilter",(function(){return Ee})),r.d(t,"LinearToneMapping",(function(){return ie})),r.d(t,"Loader",(function(){return fu})),r.d(t,"LoaderUtils",(function(){return oh})),r.d(t,"LoadingManager",(function(){return du})),r.d(t,"LogLuvEncoding",(function(){return Gt})),r.d(t,"LoopOnce",(function(){return Tt})),r.d(t,"LoopPingPong",(function(){return At})),r.d(t,"LoopRepeat",(function(){return Et})),r.d(t,"LuminanceAlphaFormat",(function(){return qe})),r.d(t,"LuminanceFormat",(function(){return We})),r.d(t,"MOUSE",(function(){return i})),r.d(t,"Material",(function(){return ai})),r.d(t,"MaterialLoader",(function(){return ih})),r.d(t,"Math",(function(){return Sr})),r.d(t,"MathUtils",(function(){return Sr})),r.d(t,"Matrix3",(function(){return Er})),r.d(t,"Matrix4",(function(){return kr})),r.d(t,"MaxEquation",(function(){return D})),r.d(t,"Mesh",(function(){return qi})),r.d(t,"MeshBasicMaterial",(function(){return si})),r.d(t,"MeshDepthMaterial",(function(){return us})),r.d(t,"MeshDistanceMaterial",(function(){return hs})),r.d(t,"MeshFaceMaterial",(function(){return Cp})),r.d(t,"MeshLambertMaterial",(function(){return ql})),r.d(t,"MeshMatcapMaterial",(function(){return Xl})),r.d(t,"MeshNormalMaterial",(function(){return Wl})),r.d(t,"MeshPhongMaterial",(function(){return Hl})),r.d(t,"MeshPhysicalMaterial",(function(){return Vl})),r.d(t,"MeshStandardMaterial",(function(){return Gl})),r.d(t,"MeshToonMaterial",(function(){return kl})),r.d(t,"MinEquation",(function(){return O})),r.d(t,"MirroredRepeatWrapping",(function(){return _e})),r.d(t,"MixOperation",(function(){return te})),r.d(t,"MultiMaterial",(function(){return jp})),r.d(t,"MultiplyBlending",(function(){return L})),r.d(t,"MultiplyOperation",(function(){return ee})),r.d(t,"NearestFilter",(function(){return be})),r.d(t,"NearestMipMapLinearFilter",(function(){return Se})),r.d(t,"NearestMipMapNearestFilter",(function(){return we})),r.d(t,"NearestMipmapLinearFilter",(function(){return Me})),r.d(t,"NearestMipmapNearestFilter",(function(){return xe})),r.d(t,"NeverDepth",(function(){return q})),r.d(t,"NeverStencilFunc",(function(){return nr})),r.d(t,"NoBlending",(function(){return S})),r.d(t,"NoColors",(function(){return x})),r.d(t,"NoToneMapping",(function(){return ne})),r.d(t,"NormalBlending",(function(){return T})),r.d(t,"NotEqualDepth",(function(){return $})),r.d(t,"NotEqualStencilFunc",(function(){return cr})),r.d(t,"NumberKeyframeTrack",(function(){return iu})),r.d(t,"Object3D",(function(){return ln})),r.d(t,"ObjectLoader",(function(){return uh})),r.d(t,"ObjectSpaceNormalMap",(function(){return Yt})),r.d(t,"OctahedronBufferGeometry",(function(){return Dc})),r.d(t,"OctahedronGeometry",(function(){return Oc})),r.d(t,"OneFactor",(function(){return N})),r.d(t,"OneMinusDstAlphaFactor",(function(){return V})),r.d(t,"OneMinusDstColorFactor",(function(){return k})),r.d(t,"OneMinusSrcAlphaFactor",(function(){return B})),r.d(t,"OneMinusSrcColorFactor",(function(){return z})),r.d(t,"OrthographicCamera",(function(){return $u})),r.d(t,"PCFShadowMap",(function(){return p})),r.d(t,"PCFSoftShadowMap",(function(){return f})),r.d(t,"PMREMGenerator",(function(){return mp})),r.d(t,"ParametricBufferGeometry",(function(){return Lc})),r.d(t,"ParametricGeometry",(function(){return Ac})),r.d(t,"Particle",(function(){return Dp})),r.d(t,"ParticleBasicMaterial",(function(){return Up})),r.d(t,"ParticleSystem",(function(){return Ip})),r.d(t,"ParticleSystemMaterial",(function(){return zp})),r.d(t,"Path",(function(){return ku})),r.d(t,"PerspectiveCamera",(function(){return lo})),r.d(t,"Plane",(function(){return Fn})),r.d(t,"PlaneBufferGeometry",(function(){return Mo})),r.d(t,"PlaneGeometry",(function(){return wo})),r.d(t,"PlaneHelper",(function(){return Fd})),r.d(t,"PointCloud",(function(){return Op})),r.d(t,"PointCloudMaterial",(function(){return Np})),r.d(t,"PointLight",(function(){return Qu})),r.d(t,"PointLightHelper",(function(){return xd})),r.d(t,"Points",(function(){return bc})),r.d(t,"PointsMaterial",(function(){return mc})),r.d(t,"PolarGridHelper",(function(){return Ad})),r.d(t,"PolyhedronBufferGeometry",(function(){return Pc})),r.d(t,"PolyhedronGeometry",(function(){return Rc})),r.d(t,"PositionalAudio",(function(){return Bh})),r.d(t,"PropertyBinding",(function(){return Qh})),r.d(t,"PropertyMixer",(function(){return Vh})),r.d(t,"QuadraticBezierCurve",(function(){return Fu})),r.d(t,"QuadraticBezierCurve3",(function(){return Bu})),r.d(t,"Quaternion",(function(){return Or})),r.d(t,"QuaternionKeyframeTrack",(function(){return au})),r.d(t,"QuaternionLinearInterpolant",(function(){return ou})),r.d(t,"REVISION",(function(){return n})),r.d(t,"RGBADepthPacking",(function(){return qt})),r.d(t,"RGBAFormat",(function(){return ke})),r.d(t,"RGBAIntegerFormat",(function(){return tt})),r.d(t,"RGBA_ASTC_10x10_Format",(function(){return wt})),r.d(t,"RGBA_ASTC_10x5_Format",(function(){return _t})),r.d(t,"RGBA_ASTC_10x6_Format",(function(){return bt})),r.d(t,"RGBA_ASTC_10x8_Format",(function(){return xt})),r.d(t,"RGBA_ASTC_12x10_Format",(function(){return Mt})),r.d(t,"RGBA_ASTC_12x12_Format",(function(){return St})),r.d(t,"RGBA_ASTC_4x4_Format",(function(){return ht})),r.d(t,"RGBA_ASTC_5x4_Format",(function(){return dt})),r.d(t,"RGBA_ASTC_5x5_Format",(function(){return pt})),r.d(t,"RGBA_ASTC_6x5_Format",(function(){return ft})),r.d(t,"RGBA_ASTC_6x6_Format",(function(){return mt})),r.d(t,"RGBA_ASTC_8x5_Format",(function(){return gt})),r.d(t,"RGBA_ASTC_8x6_Format",(function(){return vt})),r.d(t,"RGBA_ASTC_8x8_Format",(function(){return yt})),r.d(t,"RGBA_PVRTC_2BPPV1_Format",(function(){return lt})),r.d(t,"RGBA_PVRTC_4BPPV1_Format",(function(){return ct})),r.d(t,"RGBA_S3TC_DXT1_Format",(function(){return nt})),r.d(t,"RGBA_S3TC_DXT3_Format",(function(){return it})),r.d(t,"RGBA_S3TC_DXT5_Format",(function(){return ot})),r.d(t,"RGBDEncoding",(function(){return kt})),r.d(t,"RGBEEncoding",(function(){return Bt})),r.d(t,"RGBEFormat",(function(){return Xe})),r.d(t,"RGBFormat",(function(){return He})),r.d(t,"RGBIntegerFormat",(function(){return et})),r.d(t,"RGBM16Encoding",(function(){return Ht})),r.d(t,"RGBM7Encoding",(function(){return Vt})),r.d(t,"RGB_ETC1_Format",(function(){return ut})),r.d(t,"RGB_PVRTC_2BPPV1_Format",(function(){return st})),r.d(t,"RGB_PVRTC_4BPPV1_Format",(function(){return at})),r.d(t,"RGB_S3TC_DXT1_Format",(function(){return rt})),r.d(t,"RGFormat",(function(){return Qe})),r.d(t,"RGIntegerFormat",(function(){return $e})),r.d(t,"RawShaderMaterial",(function(){return Bl})),r.d(t,"Ray",(function(){return In})),r.d(t,"Raycaster",(function(){return id})),r.d(t,"RectAreaLight",(function(){return nh})),r.d(t,"RedFormat",(function(){return Je})),r.d(t,"RedIntegerFormat",(function(){return Ke})),r.d(t,"ReinhardToneMapping",(function(){return oe})),r.d(t,"RepeatWrapping",(function(){return ve})),r.d(t,"ReplaceStencilOp",(function(){return Kt})),r.d(t,"ReverseSubtractEquation",(function(){return j})),r.d(t,"RingBufferGeometry",(function(){return Tl})),r.d(t,"RingGeometry",(function(){return Sl})),r.d(t,"Scene",(function(){return un})),r.d(t,"SceneUtils",(function(){return uf})),r.d(t,"ShaderChunk",(function(){return So})),r.d(t,"ShaderLib",(function(){return To})),r.d(t,"ShaderMaterial",(function(){return so})),r.d(t,"ShadowMaterial",(function(){return Fl})),r.d(t,"Shape",(function(){return Wu})),r.d(t,"ShapeBufferGeometry",(function(){return Rl})),r.d(t,"ShapeGeometry",(function(){return Ll})),r.d(t,"ShapePath",(function(){return gh})),r.d(t,"ShapeUtils",(function(){return pl})),r.d(t,"ShortType",(function(){return je})),r.d(t,"Skeleton",(function(){return Ks})),r.d(t,"SkeletonHelper",(function(){return bd})),r.d(t,"SkinnedMesh",(function(){return Ys})),r.d(t,"SmoothShading",(function(){return b})),r.d(t,"Sphere",(function(){return An})),r.d(t,"SphereBufferGeometry",(function(){return Ml})),r.d(t,"SphereGeometry",(function(){return wl})),r.d(t,"Spherical",(function(){return sd})),r.d(t,"SphericalHarmonics3",(function(){return wh})),r.d(t,"SphericalReflectionMapping",(function(){return fe})),r.d(t,"Spline",(function(){return Qp})),r.d(t,"SplineCurve",(function(){return Gu})),r.d(t,"SplineCurve3",(function(){return Kp})),r.d(t,"SpotLight",(function(){return Ju})),r.d(t,"SpotLightHelper",(function(){return gd})),r.d(t,"SpotLightShadow",(function(){return Zu})),r.d(t,"Sprite",(function(){return Hs})),r.d(t,"SpriteMaterial",(function(){return Ps})),r.d(t,"SrcAlphaFactor",(function(){return F})),r.d(t,"SrcAlphaSaturateFactor",(function(){return W})),r.d(t,"SrcColorFactor",(function(){return U})),r.d(t,"StaticCopyUsage",(function(){return vr})),r.d(t,"StaticDrawUsage",(function(){return hr})),r.d(t,"StaticReadUsage",(function(){return fr})),r.d(t,"StereoCamera",(function(){return Lh})),r.d(t,"StreamCopyUsage",(function(){return _r})),r.d(t,"StreamDrawUsage",(function(){return pr})),r.d(t,"StreamReadUsage",(function(){return gr})),r.d(t,"StringKeyframeTrack",(function(){return su})),r.d(t,"SubtractEquation",(function(){return C})),r.d(t,"SubtractiveBlending",(function(){return A})),r.d(t,"TOUCH",(function(){return o})),r.d(t,"TangentSpaceNormalMap",(function(){return Xt})),r.d(t,"TetrahedronBufferGeometry",(function(){return jc})),r.d(t,"TetrahedronGeometry",(function(){return Cc})),r.d(t,"TextBufferGeometry",(function(){return xl})),r.d(t,"TextGeometry",(function(){return bl})),r.d(t,"Texture",(function(){return Rr})),r.d(t,"TextureLoader",(function(){return wu})),r.d(t,"TorusBufferGeometry",(function(){return kc})),r.d(t,"TorusGeometry",(function(){return Hc})),r.d(t,"TorusKnotBufferGeometry",(function(){return Vc})),r.d(t,"TorusKnotGeometry",(function(){return Gc})),r.d(t,"Triangle",(function(){return Jn})),r.d(t,"TriangleFanDrawMode",(function(){return Nt})),r.d(t,"TriangleStripDrawMode",(function(){return It})),r.d(t,"TrianglesDrawMode",(function(){return Dt})),r.d(t,"TubeBufferGeometry",(function(){return Bc})),r.d(t,"TubeGeometry",(function(){return Fc})),r.d(t,"UVMapping",(function(){return le})),r.d(t,"Uint16Attribute",(function(){return Wp})),r.d(t,"Uint16BufferAttribute",(function(){return fi})),r.d(t,"Uint32Attribute",(function(){return Xp})),r.d(t,"Uint32BufferAttribute",(function(){return gi})),r.d(t,"Uint8Attribute",(function(){return Vp})),r.d(t,"Uint8BufferAttribute",(function(){return hi})),r.d(t,"Uint8ClampedAttribute",(function(){return Hp})),r.d(t,"Uint8ClampedBufferAttribute",(function(){return di})),r.d(t,"Uncharted2ToneMapping",(function(){return ae})),r.d(t,"Uniform",(function(){return rd})),r.d(t,"UniformsLib",(function(){return _o})),r.d(t,"UniformsUtils",(function(){return io})),r.d(t,"UnsignedByteType",(function(){return Pe})),r.d(t,"UnsignedInt248Type",(function(){return Ge})),r.d(t,"UnsignedIntType",(function(){return Ie})),r.d(t,"UnsignedShort4444Type",(function(){return ze})),r.d(t,"UnsignedShort5551Type",(function(){return Fe})),r.d(t,"UnsignedShort565Type",(function(){return Be})),r.d(t,"UnsignedShortType",(function(){return Oe})),r.d(t,"VSMShadowMap",(function(){return m})),r.d(t,"Vector2",(function(){return Tr})),r.d(t,"Vector3",(function(){return Nr})),r.d(t,"Vector4",(function(){return Pr})),r.d(t,"VectorKeyframeTrack",(function(){return cu})),r.d(t,"Vertex",(function(){return Fp})),r.d(t,"VertexColors",(function(){return M})),r.d(t,"VideoTexture",(function(){return wc})),r.d(t,"WebGLCubeRenderTarget",(function(){return fo})),r.d(t,"WebGLMultisampleRenderTarget",(function(){return jr})),r.d(t,"WebGLRenderTarget",(function(){return Cr})),r.d(t,"WebGLRenderTargetCube",(function(){return af})),r.d(t,"WebGLRenderer",(function(){return Ms})),r.d(t,"WebGLUtils",(function(){return vs})),r.d(t,"WireframeGeometry",(function(){return Ec})),r.d(t,"WireframeHelper",(function(){return rf})),r.d(t,"WrapAroundEnding",(function(){return Ot})),r.d(t,"XHRLoader",(function(){return nf})),r.d(t,"ZeroCurvatureEnding",(function(){return Ct})),r.d(t,"ZeroFactor",(function(){return I})),r.d(t,"ZeroSlopeEnding",(function(){return jt})),r.d(t,"ZeroStencilOp",(function(){return Zt})),r.d(t,"sRGBEncoding",(function(){return zt})),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),"name"in Function.prototype==!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),r=1;r<arguments.length;r++){var n=arguments[r];if(null!=n)for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t});var n="113dev",i={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},o={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},a=0,s=1,c=2,l=3,u=0,h=1,d=0,p=1,f=2,m=3,g=0,v=1,y=2,_=1,b=2,x=0,w=1,M=2,S=0,T=1,E=2,A=3,L=4,R=5,P=100,C=101,j=102,O=103,D=104,I=200,N=201,U=202,z=203,F=204,B=205,G=206,V=207,H=208,k=209,W=210,q=0,X=1,Y=2,Z=3,J=4,K=5,Q=6,$=7,ee=0,te=1,re=2,ne=0,ie=1,oe=2,ae=3,se=4,ce=5,le=300,ue=301,he=302,de=303,pe=304,fe=305,me=306,ge=307,ve=1e3,ye=1001,_e=1002,be=1003,xe=1004,we=1004,Me=1005,Se=1005,Te=1006,Ee=1007,Ae=1007,Le=1008,Re=1008,Pe=1009,Ce=1010,je=1011,Oe=1012,De=1013,Ie=1014,Ne=1015,Ue=1016,ze=1017,Fe=1018,Be=1019,Ge=1020,Ve=1021,He=1022,ke=1023,We=1024,qe=1025,Xe=ke,Ye=1026,Ze=1027,Je=1028,Ke=1029,Qe=1030,$e=1031,et=1032,tt=1033,rt=33776,nt=33777,it=33778,ot=33779,at=35840,st=35841,ct=35842,lt=35843,ut=36196,ht=37808,dt=37809,pt=37810,ft=37811,mt=37812,gt=37813,vt=37814,yt=37815,_t=37816,bt=37817,xt=37818,wt=37819,Mt=37820,St=37821,Tt=2200,Et=2201,At=2202,Lt=2300,Rt=2301,Pt=2302,Ct=2400,jt=2401,Ot=2402,Dt=0,It=1,Nt=2,Ut=3e3,zt=3001,Ft=3007,Bt=3002,Gt=3003,Vt=3004,Ht=3005,kt=3006,Wt=3200,qt=3201,Xt=0,Yt=1,Zt=0,Jt=7680,Kt=7681,Qt=7682,$t=7683,er=34055,tr=34056,rr=5386,nr=512,ir=513,or=514,ar=515,sr=516,cr=517,lr=518,ur=519,hr=35044,dr=35048,pr=35040,fr=35045,mr=35049,gr=35041,vr=35046,yr=35050,_r=35042;function br(){}Object.assign(br.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var r=this._listeners;void 0===r[e]&&(r[e]=[]),-1===r[e].indexOf(t)&&r[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var r=this._listeners;return void 0!==r[e]&&-1!==r[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var r=this._listeners[e];if(void 0!==r){var n=r.indexOf(t);-1!==n&&r.splice(n,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var r=t.slice(0),n=0,i=r.length;n<i;n++)r[n].call(this,e)}}}});for(var xr=[],wr=0;wr<256;wr++)xr[wr]=(wr<16?"0":"")+wr.toString(16);var Mr,Sr={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,r=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return(xr[255&e]+xr[e>>8&255]+xr[e>>16&255]+xr[e>>24&255]+"-"+xr[255&t]+xr[t>>8&255]+"-"+xr[t>>16&15|64]+xr[t>>24&255]+"-"+xr[63&r|128]+xr[r>>8&255]+"-"+xr[r>>16&255]+xr[r>>24&255]+xr[255&n]+xr[n>>8&255]+xr[n>>16&255]+xr[n>>24&255]).toUpperCase()},clamp:function(e,t,r){return Math.max(t,Math.min(r,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,r,n,i){return n+(e-t)*(i-n)/(r-t)},lerp:function(e,t,r){return(1-r)*e+r*t},smoothstep:function(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t))*e*(3-2*e)},smootherstep:function(e,t,r){return e<=t?0:e>=r?1:(e=(e-t)/(r-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*Sr.DEG2RAD},radToDeg:function(e){return e*Sr.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,r,n,i){var o=Math.cos,a=Math.sin,s=o(r/2),c=a(r/2),l=o((t+n)/2),u=a((t+n)/2),h=o((t-n)/2),d=a((t-n)/2),p=o((n-t)/2),f=a((n-t)/2);"XYX"===i?e.set(s*u,c*h,c*d,s*l):"YZY"===i?e.set(c*d,s*u,c*h,s*l):"ZXZ"===i?e.set(c*h,c*d,s*u,s*l):"XZX"===i?e.set(s*u,c*f,c*p,s*l):"YXY"===i?e.set(c*p,s*u,c*f,s*l):"ZYZ"===i?e.set(c*f,c*p,s*u,s*l):console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order.")}};function Tr(e,t){this.x=e||0,this.y=t||0}function Er(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.defineProperties(Tr.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(Tr.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,r=this.y,n=e.elements;return this.x=n[0]*t+n[3]*r+n[6],this.y=n[1]*t+n[4]*r+n[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this},clampLength:function(e,t){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},cross:function(e){return this.x*e.y-this.y*e.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,r=this.y-e.y;return t*t+r*r},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,r){return void 0!==r&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var r=Math.cos(t),n=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*r-o*n+e.x,this.y=i*n+o*r+e.y,this}}),Object.assign(Er.prototype,{isMatrix3:!0,set:function(e,t,r,n,i,o,a,s,c){var l=this.elements;return l[0]=e,l[1]=n,l[2]=a,l[3]=t,l[4]=i,l[5]=s,l[6]=r,l[7]=o,l[8]=c,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var r=e.elements,n=t.elements,i=this.elements,o=r[0],a=r[3],s=r[6],c=r[1],l=r[4],u=r[7],h=r[2],d=r[5],p=r[8],f=n[0],m=n[3],g=n[6],v=n[1],y=n[4],_=n[7],b=n[2],x=n[5],w=n[8];return i[0]=o*f+a*v+s*b,i[3]=o*m+a*y+s*x,i[6]=o*g+a*_+s*w,i[1]=c*f+l*v+u*b,i[4]=c*m+l*y+u*x,i[7]=c*g+l*_+u*w,i[2]=h*f+d*v+p*b,i[5]=h*m+d*y+p*x,i[8]=h*g+d*_+p*w,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],a=e[5],s=e[6],c=e[7],l=e[8];return t*o*l-t*a*c-r*i*l+r*a*s+n*i*c-n*o*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var r=e.elements,n=this.elements,i=r[0],o=r[1],a=r[2],s=r[3],c=r[4],l=r[5],u=r[6],h=r[7],d=r[8],p=d*c-l*h,f=l*u-d*s,m=h*s-c*u,g=i*p+o*f+a*m;if(0===g){var v="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(v);return console.warn(v),this.identity()}var y=1/g;return n[0]=p*y,n[1]=(a*h-d*o)*y,n[2]=(l*o-a*c)*y,n[3]=f*y,n[4]=(d*i-a*u)*y,n[5]=(a*s-l*i)*y,n[6]=m*y,n[7]=(o*u-h*i)*y,n[8]=(c*i-o*s)*y,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,r,n,i,o,a){var s=Math.cos(i),c=Math.sin(i);this.set(r*s,r*c,-r*(s*o+c*a)+o+e,-n*c,n*s,-n*(-c*o+s*a)+a+t,0,0,1)},scale:function(e,t){var r=this.elements;return r[0]*=e,r[3]*=e,r[6]*=e,r[1]*=t,r[4]*=t,r[7]*=t,this},rotate:function(e){var t=Math.cos(e),r=Math.sin(e),n=this.elements,i=n[0],o=n[3],a=n[6],s=n[1],c=n[4],l=n[7];return n[0]=t*i+r*s,n[3]=t*o+r*c,n[6]=t*a+r*l,n[1]=-r*i+t*s,n[4]=-r*o+t*c,n[7]=-r*a+t*l,this},translate:function(e,t){var r=this.elements;return r[0]+=e*r[2],r[3]+=e*r[5],r[6]+=e*r[8],r[1]+=t*r[2],r[4]+=t*r[5],r[7]+=t*r[8],this},equals:function(e){for(var t=this.elements,r=e.elements,n=0;n<9;n++)if(t[n]!==r[n])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var r=0;r<9;r++)this.elements[r]=e[r+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}});var Ar={getDataURL:function(e){var t;if("undefined"==typeof HTMLCanvasElement)return e.src;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Mr&&(Mr=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Mr.width=e.width,Mr.height=e.height;var r=Mr.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=Mr}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}},Lr=0;function Rr(e,t,r,n,i,o,a,s,c,l){Object.defineProperty(this,"id",{value:Lr++}),this.uuid=Sr.generateUUID(),this.name="",this.image=void 0!==e?e:Rr.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:Rr.DEFAULT_MAPPING,this.wrapS=void 0!==r?r:ye,this.wrapT=void 0!==n?n:ye,this.magFilter=void 0!==i?i:Te,this.minFilter=void 0!==o?o:Le,this.anisotropy=void 0!==c?c:1,this.format=void 0!==a?a:ke,this.internalFormat=null,this.type=void 0!==s?s:Pe,this.offset=new Tr(0,0),this.repeat=new Tr(1,1),this.center=new Tr(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Er,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==l?l:Ut,this.version=0,this.onUpdate=null}function Pr(e,t,r,n){this.x=e||0,this.y=t||0,this.z=r||0,this.w=void 0!==n?n:1}function Cr(e,t,r){this.width=e,this.height=t,this.scissor=new Pr(0,0,e,t),this.scissorTest=!1,this.viewport=new Pr(0,0,e,t),r=r||{},this.texture=new Rr(void 0,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.encoding),this.texture.image={},this.texture.image.width=e,this.texture.image.height=t,this.texture.generateMipmaps=void 0!==r.generateMipmaps&&r.generateMipmaps,this.texture.minFilter=void 0!==r.minFilter?r.minFilter:Te,this.depthBuffer=void 0===r.depthBuffer||r.depthBuffer,this.stencilBuffer=void 0===r.stencilBuffer||r.stencilBuffer,this.depthTexture=void 0!==r.depthTexture?r.depthTexture:null}function jr(e,t,r){Cr.call(this,e,t,r),this.samples=4}function Or(e,t,r,n){this._x=e||0,this._y=t||0,this._z=r||0,this._w=void 0!==n?n:1}Rr.DEFAULT_IMAGE=void 0,Rr.DEFAULT_MAPPING=le,Rr.prototype=Object.assign(Object.create(br.prototype),{constructor:Rr,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var r={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var n=this.image;if(void 0===n.uuid&&(n.uuid=Sr.generateUUID()),!t&&void 0===e.images[n.uuid]){var i;if(Array.isArray(n)){i=[];for(var o=0,a=n.length;o<a;o++)i.push(Ar.getDataURL(n[o]))}else i=Ar.getDataURL(n);e.images[n.uuid]={uuid:n.uuid,url:i}}r.image=n.uuid}return t||(e.textures[this.uuid]=r),r},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping!==le)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ve:e.x=e.x-Math.floor(e.x);break;case ye:e.x=e.x<0?0:1;break;case _e:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case ve:e.y=e.y-Math.floor(e.y);break;case ye:e.y=e.y<0?0:1;break;case _e:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}}),Object.defineProperty(Rr.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.defineProperties(Pr.prototype,{width:{get:function(){return this.z},set:function(e){this.z=e}},height:{get:function(){return this.w},set:function(e){this.w=e}}}),Object.assign(Pr.prototype,{isVector4:!0,set:function(e,t,r,n){return this.x=e,this.y=t,this.z=r,this.w=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,r=this.y,n=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*n+o[12]*i,this.y=o[1]*t+o[5]*r+o[9]*n+o[13]*i,this.z=o[2]*t+o[6]*r+o[10]*n+o[14]*i,this.w=o[3]*t+o[7]*r+o[11]*n+o[15]*i,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,r,n,i,o=e.elements,a=o[0],s=o[4],c=o[8],l=o[1],u=o[5],h=o[9],d=o[2],p=o[6],f=o[10];if(Math.abs(s-l)<.01&&Math.abs(c-d)<.01&&Math.abs(h-p)<.01){if(Math.abs(s+l)<.1&&Math.abs(c+d)<.1&&Math.abs(h+p)<.1&&Math.abs(a+u+f-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var m=(a+1)/2,g=(u+1)/2,v=(f+1)/2,y=(s+l)/4,_=(c+d)/4,b=(h+p)/4;return m>g&&m>v?m<.01?(r=0,n=.707106781,i=.707106781):(n=y/(r=Math.sqrt(m)),i=_/r):g>v?g<.01?(r=.707106781,n=0,i=.707106781):(r=y/(n=Math.sqrt(g)),i=b/n):v<.01?(r=.707106781,n=.707106781,i=0):(r=_/(i=Math.sqrt(v)),n=b/i),this.set(r,n,i,t),this}var x=Math.sqrt((p-h)*(p-h)+(c-d)*(c-d)+(l-s)*(l-s));return Math.abs(x)<.001&&(x=1),this.x=(p-h)/x,this.y=(c-d)/x,this.z=(l-s)/x,this.w=Math.acos((a+u+f-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this},clampLength:function(e,t){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,r){return void 0!==r&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),Cr.prototype=Object.assign(Object.create(br.prototype),{constructor:Cr,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.texture.image.width=e,this.texture.image.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),jr.prototype=Object.assign(Object.create(Cr.prototype),{constructor:jr,isWebGLMultisampleRenderTarget:!0,copy:function(e){return Cr.prototype.copy.call(this,e),this.samples=e.samples,this}}),Object.assign(Or,{slerp:function(e,t,r,n){return r.copy(e).slerp(t,n)},slerpFlat:function(e,t,r,n,i,o,a){var s=r[n+0],c=r[n+1],l=r[n+2],u=r[n+3],h=i[o+0],d=i[o+1],p=i[o+2],f=i[o+3];if(u!==f||s!==h||c!==d||l!==p){var m=1-a,g=s*h+c*d+l*p+u*f,v=g>=0?1:-1,y=1-g*g;if(y>Number.EPSILON){var _=Math.sqrt(y),b=Math.atan2(_,g*v);m=Math.sin(m*b)/_,a=Math.sin(a*b)/_}var x=a*v;if(s=s*m+h*x,c=c*m+d*x,l=l*m+p*x,u=u*m+f*x,m===1-a){var w=1/Math.sqrt(s*s+c*c+l*l+u*u);s*=w,c*=w,l*=w,u*=w}}e[t]=s,e[t+1]=c,e[t+2]=l,e[t+3]=u}}),Object.defineProperties(Or.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this._onChangeCallback()}}}),Object.assign(Or.prototype,{isQuaternion:!0,set:function(e,t,r,n){return this._x=e,this._y=t,this._z=r,this._w=n,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var r=e._x,n=e._y,i=e._z,o=e.order,a=Math.cos,s=Math.sin,c=a(r/2),l=a(n/2),u=a(i/2),h=s(r/2),d=s(n/2),p=s(i/2);return"XYZ"===o?(this._x=h*l*u+c*d*p,this._y=c*d*u-h*l*p,this._z=c*l*p+h*d*u,this._w=c*l*u-h*d*p):"YXZ"===o?(this._x=h*l*u+c*d*p,this._y=c*d*u-h*l*p,this._z=c*l*p-h*d*u,this._w=c*l*u+h*d*p):"ZXY"===o?(this._x=h*l*u-c*d*p,this._y=c*d*u+h*l*p,this._z=c*l*p+h*d*u,this._w=c*l*u-h*d*p):"ZYX"===o?(this._x=h*l*u-c*d*p,this._y=c*d*u+h*l*p,this._z=c*l*p-h*d*u,this._w=c*l*u+h*d*p):"YZX"===o?(this._x=h*l*u+c*d*p,this._y=c*d*u+h*l*p,this._z=c*l*p-h*d*u,this._w=c*l*u-h*d*p):"XZY"===o&&(this._x=h*l*u-c*d*p,this._y=c*d*u-h*l*p,this._z=c*l*p+h*d*u,this._w=c*l*u+h*d*p),!1!==t&&this._onChangeCallback(),this},setFromAxisAngle:function(e,t){var r=t/2,n=Math.sin(r);return this._x=e.x*n,this._y=e.y*n,this._z=e.z*n,this._w=Math.cos(r),this._onChangeCallback(),this},setFromRotationMatrix:function(e){var t,r=e.elements,n=r[0],i=r[4],o=r[8],a=r[1],s=r[5],c=r[9],l=r[2],u=r[6],h=r[10],d=n+s+h;return d>0?(t=.5/Math.sqrt(d+1),this._w=.25/t,this._x=(u-c)*t,this._y=(o-l)*t,this._z=(a-i)*t):n>s&&n>h?(t=2*Math.sqrt(1+n-s-h),this._w=(u-c)/t,this._x=.25*t,this._y=(i+a)/t,this._z=(o+l)/t):s>h?(t=2*Math.sqrt(1+s-n-h),this._w=(o-l)/t,this._x=(i+a)/t,this._y=.25*t,this._z=(c+u)/t):(t=2*Math.sqrt(1+h-n-s),this._w=(a-i)/t,this._x=(o+l)/t,this._y=(c+u)/t,this._z=.25*t),this._onChangeCallback(),this},setFromUnitVectors:function(e,t){var r=e.dot(t)+1;return r<1e-6?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()},angleTo:function(e){return 2*Math.acos(Math.abs(Sr.clamp(this.dot(e),-1,1)))},rotateTowards:function(e,t){var r=this.angleTo(e);if(0===r)return this;var n=Math.min(1,t/r);return this.slerp(e,n),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var r=e._x,n=e._y,i=e._z,o=e._w,a=t._x,s=t._y,c=t._z,l=t._w;return this._x=r*l+o*a+n*c-i*s,this._y=n*l+o*s+i*a-r*c,this._z=i*l+o*c+r*s-n*a,this._w=o*l-r*a-n*s-i*c,this._onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var r=this._x,n=this._y,i=this._z,o=this._w,a=o*e._w+r*e._x+n*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=n,this._z=i,this;var s=1-a*a;if(s<=Number.EPSILON){var c=1-t;return this._w=c*o+t*this._w,this._x=c*r+t*this._x,this._y=c*n+t*this._y,this._z=c*i+t*this._z,this.normalize(),this._onChangeCallback(),this}var l=Math.sqrt(s),u=Math.atan2(l,a),h=Math.sin((1-t)*u)/l,d=Math.sin(t*u)/l;return this._w=o*h+this._w*d,this._x=r*h+this._x*d,this._y=n*h+this._y*d,this._z=i*h+this._z*d,this._onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}});var Dr=new Nr,Ir=new Or;function Nr(e,t,r){this.x=e||0,this.y=t||0,this.z=r||0}Object.assign(Nr.prototype,{isVector3:!0,set:function(e,t,r){return this.x=e,this.y=t,this.z=r,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Ir.setFromEuler(e))},applyAxisAngle:function(e,t){return this.applyQuaternion(Ir.setFromAxisAngle(e,t))},applyMatrix3:function(e){var t=this.x,r=this.y,n=this.z,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6]*n,this.y=i[1]*t+i[4]*r+i[7]*n,this.z=i[2]*t+i[5]*r+i[8]*n,this},applyNormalMatrix:function(e){return this.applyMatrix3(e).normalize()},applyMatrix4:function(e){var t=this.x,r=this.y,n=this.z,i=e.elements,o=1/(i[3]*t+i[7]*r+i[11]*n+i[15]);return this.x=(i[0]*t+i[4]*r+i[8]*n+i[12])*o,this.y=(i[1]*t+i[5]*r+i[9]*n+i[13])*o,this.z=(i[2]*t+i[6]*r+i[10]*n+i[14])*o,this},applyQuaternion:function(e){var t=this.x,r=this.y,n=this.z,i=e.x,o=e.y,a=e.z,s=e.w,c=s*t+o*n-a*r,l=s*r+a*t-i*n,u=s*n+i*r-o*t,h=-i*t-o*r-a*n;return this.x=c*s+h*-i+l*-a-u*-o,this.y=l*s+h*-o+u*-i-c*-a,this.z=u*s+h*-a+c*-o-l*-i,this},project:function(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)},unproject:function(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)},transformDirection:function(e){var t=this.x,r=this.y,n=this.z,i=e.elements;return this.x=i[0]*t+i[4]*r+i[8]*n,this.y=i[1]*t+i[5]*r+i[9]*n,this.z=i[2]*t+i[6]*r+i[10]*n,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this},clampLength:function(e,t){var r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,r){return this.subVectors(t,e).multiplyScalar(r).add(e)},cross:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var r=e.x,n=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=n*s-i*a,this.y=i*o-r*s,this.z=r*a-n*o,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(e){return Dr.copy(this).projectOnVector(e),this.sub(Dr)},reflect:function(e){return this.sub(Dr.copy(e).multiplyScalar(2*this.dot(e)))},angleTo:function(e){var t=Math.sqrt(this.lengthSq()*e.lengthSq());0===t&&console.error("THREE.Vector3: angleTo() can't handle zero length vectors.");var r=this.dot(e)/t;return Math.acos(Sr.clamp(r,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,r=this.y-e.y,n=this.z-e.z;return t*t+r*r+n*n},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)},setFromSphericalCoords:function(e,t,r){var n=Math.sin(t)*e;return this.x=n*Math.sin(r),this.y=Math.cos(t)*e,this.z=n*Math.cos(r),this},setFromCylindrical:function(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)},setFromCylindricalCoords:function(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),n=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=n,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},setFromMatrix3Column:function(e,t){return this.fromArray(e.elements,3*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,r){return void 0!==r&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}});var Ur=new Nr,zr=new kr,Fr=new Nr(0,0,0),Br=new Nr(1,1,1),Gr=new Nr,Vr=new Nr,Hr=new Nr;function kr(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(kr.prototype,{isMatrix4:!0,set:function(e,t,r,n,i,o,a,s,c,l,u,h,d,p,f,m){var g=this.elements;return g[0]=e,g[4]=t,g[8]=r,g[12]=n,g[1]=i,g[5]=o,g[9]=a,g[13]=s,g[2]=c,g[6]=l,g[10]=u,g[14]=h,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new kr).fromArray(this.elements)},copy:function(e){var t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this},copyPosition:function(e){var t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this},extractBasis:function(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this},extractRotation:function(e){var t=this.elements,r=e.elements,n=1/Ur.setFromMatrixColumn(e,0).length(),i=1/Ur.setFromMatrixColumn(e,1).length(),o=1/Ur.setFromMatrixColumn(e,2).length();return t[0]=r[0]*n,t[1]=r[1]*n,t[2]=r[2]*n,t[3]=0,t[4]=r[4]*i,t[5]=r[5]*i,t[6]=r[6]*i,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,r=e.x,n=e.y,i=e.z,o=Math.cos(r),a=Math.sin(r),s=Math.cos(n),c=Math.sin(n),l=Math.cos(i),u=Math.sin(i);if("XYZ"===e.order){var h=o*l,d=o*u,p=a*l,f=a*u;t[0]=s*l,t[4]=-s*u,t[8]=c,t[1]=d+p*c,t[5]=h-f*c,t[9]=-a*s,t[2]=f-h*c,t[6]=p+d*c,t[10]=o*s}else if("YXZ"===e.order){var m=s*l,g=s*u,v=c*l,y=c*u;t[0]=m+y*a,t[4]=v*a-g,t[8]=o*c,t[1]=o*u,t[5]=o*l,t[9]=-a,t[2]=g*a-v,t[6]=y+m*a,t[10]=o*s}else if("ZXY"===e.order){m=s*l,g=s*u,v=c*l,y=c*u;t[0]=m-y*a,t[4]=-o*u,t[8]=v+g*a,t[1]=g+v*a,t[5]=o*l,t[9]=y-m*a,t[2]=-o*c,t[6]=a,t[10]=o*s}else if("ZYX"===e.order){h=o*l,d=o*u,p=a*l,f=a*u;t[0]=s*l,t[4]=p*c-d,t[8]=h*c+f,t[1]=s*u,t[5]=f*c+h,t[9]=d*c-p,t[2]=-c,t[6]=a*s,t[10]=o*s}else if("YZX"===e.order){var _=o*s,b=o*c,x=a*s,w=a*c;t[0]=s*l,t[4]=w-_*u,t[8]=x*u+b,t[1]=u,t[5]=o*l,t[9]=-a*l,t[2]=-c*l,t[6]=b*u+x,t[10]=_-w*u}else if("XZY"===e.order){_=o*s,b=o*c,x=a*s,w=a*c;t[0]=s*l,t[4]=-u,t[8]=c*l,t[1]=_*u+w,t[5]=o*l,t[9]=b*u-x,t[2]=x*u-b,t[6]=a*l,t[10]=w*u+_}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){return this.compose(Fr,e,Br)},lookAt:function(e,t,r){var n=this.elements;return Hr.subVectors(e,t),0===Hr.lengthSq()&&(Hr.z=1),Hr.normalize(),Gr.crossVectors(r,Hr),0===Gr.lengthSq()&&(1===Math.abs(r.z)?Hr.x+=1e-4:Hr.z+=1e-4,Hr.normalize(),Gr.crossVectors(r,Hr)),Gr.normalize(),Vr.crossVectors(Hr,Gr),n[0]=Gr.x,n[4]=Vr.x,n[8]=Hr.x,n[1]=Gr.y,n[5]=Vr.y,n[9]=Hr.y,n[2]=Gr.z,n[6]=Vr.z,n[10]=Hr.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var r=e.elements,n=t.elements,i=this.elements,o=r[0],a=r[4],s=r[8],c=r[12],l=r[1],u=r[5],h=r[9],d=r[13],p=r[2],f=r[6],m=r[10],g=r[14],v=r[3],y=r[7],_=r[11],b=r[15],x=n[0],w=n[4],M=n[8],S=n[12],T=n[1],E=n[5],A=n[9],L=n[13],R=n[2],P=n[6],C=n[10],j=n[14],O=n[3],D=n[7],I=n[11],N=n[15];return i[0]=o*x+a*T+s*R+c*O,i[4]=o*w+a*E+s*P+c*D,i[8]=o*M+a*A+s*C+c*I,i[12]=o*S+a*L+s*j+c*N,i[1]=l*x+u*T+h*R+d*O,i[5]=l*w+u*E+h*P+d*D,i[9]=l*M+u*A+h*C+d*I,i[13]=l*S+u*L+h*j+d*N,i[2]=p*x+f*T+m*R+g*O,i[6]=p*w+f*E+m*P+g*D,i[10]=p*M+f*A+m*C+g*I,i[14]=p*S+f*L+m*j+g*N,i[3]=v*x+y*T+_*R+b*O,i[7]=v*w+y*E+_*P+b*D,i[11]=v*M+y*A+_*C+b*I,i[15]=v*S+y*L+_*j+b*N,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},determinant:function(){var e=this.elements,t=e[0],r=e[4],n=e[8],i=e[12],o=e[1],a=e[5],s=e[9],c=e[13],l=e[2],u=e[6],h=e[10],d=e[14];return e[3]*(+i*s*u-n*c*u-i*a*h+r*c*h+n*a*d-r*s*d)+e[7]*(+t*s*d-t*c*h+i*o*h-n*o*d+n*c*l-i*s*l)+e[11]*(+t*c*u-t*a*d-i*o*u+r*o*d+i*a*l-r*c*l)+e[15]*(-n*a*l-t*s*u+t*a*h+n*o*u-r*o*h+r*s*l)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e,t,r){var n=this.elements;return e.isVector3?(n[12]=e.x,n[13]=e.y,n[14]=e.z):(n[12]=e,n[13]=t,n[14]=r),this},getInverse:function(e,t){var r=this.elements,n=e.elements,i=n[0],o=n[1],a=n[2],s=n[3],c=n[4],l=n[5],u=n[6],h=n[7],d=n[8],p=n[9],f=n[10],m=n[11],g=n[12],v=n[13],y=n[14],_=n[15],b=p*y*h-v*f*h+v*u*m-l*y*m-p*u*_+l*f*_,x=g*f*h-d*y*h-g*u*m+c*y*m+d*u*_-c*f*_,w=d*v*h-g*p*h+g*l*m-c*v*m-d*l*_+c*p*_,M=g*p*u-d*v*u-g*l*f+c*v*f+d*l*y-c*p*y,S=i*b+o*x+a*w+s*M;if(0===S){var T="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(T);return console.warn(T),this.identity()}var E=1/S;return r[0]=b*E,r[1]=(v*f*s-p*y*s-v*a*m+o*y*m+p*a*_-o*f*_)*E,r[2]=(l*y*s-v*u*s+v*a*h-o*y*h-l*a*_+o*u*_)*E,r[3]=(p*u*s-l*f*s-p*a*h+o*f*h+l*a*m-o*u*m)*E,r[4]=x*E,r[5]=(d*y*s-g*f*s+g*a*m-i*y*m-d*a*_+i*f*_)*E,r[6]=(g*u*s-c*y*s-g*a*h+i*y*h+c*a*_-i*u*_)*E,r[7]=(c*f*s-d*u*s+d*a*h-i*f*h-c*a*m+i*u*m)*E,r[8]=w*E,r[9]=(g*p*s-d*v*s-g*o*m+i*v*m+d*o*_-i*p*_)*E,r[10]=(c*v*s-g*l*s+g*o*h-i*v*h-c*o*_+i*l*_)*E,r[11]=(d*l*s-c*p*s-d*o*h+i*p*h+c*o*m-i*l*m)*E,r[12]=M*E,r[13]=(d*v*a-g*p*a+g*o*f-i*v*f-d*o*y+i*p*y)*E,r[14]=(g*l*a-c*v*a-g*o*u+i*v*u+c*o*y-i*l*y)*E,r[15]=(c*p*a-d*l*a+d*o*u-i*p*u-c*o*f+i*l*f)*E,this},scale:function(e){var t=this.elements,r=e.x,n=e.y,i=e.z;return t[0]*=r,t[4]*=n,t[8]*=i,t[1]*=r,t[5]*=n,t[9]*=i,t[2]*=r,t[6]*=n,t[10]*=i,t[3]*=r,t[7]*=n,t[11]*=i,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],n=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,n))},makeTranslation:function(e,t,r){return this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var r=Math.cos(t),n=Math.sin(t),i=1-r,o=e.x,a=e.y,s=e.z,c=i*o,l=i*a;return this.set(c*o+r,c*a-n*s,c*s+n*a,0,c*a+n*s,l*a+r,l*s-n*o,0,c*s-n*a,l*s+n*o,i*s*s+r,0,0,0,0,1),this},makeScale:function(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this},makeShear:function(e,t,r){return this.set(1,t,r,0,e,1,r,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,r){var n=this.elements,i=t._x,o=t._y,a=t._z,s=t._w,c=i+i,l=o+o,u=a+a,h=i*c,d=i*l,p=i*u,f=o*l,m=o*u,g=a*u,v=s*c,y=s*l,_=s*u,b=r.x,x=r.y,w=r.z;return n[0]=(1-(f+g))*b,n[1]=(d+_)*b,n[2]=(p-y)*b,n[3]=0,n[4]=(d-_)*x,n[5]=(1-(h+g))*x,n[6]=(m+v)*x,n[7]=0,n[8]=(p+y)*w,n[9]=(m-v)*w,n[10]=(1-(h+f))*w,n[11]=0,n[12]=e.x,n[13]=e.y,n[14]=e.z,n[15]=1,this},decompose:function(e,t,r){var n=this.elements,i=Ur.set(n[0],n[1],n[2]).length(),o=Ur.set(n[4],n[5],n[6]).length(),a=Ur.set(n[8],n[9],n[10]).length();this.determinant()<0&&(i=-i),e.x=n[12],e.y=n[13],e.z=n[14],zr.copy(this);var s=1/i,c=1/o,l=1/a;return zr.elements[0]*=s,zr.elements[1]*=s,zr.elements[2]*=s,zr.elements[4]*=c,zr.elements[5]*=c,zr.elements[6]*=c,zr.elements[8]*=l,zr.elements[9]*=l,zr.elements[10]*=l,t.setFromRotationMatrix(zr),r.x=i,r.y=o,r.z=a,this},makePerspective:function(e,t,r,n,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,s=2*i/(t-e),c=2*i/(r-n),l=(t+e)/(t-e),u=(r+n)/(r-n),h=-(o+i)/(o-i),d=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=l,a[12]=0,a[1]=0,a[5]=c,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(e,t,r,n,i,o){var a=this.elements,s=1/(t-e),c=1/(r-n),l=1/(o-i),u=(t+e)*s,h=(r+n)*c,d=(o+i)*l;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*l,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(e){for(var t=this.elements,r=e.elements,n=0;n<16;n++)if(t[n]!==r[n])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var r=0;r<16;r++)this.elements[r]=e[r+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}});var Wr=new kr,qr=new Or;function Xr(e,t,r,n){this._x=e||0,this._y=t||0,this._z=r||0,this._order=n||Xr.DefaultOrder}function Yr(){this.mask=1}Xr.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],Xr.DefaultOrder="XYZ",Object.defineProperties(Xr.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this._onChangeCallback()}}}),Object.assign(Xr.prototype,{isEuler:!0,set:function(e,t,r,n){return this._x=e,this._y=t,this._z=r,this._order=n||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this},setFromRotationMatrix:function(e,t,r){var n=Sr.clamp,i=e.elements,o=i[0],a=i[4],s=i[8],c=i[1],l=i[5],u=i[9],h=i[2],d=i[6],p=i[10];return"XYZ"===(t=t||this._order)?(this._y=Math.asin(n(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(d,l),this._z=0)):"YXZ"===t?(this._x=Math.asin(-n(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(s,p),this._z=Math.atan2(c,l)):(this._y=Math.atan2(-h,o),this._z=0)):"ZXY"===t?(this._x=Math.asin(n(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(c,o))):"ZYX"===t?(this._y=Math.asin(-n(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(d,p),this._z=Math.atan2(c,o)):(this._x=0,this._z=Math.atan2(-a,l))):"YZX"===t?(this._z=Math.asin(n(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(s,p))):"XZY"===t?(this._z=Math.asin(-n(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(d,l),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-u,p),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==r&&this._onChangeCallback(),this},setFromQuaternion:function(e,t,r){return Wr.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Wr,t,r)},setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(e){return qr.setFromEuler(this),this.setFromQuaternion(qr,e)},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new Nr(this._x,this._y,this._z)},_onChange:function(e){return this._onChangeCallback=e,this},_onChangeCallback:function(){}}),Object.assign(Yr.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},enableAll:function(){this.mask=-1},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},disableAll:function(){this.mask=0},test:function(e){return 0!=(this.mask&e.mask)}});var Zr=0,Jr=new Nr,Kr=new Or,Qr=new kr,$r=new Nr,en=new Nr,tn=new Nr,rn=new Or,nn=new Nr(1,0,0),on=new Nr(0,1,0),an=new Nr(0,0,1),sn={type:"added"},cn={type:"removed"};function ln(){Object.defineProperty(this,"id",{value:Zr++}),this.uuid=Sr.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ln.DefaultUp.clone();var e=new Nr,t=new Xr,r=new Or,n=new Nr(1,1,1);t._onChange((function(){r.setFromEuler(t,!1)})),r._onChange((function(){t.setFromQuaternion(r,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:n},modelViewMatrix:{value:new kr},normalMatrix:{value:new Er}}),this.matrix=new kr,this.matrixWorld=new kr,this.matrixAutoUpdate=ln.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Yr,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function un(){ln.call(this),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}ln.DefaultUp=new Nr(0,1,0),ln.DefaultMatrixAutoUpdate=!0,ln.prototype=Object.assign(Object.create(br.prototype),{constructor:ln,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(e,t){return Kr.setFromAxisAngle(e,t),this.quaternion.multiply(Kr),this},rotateOnWorldAxis:function(e,t){return Kr.setFromAxisAngle(e,t),this.quaternion.premultiply(Kr),this},rotateX:function(e){return this.rotateOnAxis(nn,e)},rotateY:function(e){return this.rotateOnAxis(on,e)},rotateZ:function(e){return this.rotateOnAxis(an,e)},translateOnAxis:function(e,t){return Jr.copy(e).applyQuaternion(this.quaternion),this.position.add(Jr.multiplyScalar(t)),this},translateX:function(e){return this.translateOnAxis(nn,e)},translateY:function(e){return this.translateOnAxis(on,e)},translateZ:function(e){return this.translateOnAxis(an,e)},localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(e){return e.applyMatrix4(Qr.getInverse(this.matrixWorld))},lookAt:function(e,t,r){e.isVector3?$r.copy(e):$r.set(e,t,r);var n=this.parent;this.updateWorldMatrix(!0,!1),en.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Qr.lookAt(en,$r,this.up):Qr.lookAt($r,en,this.up),this.quaternion.setFromRotationMatrix(Qr),n&&(Qr.extractRotation(n.matrixWorld),Kr.setFromRotationMatrix(Qr),this.quaternion.premultiply(Kr.inverse()))},add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(sn)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var r=this.children.indexOf(e);return-1!==r&&(this.children.splice(r,1),e.dispatchEvent(cn),e.parent=null),this},attach:function(e){return this.updateWorldMatrix(!0,!1),Qr.getInverse(this.matrixWorld),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),Qr.multiply(e.parent.matrixWorld)),e.applyMatrix4(Qr),e.updateWorldMatrix(!1,!1),this.add(e),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var r=0,n=this.children.length;r<n;r++){var i=this.children[r].getObjectByProperty(e,t);if(void 0!==i)return i}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new Nr),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new Or),this.updateMatrixWorld(!0),this.matrixWorld.decompose(en,e,tn),e},getWorldScale:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),e=new Nr),this.updateMatrixWorld(!0),this.matrixWorld.decompose(en,rn,e),e},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new Nr),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()},raycast:function(){},traverse:function(e){e(this);for(var t=this.children,r=0,n=t.length;r<n;r++)t[r].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,r=0,n=t.length;r<n;r++)t[r].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,r=0,n=t.length;r<n;r++)t[r].updateMatrixWorld(e)},updateWorldMatrix:function(e,t){var r=this.parent;if(!0===e&&null!==r&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t)for(var n=this.children,i=0,o=n.length;i<o;i++)n[i].updateWorldMatrix(!1,!0)},toJSON:function(e){var t=void 0===e||"string"==typeof e,r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var n={};function i(t,r){return void 0===t[r.uuid]&&(t[r.uuid]=r.toJSON(e)),r.uuid}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),!0===this.castShadow&&(n.castShadow=!0),!0===this.receiveShadow&&(n.receiveShadow=!0),!1===this.visible&&(n.visible=!1),!1===this.frustumCulled&&(n.frustumCulled=!1),0!==this.renderOrder&&(n.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),n.layers=this.layers.mask,n.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(n.matrixAutoUpdate=!1),this.isInstancedMesh&&(n.type="InstancedMesh",n.count=this.count,n.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){n.geometry=i(e.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){var a=o.shapes;if(Array.isArray(a))for(var s=0,c=a.length;s<c;s++){var l=a[s];i(e.shapes,l)}else i(e.shapes,a)}}if(void 0!==this.material)if(Array.isArray(this.material)){var u=[];for(s=0,c=this.material.length;s<c;s++)u.push(i(e.materials,this.material[s]));n.material=u}else n.material=i(e.materials,this.material);if(this.children.length>0){n.children=[];for(s=0;s<this.children.length;s++)n.children.push(this.children[s].toJSON(e).object)}if(t){var h=m(e.geometries),d=m(e.materials),p=m(e.textures),f=m(e.images);a=m(e.shapes);h.length>0&&(r.geometries=h),d.length>0&&(r.materials=d),p.length>0&&(r.textures=p),f.length>0&&(r.images=f),a.length>0&&(r.shapes=a)}return r.object=n,r;function m(e){var t=[];for(var r in e){var n=e[r];delete n.metadata,t.push(n)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var r=0;r<e.children.length;r++){var n=e.children[r];this.add(n.clone())}return this}}),un.prototype=Object.assign(Object.create(ln.prototype),{constructor:un,isScene:!0,copy:function(e,t){return ln.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=ln.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.environment&&(t.object.environment=this.environment.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t},dispose:function(){this.dispatchEvent({type:"dispose"})}});var hn=[new Nr,new Nr,new Nr,new Nr,new Nr,new Nr,new Nr,new Nr],dn=new Nr,pn=new Sn,fn=new Nr,mn=new Nr,gn=new Nr,vn=new Nr,yn=new Nr,_n=new Nr,bn=new Nr,xn=new Nr,wn=new Nr,Mn=new Nr;function Sn(e,t){this.min=void 0!==e?e:new Nr(1/0,1/0,1/0),this.max=void 0!==t?t:new Nr(-1/0,-1/0,-1/0)}function Tn(e,t,r,n,i){var o,a;for(o=0,a=e.length-3;o<=a;o+=3){Mn.fromArray(e,o);var s=i.x*Math.abs(Mn.x)+i.y*Math.abs(Mn.y)+i.z*Math.abs(Mn.z),c=t.dot(Mn),l=r.dot(Mn),u=n.dot(Mn);if(Math.max(-Math.max(c,l,u),Math.min(c,l,u))>s)return!1}return!0}Object.assign(Sn.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,r=1/0,n=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,c=e.length;s<c;s+=3){var l=e[s],u=e[s+1],h=e[s+2];l<t&&(t=l),u<r&&(r=u),h<n&&(n=h),l>i&&(i=l),u>o&&(o=u),h>a&&(a=h)}return this.min.set(t,r,n),this.max.set(i,o,a),this},setFromBufferAttribute:function(e){for(var t=1/0,r=1/0,n=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,c=e.count;s<c;s++){var l=e.getX(s),u=e.getY(s),h=e.getZ(s);l<t&&(t=l),u<r&&(r=u),h<n&&(n=h),l>i&&(i=l),u>o&&(o=u),h>a&&(a=h)}return this.min.set(t,r,n),this.max.set(i,o,a),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(e,t){var r=dn.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this},setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new Nr),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new Nr),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(e){e.updateWorldMatrix(!1,!1);var t=e.geometry;void 0!==t&&(null===t.boundingBox&&t.computeBoundingBox(),pn.copy(t.boundingBox),pn.applyMatrix4(e.matrixWorld),this.expandByPoint(pn.min),this.expandByPoint(pn.max));for(var r=e.children,n=0,i=r.length;n<i;n++)this.expandByObject(r[n]);return this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new Nr),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(e){return this.clampPoint(e.center,dn),dn.distanceToSquared(e.center)<=e.radius*e.radius},intersectsPlane:function(e){var t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant},intersectsTriangle:function(e){if(this.isEmpty())return!1;this.getCenter(bn),xn.subVectors(this.max,bn),fn.subVectors(e.a,bn),mn.subVectors(e.b,bn),gn.subVectors(e.c,bn),vn.subVectors(mn,fn),yn.subVectors(gn,mn),_n.subVectors(fn,gn);var t=[0,-vn.z,vn.y,0,-yn.z,yn.y,0,-_n.z,_n.y,vn.z,0,-vn.x,yn.z,0,-yn.x,_n.z,0,-_n.x,-vn.y,vn.x,0,-yn.y,yn.x,0,-_n.y,_n.x,0];return!!Tn(t,fn,mn,gn,xn)&&(!!Tn(t=[1,0,0,0,1,0,0,0,1],fn,mn,gn,xn)&&(wn.crossVectors(vn,yn),Tn(t=[wn.x,wn.y,wn.z],fn,mn,gn,xn)))},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new Nr),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(e){return dn.copy(e).clamp(this.min,this.max).sub(e).length()},getBoundingSphere:function(e){return void 0===e&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=.5*this.getSize(dn).length(),e},intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(e){return this.isEmpty()?this:(hn[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),hn[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),hn[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),hn[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),hn[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),hn[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),hn[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),hn[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(hn),this)},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});var En=new Sn;function An(e,t){this.center=void 0!==e?e:new Nr,this.radius=void 0!==t?t:0}Object.assign(An.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(e,t){var r=this.center;void 0!==t?r.copy(t):En.setFromPoints(e).getCenter(r);for(var n=0,i=0,o=e.length;i<o;i++)n=Math.max(n,r.distanceToSquared(e[i]));return this.radius=Math.sqrt(n),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var r=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new Nr),t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new Sn),e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}});var Ln=new Nr,Rn=new Nr,Pn=new Nr,Cn=new Nr,jn=new Nr,On=new Nr,Dn=new Nr;function In(e,t){this.origin=void 0!==e?e:new Nr,this.direction=void 0!==t?t:new Nr(0,0,-1)}Object.assign(In.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new Nr),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(e){return this.origin.copy(this.at(e,Ln)),this},closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new Nr),t.subVectors(e,this.origin);var r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(r).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(e){var t=Ln.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ln.copy(this.direction).multiplyScalar(t).add(this.origin),Ln.distanceToSquared(e))},distanceSqToSegment:function(e,t,r,n){Rn.copy(e).add(t).multiplyScalar(.5),Pn.copy(t).sub(e).normalize(),Cn.copy(this.origin).sub(Rn);var i,o,a,s,c=.5*e.distanceTo(t),l=-this.direction.dot(Pn),u=Cn.dot(this.direction),h=-Cn.dot(Pn),d=Cn.lengthSq(),p=Math.abs(1-l*l);if(p>0)if(o=l*u-h,s=c*p,(i=l*h-u)>=0)if(o>=-s)if(o<=s){var f=1/p;a=(i*=f)*(i+l*(o*=f)+2*u)+o*(l*i+o+2*h)+d}else o=c,a=-(i=Math.max(0,-(l*o+u)))*i+o*(o+2*h)+d;else o=-c,a=-(i=Math.max(0,-(l*o+u)))*i+o*(o+2*h)+d;else o<=-s?a=-(i=Math.max(0,-(-l*c+u)))*i+(o=i>0?-c:Math.min(Math.max(-c,-h),c))*(o+2*h)+d:o<=s?(i=0,a=(o=Math.min(Math.max(-c,-h),c))*(o+2*h)+d):a=-(i=Math.max(0,-(l*c+u)))*i+(o=i>0?c:Math.min(Math.max(-c,-h),c))*(o+2*h)+d;else o=l>0?-c:c,a=-(i=Math.max(0,-(l*o+u)))*i+o*(o+2*h)+d;return r&&r.copy(this.direction).multiplyScalar(i).add(this.origin),n&&n.copy(Pn).multiplyScalar(o).add(Rn),a},intersectSphere:function(e,t){Ln.subVectors(e.center,this.origin);var r=Ln.dot(this.direction),n=Ln.dot(Ln)-r*r,i=e.radius*e.radius;if(n>i)return null;var o=Math.sqrt(i-n),a=r-o,s=r+o;return a<0&&s<0?null:a<0?this.at(s,t):this.at(a,t)},intersectsSphere:function(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null},intersectPlane:function(e,t){var r=this.distanceToPlane(e);return null===r?null:this.at(r,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var r,n,i,o,a,s,c=1/this.direction.x,l=1/this.direction.y,u=1/this.direction.z,h=this.origin;return c>=0?(r=(e.min.x-h.x)*c,n=(e.max.x-h.x)*c):(r=(e.max.x-h.x)*c,n=(e.min.x-h.x)*c),l>=0?(i=(e.min.y-h.y)*l,o=(e.max.y-h.y)*l):(i=(e.max.y-h.y)*l,o=(e.min.y-h.y)*l),r>o||i>n?null:((i>r||r!=r)&&(r=i),(o<n||n!=n)&&(n=o),u>=0?(a=(e.min.z-h.z)*u,s=(e.max.z-h.z)*u):(a=(e.max.z-h.z)*u,s=(e.min.z-h.z)*u),r>s||a>n?null:((a>r||r!=r)&&(r=a),(s<n||n!=n)&&(n=s),n<0?null:this.at(r>=0?r:n,t)))},intersectsBox:function(e){return null!==this.intersectBox(e,Ln)},intersectTriangle:function(e,t,r,n,i){jn.subVectors(t,e),On.subVectors(r,e),Dn.crossVectors(jn,On);var o,a=this.direction.dot(Dn);if(a>0){if(n)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}Cn.subVectors(this.origin,e);var s=o*this.direction.dot(On.crossVectors(Cn,On));if(s<0)return null;var c=o*this.direction.dot(jn.cross(Cn));if(c<0)return null;if(s+c>a)return null;var l=-o*Cn.dot(Dn);return l<0?null:this.at(l/a,i)},applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}});var Nn=new Nr,Un=new Nr,zn=new Er;function Fn(e,t){this.normal=void 0!==e?e:new Nr(1,0,0),this.constant=void 0!==t?t:0}Object.assign(Fn.prototype,{isPlane:!0,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,r,n){return this.normal.set(e,t,r),this.constant=n,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(e,t,r){var n=Nn.subVectors(r,t).cross(Un.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(n,e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new Nr),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(e,t){void 0===t&&(console.warn("THREE.Plane: .intersectLine() target is now required"),t=new Nr);var r=e.delta(Nn),n=this.normal.dot(r);if(0===n)return 0===this.distanceToPoint(e.start)?t.copy(e.start):void 0;var i=-(e.start.dot(this.normal)+this.constant)/n;return i<0||i>1?void 0:t.copy(r).multiplyScalar(i).add(e.start)},intersectsLine:function(e){var t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new Nr),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(e,t){var r=t||zn.getNormalMatrix(e),n=this.coplanarPoint(Nn).applyMatrix4(e),i=this.normal.applyMatrix3(r).normalize();return this.constant=-n.dot(i),this},translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}});var Bn=new Nr,Gn=new Nr,Vn=new Nr,Hn=new Nr,kn=new Nr,Wn=new Nr,qn=new Nr,Xn=new Nr,Yn=new Nr,Zn=new Nr;function Jn(e,t,r){this.a=void 0!==e?e:new Nr,this.b=void 0!==t?t:new Nr,this.c=void 0!==r?r:new Nr}Object.assign(Jn,{getNormal:function(e,t,r,n){void 0===n&&(console.warn("THREE.Triangle: .getNormal() target is now required"),n=new Nr),n.subVectors(r,t),Bn.subVectors(e,t),n.cross(Bn);var i=n.lengthSq();return i>0?n.multiplyScalar(1/Math.sqrt(i)):n.set(0,0,0)},getBarycoord:function(e,t,r,n,i){Bn.subVectors(n,t),Gn.subVectors(r,t),Vn.subVectors(e,t);var o=Bn.dot(Bn),a=Bn.dot(Gn),s=Bn.dot(Vn),c=Gn.dot(Gn),l=Gn.dot(Vn),u=o*c-a*a;if(void 0===i&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),i=new Nr),0===u)return i.set(-2,-1,-1);var h=1/u,d=(c*s-a*l)*h,p=(o*l-a*s)*h;return i.set(1-d-p,p,d)},containsPoint:function(e,t,r,n){return Jn.getBarycoord(e,t,r,n,Hn),Hn.x>=0&&Hn.y>=0&&Hn.x+Hn.y<=1},getUV:function(e,t,r,n,i,o,a,s){return this.getBarycoord(e,t,r,n,Hn),s.set(0,0),s.addScaledVector(i,Hn.x),s.addScaledVector(o,Hn.y),s.addScaledVector(a,Hn.z),s},isFrontFacing:function(e,t,r,n){return Bn.subVectors(r,t),Gn.subVectors(e,t),Bn.cross(Gn).dot(n)<0}}),Object.assign(Jn.prototype,{set:function(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this},setFromPointsAndIndices:function(e,t,r,n){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[n]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){return Bn.subVectors(this.c,this.b),Gn.subVectors(this.a,this.b),.5*Bn.cross(Gn).length()},getMidpoint:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new Nr),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return Jn.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new Fn),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return Jn.getBarycoord(e,this.a,this.b,this.c,t)},getUV:function(e,t,r,n,i){return Jn.getUV(e,this.a,this.b,this.c,t,r,n,i)},containsPoint:function(e){return Jn.containsPoint(e,this.a,this.b,this.c)},isFrontFacing:function(e){return Jn.isFrontFacing(this.a,this.b,this.c,e)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new Nr);var r,n,i=this.a,o=this.b,a=this.c;kn.subVectors(o,i),Wn.subVectors(a,i),Xn.subVectors(e,i);var s=kn.dot(Xn),c=Wn.dot(Xn);if(s<=0&&c<=0)return t.copy(i);Yn.subVectors(e,o);var l=kn.dot(Yn),u=Wn.dot(Yn);if(l>=0&&u<=l)return t.copy(o);var h=s*u-l*c;if(h<=0&&s>=0&&l<=0)return r=s/(s-l),t.copy(i).addScaledVector(kn,r);Zn.subVectors(e,a);var d=kn.dot(Zn),p=Wn.dot(Zn);if(p>=0&&d<=p)return t.copy(a);var f=d*c-s*p;if(f<=0&&c>=0&&p<=0)return n=c/(c-p),t.copy(i).addScaledVector(Wn,n);var m=l*p-d*u;if(m<=0&&u-l>=0&&d-p>=0)return qn.subVectors(a,o),n=(u-l)/(u-l+(d-p)),t.copy(o).addScaledVector(qn,n);var g=1/(m+f+h);return r=f*g,n=h*g,t.copy(i).addScaledVector(kn,r).addScaledVector(Wn,n)},equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}});var Kn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Qn={h:0,s:0,l:0},$n={h:0,s:0,l:0};function ei(e,t,r){return void 0===t&&void 0===r?this.set(e):this.setRGB(e,t,r)}function ti(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+6*(t-e)*(2/3-r):e}function ri(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function ni(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}function ii(e,t,r,n,i,o){this.a=e,this.b=t,this.c=r,this.normal=n&&n.isVector3?n:new Nr,this.vertexNormals=Array.isArray(n)?n:[],this.color=i&&i.isColor?i:new ei,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==o?o:0}Object.assign(ei.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,r){return this.r=e,this.g=t,this.b=r,this},setHSL:function(e,t,r){if(e=Sr.euclideanModulo(e,1),t=Sr.clamp(t,0,1),r=Sr.clamp(r,0,1),0===t)this.r=this.g=this.b=r;else{var n=r<=.5?r*(1+t):r+t-r*t,i=2*r-n;this.r=ti(i,n,e+1/3),this.g=ti(i,n,e),this.b=ti(i,n,e-1/3)}return this},setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var r;if(r=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var n,i=r[1],o=r[2];switch(i){case"rgb":case"rgba":if(n=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,t(n[5]),this;if(n=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,t(n[5]),this;break;case"hsl":case"hsla":if(n=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var a=parseFloat(n[1])/360,s=parseInt(n[2],10)/100,c=parseInt(n[3],10)/100;return t(n[5]),this.setHSL(a,s,c)}}}else if(r=/^\#([A-Fa-f0-9]+)$/.exec(e)){var l=r[1],u=l.length;if(3===u)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===u)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this},setColorName:function(e){var t=Kn[e];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var r=t>0?1/t:1;return this.r=Math.pow(e.r,r),this.g=Math.pow(e.g,r),this.b=Math.pow(e.b,r),this},convertGammaToLinear:function(e){return this.copyGammaToLinear(this,e),this},convertLinearToGamma:function(e){return this.copyLinearToGamma(this,e),this},copySRGBToLinear:function(e){return this.r=ri(e.r),this.g=ri(e.g),this.b=ri(e.b),this},copyLinearToSRGB:function(e){return this.r=ni(e.r),this.g=ni(e.g),this.b=ni(e.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t,r,n=this.r,i=this.g,o=this.b,a=Math.max(n,i,o),s=Math.min(n,i,o),c=(s+a)/2;if(s===a)t=0,r=0;else{var l=a-s;switch(r=c<=.5?l/(a+s):l/(2-a-s),a){case n:t=(i-o)/l+(i<o?6:0);break;case i:t=(o-n)/l+2;break;case o:t=(n-i)/l+4}t/=6}return e.h=t,e.s=r,e.l=c,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,r){return this.getHSL(Qn),Qn.h+=e,Qn.s+=t,Qn.l+=r,this.setHSL(Qn.h,Qn.s,Qn.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},lerpHSL:function(e,t){this.getHSL(Qn),e.getHSL($n);var r=Sr.lerp(Qn.h,$n.h,t),n=Sr.lerp(Qn.s,$n.s,t),i=Sr.lerp(Qn.l,$n.l,t);return this.setHSL(r,n,i),this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}}),ei.NAMES=Kn,Object.assign(ii.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,r=e.vertexNormals.length;t<r;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(t=0,r=e.vertexColors.length;t<r;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}});var oi=0;function ai(){Object.defineProperty(this,"id",{value:oi++}),this.uuid=Sr.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=T,this.side=g,this.flatShading=!1,this.vertexTangents=!1,this.vertexColors=x,this.opacity=1,this.transparent=!1,this.blendSrc=F,this.blendDst=B,this.blendEquation=P,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Z,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=ur,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Jt,this.stencilZFail=Jt,this.stencilZPass=Jt,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}function si(e){ai.call(this),this.type="MeshBasicMaterial",this.color=new ei(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ee,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(e)}ai.prototype=Object.assign(Object.create(br.prototype),{constructor:ai,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var r=e[t];if(void 0!==r)if("shading"!==t){var n=this[t];void 0!==n?n&&n.isColor?n.set(r):n&&n.isVector3&&r&&r.isVector3?n.copy(r):this[t]=r:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=r===_;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){var t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});var r={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function n(e){var t=[];for(var r in e){var n=e[r];delete n.metadata,t.push(n)}return t}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),void 0!==this.roughness&&(r.roughness=this.roughness),void 0!==this.metalness&&(r.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(r.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),void 0!==this.shininess&&(r.shininess=this.shininess),void 0!==this.clearcoat&&(r.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,r.reflectivity=this.reflectivity,r.refractionRatio=this.refractionRatio,void 0!==this.combine&&(r.combine=this.combine),void 0!==this.envMapIntensity&&(r.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(r.size=this.size),void 0!==this.sizeAttenuation&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==T&&(r.blending=this.blending),!0===this.flatShading&&(r.flatShading=this.flatShading),this.side!==g&&(r.side=this.side),this.vertexColors!==x&&(r.vertexColors=this.vertexColors),this.opacity<1&&(r.opacity=this.opacity),!0===this.transparent&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(r.rotation=this.rotation),!0===this.polygonOffset&&(r.polygonOffset=!0),0!==this.polygonOffsetFactor&&(r.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(r.linewidth=this.linewidth),void 0!==this.dashSize&&(r.dashSize=this.dashSize),void 0!==this.gapSize&&(r.gapSize=this.gapSize),void 0!==this.scale&&(r.scale=this.scale),!0===this.dithering&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(r.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(r.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(r.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(r.morphTargets=!0),!0===this.morphNormals&&(r.morphNormals=!0),!0===this.skinning&&(r.skinning=!0),!1===this.visible&&(r.visible=!1),!1===this.toneMapped&&(r.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),t){var i=n(e.textures),o=n(e.images);i.length>0&&(r.textures=i),o.length>0&&(r.images=o)}return r},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexTangents=e.vertexTangents,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;var t=e.clippingPlanes,r=null;if(null!==t){var n=t.length;r=new Array(n);for(var i=0;i!==n;++i)r[i]=t[i].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(ai.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),si.prototype=Object.create(ai.prototype),si.prototype.constructor=si,si.prototype.isMeshBasicMaterial=!0,si.prototype.copy=function(e){return ai.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this};var ci=new Nr;function li(e,t,r){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===r,this.usage=hr,this.updateRange={offset:0,count:-1},this.version=0}function ui(e,t,r){li.call(this,new Int8Array(e),t,r)}function hi(e,t,r){li.call(this,new Uint8Array(e),t,r)}function di(e,t,r){li.call(this,new Uint8ClampedArray(e),t,r)}function pi(e,t,r){li.call(this,new Int16Array(e),t,r)}function fi(e,t,r){li.call(this,new Uint16Array(e),t,r)}function mi(e,t,r){li.call(this,new Int32Array(e),t,r)}function gi(e,t,r){li.call(this,new Uint32Array(e),t,r)}function vi(e,t,r){li.call(this,new Float32Array(e),t,r)}function yi(e,t,r){li.call(this,new Float64Array(e),t,r)}function _i(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function bi(e){if(0===e.length)return-1/0;for(var t=e[0],r=1,n=e.length;r<n;++r)e[r]>t&&(t=e[r]);return t}Object.defineProperty(li.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(li.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this},copyAt:function(e,t,r){e*=this.itemSize,r*=t.itemSize;for(var n=0,i=this.itemSize;n<i;n++)this.array[e+n]=t.array[r+n];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,r=0,n=0,i=e.length;n<i;n++){var o=e[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n),o=new ei),t[r++]=o.r,t[r++]=o.g,t[r++]=o.b}return this},copyVector2sArray:function(e){for(var t=this.array,r=0,n=0,i=e.length;n<i;n++){var o=e[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",n),o=new Tr),t[r++]=o.x,t[r++]=o.y}return this},copyVector3sArray:function(e){for(var t=this.array,r=0,n=0,i=e.length;n<i;n++){var o=e[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",n),o=new Nr),t[r++]=o.x,t[r++]=o.y,t[r++]=o.z}return this},copyVector4sArray:function(e){for(var t=this.array,r=0,n=0,i=e.length;n<i;n++){var o=e[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n),o=new Pr),t[r++]=o.x,t[r++]=o.y,t[r++]=o.z,t[r++]=o.w}return this},applyMatrix3:function(e){for(var t=0,r=this.count;t<r;t++)ci.x=this.getX(t),ci.y=this.getY(t),ci.z=this.getZ(t),ci.applyMatrix3(e),this.setXYZ(t,ci.x,ci.y,ci.z);return this},applyMatrix4:function(e){for(var t=0,r=this.count;t<r;t++)ci.x=this.getX(t),ci.y=this.getY(t),ci.z=this.getZ(t),ci.applyMatrix4(e),this.setXYZ(t,ci.x,ci.y,ci.z);return this},applyNormalMatrix:function(e){for(var t=0,r=this.count;t<r;t++)ci.x=this.getX(t),ci.y=this.getY(t),ci.z=this.getZ(t),ci.applyNormalMatrix(e),this.setXYZ(t,ci.x,ci.y,ci.z);return this},transformDirection:function(e){for(var t=0,r=this.count;t<r;t++)ci.x=this.getX(t),ci.y=this.getY(t),ci.z=this.getZ(t),ci.transformDirection(e),this.setXYZ(t,ci.x,ci.y,ci.z);return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this},setXYZ:function(e,t,r,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=n,this},setXYZW:function(e,t,r,n,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=n,this.array[e+3]=i,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),ui.prototype=Object.create(li.prototype),ui.prototype.constructor=ui,hi.prototype=Object.create(li.prototype),hi.prototype.constructor=hi,di.prototype=Object.create(li.prototype),di.prototype.constructor=di,pi.prototype=Object.create(li.prototype),pi.prototype.constructor=pi,fi.prototype=Object.create(li.prototype),fi.prototype.constructor=fi,mi.prototype=Object.create(li.prototype),mi.prototype.constructor=mi,gi.prototype=Object.create(li.prototype),gi.prototype.constructor=gi,vi.prototype=Object.create(li.prototype),vi.prototype.constructor=vi,yi.prototype=Object.create(li.prototype),yi.prototype.constructor=yi,Object.assign(_i.prototype,{computeGroups:function(e){for(var t,r=[],n=void 0,i=e.faces,o=0;o<i.length;o++){var a=i[o];a.materialIndex!==n&&(n=a.materialIndex,void 0!==t&&(t.count=3*o-t.start,r.push(t)),t={start:3*o,materialIndex:n})}void 0!==t&&(t.count=3*o-t.start,r.push(t)),this.groups=r},fromGeometry:function(e){var t,r=e.faces,n=e.vertices,i=e.faceVertexUvs,o=i[0]&&i[0].length>0,a=i[1]&&i[1].length>0,s=e.morphTargets,c=s.length;if(c>0){t=[];for(var l=0;l<c;l++)t[l]={name:s[l].name,data:[]};this.morphTargets.position=t}var u,h=e.morphNormals,d=h.length;if(d>0){u=[];for(l=0;l<d;l++)u[l]={name:h[l].name,data:[]};this.morphTargets.normal=u}var p=e.skinIndices,f=e.skinWeights,m=p.length===n.length,g=f.length===n.length;n.length>0&&0===r.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(l=0;l<r.length;l++){var v=r[l];this.vertices.push(n[v.a],n[v.b],n[v.c]);var y=v.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var _=v.normal;this.normals.push(_,_,_)}var b,x=v.vertexColors;if(3===x.length)this.colors.push(x[0],x[1],x[2]);else{var w=v.color;this.colors.push(w,w,w)}if(!0===o)void 0!==(b=i[0][l])?this.uvs.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",l),this.uvs.push(new Tr,new Tr,new Tr));if(!0===a)void 0!==(b=i[1][l])?this.uvs2.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",l),this.uvs2.push(new Tr,new Tr,new Tr));for(var M=0;M<c;M++){var S=s[M].vertices;t[M].data.push(S[v.a],S[v.b],S[v.c])}for(M=0;M<d;M++){var T=h[M].vertexNormals[l];u[M].data.push(T.a,T.b,T.c)}m&&this.skinIndices.push(p[v.a],p[v.b],p[v.c]),g&&this.skinWeights.push(f[v.a],f[v.b],f[v.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this}});var xi=1,wi=new kr,Mi=new ln,Si=new Nr,Ti=new Sn,Ei=new Sn,Ai=new Nr;function Li(){Object.defineProperty(this,"id",{value:xi+=2}),this.uuid=Sr.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}Li.prototype=Object.assign(Object.create(br.prototype),{constructor:Li,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(bi(e)>65535?gi:fi)(e,1):this.index=e},getAttribute:function(e){return this.attributes[e]},setAttribute:function(e,t){return this.attributes[e]=t,this},deleteAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,r){this.groups.push({start:e,count:t,materialIndex:void 0!==r?r:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix4:function(e){var t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);var r=this.attributes.normal;if(void 0!==r){var n=(new Er).getNormalMatrix(e);r.applyNormalMatrix(n),r.needsUpdate=!0}var i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(e){return wi.makeRotationX(e),this.applyMatrix4(wi),this},rotateY:function(e){return wi.makeRotationY(e),this.applyMatrix4(wi),this},rotateZ:function(e){return wi.makeRotationZ(e),this.applyMatrix4(wi),this},translate:function(e,t,r){return wi.makeTranslation(e,t,r),this.applyMatrix4(wi),this},scale:function(e,t,r){return wi.makeScale(e,t,r),this.applyMatrix4(wi),this},lookAt:function(e){return Mi.lookAt(e),Mi.updateMatrix(),this.applyMatrix4(Mi.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Si).negate(),this.translate(Si.x,Si.y,Si.z),this},setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var r=new vi(3*t.vertices.length,3),n=new vi(3*t.colors.length,3);if(this.setAttribute("position",r.copyVector3sArray(t.vertices)),this.setAttribute("color",n.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var i=new vi(t.lineDistances.length,1);this.setAttribute("lineDistance",i.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],r=0,n=e.length;r<n;r++){var i=e[r];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new vi(t,3)),this},updateFromObject:function(e){var t,r=e.geometry;if(e.isMesh){var n=r.__directGeometry;if(!0===r.elementsNeedUpdate&&(n=void 0,r.elementsNeedUpdate=!1),void 0===n)return this.fromGeometry(r);n.verticesNeedUpdate=r.verticesNeedUpdate,n.normalsNeedUpdate=r.normalsNeedUpdate,n.colorsNeedUpdate=r.colorsNeedUpdate,n.uvsNeedUpdate=r.uvsNeedUpdate,n.groupsNeedUpdate=r.groupsNeedUpdate,r.verticesNeedUpdate=!1,r.normalsNeedUpdate=!1,r.colorsNeedUpdate=!1,r.uvsNeedUpdate=!1,r.groupsNeedUpdate=!1,r=n}return!0===r.verticesNeedUpdate&&(void 0!==(t=this.attributes.position)&&(t.copyVector3sArray(r.vertices),t.needsUpdate=!0),r.verticesNeedUpdate=!1),!0===r.normalsNeedUpdate&&(void 0!==(t=this.attributes.normal)&&(t.copyVector3sArray(r.normals),t.needsUpdate=!0),r.normalsNeedUpdate=!1),!0===r.colorsNeedUpdate&&(void 0!==(t=this.attributes.color)&&(t.copyColorsArray(r.colors),t.needsUpdate=!0),r.colorsNeedUpdate=!1),r.uvsNeedUpdate&&(void 0!==(t=this.attributes.uv)&&(t.copyVector2sArray(r.uvs),t.needsUpdate=!0),r.uvsNeedUpdate=!1),r.lineDistancesNeedUpdate&&(void 0!==(t=this.attributes.lineDistance)&&(t.copyArray(r.lineDistances),t.needsUpdate=!0),r.lineDistancesNeedUpdate=!1),r.groupsNeedUpdate&&(r.computeGroups(e.geometry),this.groups=r.groups,r.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new _i).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.setAttribute("position",new li(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var r=new Float32Array(3*e.normals.length);this.setAttribute("normal",new li(r,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var n=new Float32Array(3*e.colors.length);this.setAttribute("color",new li(n,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var i=new Float32Array(2*e.uvs.length);this.setAttribute("uv",new li(i,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var o=new Float32Array(2*e.uvs2.length);this.setAttribute("uv2",new li(o,2).copyVector2sArray(e.uvs2))}for(var a in this.groups=e.groups,e.morphTargets){for(var s=[],c=e.morphTargets[a],l=0,u=c.length;l<u;l++){var h=c[l],d=new vi(3*h.data.length,3);d.name=h.name,s.push(d.copyVector3sArray(h.data))}this.morphAttributes[a]=s}if(e.skinIndices.length>0){var p=new vi(4*e.skinIndices.length,4);this.setAttribute("skinIndex",p.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var f=new vi(4*e.skinWeights.length,4);this.setAttribute("skinWeight",f.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Sn);var e=this.attributes.position,t=this.morphAttributes.position;if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(var r=0,n=t.length;r<n;r++){var i=t[r];Ti.setFromBufferAttribute(i),this.morphTargetsRelative?(Ai.addVectors(this.boundingBox.min,Ti.min),this.boundingBox.expandByPoint(Ai),Ai.addVectors(this.boundingBox.max,Ti.max),this.boundingBox.expandByPoint(Ai)):(this.boundingBox.expandByPoint(Ti.min),this.boundingBox.expandByPoint(Ti.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new An);var e=this.attributes.position,t=this.morphAttributes.position;if(e){var r=this.boundingSphere.center;if(Ti.setFromBufferAttribute(e),t)for(var n=0,i=t.length;n<i;n++){var o=t[n];Ei.setFromBufferAttribute(o),this.morphTargetsRelative?(Ai.addVectors(Ti.min,Ei.min),Ti.expandByPoint(Ai),Ai.addVectors(Ti.max,Ei.max),Ti.expandByPoint(Ai)):(Ti.expandByPoint(Ei.min),Ti.expandByPoint(Ei.max))}Ti.getCenter(r);var a=0;for(n=0,i=e.count;n<i;n++)Ai.fromBufferAttribute(e,n),a=Math.max(a,r.distanceToSquared(Ai));if(t)for(n=0,i=t.length;n<i;n++){o=t[n];for(var s=this.morphTargetsRelative,c=0,l=o.count;c<l;c++)Ai.fromBufferAttribute(o,c),s&&(Si.fromBufferAttribute(e,c),Ai.add(Si)),a=Math.max(a,r.distanceToSquared(Ai))}this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes;if(t.position){var r=t.position.array;if(void 0===t.normal)this.setAttribute("normal",new li(new Float32Array(r.length),3));else for(var n=t.normal.array,i=0,o=n.length;i<o;i++)n[i]=0;var a,s,c,l=t.normal.array,u=new Nr,h=new Nr,d=new Nr,p=new Nr,f=new Nr;if(e){var m=e.array;for(i=0,o=e.count;i<o;i+=3)a=3*m[i+0],s=3*m[i+1],c=3*m[i+2],u.fromArray(r,a),h.fromArray(r,s),d.fromArray(r,c),p.subVectors(d,h),f.subVectors(u,h),p.cross(f),l[a]+=p.x,l[a+1]+=p.y,l[a+2]+=p.z,l[s]+=p.x,l[s+1]+=p.y,l[s+2]+=p.z,l[c]+=p.x,l[c+1]+=p.y,l[c+2]+=p.z}else for(i=0,o=r.length;i<o;i+=9)u.fromArray(r,i),h.fromArray(r,i+3),d.fromArray(r,i+6),p.subVectors(d,h),f.subVectors(u,h),p.cross(f),l[i]=p.x,l[i+1]=p.y,l[i+2]=p.z,l[i+3]=p.x,l[i+4]=p.y,l[i+5]=p.z,l[i+6]=p.x,l[i+7]=p.y,l[i+8]=p.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var r=this.attributes;for(var n in r)if(void 0!==e.attributes[n])for(var i=r[n].array,o=e.attributes[n],a=o.array,s=o.itemSize*t,c=Math.min(a.length,i.length-s),l=0,u=s;l<c;l++,u++)i[u]=a[l];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){for(var e=this.attributes.normal,t=0,r=e.count;t<r;t++)Ai.x=e.getX(t),Ai.y=e.getY(t),Ai.z=e.getZ(t),Ai.normalize(),e.setXYZ(t,Ai.x,Ai.y,Ai.z)},toNonIndexed:function(){function e(e,t){for(var r=e.array,n=e.itemSize,i=new r.constructor(t.length*n),o=0,a=0,s=0,c=t.length;s<c;s++){o=t[s]*n;for(var l=0;l<n;l++)i[a++]=r[o++]}return new li(i,n)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t=new Li,r=this.index.array,n=this.attributes;for(var i in n){var o=e(n[i],r);t.setAttribute(i,o)}var a=this.morphAttributes;for(i in a){for(var s=[],c=a[i],l=0,u=c.length;l<u;l++){o=e(c[l],r);s.push(o)}t.morphAttributes[i]=s}t.morphTargetsRelative=this.morphTargetsRelative;for(var h=this.groups,d=(l=0,h.length);l<d;l++){var p=h[l];t.addGroup(p.start,p.count,p.materialIndex)}return t},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var r in t)void 0!==t[r]&&(e[r]=t[r]);return e}e.data={attributes:{}};var n=this.index;null!==n&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});var i=this.attributes;for(var r in i){var o=(d=i[r]).toJSON();""!==d.name&&(o.name=d.name),e.data.attributes[r]=o}var a={},s=!1;for(var r in this.morphAttributes){for(var c=this.morphAttributes[r],l=[],u=0,h=c.length;u<h;u++){var d;o=(d=c[u]).toJSON();""!==d.name&&(o.name=d.name),l.push(o)}l.length>0&&(a[r]=l,s=!0)}s&&(e.data.morphAttributes=a,e.data.morphTargetsRelative=this.morphTargetsRelative);var p=this.groups;p.length>0&&(e.data.groups=JSON.parse(JSON.stringify(p)));var f=this.boundingSphere;return null!==f&&(e.data.boundingSphere={center:f.center.toArray(),radius:f.radius}),e},clone:function(){return(new Li).copy(this)},copy:function(e){var t,r,n;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var i=e.index;null!==i&&this.setIndex(i.clone());var o=e.attributes;for(t in o){var a=o[t];this.setAttribute(t,a.clone())}var s=e.morphAttributes;for(t in s){var c=[],l=s[t];for(r=0,n=l.length;r<n;r++)c.push(l[r].clone());this.morphAttributes[t]=c}this.morphTargetsRelative=e.morphTargetsRelative;var u=e.groups;for(r=0,n=u.length;r<n;r++){var h=u[r];this.addGroup(h.start,h.count,h.materialIndex)}var d=e.boundingBox;null!==d&&(this.boundingBox=d.clone());var p=e.boundingSphere;return null!==p&&(this.boundingSphere=p.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Ri=new kr,Pi=new In,Ci=new An,ji=new Nr,Oi=new Nr,Di=new Nr,Ii=new Nr,Ni=new Nr,Ui=new Nr,zi=new Nr,Fi=new Nr,Bi=new Nr,Gi=new Tr,Vi=new Tr,Hi=new Tr,ki=new Nr,Wi=new Nr;function qi(e,t){ln.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new Li,this.material=void 0!==t?t:new si,this.updateMorphTargets()}function Xi(e,t,r,n,i,o,a,s){if(null===(t.side===v?n.intersectTriangle(a,o,i,!0,s):n.intersectTriangle(i,o,a,t.side!==y,s)))return null;Wi.copy(s),Wi.applyMatrix4(e.matrixWorld);var c=r.ray.origin.distanceTo(Wi);return c<r.near||c>r.far?null:{distance:c,point:Wi.clone(),object:e}}function Yi(e,t,r,n,i,o,a,s,c,l,u,h){ji.fromBufferAttribute(i,l),Oi.fromBufferAttribute(i,u),Di.fromBufferAttribute(i,h);var d=e.morphTargetInfluences;if(t.morphTargets&&o&&d){zi.set(0,0,0),Fi.set(0,0,0),Bi.set(0,0,0);for(var p=0,f=o.length;p<f;p++){var m=d[p],g=o[p];0!==m&&(Ii.fromBufferAttribute(g,l),Ni.fromBufferAttribute(g,u),Ui.fromBufferAttribute(g,h),a?(zi.addScaledVector(Ii,m),Fi.addScaledVector(Ni,m),Bi.addScaledVector(Ui,m)):(zi.addScaledVector(Ii.sub(ji),m),Fi.addScaledVector(Ni.sub(Oi),m),Bi.addScaledVector(Ui.sub(Di),m)))}ji.add(zi),Oi.add(Fi),Di.add(Bi)}var v=Xi(e,t,r,n,ji,Oi,Di,ki);if(v){s&&(Gi.fromBufferAttribute(s,l),Vi.fromBufferAttribute(s,u),Hi.fromBufferAttribute(s,h),v.uv=Jn.getUV(ki,ji,Oi,Di,Gi,Vi,Hi,new Tr)),c&&(Gi.fromBufferAttribute(c,l),Vi.fromBufferAttribute(c,u),Hi.fromBufferAttribute(c,h),v.uv2=Jn.getUV(ki,ji,Oi,Di,Gi,Vi,Hi,new Tr));var y=new ii(l,u,h);Jn.getNormal(ji,Oi,Di,y.normal),v.face=y}return v}qi.prototype=Object.assign(Object.create(ln.prototype),{constructor:qi,isMesh:!0,copy:function(e){return ln.prototype.copy.call(this,e),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e,t,r,n=this.geometry;if(n.isBufferGeometry){var i=n.morphAttributes,o=Object.keys(i);if(o.length>0){var a=i[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=a.length;e<t;e++)r=a[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[r]=e}}else{var s=n.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(e,t){var r,n=this.geometry,i=this.material,o=this.matrixWorld;if(void 0!==i&&(null===n.boundingSphere&&n.computeBoundingSphere(),Ci.copy(n.boundingSphere),Ci.applyMatrix4(o),!1!==e.ray.intersectsSphere(Ci)&&(Ri.getInverse(o),Pi.copy(e.ray).applyMatrix4(Ri),null===n.boundingBox||!1!==Pi.intersectsBox(n.boundingBox))))if(n.isBufferGeometry){var a,s,c,l,u,h,d,p,f,m=n.index,g=n.attributes.position,v=n.morphAttributes.position,y=n.morphTargetsRelative,_=n.attributes.uv,b=n.attributes.uv2,x=n.groups,w=n.drawRange;if(null!==m)if(Array.isArray(i))for(l=0,h=x.length;l<h;l++)for(f=i[(p=x[l]).materialIndex],u=Math.max(p.start,w.start),d=Math.min(p.start+p.count,w.start+w.count);u<d;u+=3)a=m.getX(u),s=m.getX(u+1),c=m.getX(u+2),(r=Yi(this,f,e,Pi,g,v,y,_,b,a,s,c))&&(r.faceIndex=Math.floor(u/3),r.face.materialIndex=p.materialIndex,t.push(r));else for(l=Math.max(0,w.start),h=Math.min(m.count,w.start+w.count);l<h;l+=3)a=m.getX(l),s=m.getX(l+1),c=m.getX(l+2),(r=Yi(this,i,e,Pi,g,v,y,_,b,a,s,c))&&(r.faceIndex=Math.floor(l/3),t.push(r));else if(void 0!==g)if(Array.isArray(i))for(l=0,h=x.length;l<h;l++)for(f=i[(p=x[l]).materialIndex],u=Math.max(p.start,w.start),d=Math.min(p.start+p.count,w.start+w.count);u<d;u+=3)(r=Yi(this,f,e,Pi,g,v,y,_,b,a=u,s=u+1,c=u+2))&&(r.faceIndex=Math.floor(u/3),r.face.materialIndex=p.materialIndex,t.push(r));else for(l=Math.max(0,w.start),h=Math.min(g.count,w.start+w.count);l<h;l+=3)(r=Yi(this,i,e,Pi,g,v,y,_,b,a=l,s=l+1,c=l+2))&&(r.faceIndex=Math.floor(l/3),t.push(r))}else if(n.isGeometry){var M,S,T,E,A=Array.isArray(i),L=n.vertices,R=n.faces,P=n.faceVertexUvs[0];P.length>0&&(E=P);for(var C=0,j=R.length;C<j;C++){var O=R[C],D=A?i[O.materialIndex]:i;if(void 0!==D&&(M=L[O.a],S=L[O.b],T=L[O.c],r=Xi(this,D,e,Pi,M,S,T,ki))){if(E&&E[C]){var I=E[C];Gi.copy(I[0]),Vi.copy(I[1]),Hi.copy(I[2]),r.uv=Jn.getUV(ki,M,S,T,Gi,Vi,Hi,new Tr)}r.face=O,r.faceIndex=C,t.push(r)}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var Zi=0,Ji=new kr,Ki=new ln,Qi=new Nr;function $i(){Object.defineProperty(this,"id",{value:Zi+=2}),this.uuid=Sr.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}$i.prototype=Object.assign(Object.create(br.prototype),{constructor:$i,isGeometry:!0,applyMatrix4:function(e){for(var t=(new Er).getNormalMatrix(e),r=0,n=this.vertices.length;r<n;r++){this.vertices[r].applyMatrix4(e)}for(r=0,n=this.faces.length;r<n;r++){var i=this.faces[r];i.normal.applyMatrix3(t).normalize();for(var o=0,a=i.vertexNormals.length;o<a;o++)i.vertexNormals[o].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(e){return Ji.makeRotationX(e),this.applyMatrix4(Ji),this},rotateY:function(e){return Ji.makeRotationY(e),this.applyMatrix4(Ji),this},rotateZ:function(e){return Ji.makeRotationZ(e),this.applyMatrix4(Ji),this},translate:function(e,t,r){return Ji.makeTranslation(e,t,r),this.applyMatrix4(Ji),this},scale:function(e,t,r){return Ji.makeScale(e,t,r),this.applyMatrix4(Ji),this},lookAt:function(e){return Ki.lookAt(e),Ki.updateMatrix(),this.applyMatrix4(Ki.matrix),this},fromBufferGeometry:function(e){var t=this,r=null!==e.index?e.index.array:void 0,n=e.attributes;if(void 0===n.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var i=n.position.array,o=void 0!==n.normal?n.normal.array:void 0,a=void 0!==n.color?n.color.array:void 0,s=void 0!==n.uv?n.uv.array:void 0,c=void 0!==n.uv2?n.uv2.array:void 0;void 0!==c&&(this.faceVertexUvs[1]=[]);for(var l=0;l<i.length;l+=3)t.vertices.push((new Nr).fromArray(i,l)),void 0!==a&&t.colors.push((new ei).fromArray(a,l));function u(e,r,n,i){var l=void 0===a?[]:[t.colors[e].clone(),t.colors[r].clone(),t.colors[n].clone()],u=new ii(e,r,n,void 0===o?[]:[(new Nr).fromArray(o,3*e),(new Nr).fromArray(o,3*r),(new Nr).fromArray(o,3*n)],l,i);t.faces.push(u),void 0!==s&&t.faceVertexUvs[0].push([(new Tr).fromArray(s,2*e),(new Tr).fromArray(s,2*r),(new Tr).fromArray(s,2*n)]),void 0!==c&&t.faceVertexUvs[1].push([(new Tr).fromArray(c,2*e),(new Tr).fromArray(c,2*r),(new Tr).fromArray(c,2*n)])}var h=e.groups;if(h.length>0)for(l=0;l<h.length;l++)for(var d=h[l],p=d.start,f=p,m=p+d.count;f<m;f+=3)void 0!==r?u(r[f],r[f+1],r[f+2],d.materialIndex):u(f,f+1,f+2,d.materialIndex);else if(void 0!==r)for(l=0;l<r.length;l+=3)u(r[l],r[l+1],r[l+2]);else for(l=0;l<i.length/3;l+=3)u(l,l+1,l+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Qi).negate(),this.translate(Qi.x,Qi.y,Qi.z),this},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,r=0===t?1:1/t,n=new kr;return n.set(r,0,0,-r*e.x,0,r,0,-r*e.y,0,0,r,-r*e.z,0,0,0,1),this.applyMatrix4(n),this},computeFaceNormals:function(){for(var e=new Nr,t=new Nr,r=0,n=this.faces.length;r<n;r++){var i=this.faces[r],o=this.vertices[i.a],a=this.vertices[i.b],s=this.vertices[i.c];e.subVectors(s,a),t.subVectors(o,a),e.cross(t),e.normalize(),i.normal.copy(e)}},computeVertexNormals:function(e){var t,r,n,i,o,a;for(void 0===e&&(e=!0),a=new Array(this.vertices.length),t=0,r=this.vertices.length;t<r;t++)a[t]=new Nr;if(e){var s,c,l,u=new Nr,h=new Nr;for(n=0,i=this.faces.length;n<i;n++)o=this.faces[n],s=this.vertices[o.a],c=this.vertices[o.b],l=this.vertices[o.c],u.subVectors(l,c),h.subVectors(s,c),u.cross(h),a[o.a].add(u),a[o.b].add(u),a[o.c].add(u)}else for(this.computeFaceNormals(),n=0,i=this.faces.length;n<i;n++)a[(o=this.faces[n]).a].add(o.normal),a[o.b].add(o.normal),a[o.c].add(o.normal);for(t=0,r=this.vertices.length;t<r;t++)a[t].normalize();for(n=0,i=this.faces.length;n<i;n++){var d=(o=this.faces[n]).vertexNormals;3===d.length?(d[0].copy(a[o.a]),d[1].copy(a[o.b]),d[2].copy(a[o.c])):(d[0]=a[o.a].clone(),d[1]=a[o.b].clone(),d[2]=a[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,r;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){var n=(r=this.faces[e]).vertexNormals;3===n.length?(n[0].copy(r.normal),n[1].copy(r.normal),n[2].copy(r.normal)):(n[0]=r.normal.clone(),n[1]=r.normal.clone(),n[2]=r.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,r,n,i;for(r=0,n=this.faces.length;r<n;r++)for((i=this.faces[r]).__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),e=0,t=i.vertexNormals.length;e<t;e++)i.__originalVertexNormals[e]?i.__originalVertexNormals[e].copy(i.vertexNormals[e]):i.__originalVertexNormals[e]=i.vertexNormals[e].clone();var o=new $i;for(o.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var a=this.morphNormals[e].faceNormals,s=this.morphNormals[e].vertexNormals;for(r=0,n=this.faces.length;r<n;r++)c=new Nr,l={a:new Nr,b:new Nr,c:new Nr},a.push(c),s.push(l)}var c,l,u=this.morphNormals[e];for(o.vertices=this.morphTargets[e].vertices,o.computeFaceNormals(),o.computeVertexNormals(),r=0,n=this.faces.length;r<n;r++)i=this.faces[r],c=u.faceNormals[r],l=u.vertexNormals[r],c.copy(i.normal),l.a.copy(i.vertexNormals[0]),l.b.copy(i.vertexNormals[1]),l.c.copy(i.vertexNormals[2])}for(r=0,n=this.faces.length;r<n;r++)(i=this.faces[r]).normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Sn),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new An),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,r){if(e&&e.isGeometry){var n,i=this.vertices.length,o=this.vertices,a=e.vertices,s=this.faces,c=e.faces,l=this.colors,u=e.colors;void 0===r&&(r=0),void 0!==t&&(n=(new Er).getNormalMatrix(t));for(var h=0,d=a.length;h<d;h++){var p=a[h].clone();void 0!==t&&p.applyMatrix4(t),o.push(p)}for(h=0,d=u.length;h<d;h++)l.push(u[h].clone());for(h=0,d=c.length;h<d;h++){var f,m,g,v=c[h],y=v.vertexNormals,_=v.vertexColors;(f=new ii(v.a+i,v.b+i,v.c+i)).normal.copy(v.normal),void 0!==n&&f.normal.applyMatrix3(n).normalize();for(var b=0,x=y.length;b<x;b++)m=y[b].clone(),void 0!==n&&m.applyMatrix3(n).normalize(),f.vertexNormals.push(m);f.color.copy(v.color);for(b=0,x=_.length;b<x;b++)g=_[b],f.vertexColors.push(g.clone());f.materialIndex=v.materialIndex+r,s.push(f)}for(h=0,d=e.faceVertexUvs.length;h<d;h++){var w=e.faceVertexUvs[h];void 0===this.faceVertexUvs[h]&&(this.faceVertexUvs[h]=[]);for(b=0,x=w.length;b<x;b++){for(var M=w[b],S=[],T=0,E=M.length;T<E;T++)S.push(M[T].clone());this.faceVertexUvs[h].push(S)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e,t,r,n,i,o,a,s,c={},l=[],u=[],h=Math.pow(10,4);for(r=0,n=this.vertices.length;r<n;r++)e=this.vertices[r],void 0===c[t=Math.round(e.x*h)+"_"+Math.round(e.y*h)+"_"+Math.round(e.z*h)]?(c[t]=r,l.push(this.vertices[r]),u[r]=l.length-1):u[r]=u[c[t]];var d=[];for(r=0,n=this.faces.length;r<n;r++){(i=this.faces[r]).a=u[i.a],i.b=u[i.b],i.c=u[i.c],o=[i.a,i.b,i.c];for(var p=0;p<3;p++)if(o[p]===o[(p+1)%3]){d.push(r);break}}for(r=d.length-1;r>=0;r--){var f=d[r];for(this.faces.splice(f,1),a=0,s=this.faceVertexUvs.length;a<s;a++)this.faceVertexUvs[a].splice(f,1)}var m=this.vertices.length-l.length;return this.vertices=l,m},setFromPoints:function(e){this.vertices=[];for(var t=0,r=e.length;t<r;t++){var n=e[t];this.vertices.push(new Nr(n.x,n.y,n.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,r=0;r<t;r++)e[r]._id=r;e.sort((function(e,t){return e.materialIndex-t.materialIndex}));var n,i,o=this.faceVertexUvs[0],a=this.faceVertexUvs[1];o&&o.length===t&&(n=[]),a&&a.length===t&&(i=[]);for(r=0;r<t;r++){var s=e[r]._id;n&&n.push(o[s]),i&&i.push(a[s])}n&&(this.faceVertexUvs[0]=n),i&&(this.faceVertexUvs[1]=i)},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var r in t)void 0!==t[r]&&(e[r]=t[r]);return e}for(var n=[],i=0;i<this.vertices.length;i++){var o=this.vertices[i];n.push(o.x,o.y,o.z)}var a=[],s=[],c={},l=[],u={},h=[],d={};for(i=0;i<this.faces.length;i++){var p=this.faces[i],f=void 0!==this.faceVertexUvs[0][i],m=p.normal.length()>0,g=p.vertexNormals.length>0,v=1!==p.color.r||1!==p.color.g||1!==p.color.b,y=p.vertexColors.length>0,_=0;if(_=M(_,0,0),_=M(_,1,!0),_=M(_,2,!1),_=M(_,3,f),_=M(_,4,m),_=M(_,5,g),_=M(_,6,v),_=M(_,7,y),a.push(_),a.push(p.a,p.b,p.c),a.push(p.materialIndex),f){var b=this.faceVertexUvs[0][i];a.push(E(b[0]),E(b[1]),E(b[2]))}if(m&&a.push(S(p.normal)),g){var x=p.vertexNormals;a.push(S(x[0]),S(x[1]),S(x[2]))}if(v&&a.push(T(p.color)),y){var w=p.vertexColors;a.push(T(w[0]),T(w[1]),T(w[2]))}}function M(e,t,r){return r?e|1<<t:e&~(1<<t)}function S(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==c[t]?c[t]:(c[t]=s.length/3,s.push(e.x,e.y,e.z),c[t])}function T(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==u[t]?u[t]:(u[t]=l.length,l.push(e.getHex()),u[t])}function E(e){var t=e.x.toString()+e.y.toString();return void 0!==d[t]?d[t]:(d[t]=h.length/2,h.push(e.x,e.y),d[t])}return e.data={},e.data.vertices=n,e.data.normals=s,l.length>0&&(e.data.colors=l),h.length>0&&(e.data.uvs=[h]),e.data.faces=a,e},clone:function(){return(new $i).copy(this)},copy:function(e){var t,r,n,i,o,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var s=e.vertices;for(t=0,r=s.length;t<r;t++)this.vertices.push(s[t].clone());var c=e.colors;for(t=0,r=c.length;t<r;t++)this.colors.push(c[t].clone());var l=e.faces;for(t=0,r=l.length;t<r;t++)this.faces.push(l[t].clone());for(t=0,r=e.faceVertexUvs.length;t<r;t++){var u=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),n=0,i=u.length;n<i;n++){var h=u[n],d=[];for(o=0,a=h.length;o<a;o++){var p=h[o];d.push(p.clone())}this.faceVertexUvs[t].push(d)}}var f=e.morphTargets;for(t=0,r=f.length;t<r;t++){var m={};if(m.name=f[t].name,void 0!==f[t].vertices)for(m.vertices=[],n=0,i=f[t].vertices.length;n<i;n++)m.vertices.push(f[t].vertices[n].clone());if(void 0!==f[t].normals)for(m.normals=[],n=0,i=f[t].normals.length;n<i;n++)m.normals.push(f[t].normals[n].clone());this.morphTargets.push(m)}var g=e.morphNormals;for(t=0,r=g.length;t<r;t++){var v={};if(void 0!==g[t].vertexNormals)for(v.vertexNormals=[],n=0,i=g[t].vertexNormals.length;n<i;n++){var y=g[t].vertexNormals[n],_={};_.a=y.a.clone(),_.b=y.b.clone(),_.c=y.c.clone(),v.vertexNormals.push(_)}if(void 0!==g[t].faceNormals)for(v.faceNormals=[],n=0,i=g[t].faceNormals.length;n<i;n++)v.faceNormals.push(g[t].faceNormals[n].clone());this.morphNormals.push(v)}var b=e.skinWeights;for(t=0,r=b.length;t<r;t++)this.skinWeights.push(b[t].clone());var x=e.skinIndices;for(t=0,r=x.length;t<r;t++)this.skinIndices.push(x[t].clone());var w=e.lineDistances;for(t=0,r=w.length;t<r;t++)this.lineDistances.push(w[t]);var M=e.boundingBox;null!==M&&(this.boundingBox=M.clone());var S=e.boundingSphere;return null!==S&&(this.boundingSphere=S.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});class eo extends $i{constructor(e,t,r,n,i,o){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:n,heightSegments:i,depthSegments:o},this.fromBufferGeometry(new to(e,t,r,n,i,o)),this.mergeVertices()}}class to extends Li{constructor(e,t,r,n,i,o){super(),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:n,heightSegments:i,depthSegments:o};var a=this;e=e||1,t=t||1,r=r||1,n=Math.floor(n)||1,i=Math.floor(i)||1,o=Math.floor(o)||1;var s=[],c=[],l=[],u=[],h=0,d=0;function p(e,t,r,n,i,o,p,f,m,g,v){var y,_,b=o/m,x=p/g,w=o/2,M=p/2,S=f/2,T=m+1,E=g+1,A=0,L=0,R=new Nr;for(_=0;_<E;_++){var P=_*x-M;for(y=0;y<T;y++){var C=y*b-w;R[e]=C*n,R[t]=P*i,R[r]=S,c.push(R.x,R.y,R.z),R[e]=0,R[t]=0,R[r]=f>0?1:-1,l.push(R.x,R.y,R.z),u.push(y/m),u.push(1-_/g),A+=1}}for(_=0;_<g;_++)for(y=0;y<m;y++){var j=h+y+T*_,O=h+y+T*(_+1),D=h+(y+1)+T*(_+1),I=h+(y+1)+T*_;s.push(j,O,I),s.push(O,D,I),L+=6}a.addGroup(d,L,v),d+=L,h+=A}p("z","y","x",-1,-1,r,t,e,o,i,0),p("z","y","x",1,-1,r,t,-e,o,i,1),p("x","z","y",1,1,e,r,t,n,o,2),p("x","z","y",1,-1,e,r,-t,n,o,3),p("x","y","z",1,-1,e,t,r,n,i,4),p("x","y","z",-1,-1,e,t,-r,n,i,5),this.setIndex(s),this.setAttribute("position",new vi(c,3)),this.setAttribute("normal",new vi(l,3)),this.setAttribute("uv",new vi(u,2))}}function ro(e){var t={};for(var r in e)for(var n in t[r]={},e[r]){var i=e[r][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?t[r][n]=i.clone():Array.isArray(i)?t[r][n]=i.slice():t[r][n]=i}return t}function no(e){for(var t={},r=0;r<e.length;r++){var n=ro(e[r]);for(var i in n)t[i]=n[i]}return t}var io={clone:ro,merge:no},oo="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",ao="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";function so(e){ai.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=oo,this.fragmentShader=ao,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function co(){ln.call(this),this.type="Camera",this.matrixWorldInverse=new kr,this.projectionMatrix=new kr,this.projectionMatrixInverse=new kr}function lo(e,t,r,n){co.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==r?r:.1,this.far=void 0!==n?n:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}so.prototype=Object.create(ai.prototype),so.prototype.constructor=so,so.prototype.isShaderMaterial=!0,so.prototype.copy=function(e){return ai.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ro(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},so.prototype.toJSON=function(e){var t=ai.prototype.toJSON.call(this,e);for(var r in t.uniforms={},this.uniforms){var n=this.uniforms[r].value;n&&n.isTexture?t.uniforms[r]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[r]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[r]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[r]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[r]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[r]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[r]={type:"m4",value:n.toArray()}:t.uniforms[r]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;var i={};for(var o in this.extensions)!0===this.extensions[o]&&(i[o]=!0);return Object.keys(i).length>0&&(t.extensions=i),t},co.prototype=Object.assign(Object.create(ln.prototype),{constructor:co,isCamera:!0,copy:function(e,t){return ln.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this},getWorldDirection:function(e){void 0===e&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),e=new Nr),this.updateMatrixWorld(!0);var t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()},updateMatrixWorld:function(e){ln.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(e,t){ln.prototype.updateWorldMatrix.call(this,e,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),lo.prototype=Object.assign(Object.create(co.prototype),{constructor:lo,isPerspectiveCamera:!0,copy:function(e,t){return co.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*Sr.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*Sr.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*Sr.RAD2DEG*Math.atan(Math.tan(.5*Sr.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,r,n,i,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=n,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*Sr.DEG2RAD*this.fov)/this.zoom,r=2*t,n=this.aspect*r,i=-.5*n,o=this.view;if(null!==this.view&&this.view.enabled){var a=o.fullWidth,s=o.fullHeight;i+=o.offsetX*n/a,t-=o.offsetY*r/s,n*=o.width/a,r*=o.height/s}var c=this.filmOffset;0!==c&&(i+=e*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+n,t,t-r,e,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=ln.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}});var uo=90,ho=1;function po(e,t,r,n){ln.call(this),this.type="CubeCamera";var i=new lo(uo,ho,e,t);i.up.set(0,-1,0),i.lookAt(new Nr(1,0,0)),this.add(i);var o=new lo(uo,ho,e,t);o.up.set(0,-1,0),o.lookAt(new Nr(-1,0,0)),this.add(o);var a=new lo(uo,ho,e,t);a.up.set(0,0,1),a.lookAt(new Nr(0,1,0)),this.add(a);var s=new lo(uo,ho,e,t);s.up.set(0,0,-1),s.lookAt(new Nr(0,-1,0)),this.add(s);var c=new lo(uo,ho,e,t);c.up.set(0,-1,0),c.lookAt(new Nr(0,0,1)),this.add(c);var l=new lo(uo,ho,e,t);l.up.set(0,-1,0),l.lookAt(new Nr(0,0,-1)),this.add(l),n=n||{format:He,magFilter:Te,minFilter:Te},this.renderTarget=new fo(r,n),this.renderTarget.texture.name="CubeCamera",this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var r=e.getRenderTarget(),n=this.renderTarget,u=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,i),e.setRenderTarget(n,1),e.render(t,o),e.setRenderTarget(n,2),e.render(t,a),e.setRenderTarget(n,3),e.render(t,s),e.setRenderTarget(n,4),e.render(t,c),n.texture.generateMipmaps=u,e.setRenderTarget(n,5),e.render(t,l),e.setRenderTarget(r)},this.clear=function(e,t,r,n){for(var i=e.getRenderTarget(),o=this.renderTarget,a=0;a<6;a++)e.setRenderTarget(o,a),e.clear(t,r,n);e.setRenderTarget(i)}}function fo(e,t,r){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=r),Cr.call(this,e,e,t)}function mo(e,t,r,n,i,o,a,s,c,l,u,h){Rr.call(this,null,o,a,s,c,l,n,i,u,h),this.image={data:e||null,width:t||1,height:r||1},this.magFilter=void 0!==c?c:be,this.minFilter=void 0!==l?l:be,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}po.prototype=Object.create(ln.prototype),po.prototype.constructor=po,fo.prototype=Object.create(Cr.prototype),fo.prototype.constructor=fo,fo.prototype.isWebGLCubeRenderTarget=!0,fo.prototype.fromEquirectangularTexture=function(e,t){this.texture.type=t.type,this.texture.format=t.format,this.texture.encoding=t.encoding;var r=new un,n={uniforms:{tEquirect:{value:null}},vertexShader:["varying vec3 vWorldDirection;","vec3 transformDirection( in vec3 dir, in mat4 matrix ) {","\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );","}","void main() {","\tvWorldDirection = transformDirection( position, modelMatrix );","\t#include <begin_vertex>","\t#include <project_vertex>","}"].join("\n"),fragmentShader:["uniform sampler2D tEquirect;","varying vec3 vWorldDirection;","#define RECIPROCAL_PI 0.31830988618","#define RECIPROCAL_PI2 0.15915494","void main() {","\tvec3 direction = normalize( vWorldDirection );","\tvec2 sampleUV;","\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;","\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;","\tgl_FragColor = texture2D( tEquirect, sampleUV );","}"].join("\n")},i=new so({type:"CubemapFromEquirect",uniforms:ro(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:v,blending:S});i.uniforms.tEquirect.value=t;var o=new qi(new to(5,5,5),i);r.add(o);var a=new po(1,10,1);return a.renderTarget=this,a.renderTarget.texture.name="CubeCameraTexture",a.update(e,r),o.geometry.dispose(),o.material.dispose(),this},mo.prototype=Object.create(Rr.prototype),mo.prototype.constructor=mo,mo.prototype.isDataTexture=!0;var go=new An,vo=new Nr;function yo(e,t,r,n,i,o){this.planes=[void 0!==e?e:new Fn,void 0!==t?t:new Fn,void 0!==r?r:new Fn,void 0!==n?n:new Fn,void 0!==i?i:new Fn,void 0!==o?o:new Fn]}Object.assign(yo.prototype,{set:function(e,t,r,n,i,o){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(n),a[4].copy(i),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,r=0;r<6;r++)t[r].copy(e.planes[r]);return this},setFromProjectionMatrix:function(e){var t=this.planes,r=e.elements,n=r[0],i=r[1],o=r[2],a=r[3],s=r[4],c=r[5],l=r[6],u=r[7],h=r[8],d=r[9],p=r[10],f=r[11],m=r[12],g=r[13],v=r[14],y=r[15];return t[0].setComponents(a-n,u-s,f-h,y-m).normalize(),t[1].setComponents(a+n,u+s,f+h,y+m).normalize(),t[2].setComponents(a+i,u+c,f+d,y+g).normalize(),t[3].setComponents(a-i,u-c,f-d,y-g).normalize(),t[4].setComponents(a-o,u-l,f-p,y-v).normalize(),t[5].setComponents(a+o,u+l,f+p,y+v).normalize(),this},intersectsObject:function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),go.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(go)},intersectsSprite:function(e){return go.center.set(0,0,0),go.radius=.7071067811865476,go.applyMatrix4(e.matrixWorld),this.intersectsSphere(go)},intersectsSphere:function(e){for(var t=this.planes,r=e.center,n=-e.radius,i=0;i<6;i++){if(t[i].distanceToPoint(r)<n)return!1}return!0},intersectsBox:function(e){for(var t=this.planes,r=0;r<6;r++){var n=t[r];if(vo.x=n.normal.x>0?e.max.x:e.min.x,vo.y=n.normal.y>0?e.max.y:e.min.y,vo.z=n.normal.z>0?e.max.z:e.min.z,n.distanceToPoint(vo)<0)return!1}return!0},containsPoint:function(e){for(var t=this.planes,r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}});var _o={common:{diffuse:{value:new ei(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Er},uv2Transform:{value:new Er},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Tr(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ei(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new ei(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Er}},sprite:{diffuse:{value:new ei(15658734)},opacity:{value:1},center:{value:new Tr(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Er}}};function bo(){var e=null,t=!1,r=null;function n(i,o){!1!==t&&(r(i,o),e.requestAnimationFrame(n))}return{start:function(){!0!==t&&null!==r&&(e.requestAnimationFrame(n),t=!0)},stop:function(){t=!1},setAnimationLoop:function(e){r=e},setContext:function(t){e=t}}}function xo(e,t){var r=t.isWebGL2,n=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),n.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);var r=n.get(t);r&&(e.deleteBuffer(r.buffer),n.delete(t))},update:function(t,i){t.isInterleavedBufferAttribute&&(t=t.data);var o=n.get(t);void 0===o?n.set(t,function(t,r){var n=t.array,i=t.usage,o=e.createBuffer();e.bindBuffer(r,o),e.bufferData(r,n,i),t.onUploadCallback();var a=5126;return n instanceof Float32Array?a=5126:n instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):n instanceof Uint16Array?a=5123:n instanceof Int16Array?a=5122:n instanceof Uint32Array?a=5125:n instanceof Int32Array?a=5124:n instanceof Int8Array?a=5120:n instanceof Uint8Array&&(a=5121),{buffer:o,type:a,bytesPerElement:n.BYTES_PER_ELEMENT,version:t.version}}(t,i)):o.version<t.version&&(!function(t,n,i){var o=n.array,a=n.updateRange;e.bindBuffer(i,t),-1===a.count?e.bufferSubData(i,0,o):(r?e.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o,a.offset,a.count):e.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o.subarray(a.offset,a.offset+a.count)),a.count=-1)}(o.buffer,t,i),o.version=t.version)}}}function wo(e,t,r,n){$i.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:n},this.fromBufferGeometry(new Mo(e,t,r,n)),this.mergeVertices()}function Mo(e,t,r,n){Li.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:n};var i,o,a=(e=e||1)/2,s=(t=t||1)/2,c=Math.floor(r)||1,l=Math.floor(n)||1,u=c+1,h=l+1,d=e/c,p=t/l,f=[],m=[],g=[],v=[];for(o=0;o<h;o++){var y=o*p-s;for(i=0;i<u;i++){var _=i*d-a;m.push(_,-y,0),g.push(0,0,1),v.push(i/c),v.push(1-o/l)}}for(o=0;o<l;o++)for(i=0;i<c;i++){var b=i+u*o,x=i+u*(o+1),w=i+1+u*(o+1),M=i+1+u*o;f.push(b,x,M),f.push(x,w,M)}this.setIndex(f),this.setAttribute("position",new vi(m,3)),this.setAttribute("normal",new vi(g,3)),this.setAttribute("uv",new vi(v,2))}wo.prototype=Object.create($i.prototype),wo.prototype.constructor=wo,Mo.prototype=Object.create(Li.prototype),Mo.prototype.constructor=Mo;var So={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha  = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n  return m[ 2 ][ 3 ] == - 1.0;\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_maxMipLevel 8.0\n#define cubeUV_minMipLevel 4.0\n#define cubeUV_maxTileSize 256.0\n#define cubeUV_minTileSize 16.0\nfloat getFace(vec3 direction) {\n    vec3 absDirection = abs(direction);\n    float face = -1.0;\n    if (absDirection.x > absDirection.z) {\n      if (absDirection.x > absDirection.y)\n        face = direction.x > 0.0 ? 0.0 : 3.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    } else {\n      if (absDirection.z > absDirection.y)\n        face = direction.z > 0.0 ? 2.0 : 5.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    }\n    return face;\n}\nvec2 getUV(vec3 direction, float face) {\n    vec2 uv;\n    if (face == 0.0) {\n      uv = vec2(-direction.z, direction.y) / abs(direction.x);\n    } else if (face == 1.0) {\n      uv = vec2(direction.x, -direction.z) / abs(direction.y);\n    } else if (face == 2.0) {\n      uv = direction.xy / abs(direction.z);\n    } else if (face == 3.0) {\n      uv = vec2(direction.z, direction.y) / abs(direction.x);\n    } else if (face == 4.0) {\n      uv = direction.xz / abs(direction.y);\n    } else {\n      uv = vec2(-direction.x, direction.y) / abs(direction.z);\n    }\n    return 0.5 * (uv + 1.0);\n}\nvec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {\n  float face = getFace(direction);\n  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);\n  mipInt = max(mipInt, cubeUV_minMipLevel);\n  float faceSize = exp2(mipInt);\n  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);\n  vec2 uv = getUV(direction, face) * (faceSize - 1.0);\n  vec2 f = fract(uv);\n  uv += 0.5 - f;\n  if (face > 2.0) {\n    uv.y += faceSize;\n    face -= 3.0;\n  }\n  uv.x += face * faceSize;\n  if(mipInt < cubeUV_maxMipLevel){\n    uv.y += 2.0 * cubeUV_maxTileSize;\n  }\n  uv.y += filterInt * 2.0 * cubeUV_minTileSize;\n  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);\n  uv *= texelSize;\n  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x += texelSize;\n  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.y += texelSize;\n  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x -= texelSize;\n  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  vec3 tm = mix(tl, tr, f.x);\n  vec3 bm = mix(bl, br, f.x);\n  return mix(tm, bm, f.y);\n}\n#define r0 1.0\n#define v0 0.339\n#define m0 -2.0\n#define r1 0.8\n#define v1 0.276\n#define m1 -1.0\n#define r4 0.4\n#define v4 0.046\n#define m4 2.0\n#define r5 0.305\n#define v5 0.016\n#define m5 3.0\n#define r6 0.21\n#define v6 0.0038\n#define m6 4.0\nfloat roughnessToMip(float roughness) {\n  float mip = 0.0;\n  if (roughness >= r1) {\n    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;\n  } else if (roughness >= r4) {\n    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;\n  } else if (roughness >= r5) {\n    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;\n  } else if (roughness >= r6) {\n    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;\n  } else {\n    mip = -2.0 * log2(1.16 * roughness);  }\n  return mip;\n}\nvec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {\n  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);\n  float mipF = fract(mip);\n  float mipInt = floor(mip);\n  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);\n  if (mipF == 0.0) {\n    return vec4(color0, 1.0);\n  } else {\n    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);\n    return vec4(mix(color0, color1, mipF), 1.0);\n  }\n}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\ttransformedNormal = mat3( instanceMatrix ) * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\t\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t}  else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t  vec3 reflectVec = reflect( -viewDir, normal );\n\t\t  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) { \n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = saturate( clearcoat );\tmaterial.clearcoatRoughness = max( clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec3( pointLight.shadow, directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec3( spotLight.shadow, directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec3( directionalLight.shadow, directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\t#endif\n#endif",clearcoat_normalmap_pars_fragment:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= all( bvec2( directionalLight.shadow, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= all( bvec2( spotLight.shadow, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= all( bvec2( pointLight.shadow, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSPARENCY\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSPARENCY\n\tuniform float transparency;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSPARENCY\n\t\tdiffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},To={basic:{uniforms:no([_o.common,_o.specularmap,_o.envmap,_o.aomap,_o.lightmap,_o.fog]),vertexShader:So.meshbasic_vert,fragmentShader:So.meshbasic_frag},lambert:{uniforms:no([_o.common,_o.specularmap,_o.envmap,_o.aomap,_o.lightmap,_o.emissivemap,_o.fog,_o.lights,{emissive:{value:new ei(0)}}]),vertexShader:So.meshlambert_vert,fragmentShader:So.meshlambert_frag},phong:{uniforms:no([_o.common,_o.specularmap,_o.envmap,_o.aomap,_o.lightmap,_o.emissivemap,_o.bumpmap,_o.normalmap,_o.displacementmap,_o.fog,_o.lights,{emissive:{value:new ei(0)},specular:{value:new ei(1118481)},shininess:{value:30}}]),vertexShader:So.meshphong_vert,fragmentShader:So.meshphong_frag},standard:{uniforms:no([_o.common,_o.envmap,_o.aomap,_o.lightmap,_o.emissivemap,_o.bumpmap,_o.normalmap,_o.displacementmap,_o.roughnessmap,_o.metalnessmap,_o.fog,_o.lights,{emissive:{value:new ei(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:So.meshphysical_vert,fragmentShader:So.meshphysical_frag},toon:{uniforms:no([_o.common,_o.specularmap,_o.aomap,_o.lightmap,_o.emissivemap,_o.bumpmap,_o.normalmap,_o.displacementmap,_o.gradientmap,_o.fog,_o.lights,{emissive:{value:new ei(0)},specular:{value:new ei(1118481)},shininess:{value:30}}]),vertexShader:So.meshtoon_vert,fragmentShader:So.meshtoon_frag},matcap:{uniforms:no([_o.common,_o.bumpmap,_o.normalmap,_o.displacementmap,_o.fog,{matcap:{value:null}}]),vertexShader:So.meshmatcap_vert,fragmentShader:So.meshmatcap_frag},points:{uniforms:no([_o.points,_o.fog]),vertexShader:So.points_vert,fragmentShader:So.points_frag},dashed:{uniforms:no([_o.common,_o.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:So.linedashed_vert,fragmentShader:So.linedashed_frag},depth:{uniforms:no([_o.common,_o.displacementmap]),vertexShader:So.depth_vert,fragmentShader:So.depth_frag},normal:{uniforms:no([_o.common,_o.bumpmap,_o.normalmap,_o.displacementmap,{opacity:{value:1}}]),vertexShader:So.normal_vert,fragmentShader:So.normal_frag},sprite:{uniforms:no([_o.sprite,_o.fog]),vertexShader:So.sprite_vert,fragmentShader:So.sprite_frag},background:{uniforms:{uvTransform:{value:new Er},t2D:{value:null}},vertexShader:So.background_vert,fragmentShader:So.background_frag},cube:{uniforms:no([_o.envmap,{opacity:{value:1}}]),vertexShader:So.cube_vert,fragmentShader:So.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:So.equirect_vert,fragmentShader:So.equirect_frag},distanceRGBA:{uniforms:no([_o.common,_o.displacementmap,{referencePosition:{value:new Nr},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:So.distanceRGBA_vert,fragmentShader:So.distanceRGBA_frag},shadow:{uniforms:no([_o.lights,_o.fog,{color:{value:new ei(0)},opacity:{value:1}}]),vertexShader:So.shadow_vert,fragmentShader:So.shadow_frag}};function Eo(e,t,r,n){var i,o,a=new ei(0),s=0,c=null,l=0,u=null;function h(e,r){t.buffers.color.setClear(e.r,e.g,e.b,r,n)}return{getClearColor:function(){return a},setClearColor:function(e,t){a.set(e),h(a,s=void 0!==t?t:1)},getClearAlpha:function(){return s},setClearAlpha:function(e){h(a,s=e)},render:function(t,n,d,p){var f=n.background,m=e.xr,y=m.getSession&&m.getSession();if(y&&"additive"===y.environmentBlendMode&&(f=null),null===f?h(a,s):f&&f.isColor&&(h(f,1),p=!0),(e.autoClear||p)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),f&&(f.isCubeTexture||f.isWebGLCubeRenderTarget||f.mapping===me)){void 0===o&&((o=new qi(new to(1,1,1),new so({type:"BackgroundCubeMaterial",uniforms:ro(To.cube.uniforms),vertexShader:To.cube.vertexShader,fragmentShader:To.cube.fragmentShader,side:v,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),o.geometry.deleteAttribute("uv"),o.onBeforeRender=function(e,t,r){this.matrixWorld.copyPosition(r.matrixWorld)},Object.defineProperty(o.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(o));var _=f.isWebGLCubeRenderTarget?f.texture:f;o.material.uniforms.envMap.value=_,o.material.uniforms.flipEnvMap.value=_.isCubeTexture?-1:1,c===f&&l===_.version&&u===e.toneMapping||(o.material.needsUpdate=!0,c=f,l=_.version,u=e.toneMapping),t.unshift(o,o.geometry,o.material,0,0,null)}else f&&f.isTexture&&(void 0===i&&((i=new qi(new Mo(2,2),new so({type:"BackgroundMaterial",uniforms:ro(To.background.uniforms),vertexShader:To.background.vertexShader,fragmentShader:To.background.fragmentShader,side:g,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(i.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(i)),i.material.uniforms.t2D.value=f,!0===f.matrixAutoUpdate&&f.updateMatrix(),i.material.uniforms.uvTransform.value.copy(f.matrix),c===f&&l===f.version&&u===e.toneMapping||(i.material.needsUpdate=!0,c=f,l=f.version,u=e.toneMapping),t.unshift(i,i.geometry,i.material,0,0,null))}}}function Ao(e,t,r,n){var i,o=n.isWebGL2;this.setMode=function(e){i=e},this.render=function(t,n){e.drawArrays(i,t,n),r.update(n,i)},this.renderInstances=function(n,a,s,c){if(0!==c){var l,u;if(o)l=e,u="drawArraysInstanced";else if(u="drawArraysInstancedANGLE",null===(l=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[u](i,a,s,c),r.update(s,i,c)}}}function Lo(e,t,r){var n;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var o="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&e instanceof WebGL2ComputeRenderingContext,a=void 0!==r.precision?r.precision:"highp",s=i(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);var c=!0===r.logarithmicDepthBuffer,l=e.getParameter(34930),u=e.getParameter(35660),h=e.getParameter(3379),d=e.getParameter(34076),p=e.getParameter(34921),f=e.getParameter(36347),m=e.getParameter(36348),g=e.getParameter(36349),v=u>0,y=o||!!t.get("OES_texture_float");return{isWebGL2:o,getMaxAnisotropy:function(){if(void 0!==n)return n;var r=t.get("EXT_texture_filter_anisotropic");return n=null!==r?e.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:c,maxTextures:l,maxVertexTextures:u,maxTextureSize:h,maxCubemapSize:d,maxAttributes:p,maxVertexUniforms:f,maxVaryings:m,maxFragmentUniforms:g,vertexTextures:v,floatFragmentTextures:y,floatVertexTextures:v&&y,maxSamples:o?e.getParameter(36183):0}}function Ro(){var e=this,t=null,r=0,n=!1,i=!1,o=new Fn,a=new Er,s={value:null,needsUpdate:!1};function c(){s.value!==t&&(s.value=t,s.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function l(t,r,n,i){var c=null!==t?t.length:0,l=null;if(0!==c){if(l=s.value,!0!==i||null===l){var u=n+4*c,h=r.matrixWorldInverse;a.getNormalMatrix(h),(null===l||l.length<u)&&(l=new Float32Array(u));for(var d=0,p=n;d!==c;++d,p+=4)o.copy(t[d]).applyMatrix4(h,a),o.normal.toArray(l,p),l[p+3]=o.constant}s.value=l,s.needsUpdate=!0}return e.numPlanes=c,l}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(e,i,o){var a=0!==e.length||i||0!==r||n;return n=i,t=l(e,o,0),r=e.length,a},this.beginShadows=function(){i=!0,l(null)},this.endShadows=function(){i=!1,c()},this.setState=function(e,o,a,u,h,d){if(!n||null===e||0===e.length||i&&!a)i?l(null):c();else{var p=i?0:r,f=4*p,m=h.clippingState||null;s.value=m,m=l(e,u,f,d);for(var g=0;g!==f;++g)m[g]=t[g];h.clippingState=m,this.numIntersection=o?this.numPlanes:0,this.numPlanes+=p}}}function Po(e){var t={};return{get:function(r){if(void 0!==t[r])return t[r];var n;switch(r){case"WEBGL_depth_texture":n=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=e.getExtension(r)}return null===n&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),t[r]=n,n}}}function Co(e,t,r){var n=new WeakMap,i=new WeakMap;function o(e){var a=e.target,s=n.get(a);for(var c in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[c]);a.removeEventListener("dispose",o),n.delete(a);var l=i.get(s);l&&(t.remove(l),i.delete(s)),r.memory.geometries--}function a(e){var r=[],n=e.index,o=e.attributes.position,a=0;if(null!==n){var s=n.array;a=n.version;for(var c=0,l=s.length;c<l;c+=3){var u=s[c+0],h=s[c+1],d=s[c+2];r.push(u,h,h,d,d,u)}}else{s=o.array;a=o.version;for(c=0,l=s.length/3-1;c<l;c+=3){u=c+0,h=c+1,d=c+2;r.push(u,h,h,d,d,u)}}var p=new(bi(r)>65535?gi:fi)(r,1);p.version=a,t.update(p,34963);var f=i.get(e);f&&t.remove(f),i.set(e,p)}return{get:function(e,t){var i=n.get(t);return i||(t.addEventListener("dispose",o),t.isBufferGeometry?i=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new Li).setFromObject(e)),i=t._bufferGeometry),n.set(t,i),r.memory.geometries++,i)},update:function(e){var r=e.index,n=e.attributes;for(var i in null!==r&&t.update(r,34963),n)t.update(n[i],34962);var o=e.morphAttributes;for(var i in o)for(var a=o[i],s=0,c=a.length;s<c;s++)t.update(a[s],34962)},getWireframeAttribute:function(e){var t=i.get(e);if(t){var r=e.index;null!==r&&t.version<r.version&&a(e)}else a(e);return i.get(e)}}}function jo(e,t,r,n){var i,o,a,s=n.isWebGL2;this.setMode=function(e){i=e},this.setIndex=function(e){o=e.type,a=e.bytesPerElement},this.render=function(t,n){e.drawElements(i,n,o,t*a),r.update(n,i)},this.renderInstances=function(n,c,l,u){if(0!==u){var h,d;if(s)h=e,d="drawElementsInstanced";else if(d="drawElementsInstancedANGLE",null===(h=t.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");h[d](i,l,o,c*a,u),r.update(l,i,u)}}}function Oo(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,r,n){switch(n=n||1,t.calls++,r){case 4:t.triangles+=n*(e/3);break;case 1:t.lines+=n*(e/2);break;case 3:t.lines+=n*(e-1);break;case 2:t.lines+=n*e;break;case 0:t.points+=n*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r)}}}}function Do(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Io(e){var t={},r=new Float32Array(8);return{update:function(n,i,o,a){var s=n.morphTargetInfluences,c=void 0===s?0:s.length,l=t[i.id];if(void 0===l){l=[];for(var u=0;u<c;u++)l[u]=[u,0];t[i.id]=l}var h=o.morphTargets&&i.morphAttributes.position,d=o.morphNormals&&i.morphAttributes.normal;for(u=0;u<c;u++){0!==(f=l[u])[1]&&(h&&i.deleteAttribute("morphTarget"+u),d&&i.deleteAttribute("morphNormal"+u))}for(u=0;u<c;u++){(f=l[u])[0]=u,f[1]=s[u]}l.sort(Do);var p=0;for(u=0;u<8;u++){var f;if(f=l[u]){var m=f[0],g=f[1];if(g){h&&i.setAttribute("morphTarget"+u,h[m]),d&&i.setAttribute("morphNormal"+u,d[m]),r[u]=g,p+=g;continue}}r[u]=0}var v=i.morphTargetsRelative?1:1-p;a.getUniforms().setValue(e,"morphTargetBaseInfluence",v),a.getUniforms().setValue(e,"morphTargetInfluences",r)}}}function No(e,t,r,n){var i={};return{update:function(e){var o=n.render.frame,a=e.geometry,s=t.get(e,a);return i[s.id]!==o&&(a.isGeometry&&s.updateFromObject(e),t.update(s),i[s.id]=o),e.isInstancedMesh&&r.update(e.instanceMatrix,34962),s},dispose:function(){i={}}}}function Uo(e,t,r,n,i,o,a,s,c,l){e=void 0!==e?e:[],t=void 0!==t?t:ue,a=void 0!==a?a:He,Rr.call(this,e,t,r,n,i,o,a,s,c,l),this.flipY=!1}function zo(e,t,r,n){Rr.call(this,null),this.image={data:e||null,width:t||1,height:r||1,depth:n||1},this.magFilter=be,this.minFilter=be,this.wrapR=ye,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}function Fo(e,t,r,n){Rr.call(this,null),this.image={data:e||null,width:t||1,height:r||1,depth:n||1},this.magFilter=be,this.minFilter=be,this.wrapR=ye,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}To.physical={uniforms:no([To.standard.uniforms,{transparency:{value:0},clearcoat:{value:0},clearcoatRoughness:{value:0},sheen:{value:new ei(0)},clearcoatNormalScale:{value:new Tr(1,1)},clearcoatNormalMap:{value:null}}]),vertexShader:So.meshphysical_vert,fragmentShader:So.meshphysical_frag},Uo.prototype=Object.create(Rr.prototype),Uo.prototype.constructor=Uo,Uo.prototype.isCubeTexture=!0,Object.defineProperty(Uo.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}}),zo.prototype=Object.create(Rr.prototype),zo.prototype.constructor=zo,zo.prototype.isDataTexture2DArray=!0,Fo.prototype=Object.create(Rr.prototype),Fo.prototype.constructor=Fo,Fo.prototype.isDataTexture3D=!0;var Bo=new Rr,Go=new zo,Vo=new Fo,Ho=new Uo,ko=[],Wo=[],qo=new Float32Array(16),Xo=new Float32Array(9),Yo=new Float32Array(4);function Zo(e,t,r){var n=e[0];if(n<=0||n>0)return e;var i=t*r,o=ko[i];if(void 0===o&&(o=new Float32Array(i),ko[i]=o),0!==t){n.toArray(o,0);for(var a=1,s=0;a!==t;++a)s+=r,e[a].toArray(o,s)}return o}function Jo(e,t){if(e.length!==t.length)return!1;for(var r=0,n=e.length;r<n;r++)if(e[r]!==t[r])return!1;return!0}function Ko(e,t){for(var r=0,n=t.length;r<n;r++)e[r]=t[r]}function Qo(e,t){var r=Wo[t];void 0===r&&(r=new Int32Array(t),Wo[t]=r);for(var n=0;n!==t;++n)r[n]=e.allocateTextureUnit();return r}function $o(e,t){var r=this.cache;r[0]!==t&&(e.uniform1f(this.addr,t),r[0]=t)}function ea(e,t){var r=this.cache;if(void 0!==t.x)r[0]===t.x&&r[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),r[0]=t.x,r[1]=t.y);else{if(Jo(r,t))return;e.uniform2fv(this.addr,t),Ko(r,t)}}function ta(e,t){var r=this.cache;if(void 0!==t.x)r[0]===t.x&&r[1]===t.y&&r[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),r[0]=t.x,r[1]=t.y,r[2]=t.z);else if(void 0!==t.r)r[0]===t.r&&r[1]===t.g&&r[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),r[0]=t.r,r[1]=t.g,r[2]=t.b);else{if(Jo(r,t))return;e.uniform3fv(this.addr,t),Ko(r,t)}}function ra(e,t){var r=this.cache;if(void 0!==t.x)r[0]===t.x&&r[1]===t.y&&r[2]===t.z&&r[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=t.w);else{if(Jo(r,t))return;e.uniform4fv(this.addr,t),Ko(r,t)}}function na(e,t){var r=this.cache,n=t.elements;if(void 0===n){if(Jo(r,t))return;e.uniformMatrix2fv(this.addr,!1,t),Ko(r,t)}else{if(Jo(r,n))return;Yo.set(n),e.uniformMatrix2fv(this.addr,!1,Yo),Ko(r,n)}}function ia(e,t){var r=this.cache,n=t.elements;if(void 0===n){if(Jo(r,t))return;e.uniformMatrix3fv(this.addr,!1,t),Ko(r,t)}else{if(Jo(r,n))return;Xo.set(n),e.uniformMatrix3fv(this.addr,!1,Xo),Ko(r,n)}}function oa(e,t){var r=this.cache,n=t.elements;if(void 0===n){if(Jo(r,t))return;e.uniformMatrix4fv(this.addr,!1,t),Ko(r,t)}else{if(Jo(r,n))return;qo.set(n),e.uniformMatrix4fv(this.addr,!1,qo),Ko(r,n)}}function aa(e,t,r){var n=this.cache,i=r.allocateTextureUnit();n[0]!==i&&(e.uniform1i(this.addr,i),n[0]=i),r.safeSetTexture2D(t||Bo,i)}function sa(e,t,r){var n=this.cache,i=r.allocateTextureUnit();n[0]!==i&&(e.uniform1i(this.addr,i),n[0]=i),r.setTexture2DArray(t||Go,i)}function ca(e,t,r){var n=this.cache,i=r.allocateTextureUnit();n[0]!==i&&(e.uniform1i(this.addr,i),n[0]=i),r.setTexture3D(t||Vo,i)}function la(e,t,r){var n=this.cache,i=r.allocateTextureUnit();n[0]!==i&&(e.uniform1i(this.addr,i),n[0]=i),r.safeSetTextureCube(t||Ho,i)}function ua(e,t){var r=this.cache;r[0]!==t&&(e.uniform1i(this.addr,t),r[0]=t)}function ha(e,t){var r=this.cache;Jo(r,t)||(e.uniform2iv(this.addr,t),Ko(r,t))}function da(e,t){var r=this.cache;Jo(r,t)||(e.uniform3iv(this.addr,t),Ko(r,t))}function pa(e,t){var r=this.cache;Jo(r,t)||(e.uniform4iv(this.addr,t),Ko(r,t))}function fa(e,t){var r=this.cache;r[0]!==t&&(e.uniform1ui(this.addr,t),r[0]=t)}function ma(e,t){e.uniform1fv(this.addr,t)}function ga(e,t){e.uniform1iv(this.addr,t)}function va(e,t){e.uniform2iv(this.addr,t)}function ya(e,t){e.uniform3iv(this.addr,t)}function _a(e,t){e.uniform4iv(this.addr,t)}function ba(e,t){var r=Zo(t,this.size,2);e.uniform2fv(this.addr,r)}function xa(e,t){var r=Zo(t,this.size,3);e.uniform3fv(this.addr,r)}function wa(e,t){var r=Zo(t,this.size,4);e.uniform4fv(this.addr,r)}function Ma(e,t){var r=Zo(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,r)}function Sa(e,t){var r=Zo(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,r)}function Ta(e,t){var r=Zo(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,r)}function Ea(e,t,r){var n=t.length,i=Qo(r,n);e.uniform1iv(this.addr,i);for(var o=0;o!==n;++o)r.safeSetTexture2D(t[o]||Bo,i[o])}function Aa(e,t,r){var n=t.length,i=Qo(r,n);e.uniform1iv(this.addr,i);for(var o=0;o!==n;++o)r.safeSetTextureCube(t[o]||Ho,i[o])}function La(e,t,r){this.id=e,this.addr=r,this.cache=[],this.setValue=function(e){switch(e){case 5126:return $o;case 35664:return ea;case 35665:return ta;case 35666:return ra;case 35674:return na;case 35675:return ia;case 35676:return oa;case 5124:case 35670:return ua;case 35667:case 35671:return ha;case 35668:case 35672:return da;case 35669:case 35673:return pa;case 5125:return fa;case 35678:case 36198:case 36298:case 36306:case 35682:return aa;case 35679:case 36299:case 36307:return ca;case 35680:case 36300:case 36308:case 36293:return la;case 36289:case 36303:case 36311:case 36292:return sa}}(t.type)}function Ra(e,t,r){this.id=e,this.addr=r,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return ma;case 35664:return ba;case 35665:return xa;case 35666:return wa;case 35674:return Ma;case 35675:return Sa;case 35676:return Ta;case 5124:case 35670:return ga;case 35667:case 35671:return va;case 35668:case 35672:return ya;case 35669:case 35673:return _a;case 35678:case 36198:case 36298:case 36306:case 35682:return Ea;case 35680:case 36300:case 36308:case 36293:return Aa}}(t.type)}function Pa(e){this.id=e,this.seq=[],this.map={}}Ra.prototype.updateCache=function(e){var t=this.cache;e instanceof Float32Array&&t.length!==e.length&&(this.cache=new Float32Array(e.length)),Ko(t,e)},Pa.prototype.setValue=function(e,t,r){for(var n=this.seq,i=0,o=n.length;i!==o;++i){var a=n[i];a.setValue(e,t[a.id],r)}};var Ca=/([\w\d_]+)(\])?(\[|\.)?/g;function ja(e,t){e.seq.push(t),e.map[t.id]=t}function Oa(e,t,r){var n=e.name,i=n.length;for(Ca.lastIndex=0;;){var o=Ca.exec(n),a=Ca.lastIndex,s=o[1],c="]"===o[2],l=o[3];if(c&&(s|=0),void 0===l||"["===l&&a+2===i){ja(r,void 0===l?new La(s,e,t):new Ra(s,e,t));break}var u=r.map[s];void 0===u&&ja(r,u=new Pa(s)),r=u}}function Da(e,t){this.seq=[],this.map={};for(var r=e.getProgramParameter(t,35718),n=0;n<r;++n){var i=e.getActiveUniform(t,n);Oa(i,e.getUniformLocation(t,i.name),this)}}function Ia(e,t,r){var n=e.createShader(t);return e.shaderSource(n,r),e.compileShader(n),n}Da.prototype.setValue=function(e,t,r,n){var i=this.map[t];void 0!==i&&i.setValue(e,r,n)},Da.prototype.setOptional=function(e,t,r){var n=t[r];void 0!==n&&this.setValue(e,r,n)},Da.upload=function(e,t,r,n){for(var i=0,o=t.length;i!==o;++i){var a=t[i],s=r[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,n)}},Da.seqWithValue=function(e,t){for(var r=[],n=0,i=e.length;n!==i;++n){var o=e[n];o.id in t&&r.push(o)}return r};var Na=0;function Ua(e){switch(e){case Ut:return["Linear","( value )"];case zt:return["sRGB","( value )"];case Bt:return["RGBE","( value )"];case Vt:return["RGBM","( value, 7.0 )"];case Ht:return["RGBM","( value, 16.0 )"];case kt:return["RGBD","( value, 256.0 )"];case Ft:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case Gt:return["LogLuv","( value )"];default:throw new Error("unsupported encoding: "+e)}}function za(e,t,r){var n=e.getShaderParameter(t,35713),i=e.getShaderInfoLog(t).trim();return n&&""===i?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+r+"\n"+i+function(e){for(var t=e.split("\n"),r=0;r<t.length;r++)t[r]=r+1+": "+t[r];return t.join("\n")}(e.getShaderSource(t))}function Fa(e,t){var r=Ua(t);return"vec4 "+e+"( vec4 value ) { return "+r[0]+"ToLinear"+r[1]+"; }"}function Ba(e,t){var r;switch(t){case ie:r="Linear";break;case oe:r="Reinhard";break;case ae:r="Uncharted2";break;case se:r="OptimizedCineon";break;case ce:r="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+r+"ToneMapping( color ); }"}function Ga(e){return""!==e}function Va(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function Ha(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var ka=/^[ \t]*#include +<([\w\d./]+)>/gm;function Wa(e){return e.replace(ka,qa)}function qa(e,t){var r=So[t];if(void 0===r)throw new Error("Can not resolve #include <"+t+">");return Wa(r)}var Xa=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;function Ya(e){return e.replace(Xa,Za)}function Za(e,t,r,n){for(var i="",o=parseInt(t);o<parseInt(r);o++)i+=n.replace(/\[ i \]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function Ja(e){var t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function Ka(e,t,r){var n,i,o,a,s,c=e.getContext(),l=r.defines,u=r.vertexShader,h=r.fragmentShader,d=function(e){var t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===p?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===f?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===m&&(t="SHADOWMAP_TYPE_VSM"),t}(r),g=function(e){var t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case ue:case he:t="ENVMAP_TYPE_CUBE";break;case me:case ge:t="ENVMAP_TYPE_CUBE_UV";break;case de:case pe:t="ENVMAP_TYPE_EQUIREC";break;case fe:t="ENVMAP_TYPE_SPHERE"}return t}(r),v=function(e){var t="ENVMAP_MODE_REFLECTION";if(e.envMap)switch(e.envMapMode){case he:case pe:t="ENVMAP_MODE_REFRACTION"}return t}(r),y=function(e){var t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case ee:t="ENVMAP_BLENDING_MULTIPLY";break;case te:t="ENVMAP_BLENDING_MIX";break;case re:t="ENVMAP_BLENDING_ADD"}return t}(r),_=e.gammaFactor>0?e.gammaFactor:1,b=r.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUV||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ga).join("\n")}(r),x=function(e){var t=[];for(var r in e){var n=e[r];!1!==n&&t.push("#define "+r+" "+n)}return t.join("\n")}(l),w=c.createProgram(),M=r.numMultiviewViews;if(r.isRawShaderMaterial?((n=[x].filter(Ga).join("\n")).length>0&&(n+="\n"),(i=[b,x].filter(Ga).join("\n")).length>0&&(i+="\n")):(n=[Ja(r),"#define SHADER_NAME "+r.shaderName,x,r.instancing?"#define USE_INSTANCING":"",r.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+_,"#define MAX_BONES "+r.maxBones,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+v:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.normalMap&&r.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.displacementMap&&r.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors?"#define USE_COLOR":"",r.vertexUvs?"#define USE_UV":"",r.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.useVertexTexture?"#define BONE_TEXTURE":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&!1===r.flatShading?"#define USE_MORPHNORMALS":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+d:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING"," attribute mat4 instanceMatrix;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Ga).join("\n"),i=[b,Ja(r),"#define SHADER_NAME "+r.shaderName,x,r.alphaTest?"#define ALPHATEST "+r.alphaTest+(r.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+_,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp2?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.matcap?"#define USE_MATCAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+g:"",r.envMap?"#define "+v:"",r.envMap?"#define "+y:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.normalMap&&r.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",r.normalMap&&r.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",r.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.sheen?"#define USE_SHEEN":"",r.vertexTangents?"#define USE_TANGENT":"",r.vertexColors?"#define USE_COLOR":"",r.vertexUvs?"#define USE_UV":"",r.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"",r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+d:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&r.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(r.extensionShaderTextureLOD||r.envMap)&&r.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",r.toneMapping!==ne?"#define TONE_MAPPING":"",r.toneMapping!==ne?So.tonemapping_pars_fragment:"",r.toneMapping!==ne?Ba("toneMapping",r.toneMapping):"",r.dithering?"#define DITHERING":"",r.outputEncoding||r.mapEncoding||r.matcapEncoding||r.envMapEncoding||r.emissiveMapEncoding||r.lightMapEncoding?So.encodings_pars_fragment:"",r.mapEncoding?Fa("mapTexelToLinear",r.mapEncoding):"",r.matcapEncoding?Fa("matcapTexelToLinear",r.matcapEncoding):"",r.envMapEncoding?Fa("envMapTexelToLinear",r.envMapEncoding):"",r.emissiveMapEncoding?Fa("emissiveMapTexelToLinear",r.emissiveMapEncoding):"",r.lightMapEncoding?Fa("lightMapTexelToLinear",r.lightMapEncoding):"",r.outputEncoding?(o="linearToOutputTexel",a=r.outputEncoding,s=Ua(a),"vec4 "+o+"( vec4 value ) { return LinearTo"+s[0]+s[1]+"; }"):"",r.depthPacking?"#define DEPTH_PACKING "+r.depthPacking:"","\n"].filter(Ga).join("\n")),u=Ha(u=Va(u=Wa(u),r),r),h=Ha(h=Va(h=Wa(h),r),r),u=Ya(u),h=Ya(h),r.isWebGL2&&!r.isRawShaderMaterial){var S=!1,T=/^\s*#version\s+300\s+es\s*\n/;r.isShaderMaterial&&null!==u.match(T)&&null!==h.match(T)&&(S=!0,u=u.replace(T,""),h=h.replace(T,"")),n=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+n,i=["#version 300 es\n","#define varying in",S?"":"out highp vec4 pc_fragColor;",S?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+i,M>0&&(n=(n=n.replace("#version 300 es\n",["#version 300 es\n","#extension GL_OVR_multiview2 : require","layout(num_views = "+M+") in;","#define VIEW_ID gl_ViewID_OVR"].join("\n"))).replace(["uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;"].join("\n"),["uniform mat4 modelViewMatrices["+M+"];","uniform mat4 projectionMatrices["+M+"];","uniform mat4 viewMatrices["+M+"];","uniform mat3 normalMatrices["+M+"];","#define modelViewMatrix modelViewMatrices[VIEW_ID]","#define projectionMatrix projectionMatrices[VIEW_ID]","#define viewMatrix viewMatrices[VIEW_ID]","#define normalMatrix normalMatrices[VIEW_ID]"].join("\n")),i=(i=i.replace("#version 300 es\n",["#version 300 es\n","#extension GL_OVR_multiview2 : require","#define VIEW_ID gl_ViewID_OVR"].join("\n"))).replace("uniform mat4 viewMatrix;",["uniform mat4 viewMatrices["+M+"];","#define viewMatrix viewMatrices[VIEW_ID]"].join("\n")))}var E,A,L=i+h,R=Ia(c,35633,n+u),P=Ia(c,35632,L);if(c.attachShader(w,R),c.attachShader(w,P),void 0!==r.index0AttributeName?c.bindAttribLocation(w,0,r.index0AttributeName):!0===r.morphTargets&&c.bindAttribLocation(w,0,"position"),c.linkProgram(w),e.debug.checkShaderErrors){var C=c.getProgramInfoLog(w).trim(),j=c.getShaderInfoLog(R).trim(),O=c.getShaderInfoLog(P).trim(),D=!0,I=!0;if(!1===c.getProgramParameter(w,35714)){D=!1;var N=za(c,R,"vertex"),U=za(c,P,"fragment");console.error("THREE.WebGLProgram: shader error: ",c.getError(),"35715",c.getProgramParameter(w,35715),"gl.getProgramInfoLog",C,N,U)}else""!==C?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",C):""!==j&&""!==O||(I=!1);I&&(this.diagnostics={runnable:D,programLog:C,vertexShader:{log:j,prefix:n},fragmentShader:{log:O,prefix:i}})}return c.deleteShader(R),c.deleteShader(P),this.getUniforms=function(){return void 0===E&&(E=new Da(c,w)),E},this.getAttributes=function(){return void 0===A&&(A=function(e,t){for(var r={},n=e.getProgramParameter(t,35721),i=0;i<n;i++){var o=e.getActiveAttrib(t,i).name;r[o]=e.getAttribLocation(t,o)}return r}(c,w)),A},this.destroy=function(){c.deleteProgram(w),this.program=void 0},this.name=r.shaderName,this.id=Na++,this.cacheKey=t,this.usedTimes=1,this.program=w,this.vertexShader=R,this.fragmentShader=P,this.numMultiviewViews=M,this}function Qa(e,t,r){var n=[],i=r.isWebGL2,o=r.logarithmicDepthBuffer,a=r.floatVertexTextures,s=r.precision,c=r.maxVertexUniforms,l=r.vertexTextures,u={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},h=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","numMultiviewViews","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen"];function d(e){var t;return e?e.isTexture?t=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=Ut,t}this.getParameters=function(n,h,p,f,m,g,_){var b=f.fog,x=n.isMeshStandardMaterial?f.environment:null,w=n.envMap||x,M=u[n.type],S=_.isSkinnedMesh?function(e){var t=e.skeleton.bones;if(a)return 1024;var r=c,n=Math.floor((r-20)/4),i=Math.min(n,t.length);return i<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+i+"."),0):i}(_):0;null!==n.precision&&(s=r.getMaxPrecision(n.precision))!==n.precision&&console.warn("THREE.WebGLProgram.getParameters:",n.precision,"not supported, using",s,"instead.");var T=function(e,t){var r;if(t){var n=To[t];r={name:e.type,uniforms:io.clone(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader}}else r={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};return r}(n,M);n.onBeforeCompile(T,e);var E=e.getRenderTarget(),A=E&&E.isWebGLMultiviewRenderTarget?E.numViews:0;return{isWebGL2:i,shaderID:M,shaderName:T.name,uniforms:T.uniforms,vertexShader:T.vertexShader,fragmentShader:T.fragmentShader,defines:n.defines,isRawShaderMaterial:n.isRawShaderMaterial,isShaderMaterial:n.isShaderMaterial,precision:s,instancing:!0===_.isInstancedMesh,supportsVertexTextures:l,numMultiviewViews:A,outputEncoding:null!==E?d(E.texture):e.outputEncoding,map:!!n.map,mapEncoding:d(n.map),matcap:!!n.matcap,matcapEncoding:d(n.matcap),envMap:!!w,envMapMode:w&&w.mapping,envMapEncoding:d(w),envMapCubeUV:!!w&&(w.mapping===me||w.mapping===ge),lightMap:!!n.lightMap,lightMapEncoding:d(n.lightMap),aoMap:!!n.aoMap,emissiveMap:!!n.emissiveMap,emissiveMapEncoding:d(n.emissiveMap),bumpMap:!!n.bumpMap,normalMap:!!n.normalMap,objectSpaceNormalMap:n.normalMapType===Yt,tangentSpaceNormalMap:n.normalMapType===Xt,clearcoatNormalMap:!!n.clearcoatNormalMap,displacementMap:!!n.displacementMap,roughnessMap:!!n.roughnessMap,metalnessMap:!!n.metalnessMap,specularMap:!!n.specularMap,alphaMap:!!n.alphaMap,gradientMap:!!n.gradientMap,sheen:!!n.sheen,combine:n.combine,vertexTangents:n.normalMap&&n.vertexTangents,vertexColors:n.vertexColors,vertexUvs:!!(n.map||n.bumpMap||n.normalMap||n.specularMap||n.alphaMap||n.emissiveMap||n.roughnessMap||n.metalnessMap||n.clearcoatNormalMap||n.displacementMap),uvsVertexOnly:!(n.map||n.bumpMap||n.normalMap||n.specularMap||n.alphaMap||n.emissiveMap||n.roughnessMap||n.metalnessMap||n.clearcoatNormalMap||!n.displacementMap),fog:!!b,useFog:n.fog,fogExp2:b&&b.isFogExp2,flatShading:n.flatShading,sizeAttenuation:n.sizeAttenuation,logarithmicDepthBuffer:o,skinning:n.skinning&&S>0,maxBones:S,useVertexTexture:a,morphTargets:n.morphTargets,morphNormals:n.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:h.directional.length,numPointLights:h.point.length,numSpotLights:h.spot.length,numRectAreaLights:h.rectArea.length,numHemiLights:h.hemi.length,numDirLightShadows:h.directionalShadowMap.length,numPointLightShadows:h.pointShadowMap.length,numSpotLightShadows:h.spotShadowMap.length,numClippingPlanes:m,numClipIntersection:g,dithering:n.dithering,shadowMapEnabled:e.shadowMap.enabled&&p.length>0,shadowMapType:e.shadowMap.type,toneMapping:n.toneMapped?e.toneMapping:ne,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:n.premultipliedAlpha,alphaTest:n.alphaTest,doubleSided:n.side===y,flipSided:n.side===v,depthPacking:void 0!==n.depthPacking&&n.depthPacking,index0AttributeName:n.index0AttributeName,extensionDerivatives:n.extensions&&n.extensions.derivatives,extensionFragDepth:n.extensions&&n.extensions.frawbuffers,extensionDrawbuffers:n.extensions&&n.extensions.drawbuffers,extensionShaderTextureLOD:n.extensions&&n.extensions.shaderTextureLOD,rendererExtensionFragDepth:i||null!==t.get("EXT_frag_depth"),rendererExtensionDrawBuffers:i||null!==t.get("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:i||null!==t.get("EXT_shader_texture_lod"),onBeforeCompile:n.onBeforeCompile}},this.getProgramCacheKey=function(t){var r=[];if(t.shaderID?r.push(t.shaderID):(r.push(t.fragmentShader),r.push(t.vertexShader)),void 0!==t.defines)for(var n in t.defines)r.push(n),r.push(t.defines[n]);if(void 0===t.isRawShaderMaterial){for(var i=0;i<h.length;i++)r.push(t[h[i]]);r.push(e.outputEncoding),r.push(e.gammaFactor)}return r.push(t.onBeforeCompile.toString()),r.join()},this.acquireProgram=function(t,r){for(var i,o=0,a=n.length;o<a;o++){var s=n[o];if(s.cacheKey===r){++(i=s).usedTimes;break}}return void 0===i&&(i=new Ka(e,r,t),n.push(i)),i},this.releaseProgram=function(e){if(0==--e.usedTimes){var t=n.indexOf(e);n[t]=n[n.length-1],n.pop(),e.destroy()}},this.programs=n}function $a(){var e=new WeakMap;return{get:function(t){var r=e.get(t);return void 0===r&&(r={},e.set(t,r)),r},remove:function(t){e.delete(t)},update:function(t,r,n){e.get(t)[r]=n},dispose:function(){e=new WeakMap}}}function es(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function ts(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function rs(){var e=[],t=0,r=[],n=[],i={id:-1};function o(r,n,o,a,s,c){var l=e[t];return void 0===l?(l={id:r.id,object:r,geometry:n,material:o,program:o.program||i,groupOrder:a,renderOrder:r.renderOrder,z:s,group:c},e[t]=l):(l.id=r.id,l.object=r,l.geometry=n,l.material=o,l.program=o.program||i,l.groupOrder=a,l.renderOrder=r.renderOrder,l.z=s,l.group=c),t++,l}return{opaque:r,transparent:n,init:function(){t=0,r.length=0,n.length=0},push:function(e,t,i,a,s,c){var l=o(e,t,i,a,s,c);(!0===i.transparent?n:r).push(l)},unshift:function(e,t,i,a,s,c){var l=o(e,t,i,a,s,c);(!0===i.transparent?n:r).unshift(l)},sort:function(e,t){r.length>1&&r.sort(e||es),n.length>1&&n.sort(t||ts)}}}function ns(){var e=new WeakMap;function t(r){var n=r.target;n.removeEventListener("dispose",t),e.delete(n)}return{get:function(r,n){var i,o=e.get(r);return void 0===o?(i=new rs,e.set(r,new WeakMap),e.get(r).set(n,i),r.addEventListener("dispose",t)):void 0===(i=o.get(n))&&(i=new rs,o.set(n,i)),i},dispose:function(){e=new WeakMap}}}function is(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var r;switch(t.type){case"DirectionalLight":r={direction:new Nr,color:new ei,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Tr};break;case"SpotLight":r={position:new Nr,direction:new Nr,color:new ei,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Tr};break;case"PointLight":r={position:new Nr,color:new ei,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Tr,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":r={direction:new Nr,skyColor:new ei,groundColor:new ei};break;case"RectAreaLight":r={color:new ei,position:new Nr,halfWidth:new Nr,halfHeight:new Nr}}return e[t.id]=r,r}}}var os=0;function as(e,t){return(t.castShadow?1:0)-(e.castShadow?1:0)}function ss(){for(var e=new is,t={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},r=0;r<9;r++)t.probe.push(new Nr);var n=new Nr,i=new kr,o=new kr;return{setup:function(r,a,s){for(var c=0,l=0,u=0,h=0;h<9;h++)t.probe[h].set(0,0,0);var d=0,p=0,f=0,m=0,g=0,v=0,y=0,_=0,b=s.matrixWorldInverse;r.sort(as),h=0;for(var x=r.length;h<x;h++){var w=r[h],M=w.color,S=w.intensity,T=w.distance,E=w.shadow&&w.shadow.map?w.shadow.map.texture:null;if(w.isAmbientLight)c+=M.r*S,l+=M.g*S,u+=M.b*S;else if(w.isLightProbe)for(var A=0;A<9;A++)t.probe[A].addScaledVector(w.sh.coefficients[A],S);else if(w.isDirectionalLight){if((R=e.get(w)).color.copy(w.color).multiplyScalar(w.intensity),R.direction.setFromMatrixPosition(w.matrixWorld),n.setFromMatrixPosition(w.target.matrixWorld),R.direction.sub(n),R.direction.transformDirection(b),R.shadow=w.castShadow,w.castShadow){var L=w.shadow;R.shadowBias=L.bias,R.shadowRadius=L.radius,R.shadowMapSize=L.mapSize,t.directionalShadowMap[d]=E,t.directionalShadowMatrix[d]=w.shadow.matrix,v++}t.directional[d]=R,d++}else if(w.isSpotLight){if((R=e.get(w)).position.setFromMatrixPosition(w.matrixWorld),R.position.applyMatrix4(b),R.color.copy(M).multiplyScalar(S),R.distance=T,R.direction.setFromMatrixPosition(w.matrixWorld),n.setFromMatrixPosition(w.target.matrixWorld),R.direction.sub(n),R.direction.transformDirection(b),R.coneCos=Math.cos(w.angle),R.penumbraCos=Math.cos(w.angle*(1-w.penumbra)),R.decay=w.decay,R.shadow=w.castShadow,w.castShadow){L=w.shadow;R.shadowBias=L.bias,R.shadowRadius=L.radius,R.shadowMapSize=L.mapSize,t.spotShadowMap[f]=E,t.spotShadowMatrix[f]=w.shadow.matrix,_++}t.spot[f]=R,f++}else if(w.isRectAreaLight){(R=e.get(w)).color.copy(M).multiplyScalar(S),R.position.setFromMatrixPosition(w.matrixWorld),R.position.applyMatrix4(b),o.identity(),i.copy(w.matrixWorld),i.premultiply(b),o.extractRotation(i),R.halfWidth.set(.5*w.width,0,0),R.halfHeight.set(0,.5*w.height,0),R.halfWidth.applyMatrix4(o),R.halfHeight.applyMatrix4(o),t.rectArea[m]=R,m++}else if(w.isPointLight){if((R=e.get(w)).position.setFromMatrixPosition(w.matrixWorld),R.position.applyMatrix4(b),R.color.copy(w.color).multiplyScalar(w.intensity),R.distance=w.distance,R.decay=w.decay,R.shadow=w.castShadow,w.castShadow){L=w.shadow;R.shadowBias=L.bias,R.shadowRadius=L.radius,R.shadowMapSize=L.mapSize,R.shadowCameraNear=L.camera.near,R.shadowCameraFar=L.camera.far,t.pointShadowMap[p]=E,t.pointShadowMatrix[p]=w.shadow.matrix,y++}t.point[p]=R,p++}else if(w.isHemisphereLight){var R;(R=e.get(w)).direction.setFromMatrixPosition(w.matrixWorld),R.direction.transformDirection(b),R.direction.normalize(),R.skyColor.copy(w.color).multiplyScalar(S),R.groundColor.copy(w.groundColor).multiplyScalar(S),t.hemi[g]=R,g++}}t.ambient[0]=c,t.ambient[1]=l,t.ambient[2]=u;var P=t.hash;P.directionalLength===d&&P.pointLength===p&&P.spotLength===f&&P.rectAreaLength===m&&P.hemiLength===g&&P.numDirectionalShadows===v&&P.numPointShadows===y&&P.numSpotShadows===_||(t.directional.length=d,t.spot.length=f,t.rectArea.length=m,t.point.length=p,t.hemi.length=g,t.directionalShadowMap.length=v,t.pointShadowMap.length=y,t.spotShadowMap.length=_,t.directionalShadowMatrix.length=v,t.pointShadowMatrix.length=y,t.spotShadowMatrix.length=_,P.directionalLength=d,P.pointLength=p,P.spotLength=f,P.rectAreaLength=m,P.hemiLength=g,P.numDirectionalShadows=v,P.numPointShadows=y,P.numSpotShadows=_,t.version=os++)},state:t}}function cs(){var e=new ss,t=[],r=[];return{init:function(){t.length=0,r.length=0},state:{lightsArray:t,shadowsArray:r,lights:e},setupLights:function(n){e.setup(t,r,n)},pushLight:function(e){t.push(e)},pushShadow:function(e){r.push(e)}}}function ls(){var e=new WeakMap;function t(r){var n=r.target;n.removeEventListener("dispose",t),e.delete(n)}return{get:function(r,n){var i;return!1===e.has(r)?(i=new cs,e.set(r,new WeakMap),e.get(r).set(n,i),r.addEventListener("dispose",t)):!1===e.get(r).has(n)?(i=new cs,e.get(r).set(n,i)):i=e.get(r).get(n),i},dispose:function(){e=new WeakMap}}}function us(e){ai.call(this),this.type="MeshDepthMaterial",this.depthPacking=Wt,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(e)}function hs(e){ai.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Nr,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(e)}us.prototype=Object.create(ai.prototype),us.prototype.constructor=us,us.prototype.isMeshDepthMaterial=!0,us.prototype.copy=function(e){return ai.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},hs.prototype=Object.create(ai.prototype),hs.prototype.constructor=hs,hs.prototype.isMeshDistanceMaterial=!0,hs.prototype.copy=function(e){return ai.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this};var ds="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n  float mean = 0.0;\n  float squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );\n  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n    #ifdef HORIZONAL_PASS\n      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n      mean += distribution.x;\n      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n    #else\n      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );\n      mean += depth;\n      squared_mean += depth * depth;\n    #endif\n  }\n  mean = mean * HALF_SAMPLE_RATE;\n  squared_mean = squared_mean * HALF_SAMPLE_RATE;\n  float std_dev = sqrt( squared_mean - mean * mean );\n  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}",ps="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}";function fs(e,t,r){var n=new yo,i=new Tr,o=new Tr,a=new Pr,s=[],c=[],l={},u={0:v,1:g,2:y},h=new so({defines:{SAMPLE_RATE:.25,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Tr},radius:{value:4}},vertexShader:ps,fragmentShader:ds}),d=h.clone();d.defines.HORIZONAL_PASS=1;var f=new Li;f.setAttribute("position",new li(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var _=new qi(f,h),b=this;function x(r,n){var i=t.update(_);h.uniforms.shadow_pass.value=r.map.texture,h.uniforms.resolution.value=r.mapSize,h.uniforms.radius.value=r.radius,e.setRenderTarget(r.mapPass),e.clear(),e.renderBufferDirect(n,null,i,h,_,null),d.uniforms.shadow_pass.value=r.mapPass.texture,d.uniforms.resolution.value=r.mapSize,d.uniforms.radius.value=r.radius,e.setRenderTarget(r.map),e.clear(),e.renderBufferDirect(n,null,i,d,_,null)}function w(e,t,r){var n=e<<0|t<<1|r<<2,i=s[n];return void 0===i&&(i=new us({depthPacking:qt,morphTargets:e,skinning:t}),s[n]=i),i}function M(e,t,r){var n=e<<0|t<<1|r<<2,i=c[n];return void 0===i&&(i=new hs({morphTargets:e,skinning:t}),c[n]=i),i}function T(t,r,n,i,o,a){var s=t.geometry,c=null,h=w,d=t.customDepthMaterial;if(!0===n.isPointLight&&(h=M,d=t.customDistanceMaterial),void 0===d){var p=!1;!0===r.morphTargets&&(!0===s.isBufferGeometry?p=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0:!0===s.isGeometry&&(p=s.morphTargets&&s.morphTargets.length>0));var f=!1;!0===t.isSkinnedMesh&&(!0===r.skinning?f=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t)),c=h(p,f,!0===t.isInstancedMesh)}else c=d;if(e.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length){var g=c.uuid,v=r.uuid,y=l[g];void 0===y&&(y={},l[g]=y);var _=y[v];void 0===_&&(_=c.clone(),y[v]=_),c=_}return c.visible=r.visible,c.wireframe=r.wireframe,c.side=a===m?null!==r.shadowSide?r.shadowSide:r.side:null!==r.shadowSide?r.shadowSide:u[r.side],c.clipShadows=r.clipShadows,c.clippingPlanes=r.clippingPlanes,c.clipIntersection=r.clipIntersection,c.wireframeLinewidth=r.wireframeLinewidth,c.linewidth=r.linewidth,!0===n.isPointLight&&!0===c.isMeshDistanceMaterial&&(c.referencePosition.setFromMatrixPosition(n.matrixWorld),c.nearDistance=i,c.farDistance=o),c}function E(r,i,o,a,s){if(!1!==r.visible){if(r.layers.test(i.layers)&&(r.isMesh||r.isLine||r.isPoints)&&(r.castShadow||r.receiveShadow&&s===m)&&(!r.frustumCulled||n.intersectsObject(r))){r.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,r.matrixWorld);var c=t.update(r),l=r.material;if(Array.isArray(l))for(var u=c.groups,h=0,d=u.length;h<d;h++){var p=u[h],f=l[p.materialIndex];if(f&&f.visible){var g=T(r,f,a,o.near,o.far,s);e.renderBufferDirect(o,null,c,g,r,p)}}else if(l.visible){g=T(r,l,a,o.near,o.far,s);e.renderBufferDirect(o,null,c,g,r,null)}}for(var v=r.children,y=0,_=v.length;y<_;y++)E(v[y],i,o,a,s)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=p,this.render=function(t,s,c){if(!1!==b.enabled&&(!1!==b.autoUpdate||!1!==b.needsUpdate)&&0!==t.length){var l=e.getRenderTarget(),u=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),d=e.state;d.setBlending(S),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(var p=0,f=t.length;p<f;p++){var g=t[p],v=g.shadow;if(void 0!==v){i.copy(v.mapSize);var y=v.getFrameExtents();if(i.multiply(y),o.copy(v.mapSize),(i.x>r||i.y>r)&&(console.warn("THREE.WebGLShadowMap:",g,"has shadow exceeding max texture size, reducing"),i.x>r&&(o.x=Math.floor(r/y.x),i.x=o.x*y.x,v.mapSize.x=o.x),i.y>r&&(o.y=Math.floor(r/y.y),i.y=o.y*y.y,v.mapSize.y=o.y)),null===v.map&&!v.isPointLightShadow&&this.type===m){var _={minFilter:Te,magFilter:Te,format:ke};v.map=new Cr(i.x,i.y,_),v.map.texture.name=g.name+".shadowMap",v.mapPass=new Cr(i.x,i.y,_),v.camera.updateProjectionMatrix()}if(null===v.map){_={minFilter:be,magFilter:be,format:ke};v.map=new Cr(i.x,i.y,_),v.map.texture.name=g.name+".shadowMap",v.camera.updateProjectionMatrix()}e.setRenderTarget(v.map),e.clear();for(var w=v.getViewportCount(),M=0;M<w;M++){var T=v.getViewport(M);a.set(o.x*T.x,o.y*T.y,o.x*T.z,o.y*T.w),d.viewport(a),v.updateMatrices(g,M),n=v.getFrustum(),E(s,c,v.camera,g,this.type)}v.isPointLightShadow||this.type!==m||x(v,c)}else console.warn("THREE.WebGLShadowMap:",g,"has no shadow.")}b.needsUpdate=!1,e.setRenderTarget(l,u,h)}}}function ms(e,t,r){var n=r.isWebGL2;var i=new function(){var t=!1,r=new Pr,n=null,i=new Pr(0,0,0,0);return{setMask:function(r){n===r||t||(e.colorMask(r,r,r,r),n=r)},setLocked:function(e){t=e},setClear:function(t,n,o,a,s){!0===s&&(t*=a,n*=a,o*=a),r.set(t,n,o,a),!1===i.equals(r)&&(e.clearColor(t,n,o,a),i.copy(r))},reset:function(){t=!1,n=null,i.set(-1,0,0,0)}}},o=new function(){var t=!1,r=null,n=null,i=null;return{setTest:function(e){e?_e(2929):be(2929)},setMask:function(n){r===n||t||(e.depthMask(n),r=n)},setFunc:function(t){if(n!==t){if(t)switch(t){case q:e.depthFunc(512);break;case X:e.depthFunc(519);break;case Y:e.depthFunc(513);break;case Z:e.depthFunc(515);break;case J:e.depthFunc(514);break;case K:e.depthFunc(518);break;case Q:e.depthFunc(516);break;case $:e.depthFunc(517);break;default:e.depthFunc(515)}else e.depthFunc(515);n=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,r=null,n=null,i=null}}},l=new function(){var t=!1,r=null,n=null,i=null,o=null,a=null,s=null,c=null,l=null;return{setTest:function(e){t||(e?_e(2960):be(2960))},setMask:function(n){r===n||t||(e.stencilMask(n),r=n)},setFunc:function(t,r,a){n===t&&i===r&&o===a||(e.stencilFunc(t,r,a),n=t,i=r,o=a)},setOp:function(t,r,n){a===t&&s===r&&c===n||(e.stencilOp(t,r,n),a=t,s=r,c=n)},setLocked:function(e){t=e},setClear:function(t){l!==t&&(e.clearStencil(t),l=t)},reset:function(){t=!1,r=null,n=null,i=null,o=null,a=null,s=null,c=null,l=null}}},u=e.getParameter(34921),h=new Uint8Array(u),d=new Uint8Array(u),p=new Uint8Array(u),f={},m=null,g=null,_=null,b=null,x=null,w=null,M=null,ee=null,te=null,re=!1,ne=null,ie=null,oe=null,ae=null,se=null,ce=e.getParameter(35661),le=!1,ue=0,he=e.getParameter(7938);-1!==he.indexOf("WebGL")?(ue=parseFloat(/^WebGL\ ([0-9])/.exec(he)[1]),le=ue>=1):-1!==he.indexOf("OpenGL ES")&&(ue=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(he)[1]),le=ue>=2);var de=null,pe={},fe=new Pr,me=new Pr;function ge(t,r,n){var i=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(var a=0;a<n;a++)e.texImage2D(r+a,0,6408,1,1,0,6408,5121,i);return o}var ve={};function ye(r,i){(h[r]=1,0===d[r]&&(e.enableVertexAttribArray(r),d[r]=1),p[r]!==i)&&((n?e:t.get("ANGLE_instanced_arrays"))[n?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](r,i),p[r]=i)}function _e(t){!0!==f[t]&&(e.enable(t),f[t]=!0)}function be(t){!1!==f[t]&&(e.disable(t),f[t]=!1)}ve[3553]=ge(3553,3553,1),ve[34067]=ge(34067,34069,6),i.setClear(0,0,0,1),o.setClear(1),l.setClear(0),_e(2929),o.setFunc(Z),Te(!1),Ee(s),_e(2884),Se(S);var xe={[P]:32774,[C]:32778,[j]:32779};if(n)xe[O]=32775,xe[D]=32776;else{var we=t.get("EXT_blend_minmax");null!==we&&(xe[O]=we.MIN_EXT,xe[D]=we.MAX_EXT)}var Me={[I]:0,[N]:1,[U]:768,[F]:770,[W]:776,[H]:774,[G]:772,[z]:769,[B]:771,[k]:775,[V]:773};function Se(t,r,n,i,o,a,s,c){if(t!==S){if(g||(_e(3042),g=!0),t===R)o=o||r,a=a||n,s=s||i,r===b&&o===M||(e.blendEquationSeparate(xe[r],xe[o]),b=r,M=o),n===x&&i===w&&a===ee&&s===te||(e.blendFuncSeparate(Me[n],Me[i],Me[a],Me[s]),x=n,w=i,ee=a,te=s),_=t,re=null;else if(t!==_||c!==re){if(b===P&&M===P||(e.blendEquation(32774),b=P,M=P),c)switch(t){case T:e.blendFuncSeparate(1,771,1,771);break;case E:e.blendFunc(1,1);break;case A:e.blendFuncSeparate(0,0,769,771);break;case L:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case T:e.blendFuncSeparate(770,771,1,771);break;case E:e.blendFunc(770,1);break;case A:e.blendFunc(0,769);break;case L:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}x=null,w=null,ee=null,te=null,_=t,re=c}}else g&&(be(3042),g=!1)}function Te(t){ne!==t&&(t?e.frontFace(2304):e.frontFace(2305),ne=t)}function Ee(t){t!==a?(_e(2884),t!==ie&&(t===s?e.cullFace(1029):t===c?e.cullFace(1028):e.cullFace(1032))):be(2884),ie=t}function Ae(t,r,n){t?(_e(32823),ae===r&&se===n||(e.polygonOffset(r,n),ae=r,se=n)):be(32823)}function Le(t){void 0===t&&(t=33984+ce-1),de!==t&&(e.activeTexture(t),de=t)}return{buffers:{color:i,depth:o,stencil:l},initAttributes:function(){for(var e=0,t=h.length;e<t;e++)h[e]=0},enableAttribute:function(e){ye(e,0)},enableAttributeAndDivisor:ye,disableUnusedAttributes:function(){for(var t=0,r=d.length;t!==r;++t)d[t]!==h[t]&&(e.disableVertexAttribArray(t),d[t]=0)},enable:_e,disable:be,useProgram:function(t){return m!==t&&(e.useProgram(t),m=t,!0)},setBlending:Se,setMaterial:function(e,t){e.side===y?be(2884):_e(2884);var r=e.side===v;t&&(r=!r),Te(r),e.blending===T&&!1===e.transparent?Se(S):Se(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),o.setFunc(e.depthFunc),o.setTest(e.depthTest),o.setMask(e.depthWrite),i.setMask(e.colorWrite);var n=e.stencilWrite;l.setTest(n),n&&(l.setMask(e.stencilWriteMask),l.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),l.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),Ae(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)},setFlipSided:Te,setCullFace:Ee,setLineWidth:function(t){t!==oe&&(le&&e.lineWidth(t),oe=t)},setPolygonOffset:Ae,setScissorTest:function(e){e?_e(3089):be(3089)},activeTexture:Le,bindTexture:function(t,r){null===de&&Le();var n=pe[de];void 0===n&&(n={type:void 0,texture:void 0},pe[de]=n),n.type===t&&n.texture===r||(e.bindTexture(t,r||ve[t]),n.type=t,n.texture=r)},unbindTexture:function(){var t=pe[de];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===fe.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),fe.copy(t))},viewport:function(t){!1===me.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),me.copy(t))},reset:function(){for(var t=0;t<d.length;t++)1===d[t]&&(e.disableVertexAttribArray(t),d[t]=0);f={},de=null,pe={},m=null,_=null,ne=null,ie=null,i.reset(),o.reset(),l.reset()}}}function gs(e,t,r,n,i,o,a){var s,c=i.isWebGL2,l=i.maxTextures,u=i.maxCubemapSize,h=i.maxTextureSize,d=i.maxSamples,p=new WeakMap,f=!1;try{f="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function m(e,t){return f?new OffscreenCanvas(e,t):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function g(e,t,r,n){var i=1;if((e.width>n||e.height>n)&&(i=n/Math.max(e.width,e.height)),i<1||!0===t){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){var o=t?Sr.floorPowerOfTwo:Math.floor,a=o(i*e.width),c=o(i*e.height);void 0===s&&(s=m(a,c));var l=r?m(a,c):s;return l.width=a,l.height=c,l.getContext("2d").drawImage(e,0,0,a,c),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+a+"x"+c+")."),l}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function v(e){return Sr.isPowerOfTwo(e.width)&&Sr.isPowerOfTwo(e.height)}function y(e,t){return e.generateMipmaps&&t&&e.minFilter!==be&&e.minFilter!==Te}function _(t,r,i,o){e.generateMipmap(t),n.get(r).__maxMipLevel=Math.log(Math.max(i,o))*Math.LOG2E}function b(r,n,i){if(!1===c)return n;if(null!==r){if(void 0!==e[r])return e[r];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+r+"'")}var o=n;return 6403===n&&(5126===i&&(o=33326),5131===i&&(o=33325),5121===i&&(o=33321)),6407===n&&(5126===i&&(o=34837),5131===i&&(o=34843),5121===i&&(o=32849)),6408===n&&(5126===i&&(o=34836),5131===i&&(o=34842),5121===i&&(o=32856)),33325===o||33326===o||34842===o||34836===o?t.get("EXT_color_buffer_float"):34843!==o&&34837!==o||console.warn("THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead."),o}function x(e){return e===be||e===xe||e===Me?9728:9729}function w(t){var r=t.target;r.removeEventListener("dispose",w),function(t){var r=n.get(t);if(void 0===r.__webglInit)return;e.deleteTexture(r.__webglTexture),n.remove(t)}(r),r.isVideoTexture&&p.delete(r),a.memory.textures--}function M(t){var r=t.target;r.removeEventListener("dispose",M),function(t){var r=n.get(t),i=n.get(t.texture);if(!t)return;void 0!==i.__webglTexture&&e.deleteTexture(i.__webglTexture);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(var o=0;o<6;o++)e.deleteFramebuffer(r.__webglFramebuffer[o]),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer[o]);else e.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer);if(t.isWebGLMultiviewRenderTarget){e.deleteTexture(r.__webglColorTexture),e.deleteTexture(r.__webglDepthStencilTexture),a.memory.textures-=2;o=0;for(var s=r.__webglViewFramebuffers.length;o<s;o++)e.deleteFramebuffer(r.__webglViewFramebuffers[o])}n.remove(t.texture),n.remove(t)}(r),a.memory.textures--}var S=0;function T(e,t){var i=n.get(e);if(e.isVideoTexture&&function(e){var t=a.render.frame;p.get(e)!==t&&(p.set(e,t),e.update())}(e),e.version>0&&i.__version!==e.version){var o=e.image;if(void 0===o)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==o.complete)return void j(i,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}r.activeTexture(33984+t),r.bindTexture(3553,i.__webglTexture)}function E(t,i){if(6===t.image.length){var a=n.get(t);if(t.version>0&&a.__version!==t.version){C(a,t),r.activeTexture(33984+i),r.bindTexture(34067,a.__webglTexture),e.pixelStorei(37440,t.flipY);for(var s=t&&(t.isCompressedTexture||t.image[0].isCompressedTexture),l=t.image[0]&&t.image[0].isDataTexture,h=[],d=0;d<6;d++)h[d]=s||l?l?t.image[d].image:t.image[d]:g(t.image[d],!1,!0,u);var p,f=h[0],m=v(f)||c,x=o.convert(t.format),w=o.convert(t.type),M=b(t.internalFormat,x,w);if(P(34067,t,m),s){for(d=0;d<6;d++){p=h[d].mipmaps;for(var S=0;S<p.length;S++){var T=p[S];t.format!==ke&&t.format!==He?null!==x?r.compressedTexImage2D(34069+d,S,M,T.width,T.height,0,T.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):r.texImage2D(34069+d,S,M,T.width,T.height,0,x,w,T.data)}}a.__maxMipLevel=p.length-1}else{p=t.mipmaps;for(d=0;d<6;d++)if(l){r.texImage2D(34069+d,0,M,h[d].width,h[d].height,0,x,w,h[d].data);for(S=0;S<p.length;S++){var E=(T=p[S]).image[d].image;r.texImage2D(34069+d,S+1,M,E.width,E.height,0,x,w,E.data)}}else{r.texImage2D(34069+d,0,M,x,w,h[d]);for(S=0;S<p.length;S++){T=p[S];r.texImage2D(34069+d,S+1,M,x,w,T.image[d])}}a.__maxMipLevel=p.length}y(t,m)&&_(34067,t,f.width,f.height),a.__version=t.version,t.onUpdate&&t.onUpdate(t)}else r.activeTexture(33984+i),r.bindTexture(34067,a.__webglTexture)}}function A(e,t){r.activeTexture(33984+t),r.bindTexture(34067,n.get(e).__webglTexture)}var L={[ve]:10497,[ye]:33071,[_e]:33648},R={[be]:9728,[xe]:9984,[Me]:9986,[Te]:9729,[Ee]:9985,[Le]:9987};function P(r,o,a){a?(e.texParameteri(r,10242,L[o.wrapS]),e.texParameteri(r,10243,L[o.wrapT]),32879!==r&&35866!==r||e.texParameteri(r,32882,L[o.wrapR]),e.texParameteri(r,10240,R[o.magFilter]),e.texParameteri(r,10241,R[o.minFilter])):(e.texParameteri(r,10242,33071),e.texParameteri(r,10243,33071),32879!==r&&35866!==r||e.texParameteri(r,32882,33071),o.wrapS===ye&&o.wrapT===ye||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(r,10240,x(o.magFilter)),e.texParameteri(r,10241,x(o.minFilter)),o.minFilter!==be&&o.minFilter!==Te&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));var s=t.get("EXT_texture_filter_anisotropic");if(s){if(o.type===Ne&&null===t.get("OES_texture_float_linear"))return;if(o.type===Ue&&null===(c||t.get("OES_texture_half_float_linear")))return;(o.anisotropy>1||n.get(o).__currentAnisotropy)&&(e.texParameterf(r,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),n.get(o).__currentAnisotropy=o.anisotropy)}}function C(t,r){void 0===t.__webglInit&&(t.__webglInit=!0,r.addEventListener("dispose",w),t.__webglTexture=e.createTexture(),a.memory.textures++)}function j(t,n,i){var a=3553;n.isDataTexture2DArray&&(a=35866),n.isDataTexture3D&&(a=32879),C(t,n),r.activeTexture(33984+i),r.bindTexture(a,t.__webglTexture),e.pixelStorei(37440,n.flipY),e.pixelStorei(37441,n.premultiplyAlpha),e.pixelStorei(3317,n.unpackAlignment);var s=function(e){return!c&&(e.wrapS!==ye||e.wrapT!==ye||e.minFilter!==be&&e.minFilter!==Te)}(n)&&!1===v(n.image),l=g(n.image,s,!1,h),u=v(l)||c,d=o.convert(n.format),p=o.convert(n.type),f=b(n.internalFormat,d,p);P(a,n,u);var m,x=n.mipmaps;if(n.isDepthTexture){if(f=6402,n.type===Ne){if(!1===c)throw new Error("Float Depth Texture only supported in WebGL2.0");f=36012}else c&&(f=33189);n.format===Ye&&6402===f&&n.type!==Oe&&n.type!==Ie&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),n.type=Oe,p=o.convert(n.type)),n.format===Ze&&(f=34041,n.type!==Ge&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),n.type=Ge,p=o.convert(n.type))),r.texImage2D(3553,0,f,l.width,l.height,0,d,p,null)}else if(n.isDataTexture)if(x.length>0&&u){for(var w=0,M=x.length;w<M;w++)m=x[w],r.texImage2D(3553,w,f,m.width,m.height,0,d,p,m.data);n.generateMipmaps=!1,t.__maxMipLevel=x.length-1}else r.texImage2D(3553,0,f,l.width,l.height,0,d,p,l.data),t.__maxMipLevel=0;else if(n.isCompressedTexture){for(w=0,M=x.length;w<M;w++)m=x[w],n.format!==ke&&n.format!==He?null!==d?r.compressedTexImage2D(3553,w,f,m.width,m.height,0,m.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):r.texImage2D(3553,w,f,m.width,m.height,0,d,p,m.data);t.__maxMipLevel=x.length-1}else if(n.isDataTexture2DArray)r.texImage3D(35866,0,f,l.width,l.height,l.depth,0,d,p,l.data),t.__maxMipLevel=0;else if(n.isDataTexture3D)r.texImage3D(32879,0,f,l.width,l.height,l.depth,0,d,p,l.data),t.__maxMipLevel=0;else if(x.length>0&&u){for(w=0,M=x.length;w<M;w++)m=x[w],r.texImage2D(3553,w,f,d,p,m);n.generateMipmaps=!1,t.__maxMipLevel=x.length-1}else r.texImage2D(3553,0,f,d,p,l),t.__maxMipLevel=0;y(n,u)&&_(a,n,l.width,l.height),t.__version=n.version,n.onUpdate&&n.onUpdate(n)}function O(t,i,a,s){var c=o.convert(i.texture.format),l=o.convert(i.texture.type),u=b(i.texture.internalFormat,c,l);r.texImage2D(s,0,u,i.width,i.height,0,c,l,null),e.bindFramebuffer(36160,t),e.framebufferTexture2D(36160,a,s,n.get(i.texture).__webglTexture,0),e.bindFramebuffer(36160,null)}function D(t,r,n){if(e.bindRenderbuffer(36161,t),r.depthBuffer&&!r.stencilBuffer){if(n){var i=N(r);e.renderbufferStorageMultisample(36161,i,33189,r.width,r.height)}else e.renderbufferStorage(36161,33189,r.width,r.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(r.depthBuffer&&r.stencilBuffer){if(n){i=N(r);e.renderbufferStorageMultisample(36161,i,35056,r.width,r.height)}else e.renderbufferStorage(36161,34041,r.width,r.height);e.framebufferRenderbuffer(36160,33306,36161,t)}else{var a=o.convert(r.texture.format),s=o.convert(r.texture.type),c=b(r.texture.internalFormat,a,s);if(n){i=N(r);e.renderbufferStorageMultisample(36161,i,c,r.width,r.height)}else e.renderbufferStorage(36161,c,r.width,r.height)}e.bindRenderbuffer(36161,null)}function I(t){var r=n.get(t),i=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,r){if(r&&r.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(36160,t),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");n.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),T(r.depthTexture,0);var i=n.get(r.depthTexture).__webglTexture;if(r.depthTexture.format===Ye)e.framebufferTexture2D(36160,36096,3553,i,0);else{if(r.depthTexture.format!==Ze)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(36160,33306,3553,i,0)}}(r.__webglFramebuffer,t)}else if(i){r.__webglDepthbuffer=[];for(var o=0;o<6;o++)e.bindFramebuffer(36160,r.__webglFramebuffer[o]),r.__webglDepthbuffer[o]=e.createRenderbuffer(),D(r.__webglDepthbuffer[o],t)}else e.bindFramebuffer(36160,r.__webglFramebuffer),r.__webglDepthbuffer=e.createRenderbuffer(),D(r.__webglDepthbuffer,t);e.bindFramebuffer(36160,null)}function N(e){return c&&e.isWebGLMultisampleRenderTarget?Math.min(d,e.samples):0}var U=!1,z=!1;this.allocateTextureUnit=function(){var e=S;return e>=l&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+l),S+=1,e},this.resetTextureUnits=function(){S=0},this.setTexture2D=T,this.setTexture2DArray=function(e,t){var i=n.get(e);e.version>0&&i.__version!==e.version?j(i,e,t):(r.activeTexture(33984+t),r.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(e,t){var i=n.get(e);e.version>0&&i.__version!==e.version?j(i,e,t):(r.activeTexture(33984+t),r.bindTexture(32879,i.__webglTexture))},this.setTextureCube=E,this.setTextureCubeDynamic=A,this.setupRenderTarget=function(i){var s=n.get(i),l=n.get(i.texture);i.addEventListener("dispose",M),l.__webglTexture=e.createTexture(),a.memory.textures++;var u=!0===i.isWebGLCubeRenderTarget,h=!0===i.isWebGLMultisampleRenderTarget,d=!0===i.isWebGLMultiviewRenderTarget,p=v(i)||c;if(u){s.__webglFramebuffer=[];for(var f=0;f<6;f++)s.__webglFramebuffer[f]=e.createFramebuffer()}else if(s.__webglFramebuffer=e.createFramebuffer(),h)if(c){s.__webglMultisampledFramebuffer=e.createFramebuffer(),s.__webglColorRenderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,s.__webglColorRenderbuffer);var m=o.convert(i.texture.format),g=o.convert(i.texture.type),x=b(i.texture.internalFormat,m,g),w=N(i);e.renderbufferStorageMultisample(36161,w,x,i.width,i.height),e.bindFramebuffer(36160,s.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064,36161,s.__webglColorRenderbuffer),e.bindRenderbuffer(36161,null),i.depthBuffer&&(s.__webglDepthRenderbuffer=e.createRenderbuffer(),D(s.__webglDepthRenderbuffer,i,!0)),e.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");else if(d){var S=i.width,T=i.height,E=i.numViews;e.bindFramebuffer(36160,s.__webglFramebuffer);var A=t.get("OVR_multiview2");a.memory.textures+=2;var L=e.createTexture();e.bindTexture(35866,L),e.texParameteri(35866,10240,9728),e.texParameteri(35866,10241,9728),e.texImage3D(35866,0,32856,S,T,E,0,6408,5121,null),A.framebufferTextureMultiviewOVR(36160,36064,L,0,0,E);var R=e.createTexture();e.bindTexture(35866,R),e.texParameteri(35866,10240,9728),e.texParameteri(35866,10241,9728),e.texImage3D(35866,0,35056,S,T,E,0,34041,34042,null),A.framebufferTextureMultiviewOVR(36160,33306,R,0,0,E);var C=new Array(E);for(f=0;f<E;++f)C[f]=e.createFramebuffer(),e.bindFramebuffer(36160,C[f]),e.framebufferTextureLayer(36160,36064,L,0,f);s.__webglColorTexture=L,s.__webglDepthStencilTexture=R,s.__webglViewFramebuffers=C,e.bindFramebuffer(36160,null),e.bindTexture(35866,null)}if(u){r.bindTexture(34067,l.__webglTexture),P(34067,i.texture,p);for(f=0;f<6;f++)O(s.__webglFramebuffer[f],i,36064,34069+f);y(i.texture,p)&&_(34067,i.texture,i.width,i.height),r.bindTexture(34067,null)}else d||(r.bindTexture(3553,l.__webglTexture),P(3553,i.texture,p),O(s.__webglFramebuffer,i,36064,3553),y(i.texture,p)&&_(3553,i.texture,i.width,i.height),r.bindTexture(3553,null));i.depthBuffer&&I(i)},this.updateRenderTargetMipmap=function(e){var t=e.texture;if(y(t,v(e)||c)){var i=e.isWebGLCubeRenderTarget?34067:3553,o=n.get(t).__webglTexture;r.bindTexture(i,o),_(i,t,e.width,e.height),r.bindTexture(i,null)}},this.updateMultisampleRenderTarget=function(t){if(t.isWebGLMultisampleRenderTarget)if(c){var r=n.get(t);e.bindFramebuffer(36008,r.__webglMultisampledFramebuffer),e.bindFramebuffer(36009,r.__webglFramebuffer);var i=t.width,o=t.height,a=16384;t.depthBuffer&&(a|=256),t.stencilBuffer&&(a|=1024),e.blitFramebuffer(0,0,i,o,0,0,i,o,a,9728)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(e,t){e&&e.isWebGLRenderTarget&&(!1===U&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),U=!0),e=e.texture),T(e,t)},this.safeSetTextureCube=function(e,t){e&&e.isWebGLCubeRenderTarget&&(!1===z&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),z=!0),e=e.texture),e&&e.isCubeTexture||Array.isArray(e.image)&&6===e.image.length?E(e,t):A(e,t)}}function vs(e,t,r){var n=r.isWebGL2;return{convert:function(e){var r;if(e===Pe)return 5121;if(e===ze)return 32819;if(e===Fe)return 32820;if(e===Be)return 33635;if(e===Ce)return 5120;if(e===je)return 5122;if(e===Oe)return 5123;if(e===De)return 5124;if(e===Ie)return 5125;if(e===Ne)return 5126;if(e===Ue)return n?5131:null!==(r=t.get("OES_texture_half_float"))?r.HALF_FLOAT_OES:null;if(e===Ve)return 6406;if(e===He)return 6407;if(e===ke)return 6408;if(e===We)return 6409;if(e===qe)return 6410;if(e===Ye)return 6402;if(e===Ze)return 34041;if(e===Je)return 6403;if(e===Ke)return 36244;if(e===Qe)return 33319;if(e===$e)return 33320;if(e===et)return 36248;if(e===tt)return 36249;if(e===rt||e===nt||e===it||e===ot){if(null===(r=t.get("WEBGL_compressed_texture_s3tc")))return null;if(e===rt)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===nt)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===it)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===ot)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(e===at||e===st||e===ct||e===lt){if(null===(r=t.get("WEBGL_compressed_texture_pvrtc")))return null;if(e===at)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===st)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===ct)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===lt)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}return e===ut?null!==(r=t.get("WEBGL_compressed_texture_etc1"))?r.COMPRESSED_RGB_ETC1_WEBGL:null:e===ht||e===dt||e===pt||e===ft||e===mt||e===gt||e===vt||e===yt||e===_t||e===bt||e===xt||e===wt||e===Mt||e===St?null!==(r=t.get("WEBGL_compressed_texture_astc"))?e:null:e===Ge?n?34042:null!==(r=t.get("WEBGL_depth_texture"))?r.UNSIGNED_INT_24_8_WEBGL:null:void 0}}}function ys(e,t,r,n){Cr.call(this,e,t,n),this.depthBuffer=!1,this.stencilBuffer=!1,this.numViews=r}function _s(e,t){var r,n,i,o,a,s,c,l=2,u=e.extensions,h=e.properties,d=0;function p(e){return e.isArrayCamera?e.cameras:(a[0]=e,a)}this.isAvailable=function(){if(void 0===c){var e=u.get("OVR_multiview2");if(c=null!==e&&!1===t.getContextAttributes().antialias){d=t.getParameter(e.MAX_VIEWS_OVR),r=new ys(0,0,l),s=new Tr,o=[],i=[],a=[];for(var n=0;n<d;n++)o[n]=new kr,i[n]=new Er}}return c},this.attachCamera=function(t){!1!==function(e){if(void 0===e.isArrayCamera)return!0;var t=e.cameras;if(t.length>d)return!1;for(var r=1,n=t.length;r<n;r++)if(t[0].viewport.z!==t[r].viewport.z||t[0].viewport.w!==t[r].viewport.w)return!1;return!0}(t)&&(n=e.getRenderTarget(),function(t){if(n?s.set(n.width,n.height):e.getDrawingBufferSize(s),t.isArrayCamera){var i=t.cameras[0].viewport;r.setSize(i.z,i.w),r.setNumViews(t.cameras.length)}else r.setSize(s.x,s.y),r.setNumViews(l)}(t),e.setRenderTarget(r))},this.detachCamera=function(i){r===e.getRenderTarget()&&(e.setRenderTarget(n),function(e){var n=r,i=n.numViews,o=h.get(n).__webglViewFramebuffers,a=n.width,c=n.height;if(e.isArrayCamera)for(var l=0;l<i;l++){var u=e.cameras[l].viewport,d=u.x,p=u.y,f=d+u.z,m=p+u.w;t.bindFramebuffer(36008,o[l]),t.blitFramebuffer(0,0,a,c,d,p,f,m,16384,9728)}else t.bindFramebuffer(36008,o[0]),t.blitFramebuffer(0,0,a,c,0,0,s.x,s.y,16384,9728)}(i))},this.updateCameraProjectionMatricesUniform=function(e,r){for(var n=p(e),i=0;i<n.length;i++)o[i].copy(n[i].projectionMatrix);r.setValue(t,"projectionMatrices",o)},this.updateCameraViewMatricesUniform=function(e,r){for(var n=p(e),i=0;i<n.length;i++)o[i].copy(n[i].matrixWorldInverse);r.setValue(t,"viewMatrices",o)},this.updateObjectMatricesUniforms=function(e,r,n){for(var a=p(r),s=0;s<a.length;s++)o[s].multiplyMatrices(a[s].matrixWorldInverse,e.matrixWorld),i[s].getNormalMatrix(o[s]);n.setValue(t,"modelViewMatrices",o),n.setValue(t,"normalMatrices",i)}}function bs(e){lo.call(this),this.cameras=e||[]}function xs(){ln.call(this),this.type="Group"}function ws(e,t){var r=this,n=null,i=null,o="local-floor",a=null,s=[],c=new Map,l=new lo;l.layers.enable(1),l.viewport=new Pr;var u=new lo;u.layers.enable(2),u.viewport=new Pr;var h=new bs([l,u]);h.layers.enable(1),h.layers.enable(2);var d=null,p=null;function f(e){var t=c.get(e.inputSource);t&&(t.targetRay&&t.targetRay.dispatchEvent({type:e.type}),t.grip&&t.grip.dispatchEvent({type:e.type}))}function m(){c.forEach((function(e,t){e.targetRay&&(e.targetRay.dispatchEvent({type:"disconnected",data:t}),e.targetRay.visible=!1),e.grip&&(e.grip.dispatchEvent({type:"disconnected",data:t}),e.grip.visible=!1)})),c.clear(),e.setFramebuffer(null),e.setRenderTarget(e.getRenderTarget()),w.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}function g(e){i=e,w.setContext(n),w.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}function v(e){for(var t=n.inputSources,r=0;r<s.length;r++)c.set(t[r],s[r]);for(r=0;r<e.removed.length;r++){var i=e.removed[r];(o=c.get(i))&&(o.targetRay&&o.targetRay.dispatchEvent({type:"disconnected",data:i}),o.grip&&o.grip.dispatchEvent({type:"disconnected",data:i}),c.delete(i))}for(r=0;r<e.added.length;r++){var o;i=e.added[r];(o=c.get(i))&&(o.targetRay&&o.targetRay.dispatchEvent({type:"connected",data:i}),o.grip&&o.grip.dispatchEvent({type:"connected",data:i}))}}this.enabled=!1,this.isPresenting=!1,this.getController=function(e){var t=s[e];return void 0===t&&(t={},s[e]=t),void 0===t.targetRay&&(t.targetRay=new xs,t.targetRay.matrixAutoUpdate=!1,t.targetRay.visible=!1),t.targetRay},this.getControllerGrip=function(e){var t=s[e];return void 0===t&&(t={},s[e]=t),void 0===t.grip&&(t.grip=new xs,t.grip.matrixAutoUpdate=!1,t.grip.visible=!1),t.grip},this.setFramebufferScaleFactor=function(){},this.setReferenceSpaceType=function(e){o=e},this.getReferenceSpace=function(){return i},this.getSession=function(){return n},this.setSession=function(e){if(null!==(n=e)){n.addEventListener("select",f),n.addEventListener("selectstart",f),n.addEventListener("selectend",f),n.addEventListener("squeeze",f),n.addEventListener("squeezestart",f),n.addEventListener("squeezeend",f),n.addEventListener("end",m);var r=t.getContextAttributes(),i={antialias:r.antialias,alpha:r.alpha,depth:r.depth,stencil:r.stencil},a=new XRWebGLLayer(n,t,i);n.updateRenderState({baseLayer:a}),n.requestReferenceSpace(o).then(g),n.addEventListener("inputsourceschange",v)}};var y=new Nr,_=new Nr;function b(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.getInverse(e.matrixWorld)}this.getCamera=function(e){h.near=u.near=l.near=e.near,h.far=u.far=l.far=e.far,d===h.near&&p===h.far||(n.updateRenderState({depthNear:h.near,depthFar:h.far}),d=h.near,p=h.far);var t=e.parent,r=h.cameras;b(h,t);for(var i=0;i<r.length;i++)b(r[i],t);e.matrixWorld.copy(h.matrixWorld);for(var o=e.children,a=(i=0,o.length);i<a;i++)o[i].updateMatrixWorld(!0);return function(e,t,r){y.setFromMatrixPosition(t.matrixWorld),_.setFromMatrixPosition(r.matrixWorld);var n=y.distanceTo(_),i=t.projectionMatrix.elements,o=r.projectionMatrix.elements,a=i[14]/(i[10]-1),s=i[14]/(i[10]+1),c=(i[9]+1)/i[5],l=(i[9]-1)/i[5],u=(i[8]-1)/i[0],h=(o[8]+1)/o[0],d=a*u,p=a*h,f=n/(-u+h),m=f*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.getInverse(e.matrixWorld);var g=a+f,v=s+f,b=d-m,x=p+(n-m),w=c*s/v*g,M=l*s/v*g;e.projectionMatrix.makePerspective(b,x,w,M,g,v)}(h,l,u),h};var x=null;var w=new bo;w.setAnimationLoop((function(t,r){if(null!==(a=r.getViewerPose(i))){var o=a.views,c=n.renderState.baseLayer;e.setFramebuffer(c.framebuffer);for(var l=0;l<o.length;l++){var u=o[l],d=c.getViewport(u),p=h.cameras[l];p.matrix.fromArray(u.transform.matrix),p.projectionMatrix.fromArray(u.projectionMatrix),p.viewport.set(d.x,d.y,d.width,d.height),0===l&&h.matrix.copy(p.matrix)}}var f=n.inputSources;for(l=0;l<s.length;l++){var m=s[l],g=f[l],v=null,y=null;g&&(m.targetRay&&null!==(v=r.getPose(g.targetRaySpace,i))&&(m.targetRay.matrix.fromArray(v.transform.matrix),m.targetRay.matrix.decompose(m.targetRay.position,m.targetRay.rotation,m.targetRay.scale)),m.grip&&g.gripSpace&&null!==(y=r.getPose(g.gripSpace,i))&&(m.grip.matrix.fromArray(y.transform.matrix),m.grip.matrix.decompose(m.grip.position,m.grip.rotation,m.grip.scale))),m.targetRay&&(m.targetRay.visible=null!==v),m.grip&&(m.grip.visible=null!==y)}x&&x(t,r)})),this.setAnimationLoop=function(e){x=e},this.dispose=function(){}}function Ms(e){var t=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),r=void 0!==e.context?e.context:null,n=void 0!==e.alpha&&e.alpha,i=void 0===e.depth||e.depth,o=void 0===e.stencil||e.stencil,a=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,c=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,l=void 0!==e.powerPreference?e.powerPreference:"default",u=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat,h=null,d=null;this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Ut,this.physicallyCorrectLights=!1,this.toneMapping=ie,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var p,f,m,g,y,_,b,x,w,M,S,T,E,A,L,R,P,C,j=this,O=!1,D=null,I=0,N=0,U=null,z=null,F=-1,B={geometry:null,program:null,wireframe:!1},G=null,V=null,H=new Pr,k=new Pr,W=null,q=t.width,X=t.height,Y=1,Z=null,J=null,K=new Pr(0,0,q,X),Q=new Pr(0,0,q,X),$=!1,ee=new yo,te=new Ro,re=!1,ne=!1,oe=new kr,ae=new Nr;function se(){return null===U?Y:1}try{var ce={alpha:n,depth:i,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:c,powerPreference:l,failIfMajorPerformanceCaveat:u,xrCompatible:!0};if(t.addEventListener("webglcontextlost",pe,!1),t.addEventListener("webglcontextrestored",fe,!1),null===(p=r||t.getContext("webgl",ce)||t.getContext("experimental-webgl",ce)))throw null!==t.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===p.getShaderPrecisionFormat&&(p.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function le(){f=new Po(p),!1===(m=new Lo(p,f,e)).isWebGL2&&(f.get("WEBGL_depth_texture"),f.get("OES_texture_float"),f.get("OES_texture_half_float"),f.get("OES_texture_half_float_linear"),f.get("OES_standard_derivatives"),f.get("OES_element_index_uint"),f.get("ANGLE_instanced_arrays")),f.get("OES_texture_float_linear"),C=new vs(p,f,m),(g=new ms(p,f,m)).scissor(k.copy(Q).multiplyScalar(Y).floor()),g.viewport(H.copy(K).multiplyScalar(Y).floor()),y=new Oo(p),_=new $a,b=new gs(p,f,g,_,m,C,y),x=new xo(p,m),w=new Co(p,x,y),M=new No(p,w,x,y),L=new Io(p),S=new Qa(j,f,m),T=new ns,E=new ls,A=new Eo(j,g,M,s),R=new Ao(p,f,y,m),P=new jo(p,f,y,m),y.programs=S.programs,j.capabilities=m,j.extensions=f,j.properties=_,j.renderLists=T,j.renderStates=E,j.state=g,j.info=y}le();var ue=new ws(j,p);this.xr=ue;var he=new _s(j,p),de=new fs(j,M,m.maxTextureSize);function pe(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),O=!0}function fe(){console.log("THREE.WebGLRenderer: Context Restored."),O=!1,le()}function me(e){var t=e.target;t.removeEventListener("dispose",me),function(e){ge(e),_.remove(e)}(t)}function ge(e){var t=_.get(e).program;e.program=void 0,void 0!==t&&S.releaseProgram(t)}this.shadowMap=de,this.getContext=function(){return p},this.getContextAttributes=function(){return p.getContextAttributes()},this.forceContextLoss=function(){var e=f.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=f.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return Y},this.setPixelRatio=function(e){void 0!==e&&(Y=e,this.setSize(q,X,!1))},this.getSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),e=new Tr),e.set(q,X)},this.setSize=function(e,r,n){ue.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(q=e,X=r,t.width=Math.floor(e*Y),t.height=Math.floor(r*Y),!1!==n&&(t.style.width=e+"px",t.style.height=r+"px"),this.setViewport(0,0,e,r))},this.getDrawingBufferSize=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),e=new Tr),e.set(q*Y,X*Y).floor()},this.setDrawingBufferSize=function(e,r,n){q=e,X=r,Y=n,t.width=Math.floor(e*n),t.height=Math.floor(r*n),this.setViewport(0,0,e,r)},this.getCurrentViewport=function(e){return void 0===e&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),e=new Pr),e.copy(H)},this.getViewport=function(e){return e.copy(K)},this.setViewport=function(e,t,r,n){e.isVector4?K.set(e.x,e.y,e.z,e.w):K.set(e,t,r,n),g.viewport(H.copy(K).multiplyScalar(Y).floor())},this.getScissor=function(e){return e.copy(Q)},this.setScissor=function(e,t,r,n){e.isVector4?Q.set(e.x,e.y,e.z,e.w):Q.set(e,t,r,n),g.scissor(k.copy(Q).multiplyScalar(Y).floor())},this.getScissorTest=function(){return $},this.setScissorTest=function(e){g.setScissorTest($=e)},this.setOpaqueSort=function(e){Z=e},this.setTransparentSort=function(e){J=e},this.getClearColor=function(){return A.getClearColor()},this.setClearColor=function(){A.setClearColor.apply(A,arguments)},this.getClearAlpha=function(){return A.getClearAlpha()},this.setClearAlpha=function(){A.setClearAlpha.apply(A,arguments)},this.clear=function(e,t,r){var n=0;(void 0===e||e)&&(n|=16384),(void 0===t||t)&&(n|=256),(void 0===r||r)&&(n|=1024),p.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",pe,!1),t.removeEventListener("webglcontextrestored",fe,!1),T.dispose(),E.dispose(),_.dispose(),M.dispose(),ue.dispose(),_e.stop()},this.renderBufferImmediate=function(e,t){g.initAttributes();var r=_.get(e);e.hasPositions&&!r.position&&(r.position=p.createBuffer()),e.hasNormals&&!r.normal&&(r.normal=p.createBuffer()),e.hasUvs&&!r.uv&&(r.uv=p.createBuffer()),e.hasColors&&!r.color&&(r.color=p.createBuffer());var n=t.getAttributes();e.hasPositions&&(p.bindBuffer(34962,r.position),p.bufferData(34962,e.positionArray,35048),g.enableAttribute(n.position),p.vertexAttribPointer(n.position,3,5126,!1,0,0)),e.hasNormals&&(p.bindBuffer(34962,r.normal),p.bufferData(34962,e.normalArray,35048),g.enableAttribute(n.normal),p.vertexAttribPointer(n.normal,3,5126,!1,0,0)),e.hasUvs&&(p.bindBuffer(34962,r.uv),p.bufferData(34962,e.uvArray,35048),g.enableAttribute(n.uv),p.vertexAttribPointer(n.uv,2,5126,!1,0,0)),e.hasColors&&(p.bindBuffer(34962,r.color),p.bufferData(34962,e.colorArray,35048),g.enableAttribute(n.color),p.vertexAttribPointer(n.color,3,5126,!1,0,0)),g.disableUnusedAttributes(),p.drawArrays(4,0,e.count),e.count=0};var ve=new un;this.renderBufferDirect=function(e,t,r,n,i,o){null===t&&(t=ve);var a=i.isMesh&&i.matrixWorld.determinant()<0,s=Se(e,t,n,i);g.setMaterial(n,a);var c=!1;B.geometry===r.id&&B.program===s.id&&B.wireframe===(!0===n.wireframe)||(B.geometry=r.id,B.program=s.id,B.wireframe=!0===n.wireframe,c=!0),(n.morphTargets||n.morphNormals)&&(L.update(i,r,n,s),c=!0);var l=r.index,u=r.attributes.position;if(null===l){if(void 0===u||0===u.count)return}else if(0===l.count)return;var h,d=1;!0===n.wireframe&&(l=w.getWireframeAttribute(r),d=2);var v=R;null!==l&&(h=x.get(l),(v=P).setIndex(h)),c&&(!function(e,t,r,n){if(!1===m.isWebGL2&&(e.isInstancedMesh||t.isInstancedBufferGeometry)&&null===f.get("ANGLE_instanced_arrays"))return;g.initAttributes();var i=t.attributes,o=n.getAttributes(),a=r.defaultAttributeValues;for(var s in o){var c=o[s];if(c>=0){var l=i[s];if(void 0!==l){var u=l.normalized,h=l.itemSize;if(void 0===(M=x.get(l)))continue;var d=M.buffer,v=M.type,y=M.bytesPerElement;if(l.isInterleavedBufferAttribute){var _=l.data,b=_.stride,w=l.offset;_&&_.isInstancedInterleavedBuffer?(g.enableAttributeAndDivisor(c,_.meshPerAttribute),void 0===t.maxInstancedCount&&(t.maxInstancedCount=_.meshPerAttribute*_.count)):g.enableAttribute(c),p.bindBuffer(34962,d),p.vertexAttribPointer(c,h,v,u,b*y,w*y)}else l.isInstancedBufferAttribute?(g.enableAttributeAndDivisor(c,l.meshPerAttribute),void 0===t.maxInstancedCount&&(t.maxInstancedCount=l.meshPerAttribute*l.count)):g.enableAttribute(c),p.bindBuffer(34962,d),p.vertexAttribPointer(c,h,v,u,0,0)}else if("instanceMatrix"===s){var M;if(void 0===(M=x.get(e.instanceMatrix)))continue;d=M.buffer,v=M.type;g.enableAttributeAndDivisor(c+0,1),g.enableAttributeAndDivisor(c+1,1),g.enableAttributeAndDivisor(c+2,1),g.enableAttributeAndDivisor(c+3,1),p.bindBuffer(34962,d),p.vertexAttribPointer(c+0,4,v,!1,64,0),p.vertexAttribPointer(c+1,4,v,!1,64,16),p.vertexAttribPointer(c+2,4,v,!1,64,32),p.vertexAttribPointer(c+3,4,v,!1,64,48)}else if(void 0!==a){var S=a[s];if(void 0!==S)switch(S.length){case 2:p.vertexAttrib2fv(c,S);break;case 3:p.vertexAttrib3fv(c,S);break;case 4:p.vertexAttrib4fv(c,S);break;default:p.vertexAttrib1fv(c,S)}}}}g.disableUnusedAttributes()}(i,r,n,s),null!==l&&p.bindBuffer(34963,h.buffer));var y=null!==l?l.count:u.count,_=r.drawRange.start*d,b=r.drawRange.count*d,M=null!==o?o.start*d:0,S=null!==o?o.count*d:1/0,T=Math.max(_,M),E=Math.min(y,_+b,M+S)-1,A=Math.max(0,E-T+1);if(0!==A){if(i.isMesh)!0===n.wireframe?(g.setLineWidth(n.wireframeLinewidth*se()),v.setMode(1)):v.setMode(4);else if(i.isLine){var C=n.linewidth;void 0===C&&(C=1),g.setLineWidth(C*se()),i.isLineSegments?v.setMode(1):i.isLineLoop?v.setMode(2):v.setMode(3)}else i.isPoints?v.setMode(0):i.isSprite&&v.setMode(4);i.isInstancedMesh?v.renderInstances(r,T,A,i.count):r.isInstancedBufferGeometry?v.renderInstances(r,T,A,r.maxInstancedCount):v.render(T,A)}},this.compile=function(e,t){(d=E.get(e,t)).init(),e.traverse((function(e){e.isLight&&(d.pushLight(e),e.castShadow&&d.pushShadow(e))})),d.setupLights(t);var r={};e.traverse((function(t){if(t.material)if(Array.isArray(t.material))for(var n=0;n<t.material.length;n++)t.material[n].uuid in r==!1&&(Me(t.material[n],e,t),r[t.material[n].uuid]=!0);else t.material.uuid in r==!1&&(Me(t.material,e,t),r[t.material.uuid]=!0)}))};var ye=null;var _e=new bo;function be(e,t,r,n){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isGroup)r=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)d.pushLight(e),e.castShadow&&d.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||ee.intersectsSprite(e)){n&&ae.setFromMatrixPosition(e.matrixWorld).applyMatrix4(oe);var i=M.update(e);(o=e.material).visible&&h.push(e,i,o,r,ae.z,null)}}else if(e.isImmediateRenderObject)n&&ae.setFromMatrixPosition(e.matrixWorld).applyMatrix4(oe),h.push(e,null,e.material,r,ae.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==y.render.frame&&(e.skeleton.update(),e.skeleton.frame=y.render.frame),!e.frustumCulled||ee.intersectsObject(e))){n&&ae.setFromMatrixPosition(e.matrixWorld).applyMatrix4(oe);i=M.update(e);var o=e.material;if(Array.isArray(o))for(var a=i.groups,s=0,c=a.length;s<c;s++){var l=a[s],u=o[l.materialIndex];u&&u.visible&&h.push(e,i,u,r,ae.z,l)}else o.visible&&h.push(e,i,o,r,ae.z,null)}var p=e.children;for(s=0,c=p.length;s<c;s++)be(p[s],t,r,n)}}function xe(e,t,r,n){for(var i=0,o=e.length;i<o;i++){var a=e[i],s=a.object,c=a.geometry,l=void 0===n?a.material:n,u=a.group;if(r.isArrayCamera)if(V=r,ue.enabled&&he.isAvailable())we(s,t,r,c,l,u);else for(var h=r.cameras,p=0,f=h.length;p<f;p++){var m=h[p];s.layers.test(m.layers)&&(g.viewport(H.copy(m.viewport)),d.setupLights(m),we(s,t,m,c,l,u))}else V=null,we(s,t,r,c,l,u)}}function we(e,t,r,n,i,o){if(e.onBeforeRender(j,t,r,n,i,o),d=E.get(t,V||r),e.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){var a=Se(r,t,i,e);g.setMaterial(i),B.geometry=null,B.program=null,B.wireframe=!1,function(e,t){e.render((function(e){j.renderBufferImmediate(e,t)}))}(e,a)}else j.renderBufferDirect(r,t,n,i,e,o);e.onAfterRender(j,t,r,n,i,o),d=E.get(t,V||r)}function Me(e,t,r){var n=_.get(e),i=d.state.lights,o=d.state.shadowsArray,a=i.state.version,s=S.getParameters(e,i.state,o,t,te.numPlanes,te.numIntersection,r),c=S.getProgramCacheKey(s),l=n.program,u=!0;if(void 0===l)e.addEventListener("dispose",me);else if(l.cacheKey!==c)ge(e);else if(n.lightsStateVersion!==a)n.lightsStateVersion=a,u=!1;else{if(void 0!==s.shaderID)return;u=!1}u&&(l=S.acquireProgram(s,c),n.program=l,n.uniforms=s.uniforms,n.environment=e.isMeshStandardMaterial?t.environment:null,n.outputEncoding=j.outputEncoding,e.program=l);var h=l.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var p=0;p<j.maxMorphTargets;p++)h["morphTarget"+p]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(p=0;p<j.maxMorphNormals;p++)h["morphNormal"+p]>=0&&e.numSupportedMorphNormals++}var f=n.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(n.numClippingPlanes=te.numPlanes,n.numIntersection=te.numIntersection,f.clippingPlanes=te.uniform),n.fog=t.fog,n.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),n.lightsStateVersion=a,n.needsLights&&(f.ambientLightColor.value=i.state.ambient,f.lightProbe.value=i.state.probe,f.directionalLights.value=i.state.directional,f.spotLights.value=i.state.spot,f.rectAreaLights.value=i.state.rectArea,f.pointLights.value=i.state.point,f.hemisphereLights.value=i.state.hemi,f.directionalShadowMap.value=i.state.directionalShadowMap,f.directionalShadowMatrix.value=i.state.directionalShadowMatrix,f.spotShadowMap.value=i.state.spotShadowMap,f.spotShadowMatrix.value=i.state.spotShadowMatrix,f.pointShadowMap.value=i.state.pointShadowMap,f.pointShadowMatrix.value=i.state.pointShadowMatrix);var m=n.program.getUniforms(),g=Da.seqWithValue(m.seq,f);n.uniformsList=g}function Se(e,t,r,n){b.resetTextureUnits();var i=t.fog,o=r.isMeshStandardMaterial?t.environment:null,a=_.get(r),s=d.state.lights;if(re&&(ne||e!==G)){var c=e===G&&r.id===F;te.setState(r.clippingPlanes,r.clipIntersection,r.clipShadows,e,a,c)}r.version===a.__version?void 0===a.program?Me(r,t,n):r.fog&&a.fog!==i?Me(r,t,n):a.environment!==o?Me(r,t,n):a.needsLights&&a.lightsStateVersion!==s.state.version?Me(r,t,n):void 0===a.numClippingPlanes||a.numClippingPlanes===te.numPlanes&&a.numIntersection===te.numIntersection?a.outputEncoding!==j.outputEncoding&&Me(r,t,n):Me(r,t,n):(Me(r,t,n),a.__version=r.version);var l,u,h=!1,f=!1,y=!1,x=a.program,w=x.getUniforms(),M=a.uniforms;if(g.useProgram(x.program)&&(h=!0,f=!0,y=!0),r.id!==F&&(F=r.id,f=!0),h||G!==e){if(x.numMultiviewViews>0?he.updateCameraProjectionMatricesUniform(e,w):w.setValue(p,"projectionMatrix",e.projectionMatrix),m.logarithmicDepthBuffer&&w.setValue(p,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),G!==e&&(G=e,f=!0,y=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){var S=w.map.cameraPosition;void 0!==S&&S.setValue(p,ae.setFromMatrixPosition(e.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&w.setValue(p,"isOrthographic",!0===e.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.skinning)&&(x.numMultiviewViews>0?he.updateCameraViewMatricesUniform(e,w):w.setValue(p,"viewMatrix",e.matrixWorldInverse))}if(r.skinning){w.setOptional(p,n,"bindMatrix"),w.setOptional(p,n,"bindMatrixInverse");var T=n.skeleton;if(T){var E=T.bones;if(m.floatVertexTextures){if(void 0===T.boneTexture){var A=Math.sqrt(4*E.length);A=Sr.ceilPowerOfTwo(A),A=Math.max(A,4);var L=new Float32Array(A*A*4);L.set(T.boneMatrices);var R=new mo(L,A,A,ke,Ne);T.boneMatrices=L,T.boneTexture=R,T.boneTextureSize=A}w.setValue(p,"boneTexture",T.boneTexture,b),w.setValue(p,"boneTextureSize",T.boneTextureSize)}else w.setOptional(p,T,"boneMatrices")}}return(f||a.receiveShadow!==n.receiveShadow)&&(a.receiveShadow=n.receiveShadow,w.setValue(p,"receiveShadow",n.receiveShadow)),f&&(w.setValue(p,"toneMappingExposure",j.toneMappingExposure),w.setValue(p,"toneMappingWhitePoint",j.toneMappingWhitePoint),a.needsLights&&(u=y,(l=M).ambientLightColor.needsUpdate=u,l.lightProbe.needsUpdate=u,l.directionalLights.needsUpdate=u,l.pointLights.needsUpdate=u,l.spotLights.needsUpdate=u,l.rectAreaLights.needsUpdate=u,l.hemisphereLights.needsUpdate=u),i&&r.fog&&function(e,t){e.fogColor.value.copy(t.color),t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}(M,i),r.isMeshBasicMaterial?Te(M,r):r.isMeshLambertMaterial?(Te(M,r),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(M,r)):r.isMeshToonMaterial?(Te(M,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.gradientMap&&(e.gradientMap.value=t.gradientMap);t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===v&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===v&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(M,r)):r.isMeshPhongMaterial?(Te(M,r),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===v&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===v&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(M,r)):r.isMeshStandardMaterial?(Te(M,r,o),r.isMeshPhysicalMaterial?function(e,t,r){Ee(e,t,r),e.reflectivity.value=t.reflectivity,e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.sheen&&e.sheen.value.copy(t.sheen);t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===v&&e.clearcoatNormalScale.value.negate());e.transparency.value=t.transparency}(M,r,o):Ee(M,r,o)):r.isMeshMatcapMaterial?(Te(M,r),function(e,t){t.matcap&&(e.matcap.value=t.matcap);t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===v&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===v&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(M,r)):r.isMeshDepthMaterial?(Te(M,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(M,r)):r.isMeshDistanceMaterial?(Te(M,r),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(M,r)):r.isMeshNormalMaterial?(Te(M,r),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===v&&(e.bumpScale.value*=-1));t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===v&&e.normalScale.value.negate());t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(M,r)):r.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(M,r),r.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(M,r)):r.isPointsMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*Y,e.scale.value=.5*X,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);var r;t.map?r=t.map:t.alphaMap&&(r=t.alphaMap);void 0!==r&&(!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uvTransform.value.copy(r.matrix))}(M,r):r.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);var r;t.map?r=t.map:t.alphaMap&&(r=t.alphaMap);void 0!==r&&(!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uvTransform.value.copy(r.matrix))}(M,r):r.isShadowMaterial&&(M.color.value.copy(r.color),M.opacity.value=r.opacity),void 0!==M.ltc_1&&(M.ltc_1.value=_o.LTC_1),void 0!==M.ltc_2&&(M.ltc_2.value=_o.LTC_2),Da.upload(p,a.uniformsList,M,b),r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(Da.upload(p,a.uniformsList,M,b),r.uniformsNeedUpdate=!1),r.isSpriteMaterial&&(w.setValue(p,"center",n.center),r.baseID&&w.setValue(p,"baseID",r.baseID)),x.numMultiviewViews>0?he.updateObjectMatricesUniforms(n,e,w):(w.setValue(p,"modelViewMatrix",n.modelViewMatrix),w.setValue(p,"normalMatrix",n.normalMatrix)),w.setValue(p,"modelMatrix",n.matrixWorld),x}function Te(e,t,r){e.opacity.value=t.opacity,t.color&&e.diffuse.value.copy(t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap);var n,i,o=t.envMap||r;o&&(e.envMap.value=o,e.flipEnvMap.value=o.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.maxMipLevel.value=_.get(o).__maxMipLevel),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity),t.map?n=t.map:t.specularMap?n=t.specularMap:t.displacementMap?n=t.displacementMap:t.normalMap?n=t.normalMap:t.bumpMap?n=t.bumpMap:t.roughnessMap?n=t.roughnessMap:t.metalnessMap?n=t.metalnessMap:t.alphaMap?n=t.alphaMap:t.emissiveMap&&(n=t.emissiveMap),void 0!==n&&(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix)),t.aoMap?i=t.aoMap:t.lightMap&&(i=t.lightMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uv2Transform.value.copy(i.matrix))}function Ee(e,t,r){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale,t.side===v&&(e.bumpScale.value*=-1)),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale),t.side===v&&e.normalScale.value.negate()),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),(t.envMap||r)&&(e.envMapIntensity.value=t.envMapIntensity)}_e.setAnimationLoop((function(e){ue.isPresenting||ye&&ye(e)})),"undefined"!=typeof window&&_e.setContext(window),this.setAnimationLoop=function(e){ye=e,ue.setAnimationLoop(e),_e.start()},this.render=function(e,t){var r,n;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),r=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),n=arguments[3]),t&&t.isCamera){if(!O){B.geometry=null,B.program=null,B.wireframe=!1,F=-1,G=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),ue.enabled&&ue.isPresenting&&(t=ue.getCamera(t)),(d=E.get(e,t)).init(),e.onBeforeRender(j,e,t,r||U),oe.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),ee.setFromProjectionMatrix(oe),ne=this.localClippingEnabled,re=te.init(this.clippingPlanes,ne,t),(h=T.get(e,t)).init(),be(e,t,0,j.sortObjects),!0===j.sortObjects&&h.sort(Z,J),re&&te.beginShadows();var i=d.state.shadowsArray;de.render(i,e,t),d.setupLights(t),re&&te.endShadows(),this.info.autoReset&&this.info.reset(),void 0!==r&&this.setRenderTarget(r),ue.enabled&&he.isAvailable()&&he.attachCamera(t),A.render(h,e,t,n);var o=h.opaque,a=h.transparent;if(e.overrideMaterial){var s=e.overrideMaterial;o.length&&xe(o,e,t,s),a.length&&xe(a,e,t,s)}else o.length&&xe(o,e,t),a.length&&xe(a,e,t);e.onAfterRender(j,e,t),null!==U&&(b.updateRenderTargetMipmap(U),b.updateMultisampleRenderTarget(U)),g.buffers.depth.setTest(!0),g.buffers.depth.setMask(!0),g.buffers.color.setMask(!0),g.setPolygonOffset(!1),ue.enabled&&he.isAvailable()&&he.detachCamera(t),h=null,d=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFramebuffer=function(e){D!==e&&null===U&&p.bindFramebuffer(36160,e),D=e},this.getActiveCubeFace=function(){return I},this.getActiveMipmapLevel=function(){return N},this.getRenderTarget=function(){return U},this.setRenderTarget=function(e,t,r){U=e,I=t,N=r,e&&void 0===_.get(e).__webglFramebuffer&&b.setupRenderTarget(e);var n=D,i=!1;if(e){var o=_.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(n=o[t||0],i=!0):n=e.isWebGLMultisampleRenderTarget?_.get(e).__webglMultisampledFramebuffer:o,H.copy(e.viewport),k.copy(e.scissor),W=e.scissorTest}else H.copy(K).multiplyScalar(Y).floor(),k.copy(Q).multiplyScalar(Y).floor(),W=$;if(z!==n&&(p.bindFramebuffer(36160,n),z=n),g.viewport(H),g.scissor(k),g.setScissorTest(W),i){var a=_.get(e.texture);p.framebufferTexture2D(36160,36064,34069+(t||0),a.__webglTexture,r||0)}},this.readRenderTargetPixels=function(e,t,r,n,i,o,a){if(e&&e.isWebGLRenderTarget){var s=_.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){var c=!1;s!==z&&(p.bindFramebuffer(36160,s),c=!0);try{var l=e.texture,u=l.format,h=l.type;if(u!==ke&&C.convert(u)!==p.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(h===Pe||C.convert(h)===p.getParameter(35738)||h===Ne&&(m.isWebGL2||f.get("OES_texture_float")||f.get("WEBGL_color_buffer_float"))||h===Ue&&(m.isWebGL2?f.get("EXT_color_buffer_float"):f.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===p.checkFramebufferStatus(36160)?t>=0&&t<=e.width-n&&r>=0&&r<=e.height-i&&p.readPixels(t,r,n,i,C.convert(u),C.convert(h),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{c&&p.bindFramebuffer(36160,z)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t,r){void 0===r&&(r=0);var n=Math.pow(2,-r),i=Math.floor(t.image.width*n),o=Math.floor(t.image.height*n),a=C.convert(t.format);b.setTexture2D(t,0),p.copyTexImage2D(3553,r,a,e.x,e.y,i,o,0),g.unbindTexture()},this.copyTextureToTexture=function(e,t,r,n){var i=t.image.width,o=t.image.height,a=C.convert(r.format),s=C.convert(r.type);b.setTexture2D(r,0),t.isDataTexture?p.texSubImage2D(3553,n||0,e.x,e.y,i,o,a,s,t.image.data):p.texSubImage2D(3553,n||0,e.x,e.y,a,s,t.image),g.unbindTexture()},this.initTexture=function(e){b.setTexture2D(e,0),g.unbindTexture()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function Ss(e,t){this.name="",this.color=new ei(e),this.density=void 0!==t?t:25e-5}function Ts(e,t,r){this.name="",this.color=new ei(e),this.near=void 0!==t?t:1,this.far=void 0!==r?r:1e3}function Es(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=hr,this.updateRange={offset:0,count:-1},this.version=0}ys.prototype=Object.assign(Object.create(Cr.prototype),{constructor:ys,isWebGLMultiviewRenderTarget:!0,copy:function(e){return Cr.prototype.copy.call(this,e),this.numViews=e.numViews,this},setNumViews:function(e){return this.numViews!==e&&(this.numViews=e,this.dispose()),this}}),bs.prototype=Object.assign(Object.create(lo.prototype),{constructor:bs,isArrayCamera:!0}),xs.prototype=Object.assign(Object.create(ln.prototype),{constructor:xs,isGroup:!0}),Object.assign(ws.prototype,br.prototype),Object.assign(Ss.prototype,{isFogExp2:!0,clone:function(){return new Ss(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),Object.assign(Ts.prototype,{isFog:!0,clone:function(){return new Ts(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),Object.defineProperty(Es.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Es.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(e){return this.usage=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this},copyAt:function(e,t,r){e*=this.stride,r*=t.stride;for(var n=0,i=this.stride;n<i;n++)this.array[e+n]=t.array[r+n];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}});var As,Ls=new Nr;function Rs(e,t,r,n){this.data=e,this.itemSize=t,this.offset=r,this.normalized=!0===n}function Ps(e){ai.call(this),this.type="SpriteMaterial",this.color=new ei(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(e)}Object.defineProperties(Rs.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(Rs.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(e){for(var t=0,r=this.data.count;t<r;t++)Ls.x=this.getX(t),Ls.y=this.getY(t),Ls.z=this.getZ(t),Ls.applyMatrix4(e),this.setXYZ(t,Ls.x,Ls.y,Ls.z);return this},setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this},setXYZ:function(e,t,r,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=n,this},setXYZW:function(e,t,r,n,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=n,this.data.array[e+3]=i,this}}),Ps.prototype=Object.create(ai.prototype),Ps.prototype.constructor=Ps,Ps.prototype.isSpriteMaterial=!0,Ps.prototype.copy=function(e){return ai.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this};var Cs=new Nr,js=new Nr,Os=new Nr,Ds=new Tr,Is=new Tr,Ns=new kr,Us=new Nr,zs=new Nr,Fs=new Nr,Bs=new Tr,Gs=new Tr,Vs=new Tr;function Hs(e){if(ln.call(this),this.type="Sprite",void 0===As){As=new Li;var t=new Es(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);As.setIndex([0,1,2,0,2,3]),As.setAttribute("position",new Rs(t,3,0,!1)),As.setAttribute("uv",new Rs(t,2,3,!1))}this.geometry=As,this.material=void 0!==e?e:new Ps,this.center=new Tr(.5,.5)}function ks(e,t,r,n,i,o){Ds.subVectors(e,r).addScalar(.5).multiply(n),void 0!==i?(Is.x=o*Ds.x-i*Ds.y,Is.y=i*Ds.x+o*Ds.y):Is.copy(Ds),e.copy(t),e.x+=Is.x,e.y+=Is.y,e.applyMatrix4(Ns)}Hs.prototype=Object.assign(Object.create(ln.prototype),{constructor:Hs,isSprite:!0,raycast:function(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),js.setFromMatrixScale(this.matrixWorld),Ns.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Os.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&js.multiplyScalar(-Os.z);var r,n,i=this.material.rotation;0!==i&&(n=Math.cos(i),r=Math.sin(i));var o=this.center;ks(Us.set(-.5,-.5,0),Os,o,js,r,n),ks(zs.set(.5,-.5,0),Os,o,js,r,n),ks(Fs.set(.5,.5,0),Os,o,js,r,n),Bs.set(0,0),Gs.set(1,0),Vs.set(1,1);var a=e.ray.intersectTriangle(Us,zs,Fs,!1,Cs);if(null!==a||(ks(zs.set(-.5,.5,0),Os,o,js,r,n),Gs.set(0,1),null!==(a=e.ray.intersectTriangle(Us,Fs,zs,!1,Cs)))){var s=e.ray.origin.distanceTo(Cs);s<e.near||s>e.far||t.push({distance:s,point:Cs.clone(),uv:Jn.getUV(Cs,Us,zs,Fs,Bs,Gs,Vs,new Tr),face:null,object:this})}},clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return ln.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this}});var Ws=new Nr,qs=new Nr;function Xs(){ln.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function Ys(e,t){e&&e.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),qi.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new kr,this.bindMatrixInverse=new kr}Xs.prototype=Object.assign(Object.create(ln.prototype),{constructor:Xs,isLOD:!0,copy:function(e){ln.prototype.copy.call(this,e,!1);for(var t=e.levels,r=0,n=t.length;r<n;r++){var i=t[r];this.addLevel(i.object.clone(),i.distance)}return this.autoUpdate=e.autoUpdate,this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var r=this.levels,n=0;n<r.length&&!(t<r[n].distance);n++);return r.splice(n,0,{distance:t,object:e}),this.add(e),this},getObjectForDistance:function(e){var t=this.levels;if(t.length>0){for(var r=1,n=t.length;r<n&&!(e<t[r].distance);r++);return t[r-1].object}return null},raycast:function(e,t){if(this.levels.length>0){Ws.setFromMatrixPosition(this.matrixWorld);var r=e.ray.origin.distanceTo(Ws);this.getObjectForDistance(r).raycast(e,t)}},update:function(e){var t=this.levels;if(t.length>1){Ws.setFromMatrixPosition(e.matrixWorld),qs.setFromMatrixPosition(this.matrixWorld);var r=Ws.distanceTo(qs);t[0].object.visible=!0;for(var n=1,i=t.length;n<i&&r>=t[n].distance;n++)t[n-1].object.visible=!1,t[n].object.visible=!0;for(;n<i;n++)t[n].object.visible=!1}},toJSON:function(e){var t=ln.prototype.toJSON.call(this,e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];for(var r=this.levels,n=0,i=r.length;n<i;n++){var o=r[n];t.object.levels.push({object:o.object.uuid,distance:o.distance})}return t}}),Ys.prototype=Object.assign(Object.create(qi.prototype),{constructor:Ys,isSkinnedMesh:!0,bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var e=new Pr,t=this.geometry.attributes.skinWeight,r=0,n=t.count;r<n;r++){e.x=t.getX(r),e.y=t.getY(r),e.z=t.getZ(r),e.w=t.getW(r);var i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}},updateMatrixWorld:function(e){qi.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var Zs=new kr,Js=new kr;function Ks(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),this.frame=-1,void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var r=0,n=this.bones.length;r<n;r++)this.boneInverses.push(new kr)}}function Qs(){ln.call(this),this.type="Bone"}Object.assign(Ks.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var r=new kr;this.bones[e]&&r.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(r)}},pose:function(){var e,t,r;for(t=0,r=this.bones.length;t<r;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,r=this.bones.length;t<r;t++)(e=this.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){for(var e=this.bones,t=this.boneInverses,r=this.boneMatrices,n=this.boneTexture,i=0,o=e.length;i<o;i++){var a=e[i]?e[i].matrixWorld:Js;Zs.multiplyMatrices(a,t[i]),Zs.toArray(r,16*i)}void 0!==n&&(n.needsUpdate=!0)},clone:function(){return new Ks(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,r=this.bones.length;t<r;t++){var n=this.bones[t];if(n.name===e)return n}}}),Qs.prototype=Object.assign(Object.create(ln.prototype),{constructor:Qs,isBone:!0});var $s=new kr,ec=new kr,tc=[],rc=new qi;function nc(e,t,r){qi.call(this,e,t),this.instanceMatrix=new li(new Float32Array(16*r),16),this.count=r,this.frustumCulled=!1}function ic(e){ai.call(this),this.type="LineBasicMaterial",this.color=new ei(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(e)}nc.prototype=Object.assign(Object.create(qi.prototype),{constructor:nc,isInstancedMesh:!0,getMatrixAt:function(e,t){t.fromArray(this.instanceMatrix.array,16*e)},raycast:function(e,t){var r=this.matrixWorld,n=this.count;if(rc.geometry=this.geometry,rc.material=this.material,void 0!==rc.material)for(var i=0;i<n;i++)this.getMatrixAt(i,$s),ec.multiplyMatrices(r,$s),rc.matrixWorld=ec,rc.raycast(e,tc),tc.length>0&&(tc[0].instanceId=i,tc[0].object=this,t.push(tc[0]),tc.length=0)},setMatrixAt:function(e,t){t.toArray(this.instanceMatrix.array,16*e)},updateMorphTargets:function(){}}),ic.prototype=Object.create(ai.prototype),ic.prototype.constructor=ic,ic.prototype.isLineBasicMaterial=!0,ic.prototype.copy=function(e){return ai.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this};var oc=new Nr,ac=new Nr,sc=new kr,cc=new In,lc=new An;function uc(e,t,r){1===r&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),ln.call(this),this.type="Line",this.geometry=void 0!==e?e:new Li,this.material=void 0!==t?t:new ic}uc.prototype=Object.assign(Object.create(ln.prototype),{constructor:uc,isLine:!0,computeLineDistances:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,r=[0],n=1,i=t.count;n<i;n++)oc.fromBufferAttribute(t,n-1),ac.fromBufferAttribute(t,n),r[n]=r[n-1],r[n]+=oc.distanceTo(ac);e.setAttribute("lineDistance",new vi(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){var o=e.vertices;(r=e.lineDistances)[0]=0;for(n=1,i=o.length;n<i;n++)r[n]=r[n-1],r[n]+=o[n-1].distanceTo(o[n])}return this},raycast:function(e,t){var r=e.linePrecision,n=this.geometry,i=this.matrixWorld;if(null===n.boundingSphere&&n.computeBoundingSphere(),lc.copy(n.boundingSphere),lc.applyMatrix4(i),lc.radius+=r,!1!==e.ray.intersectsSphere(lc)){sc.getInverse(i),cc.copy(e.ray).applyMatrix4(sc);var o=r/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o,s=new Nr,c=new Nr,l=new Nr,u=new Nr,h=this&&this.isLineSegments?2:1;if(n.isBufferGeometry){var d=n.index,p=n.attributes.position.array;if(null!==d)for(var f=d.array,m=0,g=f.length-1;m<g;m+=h){var v=f[m],y=f[m+1];if(s.fromArray(p,3*v),c.fromArray(p,3*y),!(cc.distanceSqToSegment(s,c,u,l)>a))u.applyMatrix4(this.matrixWorld),(x=e.ray.origin.distanceTo(u))<e.near||x>e.far||t.push({distance:x,point:l.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}else for(m=0,g=p.length/3-1;m<g;m+=h){if(s.fromArray(p,3*m),c.fromArray(p,3*m+3),!(cc.distanceSqToSegment(s,c,u,l)>a))u.applyMatrix4(this.matrixWorld),(x=e.ray.origin.distanceTo(u))<e.near||x>e.far||t.push({distance:x,point:l.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}}else if(n.isGeometry){var _=n.vertices,b=_.length;for(m=0;m<b-1;m+=h){var x;if(!(cc.distanceSqToSegment(_[m],_[m+1],u,l)>a))u.applyMatrix4(this.matrixWorld),(x=e.ray.origin.distanceTo(u))<e.near||x>e.far||t.push({distance:x,point:l.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this})}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var hc=new Nr,dc=new Nr;function pc(e,t){uc.call(this,e,t),this.type="LineSegments"}function fc(e,t){uc.call(this,e,t),this.type="LineLoop"}function mc(e){ai.call(this),this.type="PointsMaterial",this.color=new ei(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(e)}pc.prototype=Object.assign(Object.create(uc.prototype),{constructor:pc,isLineSegments:!0,computeLineDistances:function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,r=[],n=0,i=t.count;n<i;n+=2)hc.fromBufferAttribute(t,n),dc.fromBufferAttribute(t,n+1),r[n]=0===n?0:r[n-1],r[n+1]=r[n]+hc.distanceTo(dc);e.setAttribute("lineDistance",new vi(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){var o=e.vertices;for(r=e.lineDistances,n=0,i=o.length;n<i;n+=2)hc.copy(o[n]),dc.copy(o[n+1]),r[n]=0===n?0:r[n-1],r[n+1]=r[n]+hc.distanceTo(dc)}return this}}),fc.prototype=Object.assign(Object.create(uc.prototype),{constructor:fc,isLineLoop:!0}),mc.prototype=Object.create(ai.prototype),mc.prototype.constructor=mc,mc.prototype.isPointsMaterial=!0,mc.prototype.copy=function(e){return ai.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.morphTargets=e.morphTargets,this};var gc=new kr,vc=new In,yc=new An,_c=new Nr;function bc(e,t){ln.call(this),this.type="Points",this.geometry=void 0!==e?e:new Li,this.material=void 0!==t?t:new mc,this.updateMorphTargets()}function xc(e,t,r,n,i,o,a){var s=vc.distanceSqToPoint(e);if(s<r){var c=new Nr;vc.closestPointToPoint(e,c),c.applyMatrix4(n);var l=i.ray.origin.distanceTo(c);if(l<i.near||l>i.far)return;o.push({distance:l,distanceToRay:Math.sqrt(s),point:c,index:t,face:null,object:a})}}function wc(e,t,r,n,i,o,a,s,c){Rr.call(this,e,t,r,n,i,o,a,s,c),this.format=void 0!==a?a:He,this.minFilter=void 0!==o?o:Te,this.magFilter=void 0!==i?i:Te,this.generateMipmaps=!1}function Mc(e,t,r,n,i,o,a,s,c,l,u,h){Rr.call(this,null,o,a,s,c,l,n,i,u,h),this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function Sc(e,t,r,n,i,o,a,s,c){Rr.call(this,e,t,r,n,i,o,a,s,c),this.needsUpdate=!0}function Tc(e,t,r,n,i,o,a,s,c,l){if((l=void 0!==l?l:Ye)!==Ye&&l!==Ze)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===r&&l===Ye&&(r=Oe),void 0===r&&l===Ze&&(r=Ge),Rr.call(this,null,n,i,o,a,s,l,r,c),this.image={width:e,height:t},this.magFilter=void 0!==a?a:be,this.minFilter=void 0!==s?s:be,this.flipY=!1,this.generateMipmaps=!1}function Ec(e){Li.call(this),this.type="WireframeGeometry";var t,r,n,i,o,a,s,c,l,u,h=[],d=[0,0],p={},f=["a","b","c"];if(e&&e.isGeometry){var m=e.faces;for(t=0,n=m.length;t<n;t++){var g=m[t];for(r=0;r<3;r++)s=g[f[r]],c=g[f[(r+1)%3]],d[0]=Math.min(s,c),d[1]=Math.max(s,c),void 0===p[l=d[0]+","+d[1]]&&(p[l]={index1:d[0],index2:d[1]})}for(l in p)a=p[l],u=e.vertices[a.index1],h.push(u.x,u.y,u.z),u=e.vertices[a.index2],h.push(u.x,u.y,u.z)}else if(e&&e.isBufferGeometry){var v,y,_,b,x,w,M;if(u=new Nr,null!==e.index){for(v=e.attributes.position,y=e.index,0===(_=e.groups).length&&(_=[{start:0,count:y.count,materialIndex:0}]),i=0,o=_.length;i<o;++i)for(t=x=(b=_[i]).start,n=x+b.count;t<n;t+=3)for(r=0;r<3;r++)s=y.getX(t+r),c=y.getX(t+(r+1)%3),d[0]=Math.min(s,c),d[1]=Math.max(s,c),void 0===p[l=d[0]+","+d[1]]&&(p[l]={index1:d[0],index2:d[1]});for(l in p)a=p[l],u.fromBufferAttribute(v,a.index1),h.push(u.x,u.y,u.z),u.fromBufferAttribute(v,a.index2),h.push(u.x,u.y,u.z)}else for(t=0,n=(v=e.attributes.position).count/3;t<n;t++)for(r=0;r<3;r++)w=3*t+r,u.fromBufferAttribute(v,w),h.push(u.x,u.y,u.z),M=3*t+(r+1)%3,u.fromBufferAttribute(v,M),h.push(u.x,u.y,u.z)}this.setAttribute("position",new vi(h,3))}function Ac(e,t,r){$i.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:r},this.fromBufferGeometry(new Lc(e,t,r)),this.mergeVertices()}function Lc(e,t,r){Li.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:r};var n,i,o=[],a=[],s=[],c=[],l=new Nr,u=new Nr,h=new Nr,d=new Nr,p=new Nr;e.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var f=t+1;for(n=0;n<=r;n++){var m=n/r;for(i=0;i<=t;i++){var g=i/t;e(g,m,u),a.push(u.x,u.y,u.z),g-1e-5>=0?(e(g-1e-5,m,h),d.subVectors(u,h)):(e(g+1e-5,m,h),d.subVectors(h,u)),m-1e-5>=0?(e(g,m-1e-5,h),p.subVectors(u,h)):(e(g,m+1e-5,h),p.subVectors(h,u)),l.crossVectors(d,p).normalize(),s.push(l.x,l.y,l.z),c.push(g,m)}}for(n=0;n<r;n++)for(i=0;i<t;i++){var v=n*f+i,y=n*f+i+1,_=(n+1)*f+i+1,b=(n+1)*f+i;o.push(v,y,b),o.push(y,_,b)}this.setIndex(o),this.setAttribute("position",new vi(a,3)),this.setAttribute("normal",new vi(s,3)),this.setAttribute("uv",new vi(c,2))}function Rc(e,t,r,n){$i.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:n},this.fromBufferGeometry(new Pc(e,t,r,n)),this.mergeVertices()}function Pc(e,t,r,n){Li.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:n},r=r||1;var i=[],o=[];function a(e,t,r,n){var i,o,a=Math.pow(2,n),c=[];for(i=0;i<=a;i++){c[i]=[];var l=e.clone().lerp(r,i/a),u=t.clone().lerp(r,i/a),h=a-i;for(o=0;o<=h;o++)c[i][o]=0===o&&i===a?l:l.clone().lerp(u,o/h)}for(i=0;i<a;i++)for(o=0;o<2*(a-i)-1;o++){var d=Math.floor(o/2);o%2==0?(s(c[i][d+1]),s(c[i+1][d]),s(c[i][d])):(s(c[i][d+1]),s(c[i+1][d+1]),s(c[i+1][d]))}}function s(e){i.push(e.x,e.y,e.z)}function c(t,r){var n=3*t;r.x=e[n+0],r.y=e[n+1],r.z=e[n+2]}function l(e,t,r,n){n<0&&1===e.x&&(o[t]=e.x-1),0===r.x&&0===r.z&&(o[t]=n/2/Math.PI+.5)}function u(e){return Math.atan2(e.z,-e.x)}!function(e){for(var r=new Nr,n=new Nr,i=new Nr,o=0;o<t.length;o+=3)c(t[o+0],r),c(t[o+1],n),c(t[o+2],i),a(r,n,i,e)}(n=n||0),function(e){for(var t=new Nr,r=0;r<i.length;r+=3)t.x=i[r+0],t.y=i[r+1],t.z=i[r+2],t.normalize().multiplyScalar(e),i[r+0]=t.x,i[r+1]=t.y,i[r+2]=t.z}(r),function(){for(var e=new Nr,t=0;t<i.length;t+=3){e.x=i[t+0],e.y=i[t+1],e.z=i[t+2];var r=u(e)/2/Math.PI+.5,n=(a=e,Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))/Math.PI+.5);o.push(r,1-n)}var a;(function(){for(var e=new Nr,t=new Nr,r=new Nr,n=new Nr,a=new Tr,s=new Tr,c=new Tr,h=0,d=0;h<i.length;h+=9,d+=6){e.set(i[h+0],i[h+1],i[h+2]),t.set(i[h+3],i[h+4],i[h+5]),r.set(i[h+6],i[h+7],i[h+8]),a.set(o[d+0],o[d+1]),s.set(o[d+2],o[d+3]),c.set(o[d+4],o[d+5]),n.copy(e).add(t).add(r).divideScalar(3);var p=u(n);l(a,d+0,e,p),l(s,d+2,t,p),l(c,d+4,r,p)}})(),function(){for(var e=0;e<o.length;e+=6){var t=o[e+0],r=o[e+2],n=o[e+4],i=Math.max(t,r,n),a=Math.min(t,r,n);i>.9&&a<.1&&(t<.2&&(o[e+0]+=1),r<.2&&(o[e+2]+=1),n<.2&&(o[e+4]+=1))}}()}(),this.setAttribute("position",new vi(i,3)),this.setAttribute("normal",new vi(i.slice(),3)),this.setAttribute("uv",new vi(o,2)),0===n?this.computeVertexNormals():this.normalizeNormals()}function Cc(e,t){$i.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new jc(e,t)),this.mergeVertices()}function jc(e,t){Pc.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Oc(e,t){$i.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Dc(e,t)),this.mergeVertices()}function Dc(e,t){Pc.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Ic(e,t){$i.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Nc(e,t)),this.mergeVertices()}function Nc(e,t){var r=(1+Math.sqrt(5))/2,n=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1];Pc.call(this,n,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Uc(e,t){$i.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new zc(e,t)),this.mergeVertices()}function zc(e,t){var r=(1+Math.sqrt(5))/2,n=1/r,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-r,0,-n,r,0,n,-r,0,n,r,-n,-r,0,-n,r,0,n,-r,0,n,r,0,-r,0,-n,r,0,-n,-r,0,n,r,0,n];Pc.call(this,i,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Fc(e,t,r,n,i,o){$i.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:n,closed:i},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new Bc(e,t,r,n,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function Bc(e,t,r,n,i){Li.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:n,closed:i},t=t||64,r=r||1,n=n||8,i=i||!1;var o=e.computeFrenetFrames(t,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;var a,s,c=new Nr,l=new Nr,u=new Tr,h=new Nr,d=[],p=[],f=[],m=[];function g(i){h=e.getPointAt(i/t,h);var a=o.normals[i],u=o.binormals[i];for(s=0;s<=n;s++){var f=s/n*Math.PI*2,m=Math.sin(f),g=-Math.cos(f);l.x=g*a.x+m*u.x,l.y=g*a.y+m*u.y,l.z=g*a.z+m*u.z,l.normalize(),p.push(l.x,l.y,l.z),c.x=h.x+r*l.x,c.y=h.y+r*l.y,c.z=h.z+r*l.z,d.push(c.x,c.y,c.z)}}!function(){for(a=0;a<t;a++)g(a);g(!1===i?t:0),function(){for(a=0;a<=t;a++)for(s=0;s<=n;s++)u.x=a/t,u.y=s/n,f.push(u.x,u.y)}(),function(){for(s=1;s<=t;s++)for(a=1;a<=n;a++){var e=(n+1)*(s-1)+(a-1),r=(n+1)*s+(a-1),i=(n+1)*s+a,o=(n+1)*(s-1)+a;m.push(e,r,o),m.push(r,i,o)}}()}(),this.setIndex(m),this.setAttribute("position",new vi(d,3)),this.setAttribute("normal",new vi(p,3)),this.setAttribute("uv",new vi(f,2))}function Gc(e,t,r,n,i,o,a){$i.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:n,p:i,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Vc(e,t,r,n,i,o)),this.mergeVertices()}function Vc(e,t,r,n,i,o){Li.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:n,p:i,q:o},e=e||1,t=t||.4,r=Math.floor(r)||64,n=Math.floor(n)||8,i=i||2,o=o||3;var a,s,c=[],l=[],u=[],h=[],d=new Nr,p=new Nr,f=new Nr,m=new Nr,g=new Nr,v=new Nr,y=new Nr;for(a=0;a<=r;++a){var _=a/r*i*Math.PI*2;for(A(_,i,o,e,f),A(_+.01,i,o,e,m),v.subVectors(m,f),y.addVectors(m,f),g.crossVectors(v,y),y.crossVectors(g,v),g.normalize(),y.normalize(),s=0;s<=n;++s){var b=s/n*Math.PI*2,x=-t*Math.cos(b),w=t*Math.sin(b);d.x=f.x+(x*y.x+w*g.x),d.y=f.y+(x*y.y+w*g.y),d.z=f.z+(x*y.z+w*g.z),l.push(d.x,d.y,d.z),p.subVectors(d,f).normalize(),u.push(p.x,p.y,p.z),h.push(a/r),h.push(s/n)}}for(s=1;s<=r;s++)for(a=1;a<=n;a++){var M=(n+1)*(s-1)+(a-1),S=(n+1)*s+(a-1),T=(n+1)*s+a,E=(n+1)*(s-1)+a;c.push(M,S,E),c.push(S,T,E)}function A(e,t,r,n,i){var o=Math.cos(e),a=Math.sin(e),s=r/t*e,c=Math.cos(s);i.x=n*(2+c)*.5*o,i.y=n*(2+c)*a*.5,i.z=n*Math.sin(s)*.5}this.setIndex(c),this.setAttribute("position",new vi(l,3)),this.setAttribute("normal",new vi(u,3)),this.setAttribute("uv",new vi(h,2))}function Hc(e,t,r,n,i){$i.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:n,arc:i},this.fromBufferGeometry(new kc(e,t,r,n,i)),this.mergeVertices()}function kc(e,t,r,n,i){Li.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:n,arc:i},e=e||1,t=t||.4,r=Math.floor(r)||8,n=Math.floor(n)||6,i=i||2*Math.PI;var o,a,s=[],c=[],l=[],u=[],h=new Nr,d=new Nr,p=new Nr;for(o=0;o<=r;o++)for(a=0;a<=n;a++){var f=a/n*i,m=o/r*Math.PI*2;d.x=(e+t*Math.cos(m))*Math.cos(f),d.y=(e+t*Math.cos(m))*Math.sin(f),d.z=t*Math.sin(m),c.push(d.x,d.y,d.z),h.x=e*Math.cos(f),h.y=e*Math.sin(f),p.subVectors(d,h).normalize(),l.push(p.x,p.y,p.z),u.push(a/n),u.push(o/r)}for(o=1;o<=r;o++)for(a=1;a<=n;a++){var g=(n+1)*o+a-1,v=(n+1)*(o-1)+a-1,y=(n+1)*(o-1)+a,_=(n+1)*o+a;s.push(g,v,_),s.push(v,y,_)}this.setIndex(s),this.setAttribute("position",new vi(c,3)),this.setAttribute("normal",new vi(l,3)),this.setAttribute("uv",new vi(u,2))}bc.prototype=Object.assign(Object.create(ln.prototype),{constructor:bc,isPoints:!0,raycast:function(e,t){var r=this.geometry,n=this.matrixWorld,i=e.params.Points.threshold;if(null===r.boundingSphere&&r.computeBoundingSphere(),yc.copy(r.boundingSphere),yc.applyMatrix4(n),yc.radius+=i,!1!==e.ray.intersectsSphere(yc)){gc.getInverse(n),vc.copy(e.ray).applyMatrix4(gc);var o=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o;if(r.isBufferGeometry){var s=r.index,c=r.attributes.position.array;if(null!==s)for(var l=s.array,u=0,h=l.length;u<h;u++){var d=l[u];_c.fromArray(c,3*d),xc(_c,d,a,n,e,t,this)}else{u=0;for(var p=c.length/3;u<p;u++)_c.fromArray(c,3*u),xc(_c,u,a,n,e,t,this)}}else{var f=r.vertices;for(u=0,p=f.length;u<p;u++)xc(f[u],u,a,n,e,t,this)}}},updateMorphTargets:function(){var e,t,r,n=this.geometry;if(n.isBufferGeometry){var i=n.morphAttributes,o=Object.keys(i);if(o.length>0){var a=i[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=a.length;e<t;e++)r=a[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[r]=e}}else{var s=n.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),wc.prototype=Object.assign(Object.create(Rr.prototype),{constructor:wc,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),Mc.prototype=Object.create(Rr.prototype),Mc.prototype.constructor=Mc,Mc.prototype.isCompressedTexture=!0,Sc.prototype=Object.create(Rr.prototype),Sc.prototype.constructor=Sc,Sc.prototype.isCanvasTexture=!0,Tc.prototype=Object.create(Rr.prototype),Tc.prototype.constructor=Tc,Tc.prototype.isDepthTexture=!0,Ec.prototype=Object.create(Li.prototype),Ec.prototype.constructor=Ec,Ac.prototype=Object.create($i.prototype),Ac.prototype.constructor=Ac,Lc.prototype=Object.create(Li.prototype),Lc.prototype.constructor=Lc,Rc.prototype=Object.create($i.prototype),Rc.prototype.constructor=Rc,Pc.prototype=Object.create(Li.prototype),Pc.prototype.constructor=Pc,Cc.prototype=Object.create($i.prototype),Cc.prototype.constructor=Cc,jc.prototype=Object.create(Pc.prototype),jc.prototype.constructor=jc,Oc.prototype=Object.create($i.prototype),Oc.prototype.constructor=Oc,Dc.prototype=Object.create(Pc.prototype),Dc.prototype.constructor=Dc,Ic.prototype=Object.create($i.prototype),Ic.prototype.constructor=Ic,Nc.prototype=Object.create(Pc.prototype),Nc.prototype.constructor=Nc,Uc.prototype=Object.create($i.prototype),Uc.prototype.constructor=Uc,zc.prototype=Object.create(Pc.prototype),zc.prototype.constructor=zc,Fc.prototype=Object.create($i.prototype),Fc.prototype.constructor=Fc,Bc.prototype=Object.create(Li.prototype),Bc.prototype.constructor=Bc,Bc.prototype.toJSON=function(){var e=Li.prototype.toJSON.call(this);return e.path=this.parameters.path.toJSON(),e},Gc.prototype=Object.create($i.prototype),Gc.prototype.constructor=Gc,Vc.prototype=Object.create(Li.prototype),Vc.prototype.constructor=Vc,Hc.prototype=Object.create($i.prototype),Hc.prototype.constructor=Hc,kc.prototype=Object.create(Li.prototype),kc.prototype.constructor=kc;var Wc=function(e,t,r){r=r||2;var n,i,o,a,s,c,l,u=t&&t.length,h=u?t[0]*r:e.length,d=qc(e,0,h,r,!0),p=[];if(!d||d.next===d.prev)return p;if(u&&(d=function(e,t,r,n){var i,o,a,s,c,l=[];for(i=0,o=t.length;i<o;i++)a=t[i]*n,s=i<o-1?t[i+1]*n:e.length,(c=qc(e,a,s,n,!1))===c.next&&(c.steiner=!0),l.push(rl(c));for(l.sort($c),i=0;i<l.length;i++)el(l[i],r),r=Xc(r,r.next);return r}(e,t,d,r)),e.length>80*r){n=o=e[0],i=a=e[1];for(var f=r;f<h;f+=r)(s=e[f])<n&&(n=s),(c=e[f+1])<i&&(i=c),s>o&&(o=s),c>a&&(a=c);l=0!==(l=Math.max(o-n,a-i))?1/l:0}return Yc(d,p,r,n,i,l),p};function qc(e,t,r,n,i){var o,a;if(i===function(e,t,r,n){for(var i=0,o=t,a=r-n;o<r;o+=n)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}(e,t,r,n)>0)for(o=t;o<r;o+=n)a=ul(o,e[o],e[o+1],a);else for(o=r-n;o>=t;o-=n)a=ul(o,e[o],e[o+1],a);return a&&al(a,a.next)&&(hl(a),a=a.next),a}function Xc(e,t){if(!e)return e;t||(t=e);var r,n=e;do{if(r=!1,n.steiner||!al(n,n.next)&&0!==ol(n.prev,n,n.next))n=n.next;else{if(hl(n),(n=t=n.prev)===n.next)break;r=!0}}while(r||n!==t);return t}function Yc(e,t,r,n,i,o,a){if(e){!a&&o&&function(e,t,r,n){var i=e;do{null===i.z&&(i.z=tl(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,r,n,i,o,a,s,c,l=1;do{for(r=e,e=null,o=null,a=0;r;){for(a++,n=r,s=0,t=0;t<l&&(s++,n=n.nextZ);t++);for(c=l;s>0||c>0&&n;)0!==s&&(0===c||!n||r.z<=n.z)?(i=r,r=r.nextZ,s--):(i=n,n=n.nextZ,c--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;r=n}o.nextZ=null,l*=2}while(a>1)}(i)}(e,n,i,o);for(var s,c,l=e;e.prev!==e.next;)if(s=e.prev,c=e.next,o?Jc(e,n,i,o):Zc(e))t.push(s.i/r),t.push(e.i/r),t.push(c.i/r),hl(e),e=c.next,l=c.next;else if((e=c)===l){a?1===a?Yc(e=Kc(e,t,r),t,r,n,i,o,2):2===a&&Qc(e,t,r,n,i,o):Yc(Xc(e),t,r,n,i,o,1);break}}}function Zc(e){var t=e.prev,r=e,n=e.next;if(ol(t,r,n)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(nl(t.x,t.y,r.x,r.y,n.x,n.y,i.x,i.y)&&ol(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function Jc(e,t,r,n){var i=e.prev,o=e,a=e.next;if(ol(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,c=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,l=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,u=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=tl(s,c,t,r,n),d=tl(l,u,t,r,n),p=e.prevZ,f=e.nextZ;p&&p.z>=h&&f&&f.z<=d;){if(p!==e.prev&&p!==e.next&&nl(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&ol(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,f!==e.prev&&f!==e.next&&nl(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&ol(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;p&&p.z>=h;){if(p!==e.prev&&p!==e.next&&nl(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&ol(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;f&&f.z<=d;){if(f!==e.prev&&f!==e.next&&nl(i.x,i.y,o.x,o.y,a.x,a.y,f.x,f.y)&&ol(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function Kc(e,t,r){var n=e;do{var i=n.prev,o=n.next.next;!al(i,o)&&sl(i,n,n.next,o)&&cl(i,o)&&cl(o,i)&&(t.push(i.i/r),t.push(n.i/r),t.push(o.i/r),hl(n),hl(n.next),n=e=o),n=n.next}while(n!==e);return n}function Qc(e,t,r,n,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&il(a,s)){var c=ll(a,s);return a=Xc(a,a.next),c=Xc(c,c.next),Yc(a,t,r,n,i,o),void Yc(c,t,r,n,i,o)}s=s.next}a=a.next}while(a!==e)}function $c(e,t){return e.x-t.x}function el(e,t){if(t=function(e,t){var r,n=t,i=e.x,o=e.y,a=-1/0;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){var s=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=i&&s>a){if(a=s,s===i){if(o===n.y)return n;if(o===n.next.y)return n.next}r=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!r)return null;if(i===a)return r.prev;var c,l=r,u=r.x,h=r.y,d=1/0;n=r.next;for(;n!==l;)i>=n.x&&n.x>=u&&i!==n.x&&nl(o<h?i:a,o,u,h,o<h?a:i,o,n.x,n.y)&&((c=Math.abs(o-n.y)/(i-n.x))<d||c===d&&n.x>r.x)&&cl(n,e)&&(r=n,d=c),n=n.next;return r}(e,t)){var r=ll(t,e);Xc(r,r.next)}}function tl(e,t,r,n,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function rl(e){var t=e,r=e;do{(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next}while(t!==e);return r}function nl(e,t,r,n,i,o,a,s){return(i-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(n-s)-(r-a)*(t-s)>=0&&(r-a)*(o-s)-(i-a)*(n-s)>=0}function il(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&sl(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}(e,t)&&cl(e,t)&&cl(t,e)&&function(e,t){var r=e,n=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next}while(r!==e);return n}(e,t)}function ol(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function al(e,t){return e.x===t.x&&e.y===t.y}function sl(e,t,r,n){return!!(al(e,r)&&al(t,n)||al(e,n)&&al(r,t))||ol(e,t,r)>0!=ol(e,t,n)>0&&ol(r,n,e)>0!=ol(r,n,t)>0}function cl(e,t){return ol(e.prev,e,e.next)<0?ol(e,t,e.next)>=0&&ol(e,e.prev,t)>=0:ol(e,t,e.prev)<0||ol(e,e.next,t)<0}function ll(e,t){var r=new dl(e.i,e.x,e.y),n=new dl(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function ul(e,t,r,n){var i=new dl(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function hl(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function dl(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var pl={area:function(e){for(var t=e.length,r=0,n=t-1,i=0;i<t;n=i++)r+=e[n].x*e[i].y-e[i].x*e[n].y;return.5*r},isClockWise:function(e){return pl.area(e)<0},triangulateShape:function(e,t){var r=[],n=[],i=[];fl(e),ml(r,e);var o=e.length;t.forEach(fl);for(var a=0;a<t.length;a++)n.push(o),o+=t[a].length,ml(r,t[a]);var s=Wc(r,n);for(a=0;a<s.length;a+=3)i.push(s.slice(a,a+3));return i}};function fl(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function ml(e,t){for(var r=0;r<t.length;r++)e.push(t[r].x),e.push(t[r].y)}function gl(e,t){$i.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new vl(e,t)),this.mergeVertices()}function vl(e,t){Li.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];for(var r=this,n=[],i=[],o=0,a=e.length;o<a;o++){s(e[o])}function s(e){var o=[],a=void 0!==t.curveSegments?t.curveSegments:12,s=void 0!==t.steps?t.steps:1,c=void 0!==t.depth?t.depth:100,l=void 0===t.bevelEnabled||t.bevelEnabled,u=void 0!==t.bevelThickness?t.bevelThickness:6,h=void 0!==t.bevelSize?t.bevelSize:u-2,d=void 0!==t.bevelOffset?t.bevelOffset:0,p=void 0!==t.bevelSegments?t.bevelSegments:3,f=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:yl;void 0!==t.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),c=t.amount);var g,v,y,_,b,x,w,M,S=!1;f&&(g=f.getSpacedPoints(s),S=!0,l=!1,v=f.computeFrenetFrames(s,!1),y=new Nr,_=new Nr,b=new Nr),l||(p=0,u=0,h=0,d=0);var T=e.extractPoints(a),E=T.shape,A=T.holes;if(!pl.isClockWise(E))for(E=E.reverse(),w=0,M=A.length;w<M;w++)x=A[w],pl.isClockWise(x)&&(A[w]=x.reverse());var L=pl.triangulateShape(E,A),R=E;for(w=0,M=A.length;w<M;w++)x=A[w],E=E.concat(x);function P(e,t,r){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(r).add(e)}var C,j,O,D,I,N,U=E.length,z=L.length;function F(e,t,r){var n,i,o,a=e.x-t.x,s=e.y-t.y,c=r.x-e.x,l=r.y-e.y,u=a*a+s*s,h=a*l-s*c;if(Math.abs(h)>Number.EPSILON){var d=Math.sqrt(u),p=Math.sqrt(c*c+l*l),f=t.x-s/d,m=t.y+a/d,g=((r.x-l/p-f)*l-(r.y+c/p-m)*c)/(a*l-s*c),v=(n=f+a*g-e.x)*n+(i=m+s*g-e.y)*i;if(v<=2)return new Tr(n,i);o=Math.sqrt(v/2)}else{var y=!1;a>Number.EPSILON?c>Number.EPSILON&&(y=!0):a<-Number.EPSILON?c<-Number.EPSILON&&(y=!0):Math.sign(s)===Math.sign(l)&&(y=!0),y?(n=-s,i=a,o=Math.sqrt(u)):(n=a,i=s,o=Math.sqrt(u/2))}return new Tr(n/o,i/o)}for(var B=[],G=0,V=R.length,H=V-1,k=G+1;G<V;G++,H++,k++)H===V&&(H=0),k===V&&(k=0),B[G]=F(R[G],R[H],R[k]);var W,q,X=[],Y=B.concat();for(w=0,M=A.length;w<M;w++){for(x=A[w],W=[],G=0,H=(V=x.length)-1,k=G+1;G<V;G++,H++,k++)H===V&&(H=0),k===V&&(k=0),W[G]=F(x[G],x[H],x[k]);X.push(W),Y=Y.concat(W)}for(C=0;C<p;C++){for(O=C/p,D=u*Math.cos(O*Math.PI/2),j=h*Math.sin(O*Math.PI/2)+d,G=0,V=R.length;G<V;G++)J((I=P(R[G],B[G],j)).x,I.y,-D);for(w=0,M=A.length;w<M;w++)for(x=A[w],W=X[w],G=0,V=x.length;G<V;G++)J((I=P(x[G],W[G],j)).x,I.y,-D)}for(j=h+d,G=0;G<U;G++)I=l?P(E[G],Y[G],j):E[G],S?(_.copy(v.normals[0]).multiplyScalar(I.x),y.copy(v.binormals[0]).multiplyScalar(I.y),b.copy(g[0]).add(_).add(y),J(b.x,b.y,b.z)):J(I.x,I.y,0);for(q=1;q<=s;q++)for(G=0;G<U;G++)I=l?P(E[G],Y[G],j):E[G],S?(_.copy(v.normals[q]).multiplyScalar(I.x),y.copy(v.binormals[q]).multiplyScalar(I.y),b.copy(g[q]).add(_).add(y),J(b.x,b.y,b.z)):J(I.x,I.y,c/s*q);for(C=p-1;C>=0;C--){for(O=C/p,D=u*Math.cos(O*Math.PI/2),j=h*Math.sin(O*Math.PI/2)+d,G=0,V=R.length;G<V;G++)J((I=P(R[G],B[G],j)).x,I.y,c+D);for(w=0,M=A.length;w<M;w++)for(x=A[w],W=X[w],G=0,V=x.length;G<V;G++)I=P(x[G],W[G],j),S?J(I.x,I.y+g[s-1].y,g[s-1].x+D):J(I.x,I.y,c+D)}function Z(e,t){var r,n;for(G=e.length;--G>=0;){r=G,(n=G-1)<0&&(n=e.length-1);var i=0,o=s+2*p;for(i=0;i<o;i++){var a=U*i,c=U*(i+1);Q(t+r+a,t+n+a,t+n+c,t+r+c)}}}function J(e,t,r){o.push(e),o.push(t),o.push(r)}function K(e,t,i){$(e),$(t),$(i);var o=n.length/3,a=m.generateTopUV(r,n,o-3,o-2,o-1);ee(a[0]),ee(a[1]),ee(a[2])}function Q(e,t,i,o){$(e),$(t),$(o),$(t),$(i),$(o);var a=n.length/3,s=m.generateSideWallUV(r,n,a-6,a-3,a-2,a-1);ee(s[0]),ee(s[1]),ee(s[3]),ee(s[1]),ee(s[2]),ee(s[3])}function $(e){n.push(o[3*e+0]),n.push(o[3*e+1]),n.push(o[3*e+2])}function ee(e){i.push(e.x),i.push(e.y)}!function(){var e=n.length/3;if(l){var t=0,i=U*t;for(G=0;G<z;G++)K((N=L[G])[2]+i,N[1]+i,N[0]+i);for(i=U*(t=s+2*p),G=0;G<z;G++)K((N=L[G])[0]+i,N[1]+i,N[2]+i)}else{for(G=0;G<z;G++)K((N=L[G])[2],N[1],N[0]);for(G=0;G<z;G++)K((N=L[G])[0]+U*s,N[1]+U*s,N[2]+U*s)}r.addGroup(e,n.length/3-e,0)}(),function(){var e=n.length/3,t=0;for(Z(R,t),t+=R.length,w=0,M=A.length;w<M;w++)Z(x=A[w],t),t+=x.length;r.addGroup(e,n.length/3-e,1)}()}this.setAttribute("position",new vi(n,3)),this.setAttribute("uv",new vi(i,2)),this.computeVertexNormals()}gl.prototype=Object.create($i.prototype),gl.prototype.constructor=gl,gl.prototype.toJSON=function(){var e=$i.prototype.toJSON.call(this);return _l(this.parameters.shapes,this.parameters.options,e)},vl.prototype=Object.create(Li.prototype),vl.prototype.constructor=vl,vl.prototype.toJSON=function(){var e=Li.prototype.toJSON.call(this);return _l(this.parameters.shapes,this.parameters.options,e)};var yl={generateTopUV:function(e,t,r,n,i){var o=t[3*r],a=t[3*r+1],s=t[3*n],c=t[3*n+1],l=t[3*i],u=t[3*i+1];return[new Tr(o,a),new Tr(s,c),new Tr(l,u)]},generateSideWallUV:function(e,t,r,n,i,o){var a=t[3*r],s=t[3*r+1],c=t[3*r+2],l=t[3*n],u=t[3*n+1],h=t[3*n+2],d=t[3*i],p=t[3*i+1],f=t[3*i+2],m=t[3*o],g=t[3*o+1],v=t[3*o+2];return Math.abs(s-u)<.01?[new Tr(a,1-c),new Tr(l,1-h),new Tr(d,1-f),new Tr(m,1-v)]:[new Tr(s,1-c),new Tr(u,1-h),new Tr(p,1-f),new Tr(g,1-v)]}};function _l(e,t,r){if(r.shapes=[],Array.isArray(e))for(var n=0,i=e.length;n<i;n++){var o=e[n];r.shapes.push(o.uuid)}else r.shapes.push(e.uuid);return void 0!==t.extrudePath&&(r.options.extrudePath=t.extrudePath.toJSON()),r}function bl(e,t){$i.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new xl(e,t)),this.mergeVertices()}function xl(e,t){var r=(t=t||{}).font;if(!r||!r.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new $i;var n=r.generateShapes(e,t.size);t.depth=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),vl.call(this,n,t),this.type="TextBufferGeometry"}function wl(e,t,r,n,i,o,a){$i.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:n,phiLength:i,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new Ml(e,t,r,n,i,o,a)),this.mergeVertices()}function Ml(e,t,r,n,i,o,a){Li.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:n,phiLength:i,thetaStart:o,thetaLength:a},e=e||1,t=Math.max(3,Math.floor(t)||8),r=Math.max(2,Math.floor(r)||6),n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI,o=void 0!==o?o:0,a=void 0!==a?a:Math.PI;var s,c,l=Math.min(o+a,Math.PI),u=0,h=[],d=new Nr,p=new Nr,f=[],m=[],g=[],v=[];for(c=0;c<=r;c++){var y=[],_=c/r,b=0;for(0==c&&0==o?b=.5/t:c==r&&l==Math.PI&&(b=-.5/t),s=0;s<=t;s++){var x=s/t;d.x=-e*Math.cos(n+x*i)*Math.sin(o+_*a),d.y=e*Math.cos(o+_*a),d.z=e*Math.sin(n+x*i)*Math.sin(o+_*a),m.push(d.x,d.y,d.z),p.copy(d).normalize(),g.push(p.x,p.y,p.z),v.push(x+b,1-_),y.push(u++)}h.push(y)}for(c=0;c<r;c++)for(s=0;s<t;s++){var w=h[c][s+1],M=h[c][s],S=h[c+1][s],T=h[c+1][s+1];(0!==c||o>0)&&f.push(w,M,T),(c!==r-1||l<Math.PI)&&f.push(M,S,T)}this.setIndex(f),this.setAttribute("position",new vi(m,3)),this.setAttribute("normal",new vi(g,3)),this.setAttribute("uv",new vi(v,2))}function Sl(e,t,r,n,i,o){$i.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:n,thetaStart:i,thetaLength:o},this.fromBufferGeometry(new Tl(e,t,r,n,i,o)),this.mergeVertices()}function Tl(e,t,r,n,i,o){Li.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:n,thetaStart:i,thetaLength:o},e=e||.5,t=t||1,i=void 0!==i?i:0,o=void 0!==o?o:2*Math.PI,r=void 0!==r?Math.max(3,r):8;var a,s,c,l=[],u=[],h=[],d=[],p=e,f=(t-e)/(n=void 0!==n?Math.max(1,n):1),m=new Nr,g=new Tr;for(s=0;s<=n;s++){for(c=0;c<=r;c++)a=i+c/r*o,m.x=p*Math.cos(a),m.y=p*Math.sin(a),u.push(m.x,m.y,m.z),h.push(0,0,1),g.x=(m.x/t+1)/2,g.y=(m.y/t+1)/2,d.push(g.x,g.y);p+=f}for(s=0;s<n;s++){var v=s*(r+1);for(c=0;c<r;c++){var y=a=c+v,_=a+r+1,b=a+r+2,x=a+1;l.push(y,_,x),l.push(_,b,x)}}this.setIndex(l),this.setAttribute("position",new vi(u,3)),this.setAttribute("normal",new vi(h,3)),this.setAttribute("uv",new vi(d,2))}function El(e,t,r,n){$i.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:n},this.fromBufferGeometry(new Al(e,t,r,n)),this.mergeVertices()}function Al(e,t,r,n){Li.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:n},t=Math.floor(t)||12,r=r||0,n=n||2*Math.PI,n=Sr.clamp(n,0,2*Math.PI);var i,o,a,s=[],c=[],l=[],u=1/t,h=new Nr,d=new Tr;for(o=0;o<=t;o++){var p=r+o*u*n,f=Math.sin(p),m=Math.cos(p);for(a=0;a<=e.length-1;a++)h.x=e[a].x*f,h.y=e[a].y,h.z=e[a].x*m,c.push(h.x,h.y,h.z),d.x=o/t,d.y=a/(e.length-1),l.push(d.x,d.y)}for(o=0;o<t;o++)for(a=0;a<e.length-1;a++){var g=i=a+o*e.length,v=i+e.length,y=i+e.length+1,_=i+1;s.push(g,v,_),s.push(v,y,_)}if(this.setIndex(s),this.setAttribute("position",new vi(c,3)),this.setAttribute("uv",new vi(l,2)),this.computeVertexNormals(),n===2*Math.PI){var b=this.attributes.normal.array,x=new Nr,w=new Nr,M=new Nr;for(i=t*e.length*3,o=0,a=0;o<e.length;o++,a+=3)x.x=b[a+0],x.y=b[a+1],x.z=b[a+2],w.x=b[i+a+0],w.y=b[i+a+1],w.z=b[i+a+2],M.addVectors(x,w).normalize(),b[a+0]=b[i+a+0]=M.x,b[a+1]=b[i+a+1]=M.y,b[a+2]=b[i+a+2]=M.z}}function Ll(e,t){$i.call(this),this.type="ShapeGeometry","object"==typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new Rl(e,t)),this.mergeVertices()}function Rl(e,t){Li.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var r=[],n=[],i=[],o=[],a=0,s=0;if(!1===Array.isArray(e))l(e);else for(var c=0;c<e.length;c++)l(e[c]),this.addGroup(a,s,c),a+=s,s=0;function l(e){var a,c,l,u=n.length/3,h=e.extractPoints(t),d=h.shape,p=h.holes;for(!1===pl.isClockWise(d)&&(d=d.reverse()),a=0,c=p.length;a<c;a++)l=p[a],!0===pl.isClockWise(l)&&(p[a]=l.reverse());var f=pl.triangulateShape(d,p);for(a=0,c=p.length;a<c;a++)l=p[a],d=d.concat(l);for(a=0,c=d.length;a<c;a++){var m=d[a];n.push(m.x,m.y,0),i.push(0,0,1),o.push(m.x,m.y)}for(a=0,c=f.length;a<c;a++){var g=f[a],v=g[0]+u,y=g[1]+u,_=g[2]+u;r.push(v,y,_),s+=3}}this.setIndex(r),this.setAttribute("position",new vi(n,3)),this.setAttribute("normal",new vi(i,3)),this.setAttribute("uv",new vi(o,2))}function Pl(e,t){if(t.shapes=[],Array.isArray(e))for(var r=0,n=e.length;r<n;r++){var i=e[r];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}function Cl(e,t){Li.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var r,n,i,o,a=[],s=Math.cos(Sr.DEG2RAD*t),c=[0,0],l={},u=["a","b","c"];e.isBufferGeometry?(o=new $i).fromBufferGeometry(e):o=e.clone(),o.mergeVertices(),o.computeFaceNormals();for(var h=o.vertices,d=o.faces,p=0,f=d.length;p<f;p++)for(var m=d[p],g=0;g<3;g++)r=m[u[g]],n=m[u[(g+1)%3]],c[0]=Math.min(r,n),c[1]=Math.max(r,n),void 0===l[i=c[0]+","+c[1]]?l[i]={index1:c[0],index2:c[1],face1:p,face2:void 0}:l[i].face2=p;for(i in l){var v=l[i];if(void 0===v.face2||d[v.face1].normal.dot(d[v.face2].normal)<=s){var y=h[v.index1];a.push(y.x,y.y,y.z),y=h[v.index2],a.push(y.x,y.y,y.z)}}this.setAttribute("position",new vi(a,3))}function jl(e,t,r,n,i,o,a,s){$i.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:n,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new Ol(e,t,r,n,i,o,a,s)),this.mergeVertices()}function Ol(e,t,r,n,i,o,a,s){Li.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:n,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s};var c=this;e=void 0!==e?e:1,t=void 0!==t?t:1,r=r||1,n=Math.floor(n)||8,i=Math.floor(i)||1,o=void 0!==o&&o,a=void 0!==a?a:0,s=void 0!==s?s:2*Math.PI;var l=[],u=[],h=[],d=[],p=0,f=[],m=r/2,g=0;function v(r){var i,o,f,v=new Tr,y=new Nr,_=0,b=!0===r?e:t,x=!0===r?1:-1;for(o=p,i=1;i<=n;i++)u.push(0,m*x,0),h.push(0,x,0),d.push(.5,.5),p++;for(f=p,i=0;i<=n;i++){var w=i/n*s+a,M=Math.cos(w),S=Math.sin(w);y.x=b*S,y.y=m*x,y.z=b*M,u.push(y.x,y.y,y.z),h.push(0,x,0),v.x=.5*M+.5,v.y=.5*S*x+.5,d.push(v.x,v.y),p++}for(i=0;i<n;i++){var T=o+i,E=f+i;!0===r?l.push(E,E+1,T):l.push(E+1,E,T),_+=3}c.addGroup(g,_,!0===r?1:2),g+=_}!function(){var o,v,y=new Nr,_=new Nr,b=0,x=(t-e)/r;for(v=0;v<=i;v++){var w=[],M=v/i,S=M*(t-e)+e;for(o=0;o<=n;o++){var T=o/n,E=T*s+a,A=Math.sin(E),L=Math.cos(E);_.x=S*A,_.y=-M*r+m,_.z=S*L,u.push(_.x,_.y,_.z),y.set(A,x,L).normalize(),h.push(y.x,y.y,y.z),d.push(T,1-M),w.push(p++)}f.push(w)}for(o=0;o<n;o++)for(v=0;v<i;v++){var R=f[v][o],P=f[v+1][o],C=f[v+1][o+1],j=f[v][o+1];l.push(R,P,j),l.push(P,C,j),b+=6}c.addGroup(g,b,0),g+=b}(),!1===o&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(l),this.setAttribute("position",new vi(u,3)),this.setAttribute("normal",new vi(h,3)),this.setAttribute("uv",new vi(d,2))}function Dl(e,t,r,n,i,o,a){jl.call(this,0,e,t,r,n,i,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:n,openEnded:i,thetaStart:o,thetaLength:a}}function Il(e,t,r,n,i,o,a){Ol.call(this,0,e,t,r,n,i,o,a),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:n,openEnded:i,thetaStart:o,thetaLength:a}}function Nl(e,t,r,n){$i.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:n},this.fromBufferGeometry(new Ul(e,t,r,n)),this.mergeVertices()}function Ul(e,t,r,n){Li.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:n},e=e||1,t=void 0!==t?Math.max(3,t):8,r=void 0!==r?r:0,n=void 0!==n?n:2*Math.PI;var i,o,a=[],s=[],c=[],l=[],u=new Nr,h=new Tr;for(s.push(0,0,0),c.push(0,0,1),l.push(.5,.5),o=0,i=3;o<=t;o++,i+=3){var d=r+o/t*n;u.x=e*Math.cos(d),u.y=e*Math.sin(d),s.push(u.x,u.y,u.z),c.push(0,0,1),h.x=(s[i]/e+1)/2,h.y=(s[i+1]/e+1)/2,l.push(h.x,h.y)}for(i=1;i<=t;i++)a.push(i,i+1,0);this.setIndex(a),this.setAttribute("position",new vi(s,3)),this.setAttribute("normal",new vi(c,3)),this.setAttribute("uv",new vi(l,2))}bl.prototype=Object.create($i.prototype),bl.prototype.constructor=bl,xl.prototype=Object.create(vl.prototype),xl.prototype.constructor=xl,wl.prototype=Object.create($i.prototype),wl.prototype.constructor=wl,Ml.prototype=Object.create(Li.prototype),Ml.prototype.constructor=Ml,Sl.prototype=Object.create($i.prototype),Sl.prototype.constructor=Sl,Tl.prototype=Object.create(Li.prototype),Tl.prototype.constructor=Tl,El.prototype=Object.create($i.prototype),El.prototype.constructor=El,Al.prototype=Object.create(Li.prototype),Al.prototype.constructor=Al,Ll.prototype=Object.create($i.prototype),Ll.prototype.constructor=Ll,Ll.prototype.toJSON=function(){var e=$i.prototype.toJSON.call(this);return Pl(this.parameters.shapes,e)},Rl.prototype=Object.create(Li.prototype),Rl.prototype.constructor=Rl,Rl.prototype.toJSON=function(){var e=Li.prototype.toJSON.call(this);return Pl(this.parameters.shapes,e)},Cl.prototype=Object.create(Li.prototype),Cl.prototype.constructor=Cl,jl.prototype=Object.create($i.prototype),jl.prototype.constructor=jl,Ol.prototype=Object.create(Li.prototype),Ol.prototype.constructor=Ol,Dl.prototype=Object.create(jl.prototype),Dl.prototype.constructor=Dl,Il.prototype=Object.create(Ol.prototype),Il.prototype.constructor=Il,Nl.prototype=Object.create($i.prototype),Nl.prototype.constructor=Nl,Ul.prototype=Object.create(Li.prototype),Ul.prototype.constructor=Ul;var zl=Object.freeze({__proto__:null,WireframeGeometry:Ec,ParametricGeometry:Ac,ParametricBufferGeometry:Lc,TetrahedronGeometry:Cc,TetrahedronBufferGeometry:jc,OctahedronGeometry:Oc,OctahedronBufferGeometry:Dc,IcosahedronGeometry:Ic,IcosahedronBufferGeometry:Nc,DodecahedronGeometry:Uc,DodecahedronBufferGeometry:zc,PolyhedronGeometry:Rc,PolyhedronBufferGeometry:Pc,TubeGeometry:Fc,TubeBufferGeometry:Bc,TorusKnotGeometry:Gc,TorusKnotBufferGeometry:Vc,TorusGeometry:Hc,TorusBufferGeometry:kc,TextGeometry:bl,TextBufferGeometry:xl,SphereGeometry:wl,SphereBufferGeometry:Ml,RingGeometry:Sl,RingBufferGeometry:Tl,PlaneGeometry:wo,PlaneBufferGeometry:Mo,LatheGeometry:El,LatheBufferGeometry:Al,ShapeGeometry:Ll,ShapeBufferGeometry:Rl,ExtrudeGeometry:gl,ExtrudeBufferGeometry:vl,EdgesGeometry:Cl,ConeGeometry:Dl,ConeBufferGeometry:Il,CylinderGeometry:jl,CylinderBufferGeometry:Ol,CircleGeometry:Nl,CircleBufferGeometry:Ul,BoxGeometry:eo,BoxBufferGeometry:to});function Fl(e){ai.call(this),this.type="ShadowMaterial",this.color=new ei(0),this.transparent=!0,this.setValues(e)}function Bl(e){so.call(this,e),this.type="RawShaderMaterial"}function Gl(e){ai.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ei(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ei(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Xt,this.normalScale=new Tr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Vl(e){Gl.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearcoat=0,this.clearcoatRoughness=0,this.sheen=null,this.clearcoatNormalScale=new Tr(1,1),this.clearcoatNormalMap=null,this.transparency=0,this.setValues(e)}function Hl(e){ai.call(this),this.type="MeshPhongMaterial",this.color=new ei(16777215),this.specular=new ei(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ei(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Xt,this.normalScale=new Tr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ee,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function kl(e){ai.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ei(16777215),this.specular=new ei(1118481),this.shininess=30,this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ei(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Xt,this.normalScale=new Tr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Wl(e){ai.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Xt,this.normalScale=new Tr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function ql(e){ai.call(this),this.type="MeshLambertMaterial",this.color=new ei(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ei(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ee,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Xl(e){ai.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ei(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Xt,this.normalScale=new Tr(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Yl(e){ic.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}Fl.prototype=Object.create(ai.prototype),Fl.prototype.constructor=Fl,Fl.prototype.isShadowMaterial=!0,Fl.prototype.copy=function(e){return ai.prototype.copy.call(this,e),this.color.copy(e.color),this},Bl.prototype=Object.create(so.prototype),Bl.prototype.constructor=Bl,Bl.prototype.isRawShaderMaterial=!0,Gl.prototype=Object.create(ai.prototype),Gl.prototype.constructor=Gl,Gl.prototype.isMeshStandardMaterial=!0,Gl.prototype.copy=function(e){return ai.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Vl.prototype=Object.create(Gl.prototype),Vl.prototype.constructor=Vl,Vl.prototype.isMeshPhysicalMaterial=!0,Vl.prototype.copy=function(e){return Gl.prototype.copy.call(this,e),this.defines={STANDARD:"",PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearcoat=e.clearcoat,this.clearcoatRoughness=e.clearcoatRoughness,e.sheen?this.sheen=(this.sheen||new ei).copy(e.sheen):this.sheen=null,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.transparency=e.transparency,this},Hl.prototype=Object.create(ai.prototype),Hl.prototype.constructor=Hl,Hl.prototype.isMeshPhongMaterial=!0,Hl.prototype.copy=function(e){return ai.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},kl.prototype=Object.create(ai.prototype),kl.prototype.constructor=kl,kl.prototype.isMeshToonMaterial=!0,kl.prototype.copy=function(e){return ai.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Wl.prototype=Object.create(ai.prototype),Wl.prototype.constructor=Wl,Wl.prototype.isMeshNormalMaterial=!0,Wl.prototype.copy=function(e){return ai.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},ql.prototype=Object.create(ai.prototype),ql.prototype.constructor=ql,ql.prototype.isMeshLambertMaterial=!0,ql.prototype.copy=function(e){return ai.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Xl.prototype=Object.create(ai.prototype),Xl.prototype.constructor=Xl,Xl.prototype.isMeshMatcapMaterial=!0,Xl.prototype.copy=function(e){return ai.prototype.copy.call(this,e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Yl.prototype=Object.create(ic.prototype),Yl.prototype.constructor=Yl,Yl.prototype.isLineDashedMaterial=!0,Yl.prototype.copy=function(e){return ic.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var Zl=Object.freeze({__proto__:null,ShadowMaterial:Fl,SpriteMaterial:Ps,RawShaderMaterial:Bl,ShaderMaterial:so,PointsMaterial:mc,MeshPhysicalMaterial:Vl,MeshStandardMaterial:Gl,MeshPhongMaterial:Hl,MeshToonMaterial:kl,MeshNormalMaterial:Wl,MeshLambertMaterial:ql,MeshDepthMaterial:us,MeshDistanceMaterial:hs,MeshBasicMaterial:si,MeshMatcapMaterial:Xl,LineDashedMaterial:Yl,LineBasicMaterial:ic,Material:ai}),Jl={arraySlice:function(e,t,r){return Jl.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==r?r:e.length)):e.slice(t,r)},convertArray:function(e,t,r){return!e||!r&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,r=new Array(t),n=0;n!==t;++n)r[n]=n;return r.sort((function(t,r){return e[t]-e[r]})),r},sortedArray:function(e,t,r){for(var n=e.length,i=new e.constructor(n),o=0,a=0;a!==n;++o)for(var s=r[o]*t,c=0;c!==t;++c)i[a++]=e[s+c];return i},flattenJSON:function(e,t,r,n){for(var i=1,o=e[0];void 0!==o&&void 0===o[n];)o=e[i++];if(void 0!==o){var a=o[n];if(void 0!==a)if(Array.isArray(a))do{void 0!==(a=o[n])&&(t.push(o.time),r.push.apply(r,a)),o=e[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{void 0!==(a=o[n])&&(t.push(o.time),a.toArray(r,r.length)),o=e[i++]}while(void 0!==o);else do{void 0!==(a=o[n])&&(t.push(o.time),r.push(a)),o=e[i++]}while(void 0!==o)}},subclip:function(e,t,r,n,i){i=i||30;var o=e.clone();o.name=t;for(var a=[],s=0;s<o.tracks.length;++s){for(var c=o.tracks[s],l=c.getValueSize(),u=[],h=[],d=0;d<c.times.length;++d){var p=c.times[d]*i;if(!(p<r||p>=n)){u.push(c.times[d]);for(var f=0;f<l;++f)h.push(c.values[d*l+f])}}0!==u.length&&(c.times=Jl.convertArray(u,c.times.constructor),c.values=Jl.convertArray(h,c.values.constructor),a.push(c))}o.tracks=a;var m=1/0;for(s=0;s<o.tracks.length;++s)m>o.tracks[s].times[0]&&(m=o.tracks[s].times[0]);for(s=0;s<o.tracks.length;++s)o.tracks[s].shift(-1*m);return o.resetDuration(),o}};function Kl(e,t,r,n){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new t.constructor(r),this.sampleValues=t,this.valueSize=r}function Ql(e,t,r,n){Kl.call(this,e,t,r,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function $l(e,t,r,n){Kl.call(this,e,t,r,n)}function eu(e,t,r,n){Kl.call(this,e,t,r,n)}function tu(e,t,r,n){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Jl.convertArray(t,this.TimeBufferType),this.values=Jl.convertArray(r,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation)}function ru(e,t,r){tu.call(this,e,t,r)}function nu(e,t,r,n){tu.call(this,e,t,r,n)}function iu(e,t,r,n){tu.call(this,e,t,r,n)}function ou(e,t,r,n){Kl.call(this,e,t,r,n)}function au(e,t,r,n){tu.call(this,e,t,r,n)}function su(e,t,r,n){tu.call(this,e,t,r,n)}function cu(e,t,r,n){tu.call(this,e,t,r,n)}function lu(e,t,r){this.name=e,this.tracks=r,this.duration=void 0!==t?t:-1,this.uuid=Sr.generateUUID(),this.duration<0&&this.resetDuration()}function uu(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return iu;case"vector":case"vector2":case"vector3":case"vector4":return cu;case"color":return nu;case"quaternion":return au;case"bool":case"boolean":return ru;case"string":return su}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){var r=[],n=[];Jl.flattenJSON(e.keys,r,n,"value"),e.times=r,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}Object.assign(Kl.prototype,{evaluate:function(e){var t=this.parameterPositions,r=this._cachedIndex,n=t[r],i=t[r-1];e:{t:{var o;r:{n:if(!(e<n)){for(var a=r+2;;){if(void 0===n){if(e<i)break n;return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,e,i)}if(r===a)break;if(i=n,e<(n=t[++r]))break t}o=t.length;break r}if(e>=i)break e;var s=t[1];e<s&&(r=2,i=s);for(a=r-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,e,n);if(r===a)break;if(n=i,e>=(i=t[--r-1]))break t}o=r,r=0}for(;r<o;){var c=r+o>>>1;e<t[c]?o=c:r=c+1}if(n=t[r],void 0===(i=t[r-1]))return this._cachedIndex=0,this.beforeStart_(0,e,n);if(void 0===n)return r=t.length,this._cachedIndex=r,this.afterEnd_(r-1,i,e)}this._cachedIndex=r,this.intervalChanged_(r,i,n)}return this.interpolate_(r,i,e,n)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,r=this.sampleValues,n=this.valueSize,i=e*n,o=0;o!==n;++o)t[o]=r[i+o];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),
//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(Kl.prototype,{beforeStart_:Kl.prototype.copySampleValue_,afterEnd_:Kl.prototype.copySampleValue_}),Ql.prototype=Object.assign(Object.create(Kl.prototype),{constructor:Ql,DefaultSettings_:{endingStart:Ct,endingEnd:Ct},intervalChanged_:function(e,t,r){var n=this.parameterPositions,i=e-2,o=e+1,a=n[i],s=n[o];if(void 0===a)switch(this.getSettings_().endingStart){case jt:i=e,a=2*t-r;break;case Ot:a=t+n[i=n.length-2]-n[i+1];break;default:i=e,a=r}if(void 0===s)switch(this.getSettings_().endingEnd){case jt:o=e,s=2*r-t;break;case Ot:o=1,s=r+n[1]-n[0];break;default:o=e-1,s=t}var c=.5*(r-t),l=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(s-r),this._offsetPrev=i*l,this._offsetNext=o*l},interpolate_:function(e,t,r,n){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,c=s-a,l=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(r-t)/(n-t),f=p*p,m=f*p,g=-h*m+2*h*f-h*p,v=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*p+1,y=(-1-d)*m+(1.5+d)*f+.5*p,_=d*m-d*f,b=0;b!==a;++b)i[b]=g*o[l+b]+v*o[c+b]+y*o[s+b]+_*o[u+b];return i}}),$l.prototype=Object.assign(Object.create(Kl.prototype),{constructor:$l,interpolate_:function(e,t,r,n){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,c=s-a,l=(r-t)/(n-t),u=1-l,h=0;h!==a;++h)i[h]=o[c+h]*u+o[s+h]*l;return i}}),eu.prototype=Object.assign(Object.create(Kl.prototype),{constructor:eu,interpolate_:function(e){return this.copySampleValue_(e-1)}}),Object.assign(tu,{toJSON:function(e){var t,r=e.constructor;if(void 0!==r.toJSON)t=r.toJSON(e);else{t={name:e.name,times:Jl.convertArray(e.times,Array),values:Jl.convertArray(e.values,Array)};var n=e.getInterpolation();n!==e.DefaultInterpolation&&(t.interpolation=n)}return t.type=e.ValueTypeName,t}}),Object.assign(tu.prototype,{constructor:tu,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:Rt,InterpolantFactoryMethodDiscrete:function(e){return new eu(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new $l(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new Ql(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case Lt:t=this.InterpolantFactoryMethodDiscrete;break;case Rt:t=this.InterpolantFactoryMethodLinear;break;case Pt:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){var r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(r);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Lt;case this.InterpolantFactoryMethodLinear:return Rt;case this.InterpolantFactoryMethodSmooth:return Pt}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,r=0,n=t.length;r!==n;++r)t[r]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,r=0,n=t.length;r!==n;++r)t[r]*=e;return this},trim:function(e,t){for(var r=this.times,n=r.length,i=0,o=n-1;i!==n&&r[i]<e;)++i;for(;-1!==o&&r[o]>t;)--o;if(++o,0!==i||o!==n){i>=o&&(i=(o=Math.max(o,1))-1);var a=this.getValueSize();this.times=Jl.arraySlice(r,i,o),this.values=Jl.arraySlice(this.values,i*a,o*a)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var r=this.times,n=this.values,i=r.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var o=null,a=0;a!==i;a++){var s=r[a];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,s),e=!1;break}if(null!==o&&o>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,s,o),e=!1;break}o=s}if(void 0!==n&&Jl.isTypedArray(n)){a=0;for(var c=n.length;a!==c;++a){var l=n[a];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,l),e=!1;break}}}return e},optimize:function(){for(var e=Jl.arraySlice(this.times),t=Jl.arraySlice(this.values),r=this.getValueSize(),n=this.getInterpolation()===Pt,i=1,o=e.length-1,a=1;a<o;++a){var s=!1,c=e[a];if(c!==e[a+1]&&(1!==a||c!==c[0]))if(n)s=!0;else for(var l=a*r,u=l-r,h=l+r,d=0;d!==r;++d){var p=t[l+d];if(p!==t[u+d]||p!==t[h+d]){s=!0;break}}if(s){if(a!==i){e[i]=e[a];var f=a*r,m=i*r;for(d=0;d!==r;++d)t[m+d]=t[f+d]}++i}}if(o>0){e[i]=e[o];for(f=o*r,m=i*r,d=0;d!==r;++d)t[m+d]=t[f+d];++i}return i!==e.length?(this.times=Jl.arraySlice(e,0,i),this.values=Jl.arraySlice(t,0,i*r)):(this.times=e,this.values=t),this},clone:function(){var e=Jl.arraySlice(this.times,0),t=Jl.arraySlice(this.values,0),r=new(0,this.constructor)(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}),ru.prototype=Object.assign(Object.create(tu.prototype),{constructor:ru,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:Lt,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),nu.prototype=Object.assign(Object.create(tu.prototype),{constructor:nu,ValueTypeName:"color"}),iu.prototype=Object.assign(Object.create(tu.prototype),{constructor:iu,ValueTypeName:"number"}),ou.prototype=Object.assign(Object.create(Kl.prototype),{constructor:ou,interpolate_:function(e,t,r,n){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,c=(r-t)/(n-t),l=s+a;s!==l;s+=4)Or.slerpFlat(i,0,o,s-a,o,s,c);return i}}),au.prototype=Object.assign(Object.create(tu.prototype),{constructor:au,ValueTypeName:"quaternion",DefaultInterpolation:Rt,InterpolantFactoryMethodLinear:function(e){return new ou(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),su.prototype=Object.assign(Object.create(tu.prototype),{constructor:su,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:Lt,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),cu.prototype=Object.assign(Object.create(tu.prototype),{constructor:cu,ValueTypeName:"vector"}),Object.assign(lu,{parse:function(e){for(var t=[],r=e.tracks,n=1/(e.fps||1),i=0,o=r.length;i!==o;++i)t.push(uu(r[i]).scale(n));return new lu(e.name,e.duration,t)},toJSON:function(e){for(var t=[],r=e.tracks,n={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid},i=0,o=r.length;i!==o;++i)t.push(tu.toJSON(r[i]));return n},CreateFromMorphTargetSequence:function(e,t,r,n){for(var i=t.length,o=[],a=0;a<i;a++){var s=[],c=[];s.push((a+i-1)%i,a,(a+1)%i),c.push(0,1,0);var l=Jl.getKeyframeOrder(s);s=Jl.sortedArray(s,1,l),c=Jl.sortedArray(c,1,l),n||0!==s[0]||(s.push(i),c.push(c[0])),o.push(new iu(".morphTargetInfluences["+t[a].name+"]",s,c).scale(1/r))}return new lu(e,-1,o)},findByName:function(e,t){var r=e;if(!Array.isArray(e)){var n=e;r=n.geometry&&n.geometry.animations||n.animations}for(var i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null},CreateClipsFromMorphTargetSequences:function(e,t,r){for(var n={},i=/^([\w-]*?)([\d]+)$/,o=0,a=e.length;o<a;o++){var s=e[o],c=s.name.match(i);if(c&&c.length>1){var l=n[h=c[1]];l||(n[h]=l=[]),l.push(s)}}var u=[];for(var h in n)u.push(lu.CreateFromMorphTargetSequence(h,n[h],t,r));return u},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var r=function(e,t,r,n,i){if(0!==r.length){var o=[],a=[];Jl.flattenJSON(r,o,a,n),0!==o.length&&i.push(new e(t,o,a))}},n=[],i=e.name||"default",o=e.length||-1,a=e.fps||30,s=e.hierarchy||[],c=0;c<s.length;c++){var l=s[c].keys;if(l&&0!==l.length)if(l[0].morphTargets){for(var u={},h=0;h<l.length;h++)if(l[h].morphTargets)for(var d=0;d<l[h].morphTargets.length;d++)u[l[h].morphTargets[d]]=-1;for(var p in u){var f=[],m=[];for(d=0;d!==l[h].morphTargets.length;++d){var g=l[h];f.push(g.time),m.push(g.morphTarget===p?1:0)}n.push(new iu(".morphTargetInfluence["+p+"]",f,m))}o=u.length*(a||1)}else{var v=".bones["+t[c].name+"]";r(cu,v+".position",l,"pos",n),r(au,v+".quaternion",l,"rot",n),r(cu,v+".scale",l,"scl",n)}}return 0===n.length?null:new lu(i,o,n)}}),Object.assign(lu.prototype,{resetDuration:function(){for(var e=0,t=0,r=this.tracks.length;t!==r;++t){var n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},validate:function(){for(var e=!0,t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this},clone:function(){for(var e=[],t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new lu(this.name,this.duration,e)}});var hu={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function du(e,t,r){var n=this,i=!1,o=0,a=0,s=void 0,c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(e){a++,!1===i&&void 0!==n.onStart&&n.onStart(e,o,a),i=!0},this.itemEnd=function(e){o++,void 0!==n.onProgress&&n.onProgress(e,o,a),o===a&&(i=!1,void 0!==n.onLoad&&n.onLoad())},this.itemError=function(e){void 0!==n.onError&&n.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this},this.addHandler=function(e,t){return c.push(e,t),this},this.removeHandler=function(e){var t=c.indexOf(e);return-1!==t&&c.splice(t,2),this},this.getHandler=function(e){for(var t=0,r=c.length;t<r;t+=2){var n=c[t],i=c[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return i}return null}}var pu=new du;function fu(e){this.manager=void 0!==e?e:pu,this.crossOrigin="anonymous",this.path="",this.resourcePath=""}Object.assign(fu.prototype,{load:function(){},parse:function(){},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this}});var mu={};function gu(e){fu.call(this,e)}function vu(e){fu.call(this,e)}function yu(e){fu.call(this,e)}function _u(e){fu.call(this,e)}function bu(e){fu.call(this,e)}function xu(e){fu.call(this,e)}function wu(e){fu.call(this,e)}function Mu(){this.type="Curve",this.arcLengthDivisions=200}function Su(e,t,r,n,i,o,a,s){Mu.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=r||1,this.yRadius=n||1,this.aStartAngle=i||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function Tu(e,t,r,n,i,o){Su.call(this,e,t,r,r,n,i,o),this.type="ArcCurve"}function Eu(){var e=0,t=0,r=0,n=0;function i(i,o,a,s){e=i,t=a,r=-3*i+3*o-2*a-s,n=2*i-2*o+a+s}return{initCatmullRom:function(e,t,r,n,o){i(t,r,o*(r-e),o*(n-t))},initNonuniformCatmullRom:function(e,t,r,n,o,a,s){var c=(t-e)/o-(r-e)/(o+a)+(r-t)/a,l=(r-t)/a-(n-t)/(a+s)+(n-r)/s;i(t,r,c*=a,l*=a)},calc:function(i){var o=i*i;return e+t*i+r*o+n*(o*i)}}}gu.prototype=Object.assign(Object.create(fu.prototype),{constructor:gu,load:function(e,t,r,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=hu.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;if(void 0===mu[e]){var a=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(a){var s=a[1],c=!!a[2],l=a[3];l=decodeURIComponent(l),c&&(l=atob(l));try{var u,h=(this.responseType||"").toLowerCase();switch(h){case"arraybuffer":case"blob":for(var d=new Uint8Array(l.length),p=0;p<l.length;p++)d[p]=l.charCodeAt(p);u="blob"===h?new Blob([d.buffer],{type:s}):d.buffer;break;case"document":var f=new DOMParser;u=f.parseFromString(l,s);break;case"json":u=JSON.parse(l);break;default:u=l}setTimeout((function(){t&&t(u),i.manager.itemEnd(e)}),0)}catch(t){setTimeout((function(){n&&n(t),i.manager.itemError(e),i.manager.itemEnd(e)}),0)}}else{mu[e]=[],mu[e].push({onLoad:t,onProgress:r,onError:n});var m=new XMLHttpRequest;for(var g in m.open("GET",e,!0),m.addEventListener("load",(function(t){var r=this.response,n=mu[e];if(delete mu[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),hu.add(e,r);for(var o=0,a=n.length;o<a;o++){(s=n[o]).onLoad&&s.onLoad(r)}i.manager.itemEnd(e)}else{for(o=0,a=n.length;o<a;o++){var s;(s=n[o]).onError&&s.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}}),!1),m.addEventListener("progress",(function(t){for(var r=mu[e],n=0,i=r.length;n<i;n++){var o=r[n];o.onProgress&&o.onProgress(t)}}),!1),m.addEventListener("error",(function(t){var r=mu[e];delete mu[e];for(var n=0,o=r.length;n<o;n++){var a=r[n];a.onError&&a.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}),!1),m.addEventListener("abort",(function(t){var r=mu[e];delete mu[e];for(var n=0,o=r.length;n<o;n++){var a=r[n];a.onError&&a.onError(t)}i.manager.itemError(e),i.manager.itemEnd(e)}),!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)m.setRequestHeader(g,this.requestHeader[g]);m.send(null)}return i.manager.itemStart(e),m}mu[e].push({onLoad:t,onProgress:r,onError:n})},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),vu.prototype=Object.assign(Object.create(fu.prototype),{constructor:vu,load:function(e,t,r,n){var i=this,o=new gu(i.manager);o.setPath(i.path),o.load(e,(function(e){t(i.parse(JSON.parse(e)))}),r,n)},parse:function(e){for(var t=[],r=0;r<e.length;r++){var n=lu.parse(e[r]);t.push(n)}return t}}),yu.prototype=Object.assign(Object.create(fu.prototype),{constructor:yu,load:function(e,t,r,n){var i=this,o=[],a=new Mc;a.image=o;var s=new gu(this.manager);function c(c){s.load(e[c],(function(e){var r=i.parse(e,!0);o[c]={width:r.width,height:r.height,format:r.format,mipmaps:r.mipmaps},6===(l+=1)&&(1===r.mipmapCount&&(a.minFilter=Te),a.format=r.format,a.needsUpdate=!0,t&&t(a))}),r,n)}if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(e))for(var l=0,u=0,h=e.length;u<h;++u)c(u);else s.load(e,(function(e){var r=i.parse(e,!0);if(r.isCubemap)for(var n=r.mipmaps.length/r.mipmapCount,s=0;s<n;s++){o[s]={mipmaps:[]};for(var c=0;c<r.mipmapCount;c++)o[s].mipmaps.push(r.mipmaps[s*r.mipmapCount+c]),o[s].format=r.format,o[s].width=r.width,o[s].height=r.height}else a.image.width=r.width,a.image.height=r.height,a.mipmaps=r.mipmaps;1===r.mipmapCount&&(a.minFilter=Te),a.format=r.format,a.needsUpdate=!0,t&&t(a)}),r,n);return a}}),_u.prototype=Object.assign(Object.create(fu.prototype),{constructor:_u,load:function(e,t,r,n){var i=this,o=new mo,a=new gu(this.manager);return a.setResponseType("arraybuffer"),a.setPath(this.path),a.load(e,(function(e){var r=i.parse(e);r&&(void 0!==r.image?o.image=r.image:void 0!==r.data&&(o.image.width=r.width,o.image.height=r.height,o.image.data=r.data),o.wrapS=void 0!==r.wrapS?r.wrapS:ye,o.wrapT=void 0!==r.wrapT?r.wrapT:ye,o.magFilter=void 0!==r.magFilter?r.magFilter:Te,o.minFilter=void 0!==r.minFilter?r.minFilter:Te,o.anisotropy=void 0!==r.anisotropy?r.anisotropy:1,void 0!==r.format&&(o.format=r.format),void 0!==r.type&&(o.type=r.type),void 0!==r.mipmaps&&(o.mipmaps=r.mipmaps,o.minFilter=Le),1===r.mipmapCount&&(o.minFilter=Te),o.needsUpdate=!0,t&&t(o,r))}),r,n),o}}),bu.prototype=Object.assign(Object.create(fu.prototype),{constructor:bu,load:function(e,t,r,n){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=hu.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){a.removeEventListener("load",s,!1),a.removeEventListener("error",c,!1),hu.add(e,this),t&&t(this),i.manager.itemEnd(e)}function c(t){a.removeEventListener("load",s,!1),a.removeEventListener("error",c,!1),n&&n(t),i.manager.itemError(e),i.manager.itemEnd(e)}return a.addEventListener("load",s,!1),a.addEventListener("error",c,!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(e),a.src=e,a}}),xu.prototype=Object.assign(Object.create(fu.prototype),{constructor:xu,load:function(e,t,r,n){var i=new Uo,o=new bu(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var a=0;function s(r){o.load(e[r],(function(e){i.images[r]=e,6===++a&&(i.needsUpdate=!0,t&&t(i))}),void 0,n)}for(var c=0;c<e.length;++c)s(c);return i}}),wu.prototype=Object.assign(Object.create(fu.prototype),{constructor:wu,load:function(e,t,r,n){var i=new Rr,o=new bu(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,(function(r){i.image=r;var n=e.search(/\.jpe?g($|\?)/i)>0||0===e.search(/^data\:image\/jpeg/);i.format=n?He:ke,i.needsUpdate=!0,void 0!==t&&t(i)}),r,n),i}}),Object.assign(Mu.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){var r=this.getUtoTmapping(e);return this.getPoint(r,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],r=0;r<=e;r++)t.push(this.getPoint(r/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,r,n=[],i=this.getPoint(0),o=0;for(n.push(0),r=1;r<=e;r++)o+=(t=this.getPoint(r/e)).distanceTo(i),n.push(o),i=t;return this.cacheArcLengths=n,n},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var r,n=this.getLengths(),i=0,o=n.length;r=t||e*n[o-1];for(var a,s=0,c=o-1;s<=c;)if((a=n[i=Math.floor(s+(c-s)/2)]-r)<0)s=i+1;else{if(!(a>0)){c=i;break}c=i-1}if(n[i=c]===r)return i/(o-1);var l=n[i];return(i+(r-l)/(n[i+1]-l))/(o-1)},getTangent:function(e){var t=e-1e-4,r=e+1e-4;t<0&&(t=0),r>1&&(r=1);var n=this.getPoint(t);return this.getPoint(r).clone().sub(n).normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var r,n,i,o=new Nr,a=[],s=[],c=[],l=new Nr,u=new kr;for(r=0;r<=e;r++)n=r/e,a[r]=this.getTangentAt(n),a[r].normalize();s[0]=new Nr,c[0]=new Nr;var h=Number.MAX_VALUE,d=Math.abs(a[0].x),p=Math.abs(a[0].y),f=Math.abs(a[0].z);for(d<=h&&(h=d,o.set(1,0,0)),p<=h&&(h=p,o.set(0,1,0)),f<=h&&o.set(0,0,1),l.crossVectors(a[0],o).normalize(),s[0].crossVectors(a[0],l),c[0].crossVectors(a[0],s[0]),r=1;r<=e;r++)s[r]=s[r-1].clone(),c[r]=c[r-1].clone(),l.crossVectors(a[r-1],a[r]),l.length()>Number.EPSILON&&(l.normalize(),i=Math.acos(Sr.clamp(a[r-1].dot(a[r]),-1,1)),s[r].applyMatrix4(u.makeRotationAxis(l,i))),c[r].crossVectors(a[r],s[r]);if(!0===t)for(i=Math.acos(Sr.clamp(s[0].dot(s[e]),-1,1)),i/=e,a[0].dot(l.crossVectors(s[0],s[e]))>0&&(i=-i),r=1;r<=e;r++)s[r].applyMatrix4(u.makeRotationAxis(a[r],i*r)),c[r].crossVectors(a[r],s[r]);return{tangents:a,normals:s,binormals:c}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),Su.prototype=Object.create(Mu.prototype),Su.prototype.constructor=Su,Su.prototype.isEllipseCurve=!0,Su.prototype.getPoint=function(e,t){for(var r=t||new Tr,n=2*Math.PI,i=this.aEndAngle-this.aStartAngle,o=Math.abs(i)<Number.EPSILON;i<0;)i+=n;for(;i>n;)i-=n;i<Number.EPSILON&&(i=o?0:n),!0!==this.aClockwise||o||(i===n?i=-n:i-=n);var a=this.aStartAngle+e*i,s=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){var l=Math.cos(this.aRotation),u=Math.sin(this.aRotation),h=s-this.aX,d=c-this.aY;s=h*l-d*u+this.aX,c=h*u+d*l+this.aY}return r.set(s,c)},Su.prototype.copy=function(e){return Mu.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Su.prototype.toJSON=function(){var e=Mu.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},Su.prototype.fromJSON=function(e){return Mu.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Tu.prototype=Object.create(Su.prototype),Tu.prototype.constructor=Tu,Tu.prototype.isArcCurve=!0;var Au=new Nr,Lu=new Eu,Ru=new Eu,Pu=new Eu;function Cu(e,t,r,n){Mu.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=r||"centripetal",this.tension=n||.5}function ju(e,t,r,n,i){var o=.5*(n-t),a=.5*(i-r),s=e*e;return(2*r-2*n+o+a)*(e*s)+(-3*r+3*n-2*o-a)*s+o*e+r}function Ou(e,t,r,n){return function(e,t){var r=1-e;return r*r*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,r)+function(e,t){return e*e*t}(e,n)}function Du(e,t,r,n,i){return function(e,t){var r=1-e;return r*r*r*t}(e,t)+function(e,t){var r=1-e;return 3*r*r*e*t}(e,r)+function(e,t){return 3*(1-e)*e*e*t}(e,n)+function(e,t){return e*e*e*t}(e,i)}function Iu(e,t,r,n){Mu.call(this),this.type="CubicBezierCurve",this.v0=e||new Tr,this.v1=t||new Tr,this.v2=r||new Tr,this.v3=n||new Tr}function Nu(e,t,r,n){Mu.call(this),this.type="CubicBezierCurve3",this.v0=e||new Nr,this.v1=t||new Nr,this.v2=r||new Nr,this.v3=n||new Nr}function Uu(e,t){Mu.call(this),this.type="LineCurve",this.v1=e||new Tr,this.v2=t||new Tr}function zu(e,t){Mu.call(this),this.type="LineCurve3",this.v1=e||new Nr,this.v2=t||new Nr}function Fu(e,t,r){Mu.call(this),this.type="QuadraticBezierCurve",this.v0=e||new Tr,this.v1=t||new Tr,this.v2=r||new Tr}function Bu(e,t,r){Mu.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new Nr,this.v1=t||new Nr,this.v2=r||new Nr}function Gu(e){Mu.call(this),this.type="SplineCurve",this.points=e||[]}Cu.prototype=Object.create(Mu.prototype),Cu.prototype.constructor=Cu,Cu.prototype.isCatmullRomCurve3=!0,Cu.prototype.getPoint=function(e,t){var r,n,i,o,a=t||new Nr,s=this.points,c=s.length,l=(c-(this.closed?0:1))*e,u=Math.floor(l),h=l-u;if(this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/c)+1)*c:0===h&&u===c-1&&(u=c-2,h=1),this.closed||u>0?r=s[(u-1)%c]:(Au.subVectors(s[0],s[1]).add(s[0]),r=Au),n=s[u%c],i=s[(u+1)%c],this.closed||u+2<c?o=s[(u+2)%c]:(Au.subVectors(s[c-1],s[c-2]).add(s[c-1]),o=Au),"centripetal"===this.curveType||"chordal"===this.curveType){var d="chordal"===this.curveType?.5:.25,p=Math.pow(r.distanceToSquared(n),d),f=Math.pow(n.distanceToSquared(i),d),m=Math.pow(i.distanceToSquared(o),d);f<1e-4&&(f=1),p<1e-4&&(p=f),m<1e-4&&(m=f),Lu.initNonuniformCatmullRom(r.x,n.x,i.x,o.x,p,f,m),Ru.initNonuniformCatmullRom(r.y,n.y,i.y,o.y,p,f,m),Pu.initNonuniformCatmullRom(r.z,n.z,i.z,o.z,p,f,m)}else"catmullrom"===this.curveType&&(Lu.initCatmullRom(r.x,n.x,i.x,o.x,this.tension),Ru.initCatmullRom(r.y,n.y,i.y,o.y,this.tension),Pu.initCatmullRom(r.z,n.z,i.z,o.z,this.tension));return a.set(Lu.calc(h),Ru.calc(h),Pu.calc(h)),a},Cu.prototype.copy=function(e){Mu.prototype.copy.call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Cu.prototype.toJSON=function(){var e=Mu.prototype.toJSON.call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++){var n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},Cu.prototype.fromJSON=function(e){Mu.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var n=e.points[t];this.points.push((new Nr).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},Iu.prototype=Object.create(Mu.prototype),Iu.prototype.constructor=Iu,Iu.prototype.isCubicBezierCurve=!0,Iu.prototype.getPoint=function(e,t){var r=t||new Tr,n=this.v0,i=this.v1,o=this.v2,a=this.v3;return r.set(Du(e,n.x,i.x,o.x,a.x),Du(e,n.y,i.y,o.y,a.y)),r},Iu.prototype.copy=function(e){return Mu.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Iu.prototype.toJSON=function(){var e=Mu.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Iu.prototype.fromJSON=function(e){return Mu.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},Nu.prototype=Object.create(Mu.prototype),Nu.prototype.constructor=Nu,Nu.prototype.isCubicBezierCurve3=!0,Nu.prototype.getPoint=function(e,t){var r=t||new Nr,n=this.v0,i=this.v1,o=this.v2,a=this.v3;return r.set(Du(e,n.x,i.x,o.x,a.x),Du(e,n.y,i.y,o.y,a.y),Du(e,n.z,i.z,o.z,a.z)),r},Nu.prototype.copy=function(e){return Mu.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Nu.prototype.toJSON=function(){var e=Mu.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Nu.prototype.fromJSON=function(e){return Mu.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},Uu.prototype=Object.create(Mu.prototype),Uu.prototype.constructor=Uu,Uu.prototype.isLineCurve=!0,Uu.prototype.getPoint=function(e,t){var r=t||new Tr;return 1===e?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r},Uu.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Uu.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},Uu.prototype.copy=function(e){return Mu.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Uu.prototype.toJSON=function(){var e=Mu.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Uu.prototype.fromJSON=function(e){return Mu.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},zu.prototype=Object.create(Mu.prototype),zu.prototype.constructor=zu,zu.prototype.isLineCurve3=!0,zu.prototype.getPoint=function(e,t){var r=t||new Nr;return 1===e?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r},zu.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},zu.prototype.copy=function(e){return Mu.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},zu.prototype.toJSON=function(){var e=Mu.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},zu.prototype.fromJSON=function(e){return Mu.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Fu.prototype=Object.create(Mu.prototype),Fu.prototype.constructor=Fu,Fu.prototype.isQuadraticBezierCurve=!0,Fu.prototype.getPoint=function(e,t){var r=t||new Tr,n=this.v0,i=this.v1,o=this.v2;return r.set(Ou(e,n.x,i.x,o.x),Ou(e,n.y,i.y,o.y)),r},Fu.prototype.copy=function(e){return Mu.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Fu.prototype.toJSON=function(){var e=Mu.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Fu.prototype.fromJSON=function(e){return Mu.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Bu.prototype=Object.create(Mu.prototype),Bu.prototype.constructor=Bu,Bu.prototype.isQuadraticBezierCurve3=!0,Bu.prototype.getPoint=function(e,t){var r=t||new Nr,n=this.v0,i=this.v1,o=this.v2;return r.set(Ou(e,n.x,i.x,o.x),Ou(e,n.y,i.y,o.y),Ou(e,n.z,i.z,o.z)),r},Bu.prototype.copy=function(e){return Mu.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Bu.prototype.toJSON=function(){var e=Mu.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Bu.prototype.fromJSON=function(e){return Mu.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Gu.prototype=Object.create(Mu.prototype),Gu.prototype.constructor=Gu,Gu.prototype.isSplineCurve=!0,Gu.prototype.getPoint=function(e,t){var r=t||new Tr,n=this.points,i=(n.length-1)*e,o=Math.floor(i),a=i-o,s=n[0===o?o:o-1],c=n[o],l=n[o>n.length-2?n.length-1:o+1],u=n[o>n.length-3?n.length-1:o+2];return r.set(ju(a,s.x,c.x,l.x,u.x),ju(a,s.y,c.y,l.y,u.y)),r},Gu.prototype.copy=function(e){Mu.prototype.copy.call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var n=e.points[t];this.points.push(n.clone())}return this},Gu.prototype.toJSON=function(){var e=Mu.prototype.toJSON.call(this);e.points=[];for(var t=0,r=this.points.length;t<r;t++){var n=this.points[t];e.points.push(n.toArray())}return e},Gu.prototype.fromJSON=function(e){Mu.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,r=e.points.length;t<r;t++){var n=e.points[t];this.points.push((new Tr).fromArray(n))}return this};var Vu=Object.freeze({__proto__:null,ArcCurve:Tu,CatmullRomCurve3:Cu,CubicBezierCurve:Iu,CubicBezierCurve3:Nu,EllipseCurve:Su,LineCurve:Uu,LineCurve3:zu,QuadraticBezierCurve:Fu,QuadraticBezierCurve3:Bu,SplineCurve:Gu});function Hu(){Mu.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function ku(e){Hu.call(this),this.type="Path",this.currentPoint=new Tr,e&&this.setFromPoints(e)}function Wu(e){ku.call(this,e),this.uuid=Sr.generateUUID(),this.type="Shape",this.holes=[]}function qu(e,t){ln.call(this),this.type="Light",this.color=new ei(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function Xu(e,t,r){qu.call(this,e,r),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(ln.DefaultUp),this.updateMatrix(),this.groundColor=new ei(t)}function Yu(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new Tr(512,512),this.map=null,this.mapPass=null,this.matrix=new kr,this._frustum=new yo,this._frameExtents=new Tr(1,1),this._viewportCount=1,this._viewports=[new Pr(0,0,1,1)]}function Zu(){Yu.call(this,new lo(50,1,.5,500))}function Ju(e,t,r,n,i,o){qu.call(this,e,t),this.type="SpotLight",this.position.copy(ln.DefaultUp),this.updateMatrix(),this.target=new ln,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==r?r:0,this.angle=void 0!==n?n:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==o?o:1,this.shadow=new Zu}function Ku(){Yu.call(this,new lo(90,1,.5,500)),this._frameExtents=new Tr(4,2),this._viewportCount=6,this._viewports=[new Pr(2,1,1,1),new Pr(0,1,1,1),new Pr(3,1,1,1),new Pr(1,1,1,1),new Pr(3,0,1,1),new Pr(1,0,1,1)],this._cubeDirections=[new Nr(1,0,0),new Nr(-1,0,0),new Nr(0,0,1),new Nr(0,0,-1),new Nr(0,1,0),new Nr(0,-1,0)],this._cubeUps=[new Nr(0,1,0),new Nr(0,1,0),new Nr(0,1,0),new Nr(0,1,0),new Nr(0,0,1),new Nr(0,0,-1)]}function Qu(e,t,r,n){qu.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==r?r:0,this.decay=void 0!==n?n:1,this.shadow=new Ku}function $u(e,t,r,n,i,o){co.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==e?e:-1,this.right=void 0!==t?t:1,this.top=void 0!==r?r:1,this.bottom=void 0!==n?n:-1,this.near=void 0!==i?i:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function eh(){Yu.call(this,new $u(-5,5,5,-5,.5,500))}function th(e,t){qu.call(this,e,t),this.type="DirectionalLight",this.position.copy(ln.DefaultUp),this.updateMatrix(),this.target=new ln,this.shadow=new eh}function rh(e,t){qu.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function nh(e,t,r,n){qu.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==r?r:10,this.height=void 0!==n?n:10}function ih(e){fu.call(this,e),this.textures={}}Hu.prototype=Object.assign(Object.create(Mu.prototype),{constructor:Hu,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Uu(t,e))},getPoint:function(e){for(var t=e*this.getLength(),r=this.getCurveLengths(),n=0;n<r.length;){if(r[n]>=t){var i=r[n]-t,o=this.curves[n],a=o.getLength(),s=0===a?0:1-i/a;return o.getPointAt(s)}n++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,r=0,n=this.curves.length;r<n;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,r=[],n=0,i=this.curves;n<i.length;n++)for(var o=i[n],a=o&&o.isEllipseCurve?2*e:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?e*o.points.length:e,s=o.getPoints(a),c=0;c<s.length;c++){var l=s[c];t&&t.equals(l)||(r.push(l),t=l)}return this.autoClose&&r.length>1&&!r[r.length-1].equals(r[0])&&r.push(r[0]),r},copy:function(e){Mu.prototype.copy.call(this,e),this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){var e=Mu.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,r=this.curves.length;t<r;t++){var n=this.curves[t];e.curves.push(n.toJSON())}return e},fromJSON:function(e){Mu.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,r=e.curves.length;t<r;t++){var n=e.curves[t];this.curves.push((new Vu[n.type]).fromJSON(n))}return this}}),ku.prototype=Object.assign(Object.create(Hu.prototype),{constructor:ku,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this},moveTo:function(e,t){return this.currentPoint.set(e,t),this},lineTo:function(e,t){var r=new Uu(this.currentPoint.clone(),new Tr(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this},quadraticCurveTo:function(e,t,r,n){var i=new Fu(this.currentPoint.clone(),new Tr(e,t),new Tr(r,n));return this.curves.push(i),this.currentPoint.set(r,n),this},bezierCurveTo:function(e,t,r,n,i,o){var a=new Iu(this.currentPoint.clone(),new Tr(e,t),new Tr(r,n),new Tr(i,o));return this.curves.push(a),this.currentPoint.set(i,o),this},splineThru:function(e){var t=new Gu([this.currentPoint.clone()].concat(e));return this.curves.push(t),this.currentPoint.copy(e[e.length-1]),this},arc:function(e,t,r,n,i,o){var a=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+a,t+s,r,n,i,o),this},absarc:function(e,t,r,n,i,o){return this.absellipse(e,t,r,r,n,i,o),this},ellipse:function(e,t,r,n,i,o,a,s){var c=this.currentPoint.x,l=this.currentPoint.y;return this.absellipse(e+c,t+l,r,n,i,o,a,s),this},absellipse:function(e,t,r,n,i,o,a,s){var c=new Su(e,t,r,n,i,o,a,s);if(this.curves.length>0){var l=c.getPoint(0);l.equals(this.currentPoint)||this.lineTo(l.x,l.y)}this.curves.push(c);var u=c.getPoint(1);return this.currentPoint.copy(u),this},copy:function(e){return Hu.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=Hu.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return Hu.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),Wu.prototype=Object.assign(Object.create(ku.prototype),{constructor:Wu,getPointsHoles:function(e){for(var t=[],r=0,n=this.holes.length;r<n;r++)t[r]=this.holes[r].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){ku.prototype.copy.call(this,e),this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var n=e.holes[t];this.holes.push(n.clone())}return this},toJSON:function(){var e=ku.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,r=this.holes.length;t<r;t++){var n=this.holes[t];e.holes.push(n.toJSON())}return e},fromJSON:function(e){ku.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,r=e.holes.length;t<r;t++){var n=e.holes[t];this.holes.push((new ku).fromJSON(n))}return this}}),qu.prototype=Object.assign(Object.create(ln.prototype),{constructor:qu,isLight:!0,copy:function(e){return ln.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=ln.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),Xu.prototype=Object.assign(Object.create(qu.prototype),{constructor:Xu,isHemisphereLight:!0,copy:function(e){return qu.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(Yu.prototype,{_projScreenMatrix:new kr,_lightPositionWorld:new Nr,_lookTarget:new Nr,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(e){var t=this.camera,r=this.matrix,n=this._projScreenMatrix,i=this._lookTarget,o=this._lightPositionWorld;o.setFromMatrixPosition(e.matrixWorld),t.position.copy(o),i.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(i),t.updateMatrixWorld(),n.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(n),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(t.projectionMatrix),r.multiply(t.matrixWorldInverse)},getViewport:function(e){return this._viewports[e]},getFrameExtents:function(){return this._frameExtents},copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),Zu.prototype=Object.assign(Object.create(Yu.prototype),{constructor:Zu,isSpotLightShadow:!0,updateMatrices:function(e){var t=this.camera,r=2*Sr.RAD2DEG*e.angle,n=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;r===t.fov&&n===t.aspect&&i===t.far||(t.fov=r,t.aspect=n,t.far=i,t.updateProjectionMatrix()),Yu.prototype.updateMatrices.call(this,e)}}),Ju.prototype=Object.assign(Object.create(qu.prototype),{constructor:Ju,isSpotLight:!0,copy:function(e){return qu.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Ku.prototype=Object.assign(Object.create(Yu.prototype),{constructor:Ku,isPointLightShadow:!0,updateMatrices:function(e,t){void 0===t&&(t=0);var r=this.camera,n=this.matrix,i=this._lightPositionWorld,o=this._lookTarget,a=this._projScreenMatrix;i.setFromMatrixPosition(e.matrixWorld),r.position.copy(i),o.copy(r.position),o.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(o),r.updateMatrixWorld(),n.makeTranslation(-i.x,-i.y,-i.z),a.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(a)}}),Qu.prototype=Object.assign(Object.create(qu.prototype),{constructor:Qu,isPointLight:!0,copy:function(e){return qu.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),$u.prototype=Object.assign(Object.create(co.prototype),{constructor:$u,isOrthographicCamera:!0,copy:function(e,t){return co.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,r,n,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=n,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,n=(this.top+this.bottom)/2,i=r-e,o=r+e,a=n+t,s=n-t;if(null!==this.view&&this.view.enabled){var c=(this.right-this.left)/this.view.fullWidth/this.zoom,l=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o=(i+=c*this.view.offsetX)+c*this.view.width,s=(a-=l*this.view.offsetY)-l*this.view.height}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(e){var t=ln.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),eh.prototype=Object.assign(Object.create(Yu.prototype),{constructor:eh,isDirectionalLightShadow:!0,updateMatrices:function(e){Yu.prototype.updateMatrices.call(this,e)}}),th.prototype=Object.assign(Object.create(qu.prototype),{constructor:th,isDirectionalLight:!0,copy:function(e){return qu.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),rh.prototype=Object.assign(Object.create(qu.prototype),{constructor:rh,isAmbientLight:!0}),nh.prototype=Object.assign(Object.create(qu.prototype),{constructor:nh,isRectAreaLight:!0,copy:function(e){return qu.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=qu.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}),ih.prototype=Object.assign(Object.create(fu.prototype),{constructor:ih,load:function(e,t,r,n){var i=this,o=new gu(i.manager);o.setPath(i.path),o.load(e,(function(e){t(i.parse(JSON.parse(e)))}),r,n)},parse:function(e){var t=this.textures;function r(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var n=new Zl[e.type];if(void 0!==e.uuid&&(n.uuid=e.uuid),void 0!==e.name&&(n.name=e.name),void 0!==e.color&&n.color.setHex(e.color),void 0!==e.roughness&&(n.roughness=e.roughness),void 0!==e.metalness&&(n.metalness=e.metalness),void 0!==e.sheen&&(n.sheen=(new ei).setHex(e.sheen)),void 0!==e.emissive&&n.emissive.setHex(e.emissive),void 0!==e.specular&&n.specular.setHex(e.specular),void 0!==e.shininess&&(n.shininess=e.shininess),void 0!==e.clearcoat&&(n.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(n.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.vertexColors&&(n.vertexColors=e.vertexColors),void 0!==e.fog&&(n.fog=e.fog),void 0!==e.flatShading&&(n.flatShading=e.flatShading),void 0!==e.blending&&(n.blending=e.blending),void 0!==e.combine&&(n.combine=e.combine),void 0!==e.side&&(n.side=e.side),void 0!==e.opacity&&(n.opacity=e.opacity),void 0!==e.transparent&&(n.transparent=e.transparent),void 0!==e.alphaTest&&(n.alphaTest=e.alphaTest),void 0!==e.depthTest&&(n.depthTest=e.depthTest),void 0!==e.depthWrite&&(n.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(n.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(n.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(n.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(n.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(n.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(n.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(n.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(n.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(n.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(n.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(n.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(n.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(n.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(n.rotation=e.rotation),1!==e.linewidth&&(n.linewidth=e.linewidth),void 0!==e.dashSize&&(n.dashSize=e.dashSize),void 0!==e.gapSize&&(n.gapSize=e.gapSize),void 0!==e.scale&&(n.scale=e.scale),void 0!==e.polygonOffset&&(n.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(n.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(n.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(n.skinning=e.skinning),void 0!==e.morphTargets&&(n.morphTargets=e.morphTargets),void 0!==e.morphNormals&&(n.morphNormals=e.morphNormals),void 0!==e.dithering&&(n.dithering=e.dithering),void 0!==e.visible&&(n.visible=e.visible),void 0!==e.toneMapped&&(n.toneMapped=e.toneMapped),void 0!==e.userData&&(n.userData=e.userData),void 0!==e.uniforms)for(var i in e.uniforms){var o=e.uniforms[i];switch(n.uniforms[i]={},o.type){case"t":n.uniforms[i].value=r(o.value);break;case"c":n.uniforms[i].value=(new ei).setHex(o.value);break;case"v2":n.uniforms[i].value=(new Tr).fromArray(o.value);break;case"v3":n.uniforms[i].value=(new Nr).fromArray(o.value);break;case"v4":n.uniforms[i].value=(new Pr).fromArray(o.value);break;case"m3":n.uniforms[i].value=(new Er).fromArray(o.value);case"m4":n.uniforms[i].value=(new kr).fromArray(o.value);break;default:n.uniforms[i].value=o.value}}if(void 0!==e.defines&&(n.defines=e.defines),void 0!==e.vertexShader&&(n.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(n.fragmentShader=e.fragmentShader),void 0!==e.extensions)for(var a in e.extensions)n.extensions[a]=e.extensions[a];if(void 0!==e.shading&&(n.flatShading=1===e.shading),void 0!==e.size&&(n.size=e.size),void 0!==e.sizeAttenuation&&(n.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(n.map=r(e.map)),void 0!==e.matcap&&(n.matcap=r(e.matcap)),void 0!==e.alphaMap&&(n.alphaMap=r(e.alphaMap),n.transparent=!0),void 0!==e.bumpMap&&(n.bumpMap=r(e.bumpMap)),void 0!==e.bumpScale&&(n.bumpScale=e.bumpScale),void 0!==e.normalMap&&(n.normalMap=r(e.normalMap)),void 0!==e.normalMapType&&(n.normalMapType=e.normalMapType),void 0!==e.normalScale){var s=e.normalScale;!1===Array.isArray(s)&&(s=[s,s]),n.normalScale=(new Tr).fromArray(s)}return void 0!==e.displacementMap&&(n.displacementMap=r(e.displacementMap)),void 0!==e.displacementScale&&(n.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(n.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(n.roughnessMap=r(e.roughnessMap)),void 0!==e.metalnessMap&&(n.metalnessMap=r(e.metalnessMap)),void 0!==e.emissiveMap&&(n.emissiveMap=r(e.emissiveMap)),void 0!==e.emissiveIntensity&&(n.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(n.specularMap=r(e.specularMap)),void 0!==e.envMap&&(n.envMap=r(e.envMap)),void 0!==e.envMapIntensity&&(n.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(n.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(n.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(n.lightMap=r(e.lightMap)),void 0!==e.lightMapIntensity&&(n.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(n.aoMap=r(e.aoMap)),void 0!==e.aoMapIntensity&&(n.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(n.gradientMap=r(e.gradientMap)),void 0!==e.clearcoatNormalMap&&(n.clearcoatNormalMap=r(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(n.clearcoatNormalScale=(new Tr).fromArray(e.clearcoatNormalScale)),n},setTextures:function(e){return this.textures=e,this}});var oh={decodeText:function(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",r=0,n=e.length;r<n;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch(e){return t}},extractUrlBase:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}};function ah(){Li.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function sh(e,t,r,n){"number"==typeof r&&(n=r,r=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),li.call(this,e,t,r),this.meshPerAttribute=n||1}function ch(e){fu.call(this,e)}ah.prototype=Object.assign(Object.create(Li.prototype),{constructor:ah,isInstancedBufferGeometry:!0,copy:function(e){return Li.prototype.copy.call(this,e),this.maxInstancedCount=e.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e=Li.prototype.toJSON.call(this);return e.maxInstancedCount=this.maxInstancedCount,e.isInstancedBufferGeometry=!0,e}}),sh.prototype=Object.assign(Object.create(li.prototype),{constructor:sh,isInstancedBufferAttribute:!0,copy:function(e){return li.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this},toJSON:function(){var e=li.prototype.toJSON.call(this);return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}),ch.prototype=Object.assign(Object.create(fu.prototype),{constructor:ch,load:function(e,t,r,n){var i=this,o=new gu(i.manager);o.setPath(i.path),o.load(e,(function(e){t(i.parse(JSON.parse(e)))}),r,n)},parse:function(e){var t=e.isInstancedBufferGeometry?new ah:new Li,r=e.data.index;if(void 0!==r){var n=new lh[r.type](r.array);t.setIndex(new li(n,1))}var i=e.data.attributes;for(var o in i){var a=i[o],s=(n=new lh[a.type](a.array),new(a.isInstancedBufferAttribute?sh:li)(n,a.itemSize,a.normalized));void 0!==a.name&&(s.name=a.name),t.setAttribute(o,s)}var c=e.data.morphAttributes;if(c)for(var o in c){for(var l=c[o],u=[],h=0,d=l.length;h<d;h++){a=l[h],s=new li(n=new lh[a.type](a.array),a.itemSize,a.normalized);void 0!==a.name&&(s.name=a.name),u.push(s)}t.morphAttributes[o]=u}e.data.morphTargetsRelative&&(t.morphTargetsRelative=!0);var p=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==p){h=0;for(var f=p.length;h!==f;++h){var m=p[h];t.addGroup(m.start,m.count,m.materialIndex)}}var g=e.data.boundingSphere;if(void 0!==g){var v=new Nr;void 0!==g.center&&v.fromArray(g.center),t.boundingSphere=new An(v,g.radius)}return e.name&&(t.name=e.name),e.userData&&(t.userData=e.userData),t}});var lh={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function uh(e){fu.call(this,e)}uh.prototype=Object.assign(Object.create(fu.prototype),{constructor:uh,load:function(e,t,r,n){var i=this,o=""===this.path?oh.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;var a=new gu(i.manager);a.setPath(this.path),a.load(e,(function(r){var o=null;try{o=JSON.parse(r)}catch(t){return void 0!==n&&n(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}var a=o.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?i.parse(o,t):console.error("THREE.ObjectLoader: Can't load "+e)}),r,n)},parse:function(e,t){var r=this.parseShape(e.shapes),n=this.parseGeometries(e.geometries,r),i=this.parseImages(e.images,(function(){void 0!==t&&t(s)})),o=this.parseTextures(e.textures,i),a=this.parseMaterials(e.materials,o),s=this.parseObject(e.object,n,a);return e.animations&&(s.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(s),s},parseShape:function(e){var t={};if(void 0!==e)for(var r=0,n=e.length;r<n;r++){var i=(new Wu).fromJSON(e[r]);t[i.uuid]=i}return t},parseGeometries:function(e,t){var r={};if(void 0!==e)for(var n=new ch,i=0,o=e.length;i<o;i++){var a,s=e[i];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":a=new zl[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":a=new zl[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":a=new zl[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":a=new zl[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":a=new zl[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":a=new zl[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":a=new zl[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":a=new zl[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":a=new zl[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":a=new zl[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"TubeGeometry":case"TubeBufferGeometry":a=new zl[s.type]((new Vu[s.path.type]).fromJSON(s.path),s.tubularSegments,s.radius,s.radialSegments,s.closed);break;case"LatheGeometry":case"LatheBufferGeometry":a=new zl[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":a=new zl[s.type](s.vertices,s.indices,s.radius,s.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var c=[],l=0,u=s.shapes.length;l<u;l++){var h=t[s.shapes[l]];c.push(h)}a=new zl[s.type](c,s.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(c=[],l=0,u=s.shapes.length;l<u;l++){h=t[s.shapes[l]];c.push(h)}var d=s.options.extrudePath;void 0!==d&&(s.options.extrudePath=(new Vu[d.type]).fromJSON(d)),a=new zl[s.type](c,s.options);break;case"BufferGeometry":case"InstancedBufferGeometry":a=n.parse(s);break;case"Geometry":if("THREE"in window&&"LegacyJSONLoader"in THREE)a=(new THREE.LegacyJSONLoader).parse(s,this.resourcePath).geometry;else console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),!0===a.isBufferGeometry&&void 0!==s.userData&&(a.userData=s.userData),r[s.uuid]=a}return r},parseMaterials:function(e,t){var r={},n={};if(void 0!==e){var i=new ih;i.setTextures(t);for(var o=0,a=e.length;o<a;o++){var s=e[o];if("MultiMaterial"===s.type){for(var c=[],l=0;l<s.materials.length;l++){var u=s.materials[l];void 0===r[u.uuid]&&(r[u.uuid]=i.parse(u)),c.push(r[u.uuid])}n[s.uuid]=c}else void 0===r[s.uuid]&&(r[s.uuid]=i.parse(s)),n[s.uuid]=r[s.uuid]}}return n},parseAnimations:function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r],i=lu.parse(n);void 0!==n.uuid&&(i.uuid=n.uuid),t.push(i)}return t},parseImages:function(e,t){var r=this,n={};function i(e){return r.manager.itemStart(e),o.load(e,(function(){r.manager.itemEnd(e)}),void 0,(function(){r.manager.itemError(e),r.manager.itemEnd(e)}))}if(void 0!==e&&e.length>0){var o=new bu(new du(t));o.setCrossOrigin(this.crossOrigin);for(var a=0,s=e.length;a<s;a++){var c=e[a],l=c.url;if(Array.isArray(l)){n[c.uuid]=[];for(var u=0,h=l.length;u<h;u++){var d=l[u],p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(d)?d:r.resourcePath+d;n[c.uuid].push(i(p))}}else{p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c.url)?c.url:r.resourcePath+c.url;n[c.uuid]=i(p)}}}return n},parseTextures:function(e,t){function r(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var n={};if(void 0!==e)for(var i=0,o=e.length;i<o;i++){var a,s=e[i];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===t[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image),(a=Array.isArray(t[s.image])?new Uo(t[s.image]):new Rr(t[s.image])).needsUpdate=!0,a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),void 0!==s.mapping&&(a.mapping=r(s.mapping,dh)),void 0!==s.offset&&a.offset.fromArray(s.offset),void 0!==s.repeat&&a.repeat.fromArray(s.repeat),void 0!==s.center&&a.center.fromArray(s.center),void 0!==s.rotation&&(a.rotation=s.rotation),void 0!==s.wrap&&(a.wrapS=r(s.wrap[0],ph),a.wrapT=r(s.wrap[1],ph)),void 0!==s.format&&(a.format=s.format),void 0!==s.type&&(a.type=s.type),void 0!==s.encoding&&(a.encoding=s.encoding),void 0!==s.minFilter&&(a.minFilter=r(s.minFilter,fh)),void 0!==s.magFilter&&(a.magFilter=r(s.magFilter,fh)),void 0!==s.anisotropy&&(a.anisotropy=s.anisotropy),void 0!==s.flipY&&(a.flipY=s.flipY),void 0!==s.premultiplyAlpha&&(a.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(a.unpackAlignment=s.unpackAlignment),n[s.uuid]=a}return n},parseObject:function(e,t,r){var n;function i(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function o(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],n=0,i=e.length;n<i;n++){var o=e[n];void 0===r[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),t.push(r[o])}return t}return void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),r[e]}}switch(e.type){case"Scene":n=new un,void 0!==e.background&&Number.isInteger(e.background)&&(n.background=new ei(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?n.fog=new Ts(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(n.fog=new Ss(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":n=new lo(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(n.focus=e.focus),void 0!==e.zoom&&(n.zoom=e.zoom),void 0!==e.filmGauge&&(n.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(n.filmOffset=e.filmOffset),void 0!==e.view&&(n.view=Object.assign({},e.view));break;case"OrthographicCamera":n=new $u(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(n.zoom=e.zoom),void 0!==e.view&&(n.view=Object.assign({},e.view));break;case"AmbientLight":n=new rh(e.color,e.intensity);break;case"DirectionalLight":n=new th(e.color,e.intensity);break;case"PointLight":n=new Qu(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":n=new nh(e.color,e.intensity,e.width,e.height);break;case"SpotLight":n=new Ju(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":n=new Xu(e.color,e.groundColor,e.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var a=i(e.geometry),s=o(e.material);n=a.bones&&a.bones.length>0?new Ys(a,s):new qi(a,s);break;case"InstancedMesh":a=i(e.geometry),s=o(e.material);var c=e.count,l=e.instanceMatrix;(n=new nc(a,s,c)).instanceMatrix=new li(new Float32Array(l.array),16);break;case"LOD":n=new Xs;break;case"Line":n=new uc(i(e.geometry),o(e.material),e.mode);break;case"LineLoop":n=new fc(i(e.geometry),o(e.material));break;case"LineSegments":n=new pc(i(e.geometry),o(e.material));break;case"PointCloud":case"Points":n=new bc(i(e.geometry),o(e.material));break;case"Sprite":n=new Hs(o(e.material));break;case"Group":n=new xs;break;default:n=new ln}if(n.uuid=e.uuid,void 0!==e.name&&(n.name=e.name),void 0!==e.matrix?(n.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(n.matrixAutoUpdate=e.matrixAutoUpdate),n.matrixAutoUpdate&&n.matrix.decompose(n.position,n.quaternion,n.scale)):(void 0!==e.position&&n.position.fromArray(e.position),void 0!==e.rotation&&n.rotation.fromArray(e.rotation),void 0!==e.quaternion&&n.quaternion.fromArray(e.quaternion),void 0!==e.scale&&n.scale.fromArray(e.scale)),void 0!==e.castShadow&&(n.castShadow=e.castShadow),void 0!==e.receiveShadow&&(n.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(n.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(n.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&n.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(n.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(n.visible=e.visible),void 0!==e.frustumCulled&&(n.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(n.renderOrder=e.renderOrder),void 0!==e.userData&&(n.userData=e.userData),void 0!==e.layers&&(n.layers.mask=e.layers),void 0!==e.children)for(var u=e.children,h=0;h<u.length;h++)n.add(this.parseObject(u[h],t,r));if("LOD"===e.type){void 0!==e.autoUpdate&&(n.autoUpdate=e.autoUpdate);for(var d=e.levels,p=0;p<d.length;p++){var f=d[p],m=n.getObjectByProperty("uuid",f.object);void 0!==m&&n.addLevel(m,f.distance)}}return n}});var hh,dh={UVMapping:le,CubeReflectionMapping:ue,CubeRefractionMapping:he,EquirectangularReflectionMapping:de,EquirectangularRefractionMapping:pe,SphericalReflectionMapping:fe,CubeUVReflectionMapping:me,CubeUVRefractionMapping:ge},ph={RepeatWrapping:ve,ClampToEdgeWrapping:ye,MirroredRepeatWrapping:_e},fh={NearestFilter:be,NearestMipmapNearestFilter:xe,NearestMipmapLinearFilter:Me,LinearFilter:Te,LinearMipmapNearestFilter:Ee,LinearMipmapLinearFilter:Le};function mh(e){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),fu.call(this,e),this.options=void 0}function gh(){this.type="ShapePath",this.color=new ei,this.subPaths=[],this.currentPath=null}function vh(e){this.type="Font",this.data=e}function yh(e,t,r,n,i){var o=i.glyphs[e]||i.glyphs["?"];if(o){var a,s,c,l,u,h,d,p,f=new gh;if(o.o)for(var m=o._cachedOutline||(o._cachedOutline=o.o.split(" ")),g=0,v=m.length;g<v;){switch(m[g++]){case"m":a=m[g++]*t+r,s=m[g++]*t+n,f.moveTo(a,s);break;case"l":a=m[g++]*t+r,s=m[g++]*t+n,f.lineTo(a,s);break;case"q":c=m[g++]*t+r,l=m[g++]*t+n,u=m[g++]*t+r,h=m[g++]*t+n,f.quadraticCurveTo(u,h,c,l);break;case"b":c=m[g++]*t+r,l=m[g++]*t+n,u=m[g++]*t+r,h=m[g++]*t+n,d=m[g++]*t+r,p=m[g++]*t+n,f.bezierCurveTo(u,h,d,p,c,l)}}return{offsetX:o.ha*t,path:f}}console.error('THREE.Font: character "'+e+'" does not exists in font family '+i.familyName+".")}function _h(e){fu.call(this,e)}mh.prototype=Object.assign(Object.create(fu.prototype),{constructor:mh,setOptions:function(e){return this.options=e,this},load:function(e,t,r,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var i=this,o=hu.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;fetch(e).then((function(e){return e.blob()})).then((function(e){return void 0===i.options?createImageBitmap(e):createImageBitmap(e,i.options)})).then((function(r){hu.add(e,r),t&&t(r),i.manager.itemEnd(e)})).catch((function(t){n&&n(t),i.manager.itemError(e),i.manager.itemEnd(e)})),i.manager.itemStart(e)}}),Object.assign(gh.prototype,{moveTo:function(e,t){return this.currentPath=new ku,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this},lineTo:function(e,t){return this.currentPath.lineTo(e,t),this},quadraticCurveTo:function(e,t,r,n){return this.currentPath.quadraticCurveTo(e,t,r,n),this},bezierCurveTo:function(e,t,r,n,i,o){return this.currentPath.bezierCurveTo(e,t,r,n,i,o),this},splineThru:function(e){return this.currentPath.splineThru(e),this},toShapes:function(e,t){function r(e){for(var t=[],r=0,n=e.length;r<n;r++){var i=e[r],o=new Wu;o.curves=i.curves,t.push(o)}return t}function n(e,t){for(var r=t.length,n=!1,i=r-1,o=0;o<r;i=o++){var a=t[i],s=t[o],c=s.x-a.x,l=s.y-a.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(a=t[o],c=-c,s=t[i],l=-l),e.y<a.y||e.y>s.y)continue;if(e.y===a.y){if(e.x===a.x)return!0}else{var u=l*(e.x-a.x)-c*(e.y-a.y);if(0===u)return!0;if(u<0)continue;n=!n}}else{if(e.y!==a.y)continue;if(s.x<=e.x&&e.x<=a.x||a.x<=e.x&&e.x<=s.x)return!0}}return n}var i=pl.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===t)return r(o);var a,s,c,l=[];if(1===o.length)return s=o[0],(c=new Wu).curves=s.curves,l.push(c),l;var u=!i(o[0].getPoints());u=e?!u:u;var h,d,p=[],f=[],m=[],g=0;f[g]=void 0,m[g]=[];for(var v=0,y=o.length;v<y;v++)a=i(h=(s=o[v]).getPoints()),(a=e?!a:a)?(!u&&f[g]&&g++,f[g]={s:new Wu,p:h},f[g].s.curves=s.curves,u&&g++,m[g]=[]):m[g].push({h:s,p:h[0]});if(!f[0])return r(o);if(f.length>1){for(var _=!1,b=[],x=0,w=f.length;x<w;x++)p[x]=[];for(x=0,w=f.length;x<w;x++)for(var M=m[x],S=0;S<M.length;S++){for(var T=M[S],E=!0,A=0;A<f.length;A++)n(T.p,f[A].p)&&(x!==A&&b.push({froms:x,tos:A,hole:S}),E?(E=!1,p[A].push(T)):_=!0);E&&p[x].push(T)}b.length>0&&(_||(m=p))}v=0;for(var L=f.length;v<L;v++){c=f[v].s,l.push(c);for(var R=0,P=(d=m[v]).length;R<P;R++)c.holes.push(d[R].h)}return l}}),Object.assign(vh.prototype,{isFont:!0,generateShapes:function(e,t){void 0===t&&(t=100);for(var r=[],n=function(e,t,r){for(var n=Array.from?Array.from(e):String(e).split(""),i=t/r.resolution,o=(r.boundingBox.yMax-r.boundingBox.yMin+r.underlineThickness)*i,a=[],s=0,c=0,l=0;l<n.length;l++){var u=n[l];if("\n"===u)s=0,c-=o;else{var h=yh(u,i,s,c,r);s+=h.offsetX,a.push(h.path)}}return a}(e,t,this.data),i=0,o=n.length;i<o;i++)Array.prototype.push.apply(r,n[i].toShapes());return r}}),_h.prototype=Object.assign(Object.create(fu.prototype),{constructor:_h,load:function(e,t,r,n){var i=this,o=new gu(this.manager);o.setPath(this.path),o.load(e,(function(e){var r;try{r=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),r=JSON.parse(e.substring(65,e.length-2))}var n=i.parse(r);t&&t(n)}),r,n)},parse:function(e){return new vh(e)}});var bh={getContext:function(){return void 0===hh&&(hh=new(window.AudioContext||window.webkitAudioContext)),hh},setContext:function(e){hh=e}};function xh(e){fu.call(this,e)}function wh(){this.coefficients=[];for(var e=0;e<9;e++)this.coefficients.push(new Nr)}function Mh(e,t){qu.call(this,void 0,t),this.sh=void 0!==e?e:new wh}function Sh(e,t,r){Mh.call(this,void 0,r);var n=(new ei).set(e),i=(new ei).set(t),o=new Nr(n.r,n.g,n.b),a=new Nr(i.r,i.g,i.b),s=Math.sqrt(Math.PI),c=s*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(s),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(c)}function Th(e,t){Mh.call(this,void 0,t);var r=(new ei).set(e);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}xh.prototype=Object.assign(Object.create(fu.prototype),{constructor:xh,load:function(e,t,r,n){var i=new gu(this.manager);i.setResponseType("arraybuffer"),i.setPath(this.path),i.load(e,(function(e){var r=e.slice(0);bh.getContext().decodeAudioData(r,(function(e){t(e)}))}),r,n)}}),Object.assign(wh.prototype,{isSphericalHarmonics3:!0,set:function(e){for(var t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this},zero:function(){for(var e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this},getAt:function(e,t){var r=e.x,n=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScale(o[1],.488603*n),t.addScale(o[2],.488603*i),t.addScale(o[3],.488603*r),t.addScale(o[4],r*n*1.092548),t.addScale(o[5],n*i*1.092548),t.addScale(o[6],.315392*(3*i*i-1)),t.addScale(o[7],r*i*1.092548),t.addScale(o[8],.546274*(r*r-n*n)),t},getIrradianceAt:function(e,t){var r=e.x,n=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScale(o[1],1.023328*n),t.addScale(o[2],1.023328*i),t.addScale(o[3],1.023328*r),t.addScale(o[4],.858086*r*n),t.addScale(o[5],.858086*n*i),t.addScale(o[6],.743125*i*i-.247708),t.addScale(o[7],.858086*r*i),t.addScale(o[8],.429043*(r*r-n*n)),t},add:function(e){for(var t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this},scale:function(e){for(var t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this},lerp:function(e,t){for(var r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this},equals:function(e){for(var t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0},copy:function(e){return this.set(e.coefficients)},clone:function(){return(new this.constructor).copy(this)},fromArray:function(e,t){void 0===t&&(t=0);for(var r=this.coefficients,n=0;n<9;n++)r[n].fromArray(e,t+3*n);return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);for(var r=this.coefficients,n=0;n<9;n++)r[n].toArray(e,t+3*n);return e}}),Object.assign(wh,{getBasisAt:function(e,t){var r=e.x,n=e.y,i=e.z;t[0]=.282095,t[1]=.488603*n,t[2]=.488603*i,t[3]=.488603*r,t[4]=1.092548*r*n,t[5]=1.092548*n*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*r*i,t[8]=.546274*(r*r-n*n)}}),Mh.prototype=Object.assign(Object.create(qu.prototype),{constructor:Mh,isLightProbe:!0,copy:function(e){return qu.prototype.copy.call(this,e),this.sh.copy(e.sh),this.intensity=e.intensity,this},toJSON:function(e){return qu.prototype.toJSON.call(this,e)}}),Sh.prototype=Object.assign(Object.create(Mh.prototype),{constructor:Sh,isHemisphereLightProbe:!0,copy:function(e){return Mh.prototype.copy.call(this,e),this},toJSON:function(e){return Mh.prototype.toJSON.call(this,e)}}),Th.prototype=Object.assign(Object.create(Mh.prototype),{constructor:Th,isAmbientLightProbe:!0,copy:function(e){return Mh.prototype.copy.call(this,e),this},toJSON:function(e){return Mh.prototype.toJSON.call(this,e)}});var Eh=new kr,Ah=new kr;function Lh(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new lo,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new lo,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}function Rh(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}Object.assign(Lh.prototype,{update:function(e){var t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep;var r,n,i=e.projectionMatrix.clone(),o=t.eyeSep/2,a=o*t.near/t.focus,s=t.near*Math.tan(Sr.DEG2RAD*t.fov*.5)/t.zoom;Ah.elements[12]=-o,Eh.elements[12]=o,r=-s*t.aspect+a,n=s*t.aspect+a,i.elements[0]=2*t.near/(n-r),i.elements[8]=(n+r)/(n-r),this.cameraL.projectionMatrix.copy(i),r=-s*t.aspect-a,n=s*t.aspect-a,i.elements[0]=2*t.near/(n-r),i.elements[8]=(n+r)/(n-r),this.cameraR.projectionMatrix.copy(i)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Ah),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Eh)}}),Object.assign(Rh.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"==typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}});var Ph=new Nr,Ch=new Or,jh=new Nr,Oh=new Nr;function Dh(){ln.call(this),this.type="AudioListener",this.context=bh.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Rh}function Ih(e){ln.call(this),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this._startedAt=0,this._pausedAt=0,this.filters=[]}Dh.prototype=Object.assign(Object.create(ln.prototype),{constructor:Dh,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this},updateMatrixWorld:function(e){ln.prototype.updateMatrixWorld.call(this,e);var t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Ph,Ch,jh),Oh.set(0,0,-1).applyQuaternion(Ch),t.positionX){var n=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Ph.x,n),t.positionY.linearRampToValueAtTime(Ph.y,n),t.positionZ.linearRampToValueAtTime(Ph.z,n),t.forwardX.linearRampToValueAtTime(Oh.x,n),t.forwardY.linearRampToValueAtTime(Oh.y,n),t.forwardZ.linearRampToValueAtTime(Oh.z,n),t.upX.linearRampToValueAtTime(r.x,n),t.upY.linearRampToValueAtTime(r.y,n),t.upZ.linearRampToValueAtTime(r.z,n)}else t.setPosition(Ph.x,Ph.y,Ph.z),t.setOrientation(Oh.x,Oh.y,Oh.z,r.x,r.y,r.z)}}),Ih.prototype=Object.assign(Object.create(ln.prototype),{constructor:Ih,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setMediaElementSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this},setMediaStreamSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(e){if(void 0===e&&(e=0),!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+e;var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._pausedAt+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._pausedAt=(this.context.currentTime-this._startedAt)*this.playbackRate,this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this._pausedAt=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},setDetune:function(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},setLoopStart:function(e){return this.loopStart=e,this},setLoopEnd:function(e){return this.loopEnd=e,this},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}});var Nh=new Nr,Uh=new Or,zh=new Nr,Fh=new Nr;function Bh(e){Ih.call(this,e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}function Gh(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function Vh(e,t,r){this.binding=e,this.valueSize=r;var n,i=Float64Array;switch(t){case"quaternion":n=this._slerp;break;case"string":case"bool":i=Array,n=this._select;break;default:n=this._lerp}this.buffer=new i(4*r),this._mixBufferRegion=n,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}Bh.prototype=Object.assign(Object.create(Ih.prototype),{constructor:Bh,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){return this.panner.refDistance=e,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){return this.panner.rolloffFactor=e,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){return this.panner.distanceModel=e,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){return this.panner.maxDistance=e,this},setDirectionalCone:function(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this},updateMatrixWorld:function(e){if(ln.prototype.updateMatrixWorld.call(this,e),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(Nh,Uh,zh),Fh.set(0,0,1).applyQuaternion(Uh);var t=this.panner;if(t.positionX){var r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Nh.x,r),t.positionY.linearRampToValueAtTime(Nh.y,r),t.positionZ.linearRampToValueAtTime(Nh.z,r),t.orientationX.linearRampToValueAtTime(Fh.x,r),t.orientationY.linearRampToValueAtTime(Fh.y,r),t.orientationZ.linearRampToValueAtTime(Fh.z,r)}else t.setPosition(Nh.x,Nh.y,Nh.z),t.setOrientation(Fh.x,Fh.y,Fh.z)}}}),Object.assign(Gh.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),r=0;r<t.length;r++)e+=t[r];return e/t.length}}),Object.assign(Vh.prototype,{accumulate:function(e,t){var r=this.buffer,n=this.valueSize,i=e*n+n,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==n;++a)r[i+a]=r[a];o=t}else{var s=t/(o+=t);this._mixBufferRegion(r,i,0,s,n)}this.cumulativeWeight=o},apply:function(e){var t=this.valueSize,r=this.buffer,n=e*t+t,i=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,i<1){var a=3*t;this._mixBufferRegion(r,n,a,1-i,t)}for(var s=t,c=t+t;s!==c;++s)if(r[s]!==r[s+t]){o.setValue(r,n);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,r=this.valueSize,n=3*r;e.getValue(t,n);for(var i=r,o=n;i!==o;++i)t[i]=t[n+i%r];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,t,r,n,i){if(n>=.5)for(var o=0;o!==i;++o)e[t+o]=e[r+o]},_slerp:function(e,t,r,n){Or.slerpFlat(e,t,e,t,e,r,n)},_lerp:function(e,t,r,n,i){for(var o=1-n,a=0;a!==i;++a){var s=t+a;e[s]=e[s]*o+e[r+a]*n}}});var Hh=new RegExp("[\\[\\]\\.:\\/]","g"),kh="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",Wh=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]"),qh=/(WCOD+)?/.source.replace("WCOD",kh),Xh=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),Yh=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),Zh=new RegExp("^"+Wh+qh+Xh+Yh+"$"),Jh=["material","materials","bones"];function Kh(e,t,r){var n=r||Qh.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,n)}function Qh(e,t,r){this.path=t,this.parsedPath=r||Qh.parseTrackName(t),this.node=Qh.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function $h(){this.uuid=Sr.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,r=arguments.length;t!==r;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}function ed(e,t,r){this._mixer=e,this._clip=t,this._localRoot=r||null;for(var n=t.tracks,i=n.length,o=new Array(i),a={endingStart:Ct,endingEnd:Ct},s=0;s!==i;++s){var c=n[s].createInterpolant(null);o[s]=c,c.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(i),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Et,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function td(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function rd(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function nd(e,t,r){Es.call(this,e,t),this.meshPerAttribute=r||1}function id(e,t,r,n){this.ray=new In(e,t),this.near=r||0,this.far=n||1/0,this.camera=null,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function od(e,t){return e.distance-t.distance}function ad(e,t,r,n){if(!1!==e.visible&&(e.raycast(t,r),!0===n))for(var i=e.children,o=0,a=i.length;o<a;o++)ad(i[o],t,r,!0)}function sd(e,t,r){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==r?r:0,this}function cd(e,t,r){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==r?r:0,this}Object.assign(Kh.prototype,{getValue:function(e,t){this.bind();var r=this._targetGroup.nCachedObjects_,n=this._bindings[r];void 0!==n&&n.getValue(e,t)},setValue:function(e,t){for(var r=this._bindings,n=this._targetGroup.nCachedObjects_,i=r.length;n!==i;++n)r[n].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}),Object.assign(Qh,{Composite:Kh,create:function(e,t,r){return e&&e.isAnimationObjectGroup?new Qh.Composite(e,t,r):new Qh(e,t,r)},sanitizeNodeName:function(e){return e.replace(/\s/g,"_").replace(Hh,"")},parseTrackName:function(e){var t=Zh.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},n=r.nodeName&&r.nodeName.lastIndexOf(".");if(void 0!==n&&-1!==n){var i=r.nodeName.substring(n+1);-1!==Jh.indexOf(i)&&(r.nodeName=r.nodeName.substring(0,n),r.objectName=i)}if(null===r.propertyName||0===r.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r},findNode:function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var r=e.skeleton.getBoneByName(t);if(void 0!==r)return r}if(e.children){var n=function(e){for(var r=0;r<e.length;r++){var i=e[r];if(i.name===t||i.uuid===t)return i;var o=n(i.children);if(o)return o}return null},i=n(e.children);if(i)return i}return null}}),Object.assign(Qh.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var r=this.resolvedProperty,n=0,i=r.length;n!==i;++n)e[t++]=r[n]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var r=this.resolvedProperty,n=0,i=r.length;n!==i;++n)r[n]=e[t++]},function(e,t){for(var r=this.resolvedProperty,n=0,i=r.length;n!==i;++n)r[n]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var r=this.resolvedProperty,n=0,i=r.length;n!==i;++n)r[n]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,r=t.objectName,n=t.propertyName,i=t.propertyIndex;if(e||(e=Qh.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(r){var o=t.objectIndex;switch(r){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var a=0;a<e.length;a++)if(e[a].name===o){o=a;break}break;default:if(void 0===e[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[r]}if(void 0!==o){if(void 0===e[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[o]}}var s=e[n];if(void 0!==s){var c=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?c=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate);var l=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===n){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(a=0;a<this.node.geometry.morphAttributes.position.length;a++)if(e.geometry.morphAttributes.position[a].name===i){i=a;break}}else{if(!e.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(a=0;a<this.node.geometry.morphTargets.length;a++)if(e.geometry.morphTargets[a].name===i){i=a;break}}}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=n;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][c]}else{var u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+n+" but it wasn't found.",e)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),
//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(Qh.prototype,{_getValue_unbound:Qh.prototype.getValue,_setValue_unbound:Qh.prototype.setValue}),Object.assign($h.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,r=this.nCachedObjects_,n=this._indicesByUUID,i=this._paths,o=this._parsedPaths,a=this._bindings,s=a.length,c=void 0,l=0,u=arguments.length;l!==u;++l){var h=arguments[l],d=h.uuid,p=n[d];if(void 0===p){p=t++,n[d]=p,e.push(h);for(var f=0,m=s;f!==m;++f)a[f].push(new Qh(h,i[f],o[f]))}else if(p<r){c=e[p];var g=--r,v=e[g];n[v.uuid]=p,e[p]=v,n[d]=g,e[g]=h;for(f=0,m=s;f!==m;++f){var y=a[f],_=y[g],b=y[p];y[p]=_,void 0===b&&(b=new Qh(h,i[f],o[f])),y[g]=b}}else e[p]!==c&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=r},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,r=this._indicesByUUID,n=this._bindings,i=n.length,o=0,a=arguments.length;o!==a;++o){var s=arguments[o],c=s.uuid,l=r[c];if(void 0!==l&&l>=t){var u=t++,h=e[u];r[h.uuid]=l,e[l]=h,r[c]=u,e[u]=s;for(var d=0,p=i;d!==p;++d){var f=n[d],m=f[u],g=f[l];f[l]=m,f[u]=g}}}this.nCachedObjects_=t},uncache:function(){for(var e=this._objects,t=e.length,r=this.nCachedObjects_,n=this._indicesByUUID,i=this._bindings,o=i.length,a=0,s=arguments.length;a!==s;++a){var c=arguments[a],l=c.uuid,u=n[l];if(void 0!==u)if(delete n[l],u<r){var h=--r,d=e[h],p=e[y=--t];n[d.uuid]=u,e[u]=d,n[p.uuid]=h,e[h]=p,e.pop();for(var f=0,m=o;f!==m;++f){var g=(_=i[f])[h],v=_[y];_[u]=g,_[h]=v,_.pop()}}else{var y;n[(p=e[y=--t]).uuid]=u,e[u]=p,e.pop();for(f=0,m=o;f!==m;++f){var _;(_=i[f])[u]=_[y],_.pop()}}}this.nCachedObjects_=r},subscribe_:function(e,t){var r=this._bindingsIndicesByPath,n=r[e],i=this._bindings;if(void 0!==n)return i[n];var o=this._paths,a=this._parsedPaths,s=this._objects,c=s.length,l=this.nCachedObjects_,u=new Array(c);n=i.length,r[e]=n,o.push(e),a.push(t),i.push(u);for(var h=l,d=s.length;h!==d;++h){var p=s[h];u[h]=new Qh(p,e,t)}return u},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,r=t[e];if(void 0!==r){var n=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];t[e[a]]=r,o[r]=s,o.pop(),i[r]=i[a],i.pop(),n[r]=n[a],n.pop()}}}),Object.assign(ed.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){var n=this._clip.duration,i=e._clip.duration,o=i/n,a=n/i;e.warp(1,o,t),this.warp(a,1,t)}return this},crossFadeTo:function(e,t,r){return e.crossFadeFrom(this,t,r)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,r){var n=this._mixer,i=n.time,o=this._timeScaleInterpolant,a=this.timeScale;null===o&&(o=n._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,c=o.sampleValues;return s[0]=i,s[1]=i+r,c[0]=e/a,c[1]=t/a,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,r,n){if(this.enabled){var i=this._startTime;if(null!==i){var o=(e-i)*r;if(o<0||0===r)return;this._startTime=null,t=r*o}t*=this._updateTimeScale(e);var a=this._updateTime(t),s=this._updateWeight(e);if(s>0)for(var c=this._interpolants,l=this._propertyBindings,u=0,h=c.length;u!==h;++u)c[u].evaluate(a),l[u].accumulate(n,s)}else this._updateWeight(e)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var r=this._weightInterpolant;if(null!==r){var n=r.evaluate(e)[0];t*=n,e>r.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var r=this._timeScaleInterpolant;if(null!==r)t*=r.evaluate(e)[0],e>r.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e,r=this._clip.duration,n=this.loop,i=this._loopCount,o=n===At;if(0===e)return-1===i?t:o&&1==(1&i)?r-t:t;if(n===Tt){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=r)t=r;else{if(!(t<0)){this.time=t;break e}t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=t,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),t>=r||t<0){var a=Math.floor(t/r);t-=r*a,i+=Math.abs(a);var s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?r:0,this.time=t,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this.time=t,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=t;if(o&&1==(1&i))return r-t}return t},_setEndings:function(e,t,r){var n=this._interpolantSettings;r?(n.endingStart=jt,n.endingEnd=jt):(n.endingStart=e?this.zeroSlopeAtStart?jt:Ct:Ot,n.endingEnd=t?this.zeroSlopeAtEnd?jt:Ct:Ot)},_scheduleFading:function(e,t,r){var n=this._mixer,i=n.time,o=this._weightInterpolant;null===o&&(o=n._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=t,a[1]=i+e,s[1]=r,this}}),td.prototype=Object.assign(Object.create(br.prototype),{constructor:td,_bindAction:function(e,t){var r=e._localRoot||this._root,n=e._clip.tracks,i=n.length,o=e._propertyBindings,a=e._interpolants,s=r.uuid,c=this._bindingsByRootAndName,l=c[s];void 0===l&&(l={},c[s]=l);for(var u=0;u!==i;++u){var h=n[u],d=h.name,p=l[d];if(void 0!==p)o[u]=p;else{if(void 0!==(p=o[u])){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,s,d));continue}var f=t&&t._propertyBindings[u].binding.parsedPath;++(p=new Vh(Qh.create(r,d,f),h.ValueTypeName,h.getValueSize())).referenceCount,this._addInactiveBinding(p,s,d),o[u]=p}a[u].resultBuffer=p.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,r=e._clip.uuid,n=this._actionsByClip[r];this._bindAction(e,n&&n.knownActions[0]),this._addInactiveAction(e,r,t)}for(var i=e._propertyBindings,o=0,a=i.length;o!==a;++o){var s=i[o];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,r=0,n=t.length;r!==n;++r){var i=t[r];0==--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,r){var n=this._actions,i=this._actionsByClip,o=i[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=o;else{var a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=n.length,n.push(e),o.actionByRoot[r]=e},_removeInactiveAction:function(e){var t=this._actions,r=t[t.length-1],n=e._cacheIndex;r._cacheIndex=n,t[n]=r,t.pop(),e._cacheIndex=null;var i=e._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,c=s[s.length-1],l=e._byClipCacheIndex;c._byClipCacheIndex=l,s[l]=c,s.pop(),e._byClipCacheIndex=null,delete a.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,r=0,n=t.length;r!==n;++r){var i=t[r];0==--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(e){var t=this._actions,r=e._cacheIndex,n=this._nActiveActions++,i=t[n];e._cacheIndex=n,t[n]=e,i._cacheIndex=r,t[r]=i},_takeBackAction:function(e){var t=this._actions,r=e._cacheIndex,n=--this._nActiveActions,i=t[n];e._cacheIndex=n,t[n]=e,i._cacheIndex=r,t[r]=i},_addInactiveBinding:function(e,t,r){var n=this._bindingsByRootAndName,i=n[t],o=this._bindings;void 0===i&&(i={},n[t]=i),i[r]=e,e._cacheIndex=o.length,o.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,r=e.binding,n=r.rootNode.uuid,i=r.path,o=this._bindingsByRootAndName,a=o[n],s=t[t.length-1],c=e._cacheIndex;s._cacheIndex=c,t[c]=s,t.pop(),delete a[i],0===Object.keys(a).length&&delete o[n]},_lendBinding:function(e){var t=this._bindings,r=e._cacheIndex,n=this._nActiveBindings++,i=t[n];e._cacheIndex=n,t[n]=e,i._cacheIndex=r,t[r]=i},_takeBackBinding:function(e){var t=this._bindings,r=e._cacheIndex,n=--this._nActiveBindings,i=t[n];e._cacheIndex=n,t[n]=e,i._cacheIndex=r,t[r]=i},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,r=e[t];return void 0===r&&((r=new $l(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=r),r},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,r=e.__cacheIndex,n=--this._nActiveControlInterpolants,i=t[n];e.__cacheIndex=n,t[n]=e,i.__cacheIndex=r,t[r]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var r=t||this._root,n=r.uuid,i="string"==typeof e?lu.findByName(r,e):e,o=null!==i?i.uuid:e,a=this._actionsByClip[o],s=null;if(void 0!==a){var c=a.actionByRoot[n];if(void 0!==c)return c;s=a.knownActions[0],null===i&&(i=s._clip)}if(null===i)return null;var l=new ed(this,i,t);return this._bindAction(l,s),this._addInactiveAction(l,o,n),l},existingAction:function(e,t){var r=t||this._root,n=r.uuid,i="string"==typeof e?lu.findByName(r,e):e,o=i?i.uuid:e,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[n]||null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,r=this._bindings,n=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var i=0;i!==t;++i)e[i].reset();for(i=0;i!==n;++i)r[i].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,r=this._nActiveActions,n=this.time+=e,i=Math.sign(e),o=this._accuIndex^=1,a=0;a!==r;++a){t[a]._update(n,e,i,o)}var s=this._bindings,c=this._nActiveBindings;for(a=0;a!==c;++a)s[a].apply(o);return this},setTime:function(e){this.time=0;for(var t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,r=e.uuid,n=this._actionsByClip,i=n[r];if(void 0!==i){for(var o=i.knownActions,a=0,s=o.length;a!==s;++a){var c=o[a];this._deactivateAction(c);var l=c._cacheIndex,u=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,u._cacheIndex=l,t[l]=u,t.pop(),this._removeInactiveBindingsForAction(c)}delete n[r]}},uncacheRoot:function(e){var t=e.uuid,r=this._actionsByClip;for(var n in r){var i=r[n].actionByRoot[t];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var o=this._bindingsByRootAndName[t];if(void 0!==o)for(var a in o){var s=o[a];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(e,t){var r=this.existingAction(e,t);null!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}}),rd.prototype.clone=function(){return new rd(void 0===this.value.clone?this.value:this.value.clone())},nd.prototype=Object.assign(Object.create(Es.prototype),{constructor:nd,isInstancedInterleavedBuffer:!0,copy:function(e){return Es.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(id.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,r){var n=r||[];return ad(e,this,n,t),n.sort(od),n},intersectObjects:function(e,t,r){var n=r||[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),n;for(var i=0,o=e.length;i<o;i++)ad(e[i],this,n,t);return n.sort(od),n}}),Object.assign(sd.prototype,{set:function(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Sr.clamp(t/this.radius,-1,1))),this}}),Object.assign(cd.prototype,{set:function(e,t,r){return this.radius=e,this.theta=t,this.y=r,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.setFromCartesianCoords(e.x,e.y,e.z)},setFromCartesianCoords:function(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}});var ld=new Tr;function ud(e,t){this.min=void 0!==e?e:new Tr(1/0,1/0),this.max=void 0!==t?t:new Tr(-1/0,-1/0)}Object.assign(ud.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(e,t){var r=ld.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new Tr),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new Tr),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new Tr),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new Tr),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(e){return ld.copy(e).clamp(this.min,this.max).sub(e).length()},intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}});var hd=new Nr,dd=new Nr;function pd(e,t){this.start=void 0!==e?e:new Nr,this.end=void 0!==t?t:new Nr}function fd(e){ln.call(this),this.material=e,this.render=function(){}}Object.assign(pd.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new Nr),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new Nr),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new Nr),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(e,t){hd.subVectors(e,this.start),dd.subVectors(this.end,this.start);var r=dd.dot(dd),n=dd.dot(hd)/r;return t&&(n=Sr.clamp(n,0,1)),n},closestPointToPoint:function(e,t,r){var n=this.closestPointToPointParameter(e,t);return void 0===r&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),r=new Nr),this.delta(r).multiplyScalar(n).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),fd.prototype=Object.create(ln.prototype),fd.prototype.constructor=fd,fd.prototype.isImmediateRenderObject=!0;var md=new Nr;function gd(e,t){ln.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var r=new Li,n=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],i=0,o=1;i<32;i++,o++){var a=i/32*Math.PI*2,s=o/32*Math.PI*2;n.push(Math.cos(a),Math.sin(a),1,Math.cos(s),Math.sin(s),1)}r.setAttribute("position",new vi(n,3));var c=new ic({fog:!1});this.cone=new pc(r,c),this.add(this.cone),this.update()}gd.prototype=Object.create(ln.prototype),gd.prototype.constructor=gd,gd.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},gd.prototype.update=function(){this.light.updateMatrixWorld();var e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),md.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(md),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var vd=new Nr,yd=new kr,_d=new kr;function bd(e){for(var t=function e(t){var r=[];t&&t.isBone&&r.push(t);for(var n=0;n<t.children.length;n++)r.push.apply(r,e(t.children[n]));return r}(e),r=new Li,n=[],i=[],o=new ei(0,0,1),a=new ei(0,1,0),s=0;s<t.length;s++){var c=t[s];c.parent&&c.parent.isBone&&(n.push(0,0,0),n.push(0,0,0),i.push(o.r,o.g,o.b),i.push(a.r,a.g,a.b))}r.setAttribute("position",new vi(n,3)),r.setAttribute("color",new vi(i,3));var l=new ic({vertexColors:M,depthTest:!1,depthWrite:!1,transparent:!0});pc.call(this,r,l),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function xd(e,t,r){this.light=e,this.light.updateMatrixWorld(),this.color=r;var n=new Ml(t,4,2),i=new si({wireframe:!0,fog:!1});qi.call(this,n,i),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}bd.prototype=Object.create(pc.prototype),bd.prototype.constructor=bd,bd.prototype.updateMatrixWorld=function(e){var t=this.bones,r=this.geometry,n=r.getAttribute("position");_d.getInverse(this.root.matrixWorld);for(var i=0,o=0;i<t.length;i++){var a=t[i];a.parent&&a.parent.isBone&&(yd.multiplyMatrices(_d,a.matrixWorld),vd.setFromMatrixPosition(yd),n.setXYZ(o,vd.x,vd.y,vd.z),yd.multiplyMatrices(_d,a.parent.matrixWorld),vd.setFromMatrixPosition(yd),n.setXYZ(o+1,vd.x,vd.y,vd.z),o+=2)}r.getAttribute("position").needsUpdate=!0,ln.prototype.updateMatrixWorld.call(this,e)},xd.prototype=Object.create(qi.prototype),xd.prototype.constructor=xd,xd.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},xd.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)};var wd=new Nr,Md=new ei,Sd=new ei;function Td(e,t,r){ln.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r;var n=new Dc(t);n.rotateY(.5*Math.PI),this.material=new si({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=M);var i=n.getAttribute("position"),o=new Float32Array(3*i.count);n.setAttribute("color",new li(o,3)),this.add(new qi(n,this.material)),this.update()}function Ed(e,t,r,n){e=e||10,t=t||10,r=new ei(void 0!==r?r:4473924),n=new ei(void 0!==n?n:8947848);for(var i=t/2,o=e/t,a=e/2,s=[],c=[],l=0,u=0,h=-a;l<=t;l++,h+=o){s.push(-a,0,h,a,0,h),s.push(h,0,-a,h,0,a);var d=l===i?r:n;d.toArray(c,u),u+=3,d.toArray(c,u),u+=3,d.toArray(c,u),u+=3,d.toArray(c,u),u+=3}var p=new Li;p.setAttribute("position",new vi(s,3)),p.setAttribute("color",new vi(c,3));var f=new ic({vertexColors:M});pc.call(this,p,f)}function Ad(e,t,r,n,i,o){e=e||10,t=t||16,r=r||8,n=n||64,i=new ei(void 0!==i?i:4473924),o=new ei(void 0!==o?o:8947848);var a,s,c,l,u,h,d,p=[],f=[];for(l=0;l<=t;l++)c=l/t*(2*Math.PI),a=Math.sin(c)*e,s=Math.cos(c)*e,p.push(0,0,0),p.push(a,0,s),d=1&l?i:o,f.push(d.r,d.g,d.b),f.push(d.r,d.g,d.b);for(l=0;l<=r;l++)for(d=1&l?i:o,h=e-e/r*l,u=0;u<n;u++)c=u/n*(2*Math.PI),a=Math.sin(c)*h,s=Math.cos(c)*h,p.push(a,0,s),f.push(d.r,d.g,d.b),c=(u+1)/n*(2*Math.PI),a=Math.sin(c)*h,s=Math.cos(c)*h,p.push(a,0,s),f.push(d.r,d.g,d.b);var m=new Li;m.setAttribute("position",new vi(p,3)),m.setAttribute("color",new vi(f,3));var g=new ic({vertexColors:M});pc.call(this,m,g)}Td.prototype=Object.create(ln.prototype),Td.prototype.constructor=Td,Td.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Td.prototype.update=function(){var e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var t=e.geometry.getAttribute("color");Md.copy(this.light.color),Sd.copy(this.light.groundColor);for(var r=0,n=t.count;r<n;r++){var i=r<n/2?Md:Sd;t.setXYZ(r,i.r,i.g,i.b)}t.needsUpdate=!0}e.lookAt(wd.setFromMatrixPosition(this.light.matrixWorld).negate())},Ed.prototype=Object.assign(Object.create(pc.prototype),{constructor:Ed,copy:function(e){return pc.prototype.copy.call(this,e),this.geometry.copy(e.geometry),this.material.copy(e.material),this},clone:function(){return(new this.constructor).copy(this)}}),Ad.prototype=Object.create(pc.prototype),Ad.prototype.constructor=Ad;var Ld=new Nr,Rd=new Nr,Pd=new Nr;function Cd(e,t,r){ln.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,void 0===t&&(t=1);var n=new Li;n.setAttribute("position",new vi([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var i=new ic({fog:!1});this.lightPlane=new uc(n,i),this.add(this.lightPlane),(n=new Li).setAttribute("position",new vi([0,0,0,0,0,1],3)),this.targetLine=new uc(n,i),this.add(this.targetLine),this.update()}Cd.prototype=Object.create(ln.prototype),Cd.prototype.constructor=Cd,Cd.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},Cd.prototype.update=function(){Ld.setFromMatrixPosition(this.light.matrixWorld),Rd.setFromMatrixPosition(this.light.target.matrixWorld),Pd.subVectors(Rd,Ld),this.lightPlane.lookAt(Rd),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Rd),this.targetLine.scale.z=Pd.length()};var jd=new Nr,Od=new co;function Dd(e){var t=new Li,r=new ic({color:16777215,vertexColors:w}),n=[],i=[],o={},a=new ei(16755200),s=new ei(16711680),c=new ei(43775),l=new ei(16777215),u=new ei(3355443);function h(e,t,r){d(e,r),d(t,r)}function d(e,t){n.push(0,0,0),i.push(t.r,t.g,t.b),void 0===o[e]&&(o[e]=[]),o[e].push(n.length/3-1)}h("n1","n2",a),h("n2","n4",a),h("n4","n3",a),h("n3","n1",a),h("f1","f2",a),h("f2","f4",a),h("f4","f3",a),h("f3","f1",a),h("n1","f1",a),h("n2","f2",a),h("n3","f3",a),h("n4","f4",a),h("p","n1",s),h("p","n2",s),h("p","n3",s),h("p","n4",s),h("u1","u2",c),h("u2","u3",c),h("u3","u1",c),h("c","t",l),h("p","c",u),h("cn1","cn2",u),h("cn3","cn4",u),h("cf1","cf2",u),h("cf3","cf4",u),t.setAttribute("position",new vi(n,3)),t.setAttribute("color",new vi(i,3)),pc.call(this,t,r),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}function Id(e,t,r,n,i,o,a){jd.set(i,o,a).unproject(n);var s=t[e];if(void 0!==s)for(var c=r.getAttribute("position"),l=0,u=s.length;l<u;l++)c.setXYZ(s[l],jd.x,jd.y,jd.z)}Dd.prototype=Object.create(pc.prototype),Dd.prototype.constructor=Dd,Dd.prototype.update=function(){var e=this.geometry,t=this.pointMap;Od.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Id("c",t,e,Od,0,0,-1),Id("t",t,e,Od,0,0,1),Id("n1",t,e,Od,-1,-1,-1),Id("n2",t,e,Od,1,-1,-1),Id("n3",t,e,Od,-1,1,-1),Id("n4",t,e,Od,1,1,-1),Id("f1",t,e,Od,-1,-1,1),Id("f2",t,e,Od,1,-1,1),Id("f3",t,e,Od,-1,1,1),Id("f4",t,e,Od,1,1,1),Id("u1",t,e,Od,.7,1.1,-1),Id("u2",t,e,Od,-.7,1.1,-1),Id("u3",t,e,Od,0,2,-1),Id("cf1",t,e,Od,-1,0,1),Id("cf2",t,e,Od,1,0,1),Id("cf3",t,e,Od,0,-1,1),Id("cf4",t,e,Od,0,1,1),Id("cn1",t,e,Od,-1,0,-1),Id("cn2",t,e,Od,1,0,-1),Id("cn3",t,e,Od,0,-1,-1),Id("cn4",t,e,Od,0,1,-1),e.getAttribute("position").needsUpdate=!0};var Nd=new Sn;function Ud(e,t){this.object=e,void 0===t&&(t=16776960);var r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Float32Array(24),i=new Li;i.setIndex(new li(r,1)),i.setAttribute("position",new li(n,3)),pc.call(this,i,new ic({color:t})),this.matrixAutoUpdate=!1,this.update()}function zd(e,t){this.type="Box3Helper",this.box=e,t=t||16776960;var r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Li;n.setIndex(new li(r,1)),n.setAttribute("position",new vi([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),pc.call(this,n,new ic({color:t})),this.geometry.computeBoundingSphere()}function Fd(e,t,r){this.type="PlaneHelper",this.plane=e,this.size=void 0===t?1:t;var n=void 0!==r?r:16776960,i=new Li;i.setAttribute("position",new vi([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),i.computeBoundingSphere(),uc.call(this,i,new ic({color:n}));var o=new Li;o.setAttribute("position",new vi([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),o.computeBoundingSphere(),this.add(new qi(o,new si({color:n,opacity:.2,transparent:!0,depthWrite:!1})))}Ud.prototype=Object.create(pc.prototype),Ud.prototype.constructor=Ud,Ud.prototype.update=function(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Nd.setFromObject(this.object),!Nd.isEmpty()){var t=Nd.min,r=Nd.max,n=this.geometry.attributes.position,i=n.array;i[0]=r.x,i[1]=r.y,i[2]=r.z,i[3]=t.x,i[4]=r.y,i[5]=r.z,i[6]=t.x,i[7]=t.y,i[8]=r.z,i[9]=r.x,i[10]=t.y,i[11]=r.z,i[12]=r.x,i[13]=r.y,i[14]=t.z,i[15]=t.x,i[16]=r.y,i[17]=t.z,i[18]=t.x,i[19]=t.y,i[20]=t.z,i[21]=r.x,i[22]=t.y,i[23]=t.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}},Ud.prototype.setFromObject=function(e){return this.object=e,this.update(),this},Ud.prototype.copy=function(e){return pc.prototype.copy.call(this,e),this.object=e.object,this},Ud.prototype.clone=function(){return(new this.constructor).copy(this)},zd.prototype=Object.create(pc.prototype),zd.prototype.constructor=zd,zd.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),ln.prototype.updateMatrixWorld.call(this,e))},Fd.prototype=Object.create(uc.prototype),Fd.prototype.constructor=Fd,Fd.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.children[0].material.side=t<0?v:g,this.lookAt(this.plane.normal),ln.prototype.updateMatrixWorld.call(this,e)};var Bd,Gd,Vd=new Nr;function Hd(e,t,r,n,i,o){ln.call(this),void 0===e&&(e=new Nr(0,0,1)),void 0===t&&(t=new Nr(0,0,0)),void 0===r&&(r=1),void 0===n&&(n=16776960),void 0===i&&(i=.2*r),void 0===o&&(o=.2*i),void 0===Bd&&((Bd=new Li).setAttribute("position",new vi([0,0,0,0,1,0],3)),(Gd=new Ol(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new uc(Bd,new ic({color:n})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new qi(Gd,new si({color:n})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,i,o)}function kd(e){var t=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=new Li;r.setAttribute("position",new vi(t,3)),r.setAttribute("color",new vi([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var n=new ic({vertexColors:M});pc.call(this,r,n)}Hd.prototype=Object.create(ln.prototype),Hd.prototype.constructor=Hd,Hd.prototype.setDirection=function(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Vd.set(e.z,0,-e.x).normalize();var t=Math.acos(e.y);this.quaternion.setFromAxisAngle(Vd,t)}},Hd.prototype.setLength=function(e,t,r){void 0===t&&(t=.2*e),void 0===r&&(r=.2*t),this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()},Hd.prototype.setColor=function(e){this.line.material.color.set(e),this.cone.material.color.set(e)},Hd.prototype.copy=function(e){return ln.prototype.copy.call(this,e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this},Hd.prototype.clone=function(){return(new this.constructor).copy(this)},kd.prototype=Object.create(pc.prototype),kd.prototype.constructor=kd;var Wd,qd,Xd,Yd,Zd=4,Jd=8,Kd=Math.pow(2,Jd),Qd=[.125,.215,.35,.446,.526,.582],$d=Jd-Zd+1+Qd.length,ep=20,tp={[Ut]:0,[zt]:1,[Bt]:2,[Vt]:3,[Ht]:4,[kt]:5,[Ft]:6},rp=new $u,np=(Wd=ep,qd=new Float32Array(Wd),Xd=new Nr(0,1,0),(Yd=new Bl({defines:{n:Wd},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:qd},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:Xd},inputEncoding:{value:tp[Ut]},outputEncoding:{value:tp[Ut]}},vertexShader:Ep(),fragmentShader:`\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform sampler2D envMap;\nuniform int samples;\nuniform float weights[n];\nuniform bool latitudinal;\nuniform float dTheta;\nuniform float mipInt;\nuniform vec3 poleAxis;\n\n${Ap()}\n\n#define ENVMAP_TYPE_CUBE_UV\n#include <cube_uv_reflection_fragment>\n\nvoid main() {\n\tgl_FragColor = vec4(0.0);\n\tfor (int i = 0; i < n; i++) {\n\t\tif (i >= samples)\n\t\t\tbreak;\n\t\tfor (int dir = -1; dir < 2; dir += 2) {\n\t\t\tif (i == 0 && dir == 1)\n\t\t\t\tcontinue;\n\t\t\tvec3 axis = latitudinal ? poleAxis : cross(poleAxis, vOutputDirection);\n\t\t\tif (all(equal(axis, vec3(0.0))))\n\t\t\t\taxis = cross(vec3(0.0, 1.0, 0.0), vOutputDirection);\n\t\t\taxis = normalize(axis);\n\t\t\tfloat theta = dTheta * float(dir * i);\n\t\t\tfloat cosTheta = cos(theta);\n\t\t\t// Rodrigues' axis-angle rotation\n\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross(axis, vOutputDirection) * sin(theta)\n\t\t\t\t\t+ axis * dot(axis, vOutputDirection) * (1.0 - cosTheta);\n\t\t\tgl_FragColor.rgb +=\n\t\t\t\t\tweights[i] * bilinearCubeUV(envMap, sampleDirection, mipInt);\n\t\t}\n\t}\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t`,blending:S,depthTest:!1,depthWrite:!1})).type="SphericalGaussianBlur",Yd),ip=null,op=null,{_lodPlanes:ap,_sizeLods:sp,_sigmas:cp}=function(){for(var e=[],t=[],r=[],n=Jd,i=0;i<$d;i++){var o=Math.pow(2,n);t.push(o);var a=1/o;i>Jd-Zd?a=Qd[i-Jd+Zd-1]:0==i&&(a=0),r.push(a);for(var s=1/(o-1),c=-s/2,l=1+s/2,u=[c,c,l,c,l,l,c,c,l,l,c,l],h=new Float32Array(108),d=new Float32Array(72),p=new Float32Array(36),f=0;f<6;f++){var m=f%3*2/3-1,g=f>2?0:-1,v=[m,g,0,m+2/3,g,0,m+2/3,g+1,0,m,g,0,m+2/3,g+1,0,m,g+1,0];h.set(v,18*f),d.set(u,12*f);var y=[f,f,f,f,f,f];p.set(y,6*f)}var _=new Li;_.setAttribute("position",new li(h,3)),_.setAttribute("uv",new li(d,2)),_.setAttribute("faceIndex",new li(p,1)),e.push(_),n>Zd&&n--}return{_lodPlanes:e,_sizeLods:t,_sigmas:r}}(),lp=null,up=null,hp=null,dp=(1+Math.sqrt(5))/2,pp=1/dp,fp=[new Nr(1,1,1),new Nr(-1,1,1),new Nr(1,1,-1),new Nr(-1,1,-1),new Nr(0,dp,pp),new Nr(0,dp,-pp),new Nr(pp,0,dp),new Nr(-pp,0,dp),new Nr(dp,pp,0),new Nr(-dp,pp,0)];function mp(e){up=e,yp(np)}function gp(e){var t={magFilter:be,minFilter:be,generateMipmaps:!1,type:e?e.type:Pe,format:e?e.format:Xe,encoding:e?e.encoding:Bt,depthBuffer:!1,stencilBuffer:!1},r=_p(t);return r.depthBuffer=!e,lp=_p(t),r}function vp(e){lp.dispose(),up.setRenderTarget(hp),e.scissorTest=!1,e.setSize(e.width,e.height)}function yp(e){var t=new un;t.add(new qi(ap[0],e)),up.compile(t,rp)}function _p(e){var t=new Cr(3*Kd,3*Kd,e);return t.texture.mapping=me,t.texture.name="PMREM.cubeUv",t.scissorTest=!0,t}function bp(e,t,r,n,i){e.viewport.set(t,r,n,i),e.scissor.set(t,r,n,i)}function xp(e){var t=up.autoClear;up.autoClear=!1;for(var r=1;r<$d;r++){wp(e,r-1,r,Math.sqrt(cp[r]*cp[r]-cp[r-1]*cp[r-1]),fp[(r-1)%fp.length])}up.autoClear=t}function wp(e,t,r,n,i){Mp(e,lp,t,r,n,"latitudinal",i),Mp(lp,e,r,r,n,"longitudinal",i)}function Mp(e,t,r,n,i,o,a){"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");var s=new un;s.add(new qi(ap[n],np));var c=np.uniforms,l=sp[r]-1,u=isFinite(i)?Math.PI/(2*l):2*Math.PI/(2*ep-1),h=i/u,d=isFinite(i)?1+Math.floor(3*h):ep;d>ep&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${d} samples when the maximum is set to ${ep}`);for(var p=[],f=0,m=0;m<ep;++m){var g=m/h,v=Math.exp(-g*g/2);p.push(v),0==m?f+=v:m<d&&(f+=2*v)}for(m=0;m<p.length;m++)p[m]=p[m]/f;c.envMap.value=e.texture,c.samples.value=d,c.weights.value=p,c.latitudinal.value="latitudinal"===o,a&&(c.poleAxis.value=a),c.dTheta.value=u,c.mipInt.value=Jd-r,c.inputEncoding.value=tp[e.texture.encoding],c.outputEncoding.value=tp[e.texture.encoding];var y=sp[n];bp(t,g=3*Math.max(0,Kd-2*y),(0===n?0:2*Kd)+2*y*(n>Jd-Zd?n-Jd+Zd:0),3*y,2*y),up.setRenderTarget(t),up.render(s,rp)}function Sp(){var e=new Bl({uniforms:{envMap:{value:null},texelSize:{value:new Tr(1,1)},inputEncoding:{value:tp[Ut]},outputEncoding:{value:tp[Ut]}},vertexShader:Ep(),fragmentShader:`\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform sampler2D envMap;\nuniform vec2 texelSize;\n\n${Ap()}\n\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n\nvoid main() {\n\tgl_FragColor = vec4(0.0);\n\tvec3 outputDirection = normalize(vOutputDirection);\n\tvec2 uv;\n\tuv.y = asin(clamp(outputDirection.y, -1.0, 1.0)) * RECIPROCAL_PI + 0.5;\n\tuv.x = atan(outputDirection.z, outputDirection.x) * RECIPROCAL_PI2 + 0.5;\n\tvec2 f = fract(uv / texelSize - 0.5);\n\tuv -= f * texelSize;\n\tvec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.x += texelSize.x;\n\tvec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.y += texelSize.y;\n\tvec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.x -= texelSize.x;\n\tvec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tvec3 tm = mix(tl, tr, f.x);\n\tvec3 bm = mix(bl, br, f.x);\n\tgl_FragColor.rgb = mix(tm, bm, f.y);\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t`,blending:S,depthTest:!1,depthWrite:!1});return e.type="EquirectangularToCubeUV",e}function Tp(){var e=new Bl({uniforms:{envMap:{value:null},inputEncoding:{value:tp[Ut]},outputEncoding:{value:tp[Ut]}},vertexShader:Ep(),fragmentShader:`\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform samplerCube envMap;\n\n${Ap()}\n\nvoid main() {\n\tgl_FragColor = vec4(0.0);\n\tgl_FragColor.rgb = envMapTexelToLinear(textureCube(envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ))).rgb;\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t`,blending:S,depthTest:!1,depthWrite:!1});return e.type="CubemapToCubeUV",e}function Ep(){return"\nprecision mediump float;\nprecision mediump int;\nattribute vec3 position;\nattribute vec2 uv;\nattribute float faceIndex;\nvarying vec3 vOutputDirection;\nvec3 getDirection(vec2 uv, float face) {\n\tuv = 2.0 * uv - 1.0;\n\tvec3 direction = vec3(uv, 1.0);\n\tif (face == 0.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.z *= -1.0;\n\t} else if (face == 1.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.z *= -1.0;\n\t} else if (face == 3.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.x *= -1.0;\n\t} else if (face == 4.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.y *= -1.0;\n\t} else if (face == 5.0) {\n\t\tdirection.xz *= -1.0;\n\t}\n\treturn direction;\n}\nvoid main() {\n\tvOutputDirection = getDirection(uv, faceIndex);\n\tgl_Position = vec4( position, 1.0 );\n}\n\t"}function Ap(){return"\nuniform int inputEncoding;\nuniform int outputEncoding;\n\n#include <encodings_pars_fragment>\n\nvec4 inputTexelToLinear(vec4 value){\n\tif(inputEncoding == 0){\n\t\treturn value;\n\t}else if(inputEncoding == 1){\n\t\treturn sRGBToLinear(value);\n\t}else if(inputEncoding == 2){\n\t\treturn RGBEToLinear(value);\n\t}else if(inputEncoding == 3){\n\t\treturn RGBMToLinear(value, 7.0);\n\t}else if(inputEncoding == 4){\n\t\treturn RGBMToLinear(value, 16.0);\n\t}else if(inputEncoding == 5){\n\t\treturn RGBDToLinear(value, 256.0);\n\t}else{\n\t\treturn GammaToLinear(value, 2.2);\n\t}\n}\n\nvec4 linearToOutputTexel(vec4 value){\n\tif(outputEncoding == 0){\n\t\treturn value;\n\t}else if(outputEncoding == 1){\n\t\treturn LinearTosRGB(value);\n\t}else if(outputEncoding == 2){\n\t\treturn LinearToRGBE(value);\n\t}else if(outputEncoding == 3){\n\t\treturn LinearToRGBM(value, 7.0);\n\t}else if(outputEncoding == 4){\n\t\treturn LinearToRGBM(value, 16.0);\n\t}else if(outputEncoding == 5){\n\t\treturn LinearToRGBD(value, 256.0);\n\t}else{\n\t\treturn LinearToGamma(value, 2.2);\n\t}\n}\n\nvec4 envMapTexelToLinear(vec4 color) {\n\treturn inputTexelToLinear(color);\n}\n\t"}function Lp(e,t,r,n,i,o,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new ii(e,t,r,i,o,a)}mp.prototype={constructor:mp,fromScene:function(e,t=0,r=.1,n=100){hp=up.getRenderTarget();var i=gp();return function(e,t,r,n){var i=new lo(90,1,t,r),o=[1,1,1,1,-1,1],a=[1,1,-1,-1,-1,1],s=up.outputEncoding,c=up.toneMapping,l=up.toneMappingExposure,u=up.getClearColor(),h=up.getClearAlpha();up.toneMapping=ie,up.toneMappingExposure=1,up.outputEncoding=Ut,e.scale.z*=-1;var d=e.background;if(d&&d.isColor){d.convertSRGBToLinear();var p=Math.max(d.r,d.g,d.b),f=Math.min(Math.max(Math.ceil(Math.log2(p)),-128),127);d=d.multiplyScalar(Math.pow(2,-f));var m=(f+128)/255;up.setClearColor(d,m),e.background=null}for(var g=0;g<6;g++){var v=g%3;0==v?(i.up.set(0,o[g],0),i.lookAt(a[g],0,0)):1==v?(i.up.set(0,0,o[g]),i.lookAt(0,a[g],0)):(i.up.set(0,o[g],0),i.lookAt(0,0,a[g])),bp(n,v*Kd,g>2?Kd:0,Kd,Kd),up.setRenderTarget(n),up.render(e,i)}up.toneMapping=c,up.toneMappingExposure=l,up.outputEncoding=s,up.setClearColor(u,h),e.scale.z*=-1}(e,r,n,i),t>0&&wp(i,0,0,t),xp(i),vp(i),i},fromEquirectangular:function(e){return e.magFilter=be,e.minFilter=be,e.generateMipmaps=!1,this.fromCubemap(e)},fromCubemap:function(e){hp=up.getRenderTarget();var t=gp(e);return function(e,t){var r=new un;e.isCubeTexture?null==op&&(op=Tp()):null==ip&&(ip=Sp());var n=e.isCubeTexture?op:ip;r.add(new qi(ap[0],n));var i=n.uniforms;i.envMap.value=e,e.isCubeTexture||i.texelSize.value.set(1/e.image.width,1/e.image.height);i.inputEncoding.value=tp[e.encoding],i.outputEncoding.value=tp[e.encoding],bp(t,0,0,3*Kd,2*Kd),up.setRenderTarget(t),up.render(r,rp)}(e,t),xp(t),vp(t),t},compileCubemapShader:function(){null==op&&yp(op=Tp())},compileEquirectangularShader:function(){null==ip&&yp(ip=Sp())},dispose:function(){np.dispose(),null!=op&&op.dispose(),null!=ip&&ip.dispose();for(var e=0;e<ap.length;e++)ap[e].dispose()}};var Rp=0,Pp=1;function Cp(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e}function jp(e){return void 0===e&&(e=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e}function Op(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new bc(e,t)}function Dp(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Hs(e)}function Ip(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new bc(e,t)}function Np(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new mc(e)}function Up(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new mc(e)}function zp(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new mc(e)}function Fp(e,t,r){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Nr(e,t,r)}function Bp(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new li(e,t).setUsage(dr)}function Gp(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new ui(e,t)}function Vp(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new hi(e,t)}function Hp(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new di(e,t)}function kp(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new pi(e,t)}function Wp(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new fi(e,t)}function qp(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new mi(e,t)}function Xp(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new gi(e,t)}function Yp(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new vi(e,t)}function Zp(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new yi(e,t)}function Jp(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Cu.call(this,e),this.type="catmullrom",this.closed=!0}function Kp(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Cu.call(this,e),this.type="catmullrom"}function Qp(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Cu.call(this,e),this.type="catmullrom"}function $p(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new kd(e)}function ef(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Ud(e,t)}function tf(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new pc(new Cl(e.geometry),new ic({color:void 0!==t?t:16777215}))}function rf(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new pc(new Ec(e.geometry),new ic({color:void 0!==t?t:16777215}))}function nf(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new gu(e)}function of(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new _u(e)}function af(e,t,r){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new fo(e,r)}Mu.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Mu.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(Hu.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new $i,r=0,n=e.length;r<n;r++){var i=e[r];t.vertices.push(new Nr(i.x,i.y,i.z||0))}return t}}),Object.assign(ku.prototype,{fromPoints:function(e){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),Jp.prototype=Object.create(Cu.prototype),Kp.prototype=Object.create(Cu.prototype),Qp.prototype=Object.create(Cu.prototype),Object.assign(Qp.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),Ed.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},bd.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(fu.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),oh.extractUrlBase(e)}}),fu.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Object.assign(uh.prototype,{setTexturePath:function(e){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(e)}}),Object.assign(ud.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(Sn.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),yo.prototype.setFromMatrix=function(e){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(e)},pd.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(Sr,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Sr.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Sr.ceilPowerOfTwo(e)}}),Object.assign(Er.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(kr.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Nr).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(e){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,r,n,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,n,r,i,o)}}),Fn.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},Or.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(In.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(Jn.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(Jn,{barycoordFromPoint:function(e,t,r,n,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Jn.getBarycoord(e,t,r,n,i)},normal:function(e,t,r,n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Jn.getNormal(e,t,r,n)}}),Object.assign(Wu.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new gl(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Ll(this,e)}}),Object.assign(Tr.prototype,{fromAttribute:function(e,t,r){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,r)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Nr.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,r){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,r)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Pr.prototype,{fromAttribute:function(e,t,r){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,r)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign($i.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(e){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.assign(ln.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(e){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.defineProperties(ln.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.assign(qi.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}),Object.defineProperties(qi.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),Dt},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Object.defineProperties(Xs.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Ks.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Ys.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(Mu.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),lo.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(qu.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(li.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===dr},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(dr)}}}),Object.assign(li.prototype,{setDynamic:function(e){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?dr:hr),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(Li.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addAttribute:function(e,t){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t),this):this.setAttribute(e,t):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(e,new li(arguments[1],arguments[2])))},addDrawCall:function(e,t,r){void 0!==r&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(e){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(e)},applyMatrix:function(e){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(e)}}),Object.defineProperties(Li.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Es.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===dr},set:function(e){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(e)}}}),Object.assign(Es.prototype,{setDynamic:function(e){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===e?dr:hr),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(vl.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(rd.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(ai.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new ei}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===_}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(e){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=e}}}),Object.defineProperties(Hl.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(so.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(Ms.prototype,{clearTarget:function(e,t,r,n){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(e),this.clear(t,r,n)},animate:function(e){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(e)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Object.defineProperties(Ms.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(e){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===e?zt:Ut}}}),Object.defineProperties(fs.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Cr.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(Ih.prototype,{load:{value:function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new xh).load(e,(function(e){t.setBuffer(e)})),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),Gh.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},po.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)};var sf={merge:function(e,t,r){var n;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),n=t.matrix,t=t.geometry),e.merge(t,n,r)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}};function cf(){console.error("THREE.CanvasRenderer has been removed")}function lf(){console.error("THREE.JSONLoader has been removed.")}Ar.crossOrigin=void 0,Ar.loadTexture=function(e,t,r,n){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new wu;i.setCrossOrigin(this.crossOrigin);var o=i.load(e,r,void 0,n);return t&&(o.mapping=t),o},Ar.loadTextureCube=function(e,t,r,n){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new xu;i.setCrossOrigin(this.crossOrigin);var o=i.load(e,r,void 0,n);return t&&(o.mapping=t),o},Ar.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Ar.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};var uf={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}};function hf(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:n}}))},"./src/libs/three/examples/jsm/utils/BufferGeometryUtils.js":
/*!******************************************************************!*\
  !*** ./src/libs/three/examples/jsm/utils/BufferGeometryUtils.js ***!
  \******************************************************************/
/*! exports provided: BufferGeometryUtils */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is referenced from these modules with unsupported syntax: ./src/objects/line/PolygonRouteLine.js (referenced with cjs require) */function(e,t,r){"use strict";r.r(t),r.d(t,"BufferGeometryUtils",(function(){return i}));var n=r(/*! ../../../build/three.module.js */"./src/libs/three/build/three.module.js"),i={computeTangents:function(e){var t=e.index,r=e.attributes;if(null!==t&&void 0!==r.position&&void 0!==r.normal&&void 0!==r.uv){var i=t.array,o=r.position.array,a=r.normal.array,s=r.uv.array,c=o.length/3;void 0===r.tangent&&e.setAttribute("tangent",new n.BufferAttribute(new Float32Array(4*c),4));for(var l=r.tangent.array,u=[],h=[],d=0;d<c;d++)u[d]=new n.Vector3,h[d]=new n.Vector3;var p=new n.Vector3,f=new n.Vector3,m=new n.Vector3,g=new n.Vector2,v=new n.Vector2,y=new n.Vector2,_=new n.Vector3,b=new n.Vector3,x=e.groups;0===x.length&&(x=[{start:0,count:i.length}]);d=0;for(var w=x.length;d<w;++d)for(var M=O=(j=x[d]).start,S=O+j.count;M<S;M+=3)D(i[M+0],i[M+1],i[M+2]);var T,E,A,L=new n.Vector3,R=new n.Vector3,P=new n.Vector3,C=new n.Vector3;for(d=0,w=x.length;d<w;++d){var j,O;for(M=O=(j=x[d]).start,S=O+j.count;M<S;M+=3)I(i[M+0]),I(i[M+1]),I(i[M+2])}}else console.warn("THREE.BufferGeometry: Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");function D(e,t,r){p.fromArray(o,3*e),f.fromArray(o,3*t),m.fromArray(o,3*r),g.fromArray(s,2*e),v.fromArray(s,2*t),y.fromArray(s,2*r),f.sub(p),m.sub(p),v.sub(g),y.sub(g);var n=1/(v.x*y.y-y.x*v.y);isFinite(n)&&(_.copy(f).multiplyScalar(y.y).addScaledVector(m,-v.y).multiplyScalar(n),b.copy(m).multiplyScalar(v.x).addScaledVector(f,-y.x).multiplyScalar(n),u[e].add(_),u[t].add(_),u[r].add(_),h[e].add(b),h[t].add(b),h[r].add(b))}function I(e){P.fromArray(a,3*e),C.copy(P),E=u[e],L.copy(E),L.sub(P.multiplyScalar(P.dot(E))).normalize(),R.crossVectors(C,E),A=R.dot(h[e]),T=A<0?-1:1,l[4*e]=L.x,l[4*e+1]=L.y,l[4*e+2]=L.z,l[4*e+3]=T}},mergeBufferGeometries:function(e,t){for(var r=null!==e[0].index,i=new Set(Object.keys(e[0].attributes)),o=new Set(Object.keys(e[0].morphAttributes)),a={},s={},c=e[0].morphTargetsRelative,l=new n.BufferGeometry,u=0,h=0;h<e.length;++h){var d=e[h];if(r!==(null!==d.index))return null;for(var p in d.attributes){if(!i.has(p))return null;void 0===a[p]&&(a[p]=[]),a[p].push(d.attributes[p])}if(c!==d.morphTargetsRelative)return null;for(var p in d.morphAttributes){if(!o.has(p))return null;void 0===s[p]&&(s[p]=[]),s[p].push(d.morphAttributes[p])}if(l.userData.mergedUserData=l.userData.mergedUserData||[],l.userData.mergedUserData.push(d.userData),t){var f;if(r)f=d.index.count;else{if(void 0===d.attributes.position)return null;f=d.attributes.position.count}l.addGroup(u,f,h),u+=f}}if(r){var m=0,g=[];for(h=0;h<e.length;++h){for(var v=e[h].index,y=0;y<v.count;++y)g.push(v.getX(y)+m);m+=e[h].attributes.position.count}l.setIndex(g)}for(var p in a){var _=this.mergeBufferAttributes(a[p]);if(!_)return null;l.setAttribute(p,_)}for(var p in s){var b=s[p][0].length;if(0===b)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[p]=[];for(h=0;h<b;++h){var x=[];for(y=0;y<s[p].length;++y)x.push(s[p][y][h]);var w=this.mergeBufferAttributes(x);if(!w)return null;l.morphAttributes[p].push(w)}}return l},mergeBufferAttributes:function(e){for(var t,r,i,o=0,a=0;a<e.length;++a){var s=e[a];if(s.isInterleavedBufferAttribute)return null;if(void 0===t&&(t=s.array.constructor),t!==s.array.constructor)return null;if(void 0===r&&(r=s.itemSize),r!==s.itemSize)return null;if(void 0===i&&(i=s.normalized),i!==s.normalized)return null;o+=s.array.length}var c=new t(o),l=0;for(a=0;a<e.length;++a)c.set(e[a].array,l),l+=e[a].array.length;return new n.BufferAttribute(c,r,i)},interleaveAttributes:function(e){for(var t,r=0,i=0,o=0,a=e.length;o<a;++o){var s=e[o];if(void 0===t&&(t=s.array.constructor),t!==s.array.constructor)return console.warn("AttributeBuffers of different types cannot be interleaved"),null;r+=s.array.length,i+=s.itemSize}var c=new n.InterleavedBuffer(new t(r),i),l=0,u=[],h=["getX","getY","getZ","getW"],d=["setX","setY","setZ","setW"],p=0;for(a=e.length;p<a;p++){var f=(s=e[p]).itemSize,m=s.count,g=new n.InterleavedBufferAttribute(c,f,l,s.normalized);u.push(g),l+=f;for(var v=0;v<m;v++)for(var y=0;y<f;y++)g[d[y]](v,s[h[y]](v))}return u},estimateBytesUsed:function(e){var t=0;for(var r in e.attributes){var n=e.getAttribute(r);t+=n.count*n.itemSize*n.array.BYTES_PER_ELEMENT}var i=e.getIndex();return t+=i?i.count*i.itemSize*i.array.BYTES_PER_ELEMENT:0},mergeVertices:function(e,t=1e-4){t=Math.max(t,Number.EPSILON);for(var r={},i=e.getIndex(),o=e.getAttribute("position"),a=i?i.count:o.count,s=0,c=Object.keys(e.attributes),l={},u={},h=[],d=["getX","getY","getZ","getW"],p=0,f=c.length;p<f;p++){l[b=c[p]]=[],(S=e.morphAttributes[b])&&(u[b]=new Array(S.length).fill().map(()=>[]))}var m=Math.log10(1/t),g=Math.pow(10,m);for(p=0;p<a;p++){var v=i?i.getX(p):p,y="",_=0;for(f=c.length;_<f;_++)for(var b=c[_],x=(M=e.getAttribute(b)).itemSize,w=0;w<x;w++)y+=`${~~(M[d[w]](v)*g)},`;if(y in r)h.push(r[y]);else{for(_=0,f=c.length;_<f;_++){b=c[_];var M=e.getAttribute(b),S=e.morphAttributes[b],T=(x=M.itemSize,l[b]),E=u[b];for(w=0;w<x;w++){var A=d[w];if(T.push(M[A](v)),S)for(var L=0,R=S.length;L<R;L++)E[L].push(S[L][A](v))}}r[y]=s,h.push(s),s++}}const P=e.clone();for(p=0,f=c.length;p<f;p++){b=c[p];var C=e.getAttribute(b),j=new C.array.constructor(l[b]);M=new n.BufferAttribute(j,C.itemSize,C.normalized);if(P.setAttribute(b,M),b in u)for(_=0;_<u[b].length;_++){var O=e.morphAttributes[b][_],D=(j=new O.array.constructor(u[b][_]),new n.BufferAttribute(j,O.itemSize,O.normalized));P.morphAttributes[b][_]=D}}return P.setIndex(h),P},toTrianglesDrawMode:function(e,t){if(t===n.TrianglesDrawMode)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t===n.TriangleFanDrawMode||t===n.TriangleStripDrawMode){var r=e.getIndex();if(null===r){var i=[],o=e.getAttribute("position");if(void 0===o)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(var a=0;a<o.count;a++)i.push(a);e.setIndex(i),r=e.getIndex()}var s=r.count-2,c=[];if(t===n.TriangleFanDrawMode)for(a=1;a<=s;a++)c.push(r.getX(0)),c.push(r.getX(a)),c.push(r.getX(a+1));else for(a=0;a<s;a++)a%2==0?(c.push(r.getX(a)),c.push(r.getX(a+1)),c.push(r.getX(a+2))):(c.push(r.getX(a+2)),c.push(r.getX(a+1)),c.push(r.getX(a)));c.length/3!==s&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var l=e.clone();return l.setIndex(c),l.clearGroups(),l}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e}}},"./src/main.js":
/*!**********************************!*\
  !*** ./src/main.js + 28 modules ***!
  \**********************************/
/*! no exports provided */
/*! all exports used */
/*! ModuleConcatenation bailout: Cannot concat with ./src/common/Utils.js (<- Module is referenced from these modules with unsupported syntax: ./src/objects/Factory.js (referenced with cjs require)) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/babel-runtime/core-js/array/from.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/babel-runtime/core-js/map.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/babel-runtime/core-js/number/epsilon.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/babel-runtime/core-js/object/assign.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/babel-runtime/core-js/object/keys.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/babel-runtime/core-js/set.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/babel-runtime/helpers/classCallCheck.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/babel-runtime/helpers/createClass.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/babel-runtime/helpers/inherits.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./node_modules/babel-runtime/helpers/possibleConstructorReturn.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./src/libs/three/build/three.module.js (<- Module is referenced from these modules with unsupported syntax: ./src/common/Utils.js (referenced with cjs require), ./src/external/external.js (referenced with cjs require), ./src/libs/three.path.module.js (referenced with cjs require), ./src/main.js (referenced with cjs require), ./src/objects/Factory.js (referenced with cjs require), ./src/objects/GPUPicker.js (referenced with cjs require), ./src/objects/HTMLMixer.js (referenced with cjs require), ./src/objects/InstancedMesh.js (referenced with cjs require), ./src/objects/Renderer/Renderer.js (referenced with cjs require), ./src/objects/Renderer/RendererDebugger.js (referenced with cjs require), ./src/objects/image/BaseImage.js (referenced with cjs require), ./src/objects/image/MeshImage2D.js (referenced with cjs require), ./src/objects/image/SpriteImage2D.js (referenced with cjs require), ./src/objects/line/BasePath.js (referenced with cjs require), ./src/objects/line/BasePoints.js (referenced with cjs require), ./src/objects/line/PixelLine.js (referenced with cjs require), ./src/objects/line/PolygonPipeLine.js (referenced with cjs require), ./src/objects/line/PolygonRouteLine.js (referenced with cjs require), ./src/objects/text/BaseText.js (referenced with cjs require), ./src/objects/text/CanvasText.js (referenced with cjs require), ./src/objects/text/MeshText2D.js (referenced with cjs require), ./src/objects/text/SpriteText2D.js (referenced with cjs require), ./src/pass/ShaderPass.js (referenced with cjs require)) */function(e,t,r){"use strict";r.r(t);var n=r("./node_modules/babel-runtime/helpers/classCallCheck.js"),i=r.n(n),o=r("./src/libs/three/build/three.module.js"),a=new o.Vector3,s=new o.Vector3,c=new o.Matrix3,l=["a","b","c"];function u(e,t,r,n){this.object=e,this.size=void 0!==t?t:1;var i=void 0!==r?r:16711680,a=void 0!==n?n:1,s=0,c=this.object.geometry;c&&c.isGeometry?s=3*c.faces.length:c&&c.isBufferGeometry&&(s=c.attributes.normal.count);var l=new o.BufferGeometry,u=new o.Float32BufferAttribute(2*s*3,3);l.setAttribute("position",u),o.LineSegments.call(this,l,new o.LineBasicMaterial({color:i,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}u.prototype=Object.create(o.LineSegments.prototype),u.prototype.constructor=u,u.prototype.update=function(){this.object.updateMatrixWorld(!0),c.getNormalMatrix(this.object.matrixWorld);var e=this.object.matrixWorld,t=this.geometry.attributes.position,r=this.object.geometry;if(r&&r.isGeometry)for(var n=r.vertices,i=r.faces,o=0,u=0,h=i.length;u<h;u++)for(var d=i[u],p=0,f=d.vertexNormals.length;p<f;p++){var m=n[d[l[p]]],g=d.vertexNormals[p];a.copy(m).applyMatrix4(e),s.copy(g).applyMatrix3(c).normalize().multiplyScalar(this.size).add(a),t.setXYZ(o,a.x,a.y,a.z),o+=1,t.setXYZ(o,s.x,s.y,s.z),o+=1}else if(r&&r.isBufferGeometry){var v=r.attributes.position,y=r.attributes.normal;for(o=0,p=0,f=v.count;p<f;p++)a.set(v.getX(p),v.getY(p),v.getZ(p)).applyMatrix4(e),s.set(y.getX(p),y.getY(p),y.getZ(p)),s.applyMatrix3(c).normalize().multiplyScalar(this.size).add(a),t.setXYZ(o,a.x,a.y,a.z),o+=1,t.setXYZ(o,s.x,s.y,s.z),o+=1}t.needsUpdate=!0};var h=function(){function e(e){o.Loader.call(this,e),this.dracoLoader=null,this.ddsLoader=null}function t(){var e={};return{get:function(t){return e[t]},add:function(t,r){e[t]=r},remove:function(t){delete e[t]},removeAll:function(){e={}}}}e.prototype=Object.assign(Object.create(o.Loader.prototype),{constructor:e,load:function(e,t,r,n){var i,a=this;i=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:o.LoaderUtils.extractUrlBase(e),a.manager.itemStart(e);var s=function(t){n?n(t):console.error(t),a.manager.itemError(e),a.manager.itemEnd(e)},c=new o.FileLoader(a.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),"use-credentials"===a.crossOrigin&&c.setWithCredentials(!0),c.load(e,(function(r){try{a.parse(r,i,(function(r){t(r),a.manager.itemEnd(e)}),s)}catch(e){s(e)}}),r,s)},setDRACOLoader:function(e){return this.dracoLoader=e,this},setDDSLoader:function(e){return this.ddsLoader=e,this},parse:function(e,t,c,l){var p,g={};if("string"==typeof e)p=e;else if(o.LoaderUtils.decodeText(new Uint8Array(e,0,4))===s){try{g[r.KHR_BINARY_GLTF]=new u(e)}catch(e){return void(l&&l(e))}p=g[r.KHR_BINARY_GLTF].content}else p=o.LoaderUtils.decodeText(new Uint8Array(e));var v=JSON.parse(p);if(void 0===v.asset||v.asset.version[0]<2)l&&l(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{if(v.extensionsUsed)for(var y=0;y<v.extensionsUsed.length;++y){var _=v.extensionsUsed[y],b=v.extensionsRequired||[];switch(_){case r.KHR_LIGHTS_PUNCTUAL:g[_]=new i(v);break;case r.KHR_MATERIALS_UNLIT:g[_]=new a;break;case r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:g[_]=new f;break;case r.KHR_DRACO_MESH_COMPRESSION:g[_]=new h(v,this.dracoLoader);break;case r.MSFT_TEXTURE_DDS:g[_]=new n(this.ddsLoader);break;case r.KHR_TEXTURE_TRANSFORM:g[_]=new d;break;case r.KHR_MESH_QUANTIZATION:g[_]=new m;break;default:b.indexOf(_)>=0&&console.warn('THREE.GLTFLoader: Unknown extension "'+_+'".')}}new B(v,g,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager}).parse(c,l)}}});var r={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function n(e){if(!e)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader");this.name=r.MSFT_TEXTURE_DDS,this.ddsLoader=e}function i(e){this.name=r.KHR_LIGHTS_PUNCTUAL;var t=e.extensions&&e.extensions[r.KHR_LIGHTS_PUNCTUAL]||{};this.lightDefs=t.lights||[]}function a(){this.name=r.KHR_MATERIALS_UNLIT}i.prototype.loadLight=function(e){var t,r=this.lightDefs[e],n=new o.Color(16777215);void 0!==r.color&&n.fromArray(r.color);var i=void 0!==r.range?r.range:0;switch(r.type){case"directional":(t=new o.DirectionalLight(n)).target.position.set(0,0,-1),t.add(t.target);break;case"point":(t=new o.PointLight(n)).distance=i;break;case"spot":(t=new o.SpotLight(n)).distance=i,r.spot=r.spot||{},r.spot.innerConeAngle=void 0!==r.spot.innerConeAngle?r.spot.innerConeAngle:0,r.spot.outerConeAngle=void 0!==r.spot.outerConeAngle?r.spot.outerConeAngle:Math.PI/4,t.angle=r.spot.outerConeAngle,t.penumbra=1-r.spot.innerConeAngle/r.spot.outerConeAngle,t.target.position.set(0,0,-1),t.add(t.target);break;default:throw new Error('THREE.GLTFLoader: Unexpected light type, "'+r.type+'".')}return t.position.set(0,0,0),t.decay=2,void 0!==r.intensity&&(t.intensity=r.intensity),t.name=r.name||"light_"+e,Promise.resolve(t)},a.prototype.getMaterialType=function(){return o.MeshBasicMaterial},a.prototype.extendParams=function(e,t,r){var n=[];e.color=new o.Color(1,1,1),e.opacity=1;var i=t.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){var a=i.baseColorFactor;e.color.fromArray(a),e.opacity=a[3]}void 0!==i.baseColorTexture&&n.push(r.assignTexture(e,"map",i.baseColorTexture))}return Promise.all(n)};var s="glTF",c=12,l={JSON:1313821514,BIN:5130562};function u(e){this.name=r.KHR_BINARY_GLTF,this.content=null,this.body=null;var t=new DataView(e,0,c);if(this.header={magic:o.LoaderUtils.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==s)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var n=new DataView(e,c),i=0;i<n.byteLength;){var a=n.getUint32(i,!0);i+=4;var u=n.getUint32(i,!0);if(i+=4,u===l.JSON){var h=new Uint8Array(e,c+i,a);this.content=o.LoaderUtils.decodeText(h)}else if(u===l.BIN){var d=c+i;this.body=e.slice(d,d+a)}i+=a}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}function h(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=r.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}function d(){this.name=r.KHR_TEXTURE_TRANSFORM}function p(e){o.MeshStandardMaterial.call(this),this.isGLTFSpecularGlossinessMaterial=!0;var t=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),r=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),n=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),i=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),a=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 );// 0.0525 corresponds to the base mip of a 256 cubemap.","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularColor = specularFactor.rgb;"].join("\n"),s={specular:{value:(new o.Color).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=s,this.onBeforeCompile=function(e){for(var o in s)e.uniforms[o]=s[o];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;"),e.fragmentShader=e.fragmentShader.replace("uniform float metalness;","uniform float glossiness;"),e.fragmentShader=e.fragmentShader.replace("#include <roughnessmap_pars_fragment>",t),e.fragmentShader=e.fragmentShader.replace("#include <metalnessmap_pars_fragment>",r),e.fragmentShader=e.fragmentShader.replace("#include <roughnessmap_fragment>",n),e.fragmentShader=e.fragmentShader.replace("#include <metalnessmap_fragment>",i),e.fragmentShader=e.fragmentShader.replace("#include <lights_physical_fragment>",a)},Object.defineProperties(this,{specular:{get:function(){return s.specular.value},set:function(e){s.specular.value=e}},specularMap:{get:function(){return s.specularMap.value},set:function(e){s.specularMap.value=e}},glossiness:{get:function(){return s.glossiness.value},set:function(e){s.glossiness.value=e}},glossinessMap:{get:function(){return s.glossinessMap.value},set:function(e){s.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_ROUGHNESSMAP=""):(delete this.defines.USE_ROUGHNESSMAP,delete this.defines.USE_GLOSSINESSMAP)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}function f(){return{name:r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return p},extendParams:function(e,t,r){var n=t.extensions[this.name];e.color=new o.Color(1,1,1),e.opacity=1;var i=[];if(Array.isArray(n.diffuseFactor)){var a=n.diffuseFactor;e.color.fromArray(a),e.opacity=a[3]}if(void 0!==n.diffuseTexture&&i.push(r.assignTexture(e,"map",n.diffuseTexture)),e.emissive=new o.Color(0,0,0),e.glossiness=void 0!==n.glossinessFactor?n.glossinessFactor:1,e.specular=new o.Color(1,1,1),Array.isArray(n.specularFactor)&&e.specular.fromArray(n.specularFactor),void 0!==n.specularGlossinessTexture){var s=n.specularGlossinessTexture;i.push(r.assignTexture(e,"glossinessMap",s)),i.push(r.assignTexture(e,"specularMap",s))}return Promise.all(i)},createMaterial:function(e){var t=new p(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=o.TangentSpaceNormalMap,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}}function m(){this.name=r.KHR_MESH_QUANTIZATION}function g(e,t,r,n){o.Interpolant.call(this,e,t,r,n)}h.prototype.decodePrimitive=function(e,t){var r=this.json,n=this.dracoLoader,i=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},s={},c={};for(var l in o){var u=L[l]||l.toLowerCase();a[u]=o[l]}for(l in e.attributes){u=L[l]||l.toLowerCase();if(void 0!==o[l]){var h=r.accessors[e.attributes[l]],d=S[h.componentType];c[u]=d,s[u]=!0===h.normalized}}return t.getDependency("bufferView",i).then((function(e){return new Promise((function(t){n.decodeDracoFile(e,(function(e){for(var r in e.attributes){var n=e.attributes[r],i=s[r];void 0!==i&&(n.normalized=i)}t(e)}),a,c)}))}))},d.prototype.extendTexture=function(e,t){return e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),e.needsUpdate=!0,e},p.prototype=Object.create(o.MeshStandardMaterial.prototype),p.prototype.constructor=p,p.prototype.copy=function(e){return o.MeshStandardMaterial.prototype.copy.call(this,e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this},g.prototype=Object.create(o.Interpolant.prototype),g.prototype.constructor=g,g.prototype.copySampleValue_=function(e){for(var t=this.resultBuffer,r=this.sampleValues,n=this.valueSize,i=e*n*3+n,o=0;o!==n;o++)t[o]=r[i+o];return t},g.prototype.beforeStart_=g.prototype.copySampleValue_,g.prototype.afterEnd_=g.prototype.copySampleValue_,g.prototype.interpolate_=function(e,t,r,n){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=2*a,c=3*a,l=n-t,u=(r-t)/l,h=u*u,d=h*u,p=e*c,f=p-c,m=-2*d+3*h,g=d-h,v=1-m,y=g-h+u,_=0;_!==a;_++){var b=o[f+_+a],x=o[f+_+s]*l,w=o[p+_+a],M=o[p+_]*l;i[_]=v*b+y*x+m*w+g*M}return i};var v=0,y=1,_=2,b=3,x=4,w=5,M=6,S={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},T={9728:o.NearestFilter,9729:o.LinearFilter,9984:o.NearestMipmapNearestFilter,9985:o.LinearMipmapNearestFilter,9986:o.NearestMipmapLinearFilter,9987:o.LinearMipmapLinearFilter},E={33071:o.ClampToEdgeWrapping,33648:o.MirroredRepeatWrapping,10497:o.RepeatWrapping},A={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},L={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},R={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},P={CUBICSPLINE:void 0,LINEAR:o.InterpolateLinear,STEP:o.InterpolateDiscrete},C="OPAQUE",j="MASK",O="BLEND",D={"image/png":o.RGBAFormat,"image/jpeg":o.RGBFormat};function I(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)?e:/^data:.*,.*$/i.test(e)?e:/^blob:.*$/i.test(e)?e:t+e)}function N(e,t,r){for(var n in r.extensions)void 0===e[n]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[n]=r.extensions[n])}function U(e,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function z(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var r=0,n=t.weights.length;r<n;r++)e.morphTargetInfluences[r]=t.weights[r];if(t.extras&&Array.isArray(t.extras.targetNames)){var i=t.extras.targetNames;if(e.morphTargetInfluences.length===i.length){e.morphTargetDictionary={};for(r=0,n=i.length;r<n;r++)e.morphTargetDictionary[i[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function F(e){for(var t="",r=Object.keys(e).sort(),n=0,i=r.length;n<i;n++)t+=r[n]+":"+e[r[n]]+";";return t}function B(e,r,n){this.json=e||{},this.extensions=r||{},this.options=n||{},this.cache=new t,this.primitiveCache={},this.textureLoader=new o.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new o.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}function G(e,t,r){var n=t.attributes,i=[];function a(t,n){return r.getDependency("accessor",t).then((function(t){e.setAttribute(n,t)}))}for(var s in n){var c=L[s]||s.toLowerCase();c in e.attributes||i.push(a(n[s],c))}if(void 0!==t.indices&&!e.index){var l=r.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));i.push(l)}return U(e,t),function(e,t,r){var n=t.attributes,i=new o.Box3;if(void 0!==n.POSITION){var a=(p=r.json.accessors[n.POSITION]).min,s=p.max;if(void 0!==a&&void 0!==s){i.set(new o.Vector3(a[0],a[1],a[2]),new o.Vector3(s[0],s[1],s[2]));var c=t.targets;if(void 0!==c)for(var l=new o.Vector3,u=0,h=c.length;u<h;u++){var d=c[u];if(void 0!==d.POSITION){var p;a=(p=r.json.accessors[d.POSITION]).min,s=p.max;void 0!==a&&void 0!==s?(l.setX(Math.max(Math.abs(a[0]),Math.abs(s[0]))),l.setY(Math.max(Math.abs(a[1]),Math.abs(s[1]))),l.setZ(Math.max(Math.abs(a[2]),Math.abs(s[2]))),i.expandByVector(l)):console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}e.boundingBox=i;var f=new o.Sphere;i.getCenter(f.center),f.radius=i.min.distanceTo(i.max)/2,e.boundingSphere=f}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}(e,t,r),Promise.all(i).then((function(){return void 0!==t.targets?function(e,t,r){for(var n=!1,i=!1,o=0,a=t.length;o<a;o++){if(void 0!==(l=t[o]).POSITION&&(n=!0),void 0!==l.NORMAL&&(i=!0),n&&i)break}if(!n&&!i)return Promise.resolve(e);var s=[],c=[];for(o=0,a=t.length;o<a;o++){var l=t[o];if(n){var u=void 0!==l.POSITION?r.getDependency("accessor",l.POSITION):e.attributes.position;s.push(u)}if(i){u=void 0!==l.NORMAL?r.getDependency("accessor",l.NORMAL):e.attributes.normal;c.push(u)}}return Promise.all([Promise.all(s),Promise.all(c)]).then((function(t){var r=t[0],o=t[1];return n&&(e.morphAttributes.position=r),i&&(e.morphAttributes.normal=o),e.morphTargetsRelative=!0,e}))}(e,t.targets,r):e}))}function V(e,t){var r=e.getIndex();if(null===r){var n=[],i=e.getAttribute("position");if(void 0===i)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(var a=0;a<i.count;a++)n.push(a);e.setIndex(n),r=e.getIndex()}var s=r.count-2,c=[];if(t===o.TriangleFanDrawMode)for(a=1;a<=s;a++)c.push(r.getX(0)),c.push(r.getX(a)),c.push(r.getX(a+1));else for(a=0;a<s;a++)a%2==0?(c.push(r.getX(a)),c.push(r.getX(a+1)),c.push(r.getX(a+2))):(c.push(r.getX(a+2)),c.push(r.getX(a+1)),c.push(r.getX(a)));c.length/3!==s&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var l=e.clone();return l.setIndex(c),l}return B.prototype.parse=function(e,t){var r=this,n=this.json,i=this.extensions;this.cache.removeAll(),this.markDefs(),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then((function(t){var o={scene:t[0][n.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:n.asset,parser:r,userData:{}};N(i,o,n),U(o,n),e(o)})).catch(t)},B.prototype.markDefs=function(){for(var e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[],n={},i={},o=0,a=t.length;o<a;o++)for(var s=t[o].joints,c=0,l=s.length;c<l;c++)e[s[c]].isBone=!0;for(var u=0,h=e.length;u<h;u++){var d=e[u];void 0!==d.mesh&&(void 0===n[d.mesh]&&(n[d.mesh]=i[d.mesh]=0),n[d.mesh]++,void 0!==d.skin&&(r[d.mesh].isSkinnedMesh=!0))}this.json.meshReferences=n,this.json.meshUses=i},B.prototype.getDependency=function(e,t){var n=e+":"+t,i=this.cache.get(n);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this.loadNode(t);break;case"mesh":i=this.loadMesh(t);break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this.loadBufferView(t);break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this.loadMaterial(t);break;case"texture":i=this.loadTexture(t);break;case"skin":i=this.loadSkin(t);break;case"animation":i=this.loadAnimation(t);break;case"camera":i=this.loadCamera(t);break;case"light":i=this.extensions[r.KHR_LIGHTS_PUNCTUAL].loadLight(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(n,i)}return i},B.prototype.getDependencies=function(e){var t=this.cache.get(e);if(!t){var r=this,n=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(n.map((function(t,n){return r.getDependency(e,n)}))),this.cache.add(e,t)}return t},B.prototype.loadBuffer=function(e){var t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[r.KHR_BINARY_GLTF].body);var i=this.options;return new Promise((function(e,r){n.load(I(t.uri,i.path),e,void 0,(function(){r(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))},B.prototype.loadBufferView=function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){var r=t.byteLength||0,n=t.byteOffset||0;return e.slice(n,n+r)}))},B.prototype.loadAccessor=function(e){var t=this,r=this.json,n=this.json.accessors[e];if(void 0===n.bufferView&&void 0===n.sparse)return Promise.resolve(null);var i=[];return void 0!==n.bufferView?i.push(this.getDependency("bufferView",n.bufferView)):i.push(null),void 0!==n.sparse&&(i.push(this.getDependency("bufferView",n.sparse.indices.bufferView)),i.push(this.getDependency("bufferView",n.sparse.values.bufferView))),Promise.all(i).then((function(e){var i,a,s=e[0],c=A[n.type],l=S[n.componentType],u=l.BYTES_PER_ELEMENT,h=u*c,d=n.byteOffset||0,p=void 0!==n.bufferView?r.bufferViews[n.bufferView].byteStride:void 0,f=!0===n.normalized;if(p&&p!==h){var m=Math.floor(d/p),g="InterleavedBuffer:"+n.bufferView+":"+n.componentType+":"+m+":"+n.count,v=t.cache.get(g);v||(i=new l(s,m*p,n.count*p/u),v=new o.InterleavedBuffer(i,p/u),t.cache.add(g,v)),a=new o.InterleavedBufferAttribute(v,c,d%p/u,f)}else i=null===s?new l(n.count*c):new l(s,d,n.count*c),a=new o.BufferAttribute(i,c,f);if(void 0!==n.sparse){var y=A.SCALAR,_=S[n.sparse.indices.componentType],b=n.sparse.indices.byteOffset||0,x=n.sparse.values.byteOffset||0,w=new _(e[1],b,n.sparse.count*y),M=new l(e[2],x,n.sparse.count*c);null!==s&&(a=new o.BufferAttribute(a.array.slice(),a.itemSize,a.normalized));for(var T=0,E=w.length;T<E;T++){var L=w[T];if(a.setX(L,M[T*c]),c>=2&&a.setY(L,M[T*c+1]),c>=3&&a.setZ(L,M[T*c+2]),c>=4&&a.setW(L,M[T*c+3]),c>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return a}))},B.prototype.loadTexture=function(e){var t,n=this,i=this.json,a=this.options,s=this.textureLoader,c=window.URL||window.webkitURL,l=i.textures[e],u=l.extensions||{},h=(t=u[r.MSFT_TEXTURE_DDS]?i.images[u[r.MSFT_TEXTURE_DDS].source]:i.images[l.source]).uri,d=!1;return void 0!==t.bufferView&&(h=n.getDependency("bufferView",t.bufferView).then((function(e){d=!0;var r=new Blob([e],{type:t.mimeType});return h=c.createObjectURL(r)}))),Promise.resolve(h).then((function(e){var t=a.manager.getHandler(e);return t||(t=u[r.MSFT_TEXTURE_DDS]?n.extensions[r.MSFT_TEXTURE_DDS].ddsLoader:s),new Promise((function(r,n){t.load(I(e,a.path),r,void 0,n)}))})).then((function(e){!0===d&&c.revokeObjectURL(h),e.flipY=!1,void 0!==l.name&&(e.name=l.name),t.mimeType in D&&(e.format=D[t.mimeType]);var r=(i.samplers||{})[l.sampler]||{};return e.magFilter=T[r.magFilter]||o.LinearFilter,e.minFilter=T[r.minFilter]||o.LinearMipmapLinearFilter,e.wrapS=E[r.wrapS]||o.RepeatWrapping,e.wrapT=E[r.wrapT]||o.RepeatWrapping,e}))},B.prototype.assignTexture=function(e,t,n){var i=this;return this.getDependency("texture",n.index).then((function(a){if(!a.isCompressedTexture)switch(t){case"aoMap":case"emissiveMap":case"metalnessMap":case"normalMap":case"roughnessMap":a.format=o.RGBFormat}if(void 0===n.texCoord||0==n.texCoord||"aoMap"===t&&1==n.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+t+" not yet supported."),i.extensions[r.KHR_TEXTURE_TRANSFORM]){var s=void 0!==n.extensions?n.extensions[r.KHR_TEXTURE_TRANSFORM]:void 0;s&&(a=i.extensions[r.KHR_TEXTURE_TRANSFORM].extendTexture(a,s))}e[t]=a}))},B.prototype.assignFinalMaterial=function(e){var t=e.geometry,r=e.material,n=(this.extensions,void 0!==t.attributes.tangent),i=void 0!==t.attributes.color,a=void 0===t.attributes.normal,s=!0===e.isSkinnedMesh,c=Object.keys(t.morphAttributes).length>0,l=c&&void 0!==t.morphAttributes.normal;if(e.isPoints){var u="PointsMaterial:"+r.uuid,h=this.cache.get(u);h||(h=new o.PointsMaterial,o.Material.prototype.copy.call(h,r),h.color.copy(r.color),h.map=r.map,h.sizeAttenuation=!1,this.cache.add(u,h)),r=h}else if(e.isLine){u="LineBasicMaterial:"+r.uuid;var d=this.cache.get(u);d||(d=new o.LineBasicMaterial,o.Material.prototype.copy.call(d,r),d.color.copy(r.color),this.cache.add(u,d)),r=d}if(n||i||a||s||c){u="ClonedMaterial:"+r.uuid+":";r.isGLTFSpecularGlossinessMaterial&&(u+="specular-glossiness:"),s&&(u+="skinning:"),n&&(u+="vertex-tangents:"),i&&(u+="vertex-colors:"),a&&(u+="flat-shading:"),c&&(u+="morph-targets:"),l&&(u+="morph-normals:");var p=this.cache.get(u);p||(p=r.clone(),s&&(p.skinning=!0),n&&(p.vertexTangents=!0),i&&(p.vertexColors=o.VertexColors),a&&(p.flatShading=!0),c&&(p.morphTargets=!0),l&&(p.morphNormals=!0),this.cache.add(u,p)),r=p}r.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",new o.BufferAttribute(t.attributes.uv.array,2)),r.normalScale&&!n&&(r.normalScale.y=-r.normalScale.y),e.material=r},B.prototype.loadMaterial=function(e){var t,n=this.json,i=this.extensions,a=n.materials[e],s={},c=a.extensions||{},l=[];if(c[r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var u=i[r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];t=u.getMaterialType(),l.push(u.extendParams(s,a,this))}else if(c[r.KHR_MATERIALS_UNLIT]){var h=i[r.KHR_MATERIALS_UNLIT];t=h.getMaterialType(),l.push(h.extendParams(s,a,this))}else{t=o.MeshStandardMaterial;var d=a.pbrMetallicRoughness||{};if(s.color=new o.Color(1,1,1),s.opacity=1,Array.isArray(d.baseColorFactor)){var f=d.baseColorFactor;s.color.fromArray(f),s.opacity=f[3]}void 0!==d.baseColorTexture&&l.push(this.assignTexture(s,"map",d.baseColorTexture)),s.metalness=void 0!==d.metallicFactor?d.metallicFactor:1,s.roughness=void 0!==d.roughnessFactor?d.roughnessFactor:1,void 0!==d.metallicRoughnessTexture&&(l.push(this.assignTexture(s,"metalnessMap",d.metallicRoughnessTexture)),l.push(this.assignTexture(s,"roughnessMap",d.metallicRoughnessTexture)))}!0===a.doubleSided&&(s.side=o.DoubleSide);var m=a.alphaMode||C;return m===O?s.transparent=!0:(s.transparent=!1,m===j&&(s.alphaTest=void 0!==a.alphaCutoff?a.alphaCutoff:.5)),void 0!==a.normalTexture&&t!==o.MeshBasicMaterial&&(l.push(this.assignTexture(s,"normalMap",a.normalTexture)),s.normalScale=new o.Vector2(1,1),void 0!==a.normalTexture.scale&&s.normalScale.set(a.normalTexture.scale,a.normalTexture.scale)),void 0!==a.occlusionTexture&&t!==o.MeshBasicMaterial&&(l.push(this.assignTexture(s,"aoMap",a.occlusionTexture)),void 0!==a.occlusionTexture.strength&&(s.aoMapIntensity=a.occlusionTexture.strength)),void 0!==a.emissiveFactor&&t!==o.MeshBasicMaterial&&(s.emissive=(new o.Color).fromArray(a.emissiveFactor)),void 0!==a.emissiveTexture&&t!==o.MeshBasicMaterial&&l.push(this.assignTexture(s,"emissiveMap",a.emissiveTexture)),Promise.all(l).then((function(){var e;return e=t===p?i[r.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(s):new t(s),void 0!==a.name&&(e.name=a.name),e.map&&(e.map.encoding=o.sRGBEncoding),e.emissiveMap&&(e.emissiveMap.encoding=o.sRGBEncoding),U(e,a),a.extensions&&N(i,e,a),e}))},B.prototype.loadGeometries=function(e){var t=this,n=this.extensions,i=this.primitiveCache;function a(e){return n[r.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(r){return G(r,e,t)}))}for(var s,c,l=[],u=0,h=e.length;u<h;u++){var d,p=e[u],f=(c=void 0,(c=(s=p).extensions&&s.extensions[r.KHR_DRACO_MESH_COMPRESSION])?"draco:"+c.bufferView+":"+c.indices+":"+F(c.attributes):s.indices+":"+F(s.attributes)+":"+s.mode),m=i[f];if(m)l.push(m.promise);else d=p.extensions&&p.extensions[r.KHR_DRACO_MESH_COMPRESSION]?a(p):G(new o.BufferGeometry,p,t),i[f]={primitive:p,promise:d},l.push(d)}return Promise.all(l)},B.prototype.loadMesh=function(e){for(var t,r=this,n=this.json.meshes[e],i=n.primitives,a=[],s=0,c=i.length;s<c;s++){var l=void 0===i[s].material?(void 0===(t=this.cache).DefaultMaterial&&(t.DefaultMaterial=new o.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:o.FrontSide})),t.DefaultMaterial):this.getDependency("material",i[s].material);a.push(l)}return a.push(r.loadGeometries(i)),Promise.all(a).then((function(t){for(var a=t.slice(0,t.length-1),s=t[t.length-1],c=[],l=0,u=s.length;l<u;l++){var h,d=s[l],p=i[l],f=a[l];if(p.mode===x||p.mode===w||p.mode===M||void 0===p.mode)!0!==(h=!0===n.isSkinnedMesh?new o.SkinnedMesh(d,f):new o.Mesh(d,f)).isSkinnedMesh||h.geometry.attributes.skinWeight.normalized||h.normalizeSkinWeights(),p.mode===w?h.geometry=V(h.geometry,o.TriangleStripDrawMode):p.mode===M&&(h.geometry=V(h.geometry,o.TriangleFanDrawMode));else if(p.mode===y)h=new o.LineSegments(d,f);else if(p.mode===b)h=new o.Line(d,f);else if(p.mode===_)h=new o.LineLoop(d,f);else{if(p.mode!==v)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+p.mode);h=new o.Points(d,f)}Object.keys(h.geometry.morphAttributes).length>0&&z(h,n),h.name=n.name||"mesh_"+e,s.length>1&&(h.name+="_"+l),U(h,n),r.assignFinalMaterial(h),c.push(h)}if(1===c.length)return c[0];var m=new o.Group;for(l=0,u=c.length;l<u;l++)m.add(c[l]);return m}))},B.prototype.loadCamera=function(e){var t,r=this.json.cameras[e],n=r[r.type];if(n)return"perspective"===r.type?t=new o.PerspectiveCamera(o.MathUtils.radToDeg(n.yfov),n.aspectRatio||1,n.znear||1,n.zfar||2e6):"orthographic"===r.type&&(t=new o.OrthographicCamera(n.xmag/-2,n.xmag/2,n.ymag/2,n.ymag/-2,n.znear,n.zfar)),void 0!==r.name&&(t.name=r.name),U(t,r),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")},B.prototype.loadSkin=function(e){var t=this.json.skins[e],r={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(r):this.getDependency("accessor",t.inverseBindMatrices).then((function(e){return r.inverseBindMatrices=e,r}))},B.prototype.loadAnimation=function(e){for(var t=this.json.animations[e],r=[],n=[],i=[],a=[],s=[],c=0,l=t.channels.length;c<l;c++){var u=t.channels[c],h=t.samplers[u.sampler],d=u.target,p=void 0!==d.node?d.node:d.id,f=void 0!==t.parameters?t.parameters[h.input]:h.input,m=void 0!==t.parameters?t.parameters[h.output]:h.output;r.push(this.getDependency("node",p)),n.push(this.getDependency("accessor",f)),i.push(this.getDependency("accessor",m)),a.push(h),s.push(d)}return Promise.all([Promise.all(r),Promise.all(n),Promise.all(i),Promise.all(a),Promise.all(s)]).then((function(r){for(var n=r[0],i=r[1],a=r[2],s=r[3],c=r[4],l=[],u=0,h=n.length;u<h;u++){var d=n[u],p=i[u],f=a[u],m=s[u],v=c[u];if(void 0!==d){var y;switch(d.updateMatrix(),d.matrixAutoUpdate=!0,R[v.path]){case R.weights:y=o.NumberKeyframeTrack;break;case R.rotation:y=o.QuaternionKeyframeTrack;break;case R.position:case R.scale:default:y=o.VectorKeyframeTrack}var _=d.name?d.name:d.uuid,b=void 0!==m.interpolation?P[m.interpolation]:o.InterpolateLinear,x=[];R[v.path]===R.weights?d.traverse((function(e){!0===e.isMesh&&e.morphTargetInfluences&&x.push(e.name?e.name:e.uuid)})):x.push(_);var w=f.array;if(f.normalized){var M;if(w.constructor===Int8Array)M=1/127;else if(w.constructor===Uint8Array)M=1/255;else if(w.constructor==Int16Array)M=1/32767;else{if(w.constructor!==Uint16Array)throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");M=1/65535}for(var S=new Float32Array(w.length),T=0,E=w.length;T<E;T++)S[T]=w[T]*M;w=S}for(T=0,E=x.length;T<E;T++){var A=new y(x[T]+"."+R[v.path],p.array,w,b);"CUBICSPLINE"===m.interpolation&&(A.createInterpolant=function(e){return new g(this.times,this.values,this.getValueSize()/3,e)},A.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),l.push(A)}}}var L=void 0!==t.name?t.name:"animation_"+e;return new o.AnimationClip(L,void 0,l)}))},B.prototype.loadNode=function(e){var t,n=this.json,i=this.extensions,a=this,s=n.meshReferences,c=n.meshUses,l=n.nodes[e];return(t=[],void 0!==l.mesh&&t.push(a.getDependency("mesh",l.mesh).then((function(e){var t;if(s[l.mesh]>1){var r=c[l.mesh]++;(t=e.clone()).name+="_instance_"+r}else t=e;return void 0!==l.weights&&t.traverse((function(e){if(e.isMesh)for(var t=0,r=l.weights.length;t<r;t++)e.morphTargetInfluences[t]=l.weights[t]})),t}))),void 0!==l.camera&&t.push(a.getDependency("camera",l.camera)),l.extensions&&l.extensions[r.KHR_LIGHTS_PUNCTUAL]&&void 0!==l.extensions[r.KHR_LIGHTS_PUNCTUAL].light&&t.push(a.getDependency("light",l.extensions[r.KHR_LIGHTS_PUNCTUAL].light)),Promise.all(t)).then((function(e){var t;if((t=!0===l.isBone?new o.Bone:e.length>1?new o.Group:1===e.length?e[0]:new o.Object3D)!==e[0])for(var r=0,n=e.length;r<n;r++)t.add(e[r]);if(void 0!==l.name&&(t.userData.name=l.name,t.name=o.PropertyBinding.sanitizeNodeName(l.name)),U(t,l),l.extensions&&N(i,t,l),void 0!==l.matrix){var a=new o.Matrix4;a.fromArray(l.matrix),t.applyMatrix4(a)}else void 0!==l.translation&&t.position.fromArray(l.translation),void 0!==l.rotation&&t.quaternion.fromArray(l.rotation),void 0!==l.scale&&t.scale.fromArray(l.scale);return t}))},B.prototype.loadScene=function(){function e(t,r,n,i){var a=n.nodes[t];return i.getDependency("node",t).then((function(e){return void 0===a.skin?e:i.getDependency("skin",a.skin).then((function(e){for(var r=[],n=0,o=(t=e).joints.length;n<o;n++)r.push(i.getDependency("node",t.joints[n]));return Promise.all(r)})).then((function(r){return e.traverse((function(e){if(e.isMesh){for(var n=[],i=[],a=0,s=r.length;a<s;a++){var c=r[a];if(c){n.push(c);var l=new o.Matrix4;void 0!==t.inverseBindMatrices&&l.fromArray(t.inverseBindMatrices.array,16*a),i.push(l)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[a])}e.bind(new o.Skeleton(n,i),e.matrixWorld)}})),e}));var t})).then((function(t){r.add(t);var o=[];if(a.children)for(var s=a.children,c=0,l=s.length;c<l;c++){var u=s[c];o.push(e(u,t,n,i))}return Promise.all(o)}))}return function(t){var r=this.json,n=this.extensions,i=this.json.scenes[t],a=new o.Scene;void 0!==i.name&&(a.name=i.name),U(a,i),i.extensions&&N(n,a,i);for(var s=i.nodes||[],c=[],l=0,u=s.length;l<u;l++)c.push(e(s[l],a,r,this));return Promise.all(c).then((function(){return a}))}}(),e}(),d=function(e,t){var r,n,i,a,s;void 0===t&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.enabled=!0,this.target=new o.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:o.MOUSE.ROTATE,MIDDLE:o.MOUSE.DOLLY,RIGHT:o.MOUSE.PAN},this.touches={ONE:o.TOUCH.ROTATE,TWO:o.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return g.phi},this.getAzimuthalAngle=function(){return g.theta},this.saveState=function(){c.target0.copy(c.target),c.position0.copy(c.object.position),c.zoom0=c.object.zoom},this.reset=function(){c.target.copy(c.target0),c.object.position.copy(c.position0),c.object.zoom=c.zoom0,c.object.updateProjectionMatrix(),c.dispatchEvent(l),c.update(),f=p.NONE},this.update=(r=new o.Vector3,n=(new o.Quaternion).setFromUnitVectors(e.up,new o.Vector3(0,1,0)),i=n.clone().inverse(),a=new o.Vector3,s=new o.Quaternion,function(){var e=c.object.position;return r.copy(e).sub(c.target),r.applyQuaternion(n),g.setFromVector3(r),c.autoRotate&&f===p.NONE&&C(2*Math.PI/60/60*c.autoRotateSpeed),c.enableDamping?(g.theta+=v.theta*c.dampingFactor,g.phi+=v.phi*c.dampingFactor):(g.theta+=v.theta,g.phi+=v.phi),g.theta=Math.max(c.minAzimuthAngle,Math.min(c.maxAzimuthAngle,g.theta)),g.phi=Math.max(c.minPolarAngle,Math.min(c.maxPolarAngle,g.phi)),g.makeSafe(),g.radius*=y,g.radius=Math.max(c.minDistance,Math.min(c.maxDistance,g.radius)),!0===c.enableDamping?c.target.addScaledVector(_,c.dampingFactor):c.target.add(_),r.setFromSpherical(g),r.applyQuaternion(i),e.copy(c.target).add(r),c.object.lookAt(c.target),!0===c.enableDamping?(v.theta*=1-c.dampingFactor,v.phi*=1-c.dampingFactor,_.multiplyScalar(1-c.dampingFactor)):(v.set(0,0,0),_.set(0,0,0)),y=1,!!(b||a.distanceToSquared(c.object.position)>m||8*(1-s.dot(c.object.quaternion))>m)&&(c.dispatchEvent(l),a.copy(c.object.position),s.copy(c.object.quaternion),b=!1,!0)}),this.dispose=function(){c.domElement.removeEventListener("contextmenu",te,!1),c.domElement.removeEventListener("mousedown",X,!1),c.domElement.removeEventListener("wheel",J,!1),c.domElement.removeEventListener("touchstart",Q,!1),c.domElement.removeEventListener("touchend",ee,!1),c.domElement.removeEventListener("touchmove",$,!1),document.removeEventListener("mousemove",Y,!1),document.removeEventListener("mouseup",Z,!1),c.domElement.removeEventListener("keydown",K,!1)};var c=this,l={type:"change"},u={type:"start"},h={type:"end"},d={type:"dolly"},p={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},f=p.NONE,m=1e-6,g=new o.Spherical,v=new o.Spherical,y=1,_=new o.Vector3,b=!1,x=new o.Vector2,w=new o.Vector2,M=new o.Vector2,S=new o.Vector2,T=new o.Vector2,E=new o.Vector2,A=new o.Vector2,L=new o.Vector2,R=new o.Vector2;function P(){return Math.pow(.95,c.zoomSpeed)}function C(e){v.theta-=e}function j(e){v.phi-=e}var O,D=(O=new o.Vector3,function(e,t){O.setFromMatrixColumn(t,0),O.multiplyScalar(-e),_.add(O)}),I=function(){var e=new o.Vector3;return function(t,r){!0===c.screenSpacePanning?e.setFromMatrixColumn(r,1):(e.setFromMatrixColumn(r,0),e.crossVectors(c.object.up,e)),e.multiplyScalar(t),_.add(e)}}(),N=function(){var e=new o.Vector3;return function(t,r){var n=c.domElement;if(c.object.isPerspectiveCamera){var i=c.object.position;e.copy(i).sub(c.target);var o=e.length();o*=Math.tan(c.object.fov/2*Math.PI/180),D(2*t*o/n.clientHeight,c.object.matrix),I(2*r*o/n.clientHeight,c.object.matrix)}else c.object.isOrthographicCamera?(D(t*(c.object.right-c.object.left)/c.object.zoom/n.clientWidth,c.object.matrix),I(r*(c.object.top-c.object.bottom)/c.object.zoom/n.clientHeight,c.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),c.enablePan=!1)}}();function U(e){c.object.isPerspectiveCamera?y/=e:c.object.isOrthographicCamera?(c.object.zoom=Math.max(c.minZoom,Math.min(c.maxZoom,c.object.zoom*e)),c.object.updateProjectionMatrix(),b=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),c.enableZoom=!1)}function z(e){c.object.isPerspectiveCamera?y*=e:c.object.isOrthographicCamera?(c.object.zoom=Math.max(c.minZoom,Math.min(c.maxZoom,c.object.zoom/e)),c.object.updateProjectionMatrix(),b=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),c.enableZoom=!1)}function F(e){x.set(e.clientX,e.clientY)}function B(e){S.set(e.clientX,e.clientY)}function G(e){if(1==e.touches.length)x.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),r=.5*(e.touches[0].pageY+e.touches[1].pageY);x.set(t,r)}}function V(e){if(1==e.touches.length)S.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),r=.5*(e.touches[0].pageY+e.touches[1].pageY);S.set(t,r)}}function H(e){var t=e.touches[0].pageX-e.touches[1].pageX,r=e.touches[0].pageY-e.touches[1].pageY,n=Math.sqrt(t*t+r*r);A.set(0,n)}function k(e){if(1==e.touches.length)w.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),r=.5*(e.touches[0].pageY+e.touches[1].pageY);w.set(t,r)}M.subVectors(w,x).multiplyScalar(c.rotateSpeed);var n=c.domElement;C(2*Math.PI*M.x/n.clientHeight),j(2*Math.PI*M.y/n.clientHeight),x.copy(w)}function W(e){if(1==e.touches.length)T.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),r=.5*(e.touches[0].pageY+e.touches[1].pageY);T.set(t,r)}E.subVectors(T,S).multiplyScalar(c.panSpeed),N(E.x,E.y),S.copy(T)}function q(e){var t=e.touches[0].pageX-e.touches[1].pageX,r=e.touches[0].pageY-e.touches[1].pageY,n=Math.sqrt(t*t+r*r);L.set(0,n),R.set(0,Math.pow(L.y/A.y,c.zoomSpeed)),U(R.y),A.copy(L)}function X(e){if(!1!==c.enabled){var t;switch(e.preventDefault(),c.domElement.focus?c.domElement.focus():window.focus(),e.button){case 0:t=c.mouseButtons.LEFT;break;case 1:t=c.mouseButtons.MIDDLE;break;case 2:t=c.mouseButtons.RIGHT;break;default:t=-1}switch(t){case o.MOUSE.DOLLY:if(!1===c.enableZoom)return;!function(e){A.set(e.clientX,e.clientY)}(e),f=p.DOLLY;break;case o.MOUSE.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===c.enablePan)return;B(e),f=p.PAN}else{if(!1===c.enableRotate)return;F(e),f=p.ROTATE}break;case o.MOUSE.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===c.enableRotate)return;F(e),f=p.ROTATE}else{if(!1===c.enablePan)return;B(e),f=p.PAN}break;default:f=p.NONE}f!==p.NONE&&(document.addEventListener("mousemove",Y,!1),document.addEventListener("mouseup",Z,!1),c.dispatchEvent(u))}}function Y(e){if(!1!==c.enabled)switch(e.preventDefault(),f){case p.ROTATE:if(!1===c.enableRotate)return;!function(e){w.set(e.clientX,e.clientY),M.subVectors(w,x).multiplyScalar(c.rotateSpeed);var t=c.domElement;C(2*Math.PI*M.x/t.clientHeight),j(2*Math.PI*M.y/t.clientHeight),x.copy(w),c.update()}(e);break;case p.DOLLY:if(!1===c.enableZoom)return;!function(e){L.set(e.clientX,e.clientY),R.subVectors(L,A),R.y>0?U(P()):R.y<0&&z(P()),A.copy(L),c.dispatchEvent(d),c.update()}(e);break;case p.PAN:if(!1===c.enablePan)return;!function(e){T.set(e.clientX,e.clientY),E.subVectors(T,S).multiplyScalar(c.panSpeed),N(E.x,E.y),S.copy(T),c.update()}(e)}}function Z(e){!1!==c.enabled&&(document.removeEventListener("mousemove",Y,!1),document.removeEventListener("mouseup",Z,!1),c.dispatchEvent(h),f=p.NONE)}function J(e){!1===c.enabled||!1===c.enableZoom||f!==p.NONE&&f!==p.ROTATE||(e.preventDefault(),e.stopPropagation(),c.dispatchEvent(u),function(e){e.deltaY<0?z(P()):e.deltaY>0&&U(P()),c.dispatchEvent(d),c.update()}(e),c.dispatchEvent(h))}function K(e){!1!==c.enabled&&!1!==c.enableKeys&&!1!==c.enablePan&&function(e){var t=!1;switch(e.keyCode){case c.keys.UP:N(0,c.keyPanSpeed),t=!0;break;case c.keys.BOTTOM:N(0,-c.keyPanSpeed),t=!0;break;case c.keys.LEFT:N(c.keyPanSpeed,0),t=!0;break;case c.keys.RIGHT:N(-c.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),c.update())}(e)}function Q(e){if(!1!==c.enabled){switch(e.preventDefault(),e.touches.length){case 1:switch(c.touches.ONE){case o.TOUCH.ROTATE:if(!1===c.enableRotate)return;G(e),f=p.TOUCH_ROTATE;break;case o.TOUCH.PAN:if(!1===c.enablePan)return;V(e),f=p.TOUCH_PAN;break;default:f=p.NONE}break;case 2:switch(c.touches.TWO){case o.TOUCH.DOLLY_PAN:if(!1===c.enableZoom&&!1===c.enablePan)return;!function(e){c.enableZoom&&H(e),c.enablePan&&V(e)}(e),f=p.TOUCH_DOLLY_PAN;break;case o.TOUCH.DOLLY_ROTATE:if(!1===c.enableZoom&&!1===c.enableRotate)return;!function(e){c.enableZoom&&H(e),c.enableRotate&&G(e)}(e),f=p.TOUCH_DOLLY_ROTATE;break;default:f=p.NONE}break;default:f=p.NONE}f!==p.NONE&&c.dispatchEvent(u)}}function $(e){if(!1!==c.enabled)switch(e.preventDefault(),e.stopPropagation(),f){case p.TOUCH_ROTATE:if(!1===c.enableRotate)return;k(e),c.update();break;case p.TOUCH_PAN:if(!1===c.enablePan)return;W(e),c.update();break;case p.TOUCH_DOLLY_PAN:if(!1===c.enableZoom&&!1===c.enablePan)return;!function(e){c.enableZoom&&q(e),c.enablePan&&W(e)}(e),c.update();break;case p.TOUCH_DOLLY_ROTATE:if(!1===c.enableZoom&&!1===c.enableRotate)return;!function(e){c.enableZoom&&q(e),c.enableRotate&&k(e)}(e),c.update();break;default:f=p.NONE}}function ee(e){!1!==c.enabled&&(c.dispatchEvent(h),f=p.NONE)}function te(e){!1!==c.enabled&&e.preventDefault()}c.domElement.addEventListener("contextmenu",te,!1),c.domElement.addEventListener("mousedown",X,!1),c.domElement.addEventListener("wheel",J,!1),c.domElement.addEventListener("touchstart",Q,!1),c.domElement.addEventListener("touchend",ee,!1),c.domElement.addEventListener("touchmove",$,!1),c.domElement.addEventListener("keydown",K,!1),-1===c.domElement.tabIndex&&(c.domElement.tabIndex=0),this.update()};(d.prototype=Object.create(o.EventDispatcher.prototype)).constructor=d;var p=function(e,t){d.call(this,e,t),this.mouseButtons.LEFT=o.MOUSE.PAN,this.mouseButtons.RIGHT=o.MOUSE.ROTATE,this.touches.ONE=o.TOUCH.PAN,this.touches.TWO=o.TOUCH.DOLLY_ROTATE};(p.prototype=Object.create(o.EventDispatcher.prototype)).constructor=p;var f=function(e){o.Object3D.call(this),this.element=e,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.addEventListener("removed",(function(){this.traverse((function(e){e.element instanceof Element&&null!==e.element.parentNode&&e.element.parentNode.removeChild(e.element)}))}))};f.prototype=Object.create(o.Object3D.prototype),f.prototype.constructor=f;var m=function(e){f.call(this,e)};m.prototype=Object.create(f.prototype),m.prototype.constructor=m;var g,v=function(){var e,t,r,n,i=this,a=new o.Matrix4,s={camera:{fov:0,style:""},objects:new WeakMap},c=document.createElement("div");c.style.overflow="hidden",this.domElement=c;var l=document.createElement("div");l.style.WebkitTransformStyle="preserve-3d",l.style.transformStyle="preserve-3d",l.style.pointerEvents="none",c.appendChild(l);var u=/Trident/i.test(navigator.userAgent);function h(e){return Math.abs(e)<1e-10?0:e}function d(e){var t=e.elements;return"matrix3d("+h(t[0])+","+h(-t[1])+","+h(t[2])+","+h(t[3])+","+h(t[4])+","+h(-t[5])+","+h(t[6])+","+h(t[7])+","+h(t[8])+","+h(-t[9])+","+h(t[10])+","+h(t[11])+","+h(t[12])+","+h(-t[13])+","+h(t[14])+","+h(t[15])+")"}function p(e,t){var i=e.elements,o="matrix3d("+h(i[0])+","+h(i[1])+","+h(i[2])+","+h(i[3])+","+h(-i[4])+","+h(-i[5])+","+h(-i[6])+","+h(-i[7])+","+h(i[8])+","+h(i[9])+","+h(i[10])+","+h(i[11])+","+h(i[12])+","+h(i[13])+","+h(i[14])+","+h(i[15])+")";return u?"translate(-50%,-50%)translate("+r+"px,"+n+"px)"+t+o:"translate(-50%,-50%)"+o}this.getSize=function(){return{width:e,height:t}},this.setSize=function(i,o){r=(e=i)/2,n=(t=o)/2,c.style.width=i+"px",c.style.height=o+"px",l.style.width=i+"px",l.style.height=o+"px"};var g,v,y=(g=new o.Vector3,v=new o.Vector3,function(e,t){return g.setFromMatrixPosition(e.matrixWorld),v.setFromMatrixPosition(t.matrixWorld),g.distanceToSquared(v)});function _(e){for(var t=function(e){var t=[];return e.traverse((function(e){e instanceof f&&t.push(e)})),t}(e).sort((function(e,t){return s.objects.get(e).distanceToCameraSquared-s.objects.get(t).distanceToCameraSquared})),r=t.length,n=0,i=t.length;n<i;n++)t[n].element.style.zIndex=r-n}this.render=function(e,t){var o=t.projectionMatrix.elements[5]*n;if(s.camera.fov!==o&&(t.isPerspectiveCamera?(c.style.WebkitPerspective=o+"px",c.style.perspective=o+"px"):(c.style.WebkitPerspective="",c.style.perspective=""),s.camera.fov=o),!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),t.isOrthographicCamera)var g=-(t.right+t.left)/2,v=(t.top+t.bottom)/2;var b=t.isOrthographicCamera?"scale("+o+")translate("+h(g)+"px,"+h(v)+"px)"+d(t.matrixWorldInverse):"translateZ("+o+"px)"+d(t.matrixWorldInverse),x=b+"translate("+r+"px,"+n+"px)";s.camera.style===x||u||(l.style.WebkitTransform=x,l.style.transform=x,s.camera.style=x),function e(t,r,n,o){if(t instanceof f){var c;t.onBeforeRender(i,r,n),t instanceof m?(a.copy(n.matrixWorldInverse),a.transpose(),a.copyPosition(t.matrixWorld),a.scale(t.scale),a.elements[3]=0,a.elements[7]=0,a.elements[11]=0,a.elements[15]=1,c=p(a,o)):c=p(t.matrixWorld,o);var h=t.element,d=s.objects.get(t);if(void 0===d||d.style!==c){h.style.WebkitTransform=c,h.style.transform=c;var g={style:c};u&&(g.distanceToCameraSquared=y(n,t)),s.objects.set(t,g)}h.parentNode!==l&&l.appendChild(h),t.onAfterRender(i,r,n)}for(var v=0,_=t.children.length;v<_;v++)e(t.children[v],r,n,o)}(e,e,t,b),u&&_(e)}},y=function(e,t){return(y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};
/*!
 * camera-controls
 * https://github.com/yomotsu/camera-controls
 * (c) 2017 @yomotsu
 * Released under the MIT License.
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */!function(e){e[e.NONE=0]="NONE",e[e.ROTATE=1]="ROTATE",e[e.TRUCK=2]="TRUCK",e[e.DOLLY=3]="DOLLY",e[e.ZOOM=4]="ZOOM",e[e.TOUCH_ROTATE=5]="TOUCH_ROTATE",e[e.TOUCH_TRUCK=6]="TOUCH_TRUCK",e[e.TOUCH_DOLLY=7]="TOUCH_DOLLY",e[e.TOUCH_ZOOM=8]="TOUCH_ZOOM",e[e.TOUCH_DOLLY_TRUCK=9]="TOUCH_DOLLY_TRUCK",e[e.TOUCH_ZOOM_TRUCK=10]="TOUCH_ZOOM_TRUCK"}(g||(g={}));var _=2*Math.PI,b={paddingLeft:0,paddingRight:0,paddingBottom:0,paddingTop:0},x=1e-5;function w(e){return Math.abs(e)<x}function M(e){return isFinite(e)?e:e<0?-Number.MAX_VALUE:Number.MAX_VALUE}function S(e){return Math.abs(e)<Number.MAX_VALUE?e:e*(1/0)}function T(e){return"TouchEvent"in window&&e instanceof TouchEvent}function E(e,t){if(t.set(0,0),T(e)){for(var r=e,n=0;n<r.touches.length;n++)t.x+=r.touches[n].clientX,t.y+=r.touches[n].clientY;return t.x/=r.touches.length,t.y/=r.touches.length,t}var i=e;return t.set(i.clientX,i.clientY),t}function A(e,t){return!e.isPerspectiveCamera&&(console.warn(t+" is not supported in OrthographicCamera"),!0)}var L,R,P,C,j,O,D,I,N,U,z,F,B,G=function(){function e(){this._listeners={}}return e.prototype.addEventListener=function(e,t){var r=this._listeners;void 0===r[e]&&(r[e]=[]),-1===r[e].indexOf(t)&&r[e].push(t)},e.prototype.dispatchEvent=function(e){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var r=t.slice(0),n=0,i=r.length;n<i;n++)r[n].call(this,e)}},e}(),V=/Mac/.test(navigator.platform),H=Object.freeze(g),k=function(e){function t(t,r){var n=e.call(this)||this;if(n.enabled=!0,n.minPolarAngle=0,n.maxPolarAngle=Math.PI,n.minAzimuthAngle=-1/0,n.maxAzimuthAngle=1/0,n.minDistance=0,n.maxDistance=1/0,n.minZoom=.01,n.maxZoom=1/0,n.dampingFactor=.05,n.draggingDampingFactor=.25,n.azimuthRotateSpeed=1,n.polarRotateSpeed=1,n.dollySpeed=1,n.truckSpeed=2,n.dollyToCursor=!1,n.verticalDragToForward=!1,n.boundaryFriction=0,n.colliderMeshes=[],n._state=g.NONE,n._viewport=null,n._dollyControlAmount=0,n._boundaryEnclosesCamera=!1,n._hasUpdated=!0,n._camera=t,n._yAxisUpSpace=(new L.Quaternion).setFromUnitVectors(n._camera.up,P),n._yAxisUpSpaceInverse=n._yAxisUpSpace.clone().inverse(),n._state=g.NONE,n._domElement=r,n._target=new L.Vector3,n._targetEnd=n._target.clone(),n._spherical=(new L.Spherical).setFromVector3(n._camera.position.clone().applyQuaternion(n._yAxisUpSpace)),n._sphericalEnd=n._spherical.clone(),n._zoom=n._camera.zoom,n._zoomEnd=n._zoom,n._nearPlaneCorners=[new L.Vector3,new L.Vector3,new L.Vector3,new L.Vector3],n._updateNearPlaneCorners(),n._boundary=new L.Box3(new L.Vector3(-1/0,-1/0,-1/0),new L.Vector3(1/0,1/0,1/0)),n._target0=n._target.clone(),n._position0=n._camera.position.clone(),n._zoom0=n._zoom,n._dollyControlAmount=0,n._dollyControlCoord=new L.Vector2,n.mouseButtons={left:g.ROTATE,middle:g.DOLLY,right:g.TRUCK,wheel:n._camera.isPerspectiveCamera?g.DOLLY:n._camera.isOrthographicCamera?g.ZOOM:g.NONE},n.touches={one:g.TOUCH_ROTATE,two:n._camera.isPerspectiveCamera?g.TOUCH_DOLLY_TRUCK:n._camera.isOrthographicCamera?g.TOUCH_ZOOM_TRUCK:g.NONE,three:g.TOUCH_TRUCK},n._domElement){var i=n,o=new L.Vector2,a=new L.Vector2,s=new L.Vector2,c=new L.Vector4,l=function(e,t){if(i._camera.isPerspectiveCamera){var r=i._camera,n=j.copy(r.position).sub(i._target),o=r.getEffectiveFOV()*L.Math.DEG2RAD,a=n.length()*Math.tan(.5*o),s=i.truckSpeed*e*a/c.w,l=i.truckSpeed*t*a/c.w;i.verticalDragToForward?(i.truck(s,0,!0),i.forward(-l,!0)):i.truck(s,l,!0)}else if(i._camera.isOrthographicCamera){var u=i._camera;s=e*(u.right-u.left)/u.zoom/c.z,l=t*(u.top-u.bottom)/u.zoom/c.w;i.truck(s,l,!0)}},u=function(e,t,r){var n=Math.pow(.95,-e*i.dollySpeed),o=i._sphericalEnd.radius*n,a=i._sphericalEnd.radius;i.dollyTo(o),i.dollyToCursor&&(i._dollyControlAmount+=i._sphericalEnd.radius-a,i._dollyControlCoord.set(t,r))},h=function(e){var t=Math.pow(.95,e*i.dollySpeed);i.zoomTo(i._zoom*t)},d=function(e){if(i.enabled){e.preventDefault();var t=i._state;switch(e.button){case L.MOUSE.LEFT:i._state=i.mouseButtons.left;break;case L.MOUSE.MIDDLE:i._state=i.mouseButtons.middle;break;case L.MOUSE.RIGHT:i._state=i.mouseButtons.right}t!==i._state&&v(e)}},p=function(e){if(i.enabled){e.preventDefault();var t=i._state;switch(e.touches.length){case 1:i._state=i.touches.one;break;case 2:i._state=i.touches.two;break;case 3:i._state=i.touches.three}t!==i._state&&v(e)}},f=function(e){if(i.enabled){if(e.preventDefault(),(e.wheelDeltaY?e.wheelDeltaY===-3*e.deltaY:0===e.deltaMode)&&!e.ctrlKey)return i._getClientRect(c),void l(e.deltaX,e.deltaY);var t=V?-1:-3,r=1===e.deltaMode?e.deltaY/t:e.deltaY/(10*t),n=0,o=0;switch(i.dollyToCursor&&(i._getClientRect(c),n=(e.clientX-c.x)/c.z*2-1,o=(e.clientY-c.y)/c.w*-2+1),i.mouseButtons.wheel){case g.DOLLY:u(-r,n,o);break;case g.ZOOM:h(-r)}i.dispatchEvent({type:"control",originalEvent:e})}},m=function(e){i.enabled&&e.preventDefault()},v=function(e){if(i.enabled){if(e.preventDefault(),E(e,C),i._getClientRect(c),o.copy(C),a.copy(C),T(e)&&e.touches.length>=2){var t=e,r=C.x-t.touches[1].clientX,n=C.y-t.touches[1].clientY,l=Math.sqrt(r*r+n*n);s.set(0,l);var u=.5*(t.touches[0].clientX+t.touches[1].clientX),h=.5*(t.touches[0].clientY+t.touches[1].clientY);a.set(u,h)}document.addEventListener("mousemove",y),document.addEventListener("touchmove",y),document.addEventListener("mouseup",b),document.addEventListener("touchend",b),i.dispatchEvent({type:"controlstart",originalEvent:e})}},y=function(e){if(i.enabled){e.preventDefault(),E(e,C);var t=a.x-C.x,r=a.y-C.y;switch(a.copy(C),i._state){case g.ROTATE:case g.TOUCH_ROTATE:var n=_*i.azimuthRotateSpeed*t/c.w,d=_*i.polarRotateSpeed*r/c.w;i.rotate(n,d,!0);break;case g.DOLLY:case g.ZOOM:var p=i.dollyToCursor?(o.x-c.x)/c.z*2-1:0,f=i.dollyToCursor?(o.y-c.y)/c.w*-2+1:0;i._state===g.DOLLY?u(r/8,p,f):h(r/8);break;case g.TOUCH_DOLLY:case g.TOUCH_ZOOM:case g.TOUCH_DOLLY_TRUCK:case g.TOUCH_ZOOM_TRUCK:var m=e,v=C.x-m.touches[1].clientX,y=C.y-m.touches[1].clientY,b=Math.sqrt(v*v+y*y),x=s.y-b;s.set(0,b);p=i.dollyToCursor?(a.x-c.x)/c.z*2-1:0,f=i.dollyToCursor?(a.y-c.y)/c.w*-2+1:0;i._state===g.TOUCH_DOLLY||i._state===g.TOUCH_DOLLY_TRUCK?u(x/8,p,f):h(x/8),i._state!==g.TOUCH_DOLLY_TRUCK&&i._state!==g.TOUCH_ZOOM_TRUCK||l(t,r);break;case g.TRUCK:case g.TOUCH_TRUCK:l(t,r)}i.dispatchEvent({type:"control",originalEvent:e})}},b=function(e){i.enabled&&(i._state=g.NONE,document.removeEventListener("mousemove",y),document.removeEventListener("touchmove",y),document.removeEventListener("mouseup",b),document.removeEventListener("touchend",b),i.dispatchEvent({type:"controlend",originalEvent:e}))};n._domElement.addEventListener("mousedown",d),n._domElement.addEventListener("touchstart",p),n._domElement.addEventListener("wheel",f),n._domElement.addEventListener("contextmenu",m),n._removeAllEventListeners=function(){i._domElement.removeEventListener("mousedown",d),i._domElement.removeEventListener("touchstart",p),i._domElement.removeEventListener("wheel",f),i._domElement.removeEventListener("contextmenu",m),document.removeEventListener("mousemove",y),document.removeEventListener("touchmove",y),document.removeEventListener("mouseup",b),document.removeEventListener("touchend",b)}}return n.update(0),n}return function(e,t){function r(){this.constructor=e}y(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(t,e),t.install=function(e){L=e.THREE,R=Object.freeze(new L.Vector3(0,0,0)),P=Object.freeze(new L.Vector3(0,1,0)),C=new L.Vector2,j=new L.Vector3,O=new L.Vector3,D=new L.Vector3,I=new L.Vector3,N=new L.Vector3,U=new L.Spherical,z=new L.Spherical,F=new L.Matrix4,B=new L.Raycaster},Object.defineProperty(t,"ACTION",{get:function(){return H},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"phiSpeed",{set:function(e){console.warn("phiSpeed was renamed. use azimuthRotateSpeed instead"),this.azimuthRotateSpeed=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"thetaSpeed",{set:function(e){console.warn("thetaSpeed was renamed. use polarRotateSpeed instead"),this.polarRotateSpeed=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"boundaryEnclosesCamera",{get:function(){return this._boundaryEnclosesCamera},set:function(e){this._boundaryEnclosesCamera=e,this._hasUpdated=!0},enumerable:!0,configurable:!0}),t.prototype.rotate=function(e,t,r){void 0===r&&(r=!1),this.rotateTo(this._sphericalEnd.theta+e,this._sphericalEnd.phi+t,r)},t.prototype.rotateTo=function(e,t,r){void 0===r&&(r=!1);var n=L.Math.clamp(e,this.minAzimuthAngle,this.maxAzimuthAngle),i=L.Math.clamp(t,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=n,this._sphericalEnd.phi=i,this._sphericalEnd.makeSafe(),r||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi),this._hasUpdated=!0},t.prototype.dolly=function(e,t){void 0===t&&(t=!1),this.dollyTo(this._sphericalEnd.radius-e,t)},t.prototype.dollyTo=function(e,t){void 0===t&&(t=!1),A(this._camera,"dolly")||(this._sphericalEnd.radius=L.Math.clamp(e,this.minDistance,this.maxDistance),t||(this._spherical.radius=this._sphericalEnd.radius),this._hasUpdated=!0)},t.prototype.zoom=function(e,t){void 0===t&&(t=!1),this.zoomTo(this._zoomEnd+e,t)},t.prototype.zoomTo=function(e,t){void 0===t&&(t=!1),this._zoomEnd=L.Math.clamp(e,this.minZoom,this.maxZoom),t||(this._zoom=this._zoomEnd),this._hasUpdated=!0},t.prototype.pan=function(e,t,r){void 0===r&&(r=!1),console.log("`pan` has been renamed to `truck`"),this.truck(e,t,r)},t.prototype.truck=function(e,t,r){void 0===r&&(r=!1),this._camera.updateMatrix(),I.setFromMatrixColumn(this._camera.matrix,0),N.setFromMatrixColumn(this._camera.matrix,1),I.multiplyScalar(e),N.multiplyScalar(-t);var n=j.copy(I).add(N);this._encloseToBoundary(this._targetEnd,n,this.boundaryFriction),r||this._target.copy(this._targetEnd),this._hasUpdated=!0},t.prototype.forward=function(e,t){void 0===t&&(t=!1),j.setFromMatrixColumn(this._camera.matrix,0),j.crossVectors(this._camera.up,j),j.multiplyScalar(e),this._encloseToBoundary(this._targetEnd,j,this.boundaryFriction),t||this._target.copy(this._targetEnd),this._hasUpdated=!0},t.prototype.moveTo=function(e,t,r,n){void 0===n&&(n=!1),this._targetEnd.set(e,t,r),n||this._target.copy(this._targetEnd),this._hasUpdated=!0},t.prototype.fitTo=function(e,t,r){if(void 0===r&&(r=b),!A(this._camera,"fitTo")){var n=r.paddingLeft||0,i=r.paddingRight||0,o=r.paddingBottom||0,a=r.paddingTop||0,s=e.isBox3?e.clone():(new L.Box3).setFromObject(e),c=s.getSize(j),l=c.x+n+i,u=c.y+a+o,h=c.z,d=this.getDistanceToFit(l,u,h);this.dollyTo(d,t);var p=s.getCenter(j),f=p.x-(.5*n-.5*i),m=p.y+(.5*a-.5*o),g=p.z;this.moveTo(f,m,g,t),this.normalizeRotations(),this.rotateTo(0,90*L.Math.DEG2RAD,t)}},t.prototype.setLookAt=function(e,t,r,n,i,o,a){void 0===a&&(a=!1);var s=j.set(e,t,r),c=O.set(n,i,o);this._targetEnd.copy(c),this._sphericalEnd.setFromVector3(s.sub(c).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),a||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd)),this._hasUpdated=!0},t.prototype.lerpLookAt=function(e,t,r,n,i,o,a,s,c,l,u,h,d,p){void 0===p&&(p=!1);var f=j.set(e,t,r),m=O.set(n,i,o);U.setFromVector3(f.sub(m).applyQuaternion(this._yAxisUpSpace));var g=j.set(l,u,h);this._targetEnd.copy(m).lerp(g,d);var v=O.set(a,s,c);z.setFromVector3(v.sub(g).applyQuaternion(this._yAxisUpSpace));var y=z.theta-U.theta,_=z.phi-U.phi,b=z.radius-U.radius;this._sphericalEnd.set(U.radius+b*d,U.phi+_*d,U.theta+y*d),this.normalizeRotations(),p||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd)),this._hasUpdated=!0},t.prototype.setPosition=function(e,t,r,n){void 0===n&&(n=!1),this.setLookAt(e,t,r,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,n)},t.prototype.setTarget=function(e,t,r,n){void 0===n&&(n=!1);var i=this.getPosition(j);this.setLookAt(i.x,i.y,i.z,e,t,r,n)},t.prototype.setBoundary=function(e){if(!e)return this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),void(this._hasUpdated=!0);this._boundary.copy(e),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._hasUpdated=!0},t.prototype.setViewport=function(e,t,r,n){null!==e?(this._viewport=this._viewport||new L.Vector4,"number"==typeof e?this._viewport.set(e,t,r,n):this._viewport.copy(e)):this._viewport=null},t.prototype.getDistanceToFit=function(e,t,r){if(A(this._camera,"getDistanceToFit"))return this._spherical.radius;var n=this._camera,i=e/t,o=n.getEffectiveFOV()*L.Math.DEG2RAD,a=n.aspect;return.5*(i<a?t:e/a)/Math.tan(.5*o)+.5*r},t.prototype.getTarget=function(e){return(e&&e.isVector3?e:new L.Vector3).copy(this._targetEnd)},t.prototype.getPosition=function(e){return(e&&e.isVector3?e:new L.Vector3).setFromSpherical(this._sphericalEnd).applyQuaternion(this._yAxisUpSpaceInverse).add(this._targetEnd)},t.prototype.normalizeRotations=function(){this._sphericalEnd.theta=this._sphericalEnd.theta%_,this._spherical.theta+=_*Math.round((this._sphericalEnd.theta-this._spherical.theta)/_)},t.prototype.reset=function(e){void 0===e&&(e=!1),this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,e),this.zoomTo(this._zoom0,e)},t.prototype.saveState=function(){this._target0.copy(this._target),this._position0.copy(this._camera.position),this._zoom0=this._zoom},t.prototype.updateCameraUp=function(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,P),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).inverse()},t.prototype.update=function(e){var t=this._state===g.NONE?this.dampingFactor:this.draggingDampingFactor,r=1-Math.exp(-t*e*62.5),n=this._sphericalEnd.theta-this._spherical.theta,i=this._sphericalEnd.phi-this._spherical.phi,o=this._sphericalEnd.radius-this._spherical.radius,a=j.subVectors(this._targetEnd,this._target);if(w(n)&&w(i)&&w(o)&&w(a.x)&&w(a.y)&&w(a.z)?(this._spherical.copy(this._sphericalEnd),this._target.copy(this._targetEnd)):(this._spherical.set(this._spherical.radius+o*r,this._spherical.phi+i*r,this._spherical.theta+n*r),this._target.add(a.multiplyScalar(r)),this._hasUpdated=!0),0!==this._dollyControlAmount){if(this._camera.isPerspectiveCamera){var s=this._camera,c=j.setFromSpherical(this._sphericalEnd).applyQuaternion(this._yAxisUpSpaceInverse).normalize().negate(),l=O.copy(c).cross(s.up).normalize();0===l.lengthSq()&&(l.x=1);var u=D.crossVectors(l,c),h=this._sphericalEnd.radius*Math.tan(s.getEffectiveFOV()*L.Math.DEG2RAD*.5),d=(this._sphericalEnd.radius-this._dollyControlAmount-this._sphericalEnd.radius)/this._sphericalEnd.radius,p=j.copy(this._targetEnd).add(l.multiplyScalar(this._dollyControlCoord.x*h*s.aspect)).add(u.multiplyScalar(this._dollyControlCoord.y*h));this._targetEnd.lerp(p,d),this._target.copy(this._targetEnd)}this._dollyControlAmount=0}var f=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,f),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),j.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);var m=this._zoomEnd-this._zoom;this._zoom+=m*r,this._camera.zoom!==this._zoom&&(w(m)&&(this._zoom=this._zoomEnd),this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._hasUpdated=!0);var v=this._hasUpdated;return this._hasUpdated=!1,v&&this.dispatchEvent({type:"update"}),v},t.prototype.toJSON=function(){return JSON.stringify({enabled:this.enabled,minDistance:this.minDistance,maxDistance:M(this.maxDistance),minPolarAngle:this.minPolarAngle,maxPolarAngle:M(this.maxPolarAngle),minAzimuthAngle:M(this.minAzimuthAngle),maxAzimuthAngle:M(this.maxAzimuthAngle),dampingFactor:this.dampingFactor,draggingDampingFactor:this.draggingDampingFactor,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:this._camera.position.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray()})},t.prototype.fromJSON=function(e,t){void 0===t&&(t=!1);var r=JSON.parse(e),n=(new L.Vector3).fromArray(r.position);this.enabled=r.enabled,this.minDistance=r.minDistance,this.maxDistance=S(r.maxDistance),this.minPolarAngle=r.minPolarAngle,this.maxPolarAngle=S(r.maxPolarAngle),this.minAzimuthAngle=S(r.minAzimuthAngle),this.maxAzimuthAngle=S(r.maxAzimuthAngle),this.dampingFactor=r.dampingFactor,this.draggingDampingFactor=r.draggingDampingFactor,this.dollySpeed=r.dollySpeed,this.truckSpeed=r.truckSpeed,this.dollyToCursor=r.dollyToCursor,this.verticalDragToForward=r.verticalDragToForward,this._target0.fromArray(r.target0),this._position0.fromArray(r.position0),this._targetEnd.fromArray(r.target),this._sphericalEnd.setFromVector3(n.sub(this._target0).applyQuaternion(this._yAxisUpSpace)),t||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd)),this._hasUpdated=!0},t.prototype.dispose=function(){this._removeAllEventListeners()},t.prototype._encloseToBoundary=function(e,t,r){var n=t.lengthSq();if(0===n)return e;var i=O.copy(t).add(e),o=this._boundary.clampPoint(i,D).sub(i),a=o.lengthSq();if(0===a)return e.add(t);if(a===n)return e;if(0===r)return e.add(t).add(o);var s=1+r*a/t.dot(o);return e.add(O.copy(t).multiplyScalar(s)).add(o.multiplyScalar(1-r))},t.prototype._updateNearPlaneCorners=function(){if(!A(this._camera,"_updateNearPlaneCorners")){var e=this._camera,t=e.near,r=e.getEffectiveFOV()*L.Math.DEG2RAD,n=Math.tan(.5*r)*t,i=n*e.aspect;this._nearPlaneCorners=[new L.Vector3(-i,-n,0),new L.Vector3(i,-n,0),new L.Vector3(i,n,0),new L.Vector3(-i,n,0)]}},t.prototype._collisionTest=function(){var e=1/0;if(A(this._camera,"_collisionTest"))return e;if(!(this.colliderMeshes.length>=1))return e;e=this._spherical.radius;var t=j.setFromSpherical(this._spherical).divideScalar(e);F.lookAt(R,t,this._camera.up);for(var r=0;r<4;r++){var n=O.copy(this._nearPlaneCorners[r]);n.applyMatrix4(F);var i=D.addVectors(this._target,n);B.set(i,t),B.far=e;var o=B.intersectObjects(this.colliderMeshes);0!==o.length&&o[0].distance<e&&(e=o[0].distance)}return e},t.prototype._getClientRect=function(e){var t=this._domElement.getBoundingClientRect();return e.x=t.left,e.y=t.top,this._viewport?(e.x+=this._viewport.x,e.y+=t.height-this._viewport.w-this._viewport.y,e.z=this._viewport.z,e.w=this._viewport.w):(e.z=t.width,e.w=t.height),e},t.prototype._removeAllEventListeners=function(){},t}(G),W=r("./node_modules/babel-runtime/core-js/object/keys.js"),q=r.n(W),X=r("./node_modules/babel-runtime/core-js/array/from.js"),Y=r.n(X),Z=r("./node_modules/babel-runtime/core-js/set.js"),J=r.n(Z),K=r("./node_modules/babel-runtime/core-js/number/epsilon.js"),Q=r.n(K),$=r("./src/common/Utils.js"),ee=r(/*! ../libs/three/build/three.module.js */"./src/libs/three/build/three.module.js"),te=new ee.Matrix4,re=new ee.Matrix4,ne=new ee.Vector3,ie=new ee.Vector2,oe=new ee.Vector3,ae=new ee.Quaternion,se=new ee.Euler,ce=new ee.Vector3(1,1,1);String.prototype._insert=function(e,t){return this.slice(0,e)+t+this.slice(e)},ee.Raycaster.prototype.setFromPoint=function(e,t,r,n,i){return ie.x=e/r*2-1,ie.y=-t/n*2+1,this.setFromCamera(ie,i),this},ee.Raycaster.prototype.intersectPickableObject=function(e,t,r,n){if(!1!==e.visible&&e.getPickable()&&(e.raycast(t,r),!0===n))for(var i=e.children,o=0,a=i.length;o<a;o++)this.intersectPickableObject(i[o],this,r,!0)},ee.Raycaster.prototype.intersectPickableObjects=function(e,t,r){var n=r||[];return this.intersectPickableObject(e,this,n,t),n.sort((function(e,t){return e.distance-t.distance})),n},ee.Color.prototype.copy=function(e){return e&&(this.r=e.r,this.g=e.g,this.b=e.b),this},ee.Color.prototype.toHexString=function(){return"#"+this.getHexString().toUpperCase()},ee.Color.prototype.toRGBArray=function(){return[Math.ceil(255*this.r),Math.ceil(255*this.g),Math.ceil(255*this.b)]},ee.Box3.prototype.fixSize=function(){var e=this.min,t=this.max;["x","y","z"].forEach((function(r){e[r]==t[r]&&(e[r]-=Q.a,t[r]+=Q.a)}))},ee.Box3.prototype.getPoints=function(){var e=this.min,t=this.max;return[new ee.Vector3(e.x,e.y,e.z),new ee.Vector3(t.x,e.y,e.z),new ee.Vector3(e.x,e.y,t.z),new ee.Vector3(t.x,e.y,t.z),new ee.Vector3(e.x,t.y,e.z),new ee.Vector3(t.x,t.y,e.z),new ee.Vector3(e.x,t.y,t.z),new ee.Vector3(t.x,t.y,t.z)]},ee.Box3Helper.prototype.setBox=function(e){this.box=e},ee.Box3Helper.prototype.getBox=function(){return this.box},ee.Geometry.prototype.addRef=function(){return this.refCount=this.refCount||1,this.refCount++,this.refCount};var le=ee.Geometry.prototype.dispose;ee.Geometry.prototype.dispose=function(){return(void 0===this.refCount||(this.refCount--,!this.refCount))&&(le.call(this),!0)},ee.BufferGeometry.prototype.addRef=function(){return this.refCount=this.refCount||1,this.refCount++,this.refCount};var ue=ee.BufferGeometry.prototype.dispose;ee.BufferGeometry.prototype.dispose=function(){return(void 0===this.refCount||(this.refCount--,!this.refCount))&&(ue.call(this),!0)},ee.Object3D.prototype.setPickable=function(e){this.userData.skipPick=e},ee.Object3D.prototype.getPickable=function(){return!this.userData.skipPick},ee.Object3D.prototype.setMatrixAutoUpdate=function(e){this.matrixAutoUpdate=e},ee.Object3D.prototype.worldToSelf=function(e,t){var r=$.Utils.parseVector3(e);return this.updateWorldMatrix(!0),t?(this.matrixWorld.decompose(ne,ae,oe),re.compose(ne,ae,ce),te.getInverse(re),r.applyMatrix4(te).toArray()):this.worldToLocal(r).toArray()},ee.Object3D.prototype.selfToWorld=function(e,t){var r=$.Utils.parseVector3(e);return this.updateWorldMatrix(!0),t?(this.matrixWorld.decompose(ne,ae,oe),re.compose(ne,ae,ce),r.applyMatrix4(re).toArray()):this.localToWorld(r).toArray()},ee.Object3D.prototype.getChildIndex=function(e){for(var t=0;t<this.children.length;t++)if(this.children[t]==e)return t;return-1},ee.Object3D.prototype.getIndexPath=function(e){for(var t=[],r=this;r.parent;){var n=r.parent,i=n.getChildIndex(r);if(-1==i)break;if(t.push(i),n==e)break;r=n}return t},ee.Object3D.prototype.traverseMesh=function(e){this.traverse((function(t){t.isMesh&&e(t)}))},ee.Object3D.prototype.traverseLight=function(e){this.traverse((function(t){t.isLight&&e(t)}))},ee.Object3D.prototype.traverseRenderableNodes=function(e){this.traverseBranch((function(t){if(t.isRenderable()&&!1===e(t))return!1}))},ee.Object3D.prototype.traverseParents=function(e){for(var t=this.parent;t;t=t.parent)e(t)},ee.Object3D.prototype.traverseChild=function(e){for(var t=this.children,r=0,n=t.length;r<n;r++)t[r].traverse(e)},ee.Object3D.prototype.traverseBranch=function(e){if(!1!==e(this))for(var t=this.children,r=0,n=t.length;r<n;r++)t[r].traverseBranch(e)},ee.Object3D.prototype.getRoot=function(){var e=this.parent;if(!e)return this;for(;e.parent;)e=e.parent;return e},ee.Object3D.prototype.getSkinnedMeshes=function(){var e=[];return this.traverse((function(t){t.isSkinnedMesh&&e.push(t)})),e},ee.Object3D.prototype.getBones=function(e,t){var r=this,n=[];return t.bones.forEach((function(t){for(var i=t.getIndexPath(e),o=r,a=i.length-1;a>=0;a--){var s=i[a];o=o.children[s]}n.push(o)})),n},ee.Object3D.prototype.getGeometries=function(){var e=new J.a;return this.traverse((function(t){var r=t.geometry;r&&e.add(r)})),Y()(e)},ee.Object3D.prototype.getMaterials=function(){var e=new J.a;return this.traverse((function(t){var r=t.material;if(r)if($.Utils.isArray(r))for(var n=0;n<r.length;n++)e.add(r[n]);else e.add(r)})),Y()(e)},ee.Object3D.prototype.getTextures=function(){for(var e=this.getMaterials(),t=new J.a,r=0;r<e.length;r++)for(var n=e[r],i=q()(n),o=0;o<i.length;o++){var a=n[i[o]];a&&a.isTexture&&!t.has(a)&&t.add(a)}return Y()(t)},ee.Object3D.prototype.getMeshes=function(){var e=[];return this.traverse((function(t){t.isMesh&&e.push(t)})),e},ee.Object3D.prototype.getNodes=function(){var e=[];return this.traverse((function(t){e.push(t)})),e},ee.Object3D.prototype.getRenderableNodes=function(){var e=[];return this.traverse((function(t){t.isRenderable()&&e.push(t)})),e},ee.Object3D.prototype.setActive=function(e){this.visible=e},ee.Object3D.prototype.getActive=function(){return this.visible},ee.Object3D.prototype.setVisible=function(e){e?this.layers.enable(0):this.layers.disable(0)},ee.Object3D.prototype.getVisible=function(){return!!this.getActive()&&!!(1&this.layers.mask)},ee.Object3D.prototype.isVisible=function(){for(var e=this;e;e=e.parent)if(!e.visible)return!1;return this.getVisible()},ee.Object3D.prototype.getVisibleRenderableNodes=function(){var e=[];return this.traverseRenderableNodes((function(t){t.isVisible()&&e.push(t)})),e},ee.Object3D.prototype.setRenderOrder=function(e){this.renderOrder=e},ee.Object3D.prototype.getRenderOrder=function(){return this.renderOrder},ee.Object3D.prototype.setPosition=function(e){this.position.copy($.Utils.parseVector3(e))},ee.Object3D.prototype.getPosition=function(){return this.position},ee.Object3D.prototype.setWorldPosition=function(e){e=$.Utils.parseVector3(e),this.parent&&(this.parent.updateWorldMatrix(!0),e=this.parent.worldToLocal(e)),this.position.copy(e)},ee.Object3D.prototype.setQuaternion=function(e){this.quaternion.copy($.Utils.parseQuaternion(e))},ee.Object3D.prototype.getQuaternion=function(){return this.quaternion},ee.Object3D.prototype.setAngles=function(e){this.quaternion.copy($.Utils.parseQuaternion(e))},ee.Object3D.prototype.getAngles=function(){return $.Utils.parseAngles(this.quaternion)},ee.Object3D.prototype.setScale=function(e){this.scale.copy($.Utils.parseVector3(e))},ee.Object3D.prototype.getScale=function(){return this.scale},ee.Object3D.prototype.setMatrix=function(e){this.matrix.copy(e),this.matrix.decompose(this.position,this.quaternion,this.scale)},ee.Object3D.prototype.pushMatrix=function(e){this._push_matrices=this._push_matrices||[],this._push_matrices.push(e),this.applyMatrix4(e),this.updateWorldMatrix(!0,!0)},ee.Object3D.prototype.popMatrix=function(){if(this._push_matrices.length){var e=this._push_matrices[this._push_matrices.length-1];re.getInverse(e),this.applyMatrix4(re),this._push_matrices.pop()}},ee.Object3D.prototype.getMatrixWorld=function(){return this.updateWorldMatrix(!0,!1),this.matrixWorld},ee.Object3D.prototype.isChildOf=function(e){for(var t=this.parent;t;){if(t==e)return!0;t=t.parent}return!1},ee.Object3D.prototype.getWorldPosition=function(e){return this.updateWorldMatrix(!0),(e=e||ne).setFromMatrixPosition(this.matrixWorld)},ee.Object3D.prototype.getWorldQuaternion=function(e){return this.updateWorldMatrix(!0),e=e||ae,this.matrixWorld.decompose(ne,e,oe),e},ee.Object3D.prototype.getWorldScale=function(e){return this.updateWorldMatrix(!0),e=e||oe,this.matrixWorld.decompose(ne,ae,e),e},ee.Object3D.prototype.isRenderable=function(){return!!(this.isSprite||this.isMesh||this.isLine||this.isPoints||this.isImmediateRenderObject)},ee.Object3D.prototype.dispose=function(){var e=this.parent;e&&e.remove(this),this.traverse((function(e){e.geometry&&e.geometry.dispose();var t=e.material;if(t)if($.Utils.isArray(t))for(var r=0;r<t.length;r++)t[r].dispose();else t.dispose();e.skeleton&&e.skeleton.boneTexture&&e.skeleton.boneTexture.dispose()}))};var he=ee.Object3D.prototype.clone;ee.Object3D.prototype.clone=function(e){var t=he.call(this,e),r=function(e){e.geometry&&e.geometry.addRef();var t=e.material;if(t)if($.Utils.isArray(t))for(var r=0;r<t.length;r++)t[r].addRef();else t.addRef()};return e?t.traverse((function(e){r(e)})):r(t),t},ee.Object3D.prototype.setCastShadow=function(e){this.castShadow=e},ee.Object3D.prototype.getCastShadow=function(){return this.castShadow},ee.Object3D.prototype.setReceiveShadow=function(e){this.receiveShadow=e},ee.Object3D.prototype.getReceiveShadow=function(){return this.receiveShadow},ee.Euler.prototype.setFromAngles=function(e){var t=ee.Math.degToRad(e[0]%360),r=ee.Math.degToRad(e[1]%360),n=ee.Math.degToRad(e[2]%360);return this.set(t,r,n)},ee.Quaternion.prototype.setFromAngles=function(e){return se.setFromAngles(e),this.setFromEuler(se),this},ee.Material.prototype.addRef=function(){for(var e in this){var t=this[e];t&&(t.isTexture&&t.addRef())}return this.refCount=this.refCount||1,this.refCount++,this.refCount};var de=ee.Material.prototype.dispose;ee.Material.prototype.dispose=function(){if(void 0!==this.refCount&&(this.refCount--,this.refCount))return!1;for(var e in this){var t=this[e];t&&(t.isTexture&&(t.dispose(),this[e]=null))}return de.call(this),!0},ee.Material.prototype.setSide=function(e){this.side=e},ee.Material.prototype.getSide=function(){return this.side},ee.Material.prototype.setOpacity=function(e){this.opacity=e},ee.Material.prototype.getOpacity=function(){return this.opacity},ee.Material.prototype.setVisible=function(e){this.visible=e},ee.Material.prototype.getVisible=function(){return this.visible},ee.Material.prototype.setDepthTest=function(e){this.depthTest=e},ee.Material.prototype.getDepthTest=function(){return this.depthTest},ee.Material.prototype.setDepthWrite=function(e){this.depthWrite=e},ee.Material.prototype.getDepthWrite=function(){return this.depthWrite},ee.Texture.prototype.addRef=function(){return this.refCount=this.refCount||1,this.refCount++,this.refCount};var pe=ee.Texture.prototype.dispose;ee.Texture.prototype.dispose=function(){return(void 0===this.refCount||(this.refCount--,!this.refCount))&&(pe.call(this),!0)},ee.Light.prototype.setColor=function(e){this.color=$.Utils.parseColor(e)},ee.Light.prototype.getColor=function(){return this.color},ee.Light.prototype.setIntensity=function(e){this.intensity=e},ee.Light.prototype.getIntensity=function(){return this.intensity},ee.Light.prototype.getShadow=function(){return this.shadow},ee.AmbientLight.prototype.setCastShadow=function(e){},ee.AmbientLight.prototype.getCastShadow=function(){return!1},ee.DirectionalLight.prototype.setTarget=function(e){this.target.position.copy($.Utils.parseVector3(e)),this.target.updateWorldMatrix()},ee.DirectionalLight.prototype.getTarget=function(){return this.target},ee.PointLight.prototype.setDistance=function(e){this.distance=e},ee.PointLight.prototype.getDistance=function(){return this.distance},ee.PointLight.prototype.setDecay=function(e){this.decay=e},ee.PointLight.prototype.getDecay=function(){return this.decay},ee.RectAreaLight.prototype.setWidth=function(e){this.width=e},ee.RectAreaLight.prototype.getWidth=function(){return this.width},ee.RectAreaLight.prototype.setHeight=function(e){this.height=e},ee.RectAreaLight.prototype.getHeight=function(){return this.height},ee.RectAreaLight.prototype.setCastShadow=function(e){},ee.RectAreaLight.prototype.getCastShadow=function(){return!1},ee.SpotLight.prototype.setDistance=function(e){this.distance=e},ee.SpotLight.prototype.getDistance=function(){return this.distance},ee.SpotLight.prototype.setAngle=function(e){this.angle=e},ee.SpotLight.prototype.getAngle=function(){return this.angle},ee.SpotLight.prototype.setPenumbra=function(e){this.penumbra=e},ee.SpotLight.prototype.getPenumbra=function(){return this.penumbra},ee.SpotLight.prototype.setDecay=function(e){this.decay=e},ee.SpotLight.prototype.getDecay=function(){return this.decay},ee.HemisphereLight.prototype.setGroundColor=function(e){this.groundColor=$.Utils.parseColor(e)},ee.HemisphereLight.prototype.getGroundColor=function(){return this.groundColor},ee.HemisphereLight.prototype.setCastShadow=function(e){},ee.HemisphereLight.prototype.getCastShadow=function(){return!1},ee.OrthographicCamera.prototype.setNear=function(e){this.near=e,this.updateProjectionMatrix()},ee.OrthographicCamera.prototype.getNear=function(){return this.near},ee.OrthographicCamera.prototype.setFar=function(e){this.far=e,this.updateProjectionMatrix()},ee.OrthographicCamera.prototype.getFar=function(){return this.far},ee.OrthographicCamera.prototype.getOrthoSize=function(){return{x:(this.right-this.left)/this.zoom,y:(this.top-this.bottom)/this.zoom}},ee.OrthographicCamera.prototype.resize=function(e,t){this.left=-e/2,this.right=e/2,this.top=t/2,this.bottom=-t/2,this.updateProjectionMatrix()},ee.PerspectiveCamera.prototype.setNear=function(e){this.near=e,this.updateProjectionMatrix()},ee.PerspectiveCamera.prototype.getNear=function(){return this.near},ee.PerspectiveCamera.prototype.setFar=function(e){this.far=e,this.updateProjectionMatrix()},ee.PerspectiveCamera.prototype.getFar=function(){return this.far},ee.PerspectiveCamera.prototype.setAspect=function(e){this.aspect=e,this.updateProjectionMatrix()},ee.PerspectiveCamera.prototype.getAspect=function(){return this.aspect},ee.PerspectiveCamera.prototype.getOrthoSize=function(e,t){var r=$.Utils.parseVector3(e),n=$.Utils.parseVector3(t),i=r.distanceTo(n),o=2*Math.tan(this.fov/2*Math.PI/180),a=o*i;return{x:a*this.aspect,y:a,depth:o,z:i}},ee.PerspectiveCamera.prototype.resize=function(e,t){this.setAspect(e/t)},ee.Scene.prototype.setBackground=function(e){this.background=e},ee.Scene.prototype.getBackground=function(){return this.background},ee.Scene.prototype.setEnvironment=function(e){this.environment=e},ee.Scene.prototype.getEnvironment=function(){return this.environment};var fe=ee.Scene.prototype.clone;ee.Scene.prototype.clone=function(e){var t=this,r=fe.call(this,e),n=[];return r.traverse((function(e){e.isSkinnedMesh&&n.push(e)})),this.getSkinnedMeshes().forEach((function(e,i){var o=e.skeleton,a=r.getBones(t,o),s=new ee.Skeleton(a,o.boneInverses);n[i].bind(s,e.bindMatrix)})),r};var me=ee.Scene.prototype.dispose;ee.Scene.prototype.dispose=function(){ee.Object3D.prototype.dispose.call(this),me.call(this)},ee.AnimationClip.prototype.setDuration=function(e,t,r){e._reverse_mode=t,e.setDuration(t?-r:r)},ee.AnimationClip.prototype.setLoopType=function(e,t,r){var n=function(e){return $.Utils.isNumber(e)?e:"pingpong"==e?ee.LoopPingPong:"repeat"==e?ee.LoopRepeat:ee.LoopOnce}(t);e._reverse_mode&&(n==ee.LoopOnce&&(r=e.isRunning()?0:1,n=ee.LoopRepeat));e.setLoop(n,r)},ee.AnimationMixer.prototype.isRunning=function(e){for(var t=this._actions,r=this._nActiveActions,n=0;n!==r;++n){var i=t[n];if(e){var o=i.getClip();if(o&&e!=o.name)continue}if(i.isRunning())return!0}return!1},d.prototype.setPosition=function(e,t,r){this.object.position.set(e,t,r)},d.prototype.getPosition=function(){return this.object.position},d.prototype.setTarget=function(e,t,r){this.target.set(e,t,r)},d.prototype.getTarget=function(){return this.target},d.prototype.enableDamping=function(e){this.enableDamping=e},d.prototype.isEnableDamping=function(){return this.enableDamping},d.prototype.enableRotate=function(e){this.enableRotate=e},d.prototype.isEnableRotate=function(){return this.enableRotate},d.prototype.enablePan=function(e){this.enablePan=e},d.prototype.isEnablePan=function(){return this.enablePan},d.prototype.setZoomSpeed=function(e){this.zoomSpeed=e},d.prototype.getZoomSpeed=function(){return this.zoomSpeed},d.prototype.setRotateSpeed=function(e){this.rotateSpeed=e},d.prototype.getRotateSpeed=function(){return this.rotateSpeed},d.prototype.setPanSpeed=function(e){this.panSpeed=e},d.prototype.getPanSpeed=function(){return this.panSpeed},d.prototype.setKeyPanSpeed=function(e){this.keyPanSpeed=e},d.prototype.getKeyPanSpeed=function(){return this.keyPanSpeed},d.prototype.setMinPolarAngle=function(e){this.minPolarAngle=e},d.prototype.getMinPolarAngle=function(){return this.minPolarAngle},d.prototype.setMaxPolarAngle=function(e){this.maxPolarAngle=e},d.prototype.getMaxPolarAngle=function(){return this.maxPolarAngle},d.prototype.setMinAzimuthAngle=function(e){this.minAzimuthAngle=e},d.prototype.getMinAzimuthAngle=function(){return this.minAzimuthAngle},d.prototype.setMaxAzimuthAngle=function(e){this.maxAzimuthAngle=e},d.prototype.getMaxAzimuthAngle=function(){return this.maxAzimuthAngle};var ge=k.prototype.setPosition;k.prototype.setPosition=function(e,t,r){ge.call(this,e,t,r)},ee.ShaderChunk.gpu_picker_pars_vertex="\n#ifdef GPU_PICKER\n\tuniform float size;\n\tuniform float scale;\n\tuniform float baseID;\n\n\tvarying vec4 worldID;\n#endif\n",ee.ShaderChunk.gpu_picker_id_vertex="\n#ifdef GPU_PICKER\n\t#ifdef USE_INSTANCING\n\t\tfloat _id = instanceID;\n\t#else\n\t\tfloat _id = baseID;\n\t#endif\n\t\tvec3 a = fract(vec3(1.0/255.0, 1.0/(255.0*255.0), 1.0/(255.0*255.0*255.0)) * _id);\n\t\ta -= a.xxy * vec3(0.0, 1.0/255.0, 1.0/255.0);\n\t\tworldID = vec4(a,1);\n#endif\n",ee.ShaderChunk.gpu_picker_point_size_vertex="\n#ifdef GPU_PICKER\n\tgl_PointSize = size * ( scale / length( mvPosition.xyz ) );\n#endif\n\t",ee.ShaderChunk.gpu_picker_pars_fragment="\n#ifdef GPU_PICKER\n\tvarying vec4 worldID;\n#endif\n",ee.ShaderChunk.gpu_picker_id_fragment="\n#ifdef GPU_PICKER\n\tgl_FragColor = worldID;\n#endif\n",ee.ShaderChunk.instanced_pars_vertex="\n#ifdef USE_INSTANCING\n\tattribute float instanceID;\n#endif\n",ee.ShaderChunk.uv_discard_fragment="\n#ifdef UV_DISCARD\n\tif (vUv.x < 0. || vUv.x > 1. || vUv.y < 0. || vUv.y > 1.) { \n\t\tdiscard;\n\t}\n#endif\n",ee.ShaderLib.sprite={uniforms:ee.ShaderLib.sprite.uniforms,vertexShader:"\n\t\tuniform float rotation;\n\t\tuniform vec2 center;\n\n\t\t#include <common>\n\t\t#include <uv_pars_vertex>\n\t\t#include <fog_pars_vertex>\n\t\t#include <logdepthbuf_pars_vertex>\n\t\t#include <clipping_planes_pars_vertex>\n\n\t\t#include <instanced_pars_vertex>\n\t\t#include <gpu_picker_pars_vertex>\n\n\t\tvoid main() {\n\n\t\t\t#include <uv_vertex>\n\t\t\t#include <gpu_picker_id_vertex>\n\n\t\t\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\tvec2 scale;\n\t\t\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\t\t\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\n\t\t\t#ifndef USE_SIZEATTENUATION\n\n\t\t\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\n\t\t\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\n\t\t\t#endif\n\n\t\t\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\n\t\t\tvec2 rotatedPosition;\n\t\t\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\t\t\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\n\t\t\tmvPosition.xy += rotatedPosition;\n\n\t\t\tgl_Position = projectionMatrix * mvPosition;\n\n\t\t\t#include <logdepthbuf_vertex>\n\t\t\t#include <clipping_planes_vertex>\n\t\t\t#include <fog_vertex>\n\t\t}\n\t",fragmentShader:"\n\t\tuniform vec3 diffuse;\n\t\tuniform float opacity;\n\t\t\n\t\t#include <common>\n\t\t#include <uv_pars_fragment>\n\t\t#include <map_pars_fragment>\n\t\t#include <alphamap_pars_fragment>\n\t\t#include <fog_pars_fragment>\n\t\t#include <logdepthbuf_pars_fragment>\n\t\t#include <clipping_planes_pars_fragment>\n\t\t\n\t\t#include <gpu_picker_pars_fragment>\n\n\t\tvoid main() {\n\t\t\n\t\t\t#include <uv_discard_fragment>\n\n\t\t\t#include <clipping_planes_fragment>\n\t\t\n\t\t\tvec3 outgoingLight = vec3( 0.0 );\n\t\t\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t\t\n\t\t\t#include <logdepthbuf_fragment>\n\t\t\t#include <map_fragment>\n\t\t\t#include <alphamap_fragment>\n\t\t\t#include <alphatest_fragment>\n\t\t\n\t\t\toutgoingLight = diffuseColor.rgb;\n\t\t\n\t\t\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t\t\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <encodings_fragment>\n\t\t\t#include <fog_fragment>\n\n\t\t\t#include <gpu_picker_id_fragment>\n\t\t}\n\t"};var ve=r("./node_modules/babel-runtime/core-js/map.js"),ye=r.n(ve),_e=r("./node_modules/babel-runtime/helpers/createClass.js"),be=r.n(_e),xe=r("./node_modules/babel-runtime/helpers/possibleConstructorReturn.js"),we=r.n(xe),Me=r("./node_modules/babel-runtime/helpers/inherits.js"),Se=r.n(Me),Te=r(/*! ../libs/three/build/three.module.js */"./src/libs/three/build/three.module.js"),Ee=function(e){function t(){i()(this,t);var r=we()(this,e.call(this,{uniforms:{baseID:{type:"f",value:0},size:{type:"f",value:.01},scale:{type:"f",value:400}},vertexShader:"\n\t\t\t\t#include <instanced_pars_vertex>\n\t\t\t\t#include <gpu_picker_pars_vertex>\n\t\t\t\t#include <skinning_pars_vertex>\n\t\t\t\tvoid main() {\n\t\t\t\t\t#include <skinbase_vertex>\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <skinning_vertex>\n\t\t\t\t\t#include <project_vertex>\n\t\t\t\n\t\t\t\t\t#include <gpu_picker_id_vertex>\n\t\t\t\t\t#include <gpu_picker_point_size_vertex>\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\t\t\t\t#ifdef GL_ES\n\t\t\t\t\tprecision highp float;\n\t\t\t\t#endif\n\n\t\t\t\t#include <gpu_picker_pars_fragment>\n\t\t\t\tvoid main() {\n\t\t\t\t\t#include <gpu_picker_id_fragment>\n\t\t\t\t}\n\t\t\t"}));return r.color=new Te.Color,r}return Se()(t,e),t.prototype.setBaseID=function(e){this.uniforms.baseID.value=e},t.prototype.setPointSize=function(e){this.uniforms.size.value=e},t.prototype.setPointScale=function(e){this.uniforms.scale.value=e},t}(Te.ShaderMaterial),Ae=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,e),this.lineShell=4,this.pointShell=.1,this.pickingTexture=null,this.pixelBuffer=null,this.debugSprite=null,this.debugCamera=null,this.denugScene=null,this.pickingScene=null,this.pickingCamera=null,this.pickingRenderer=null,this.dirty=!1,this.materials=new ye.a,this.meshes=new ye.a,this.defaultSpriteMaterial=new Te.SpriteMaterial,this.defaultSpriteMaterial.colorWrite=!1,this.defaultSpriteMaterial.depthWrite=!1,this.defaultSpriteMaterial.depthTest=!1,this.init(t),this}return e.prototype.init=function(e){this.lineShell=$.Utils.parseValue(e.lineShell,4),this.pointShell=$.Utils.parseValue(e.pointShell,.1),this.pickingTexture=new Te.WebGLRenderTarget,this.pickingTexture.texture.minFilter=Te.LinearFilter,this.pickingTexture.texture.generateMipmaps=!1},e.prototype.resize=function(e,t){this.pickingTexture.setSize(e,t),this.pixelBuffer=new Uint8Array(4*e*t);var r=this.debugSprite;r&&r.scale.set(e,t,1);var n=this.debugCamera;n&&(n.left=-e/2,n.right=e/2,n.top=t/2,n.bottom=-t/2,n.updateProjectionMatrix()),this.needsUpdate=!0},e.prototype.show=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(e){if(!this.denugScene){var t=this.pickingTexture.width,r=this.pickingTexture.height,n=new Te.SpriteMaterial({map:this.pickingTexture.texture});this.debugSprite=new Te.Sprite(n),this.debugSprite.scale.set(t,r,1),this.debugSprite.position.set(0,0,-10),this.denugScene=new Te.Scene,this.denugScene.add(this.debugSprite),this.debugCamera=new Te.OrthographicCamera(-t/2,t/2,r/2,-r/2,.1,100)}}else this.denugScene&&(this.debugSprite.material.dispose(),this.denugScene.remove(this.debugSprite),this.debugSprite=null,this.denugScene=null,this.debugCamera=null)},e.prototype.render=function(e,t,r){if(this.pickingScene=t,this.pickingCamera=r,this.pickingRenderer=e,this.denugScene){var n=e.renderer;n.setRenderTarget(null),n.clear(),n.render(this.denugScene,this.debugCamera)}},e.prototype.createMaterialKey=function(e,t){var r=t.skinning?t.skinning:0,n=t.depthTest,i=t.depthWrite,o=$.Utils.parseValue(e.userData.skipPick,t.colorWrite),a=t.side,s=void 0!==t.instancing?t.instancing:0,c=void 0!==t.isSpriteMaterial?t.isSpriteMaterial:0,l="";return c&&t.map&&(l=t.map.uuid),[r,n,i,o,a,s,c,l].join(",")},e.prototype.createFaceMaterial=function(e,t){var r=this.createMaterialKey(e,t),n=this.materials.get(r);if(!n){if(t.isSpriteMaterial){if(!t.map)return this.defaultSpriteMaterial;(n=t.clone()).alphaTest=.1,n.blending=Te.NoBlending,n.lights=!1,n.fog=!1}else n=new Ee;n.skinning=t.skinning,n.depthTest=t.depthTest,n.depthWrite=t.depthWrite,n.colorWrite=$.Utils.parseValue(e.userData.skipPick,t.colorWrite),n.side=t.side,n.defines=n.defines||{},n.defines.GPU_PICKER="",this.materials.set(r,n)}return n},e.prototype.createPickingMaterial=function(e){var t=e.material;if($.Utils.isArray(t)){for(var r=[],n=0;n<t.length;n++)r.push(this.createFaceMaterial(e,t[n]));return r}return this.createFaceMaterial(e,t)},e.prototype.changeMaterials=function(e){var t=this;e.forEach((function(e){var r=e.object;r.__prev__material__in__GPUPicker__=r.material,r.__prev__before__render__func__=r.onBeforeRender,r.onBeforeRender=function(e,t,r){var n=this.material;n.isSpriteMaterial?n.baseID=this.id:(n.setBaseID(this.id),n.uniformsNeedUpdate=!0),this.__prev__before__render__func__.call(this,e,t,r)};var n=t.createPickingMaterial(r);(r.material=n,e.material=n,r.isInstancedMesh)?r.userData.mainInstancedMesh.meshes.forEach((function(e){t.meshes.set(e.id,e)})):t.meshes.set(r.id,r)}))},e.prototype.resumeMaterials=function(e){e.forEach((function(e){var t=e.object;t.material=t.__prev__material__in__GPUPicker__,t.onBeforeRender=t.__prev__before__render__func__}))},e.prototype.updatePickingTexture=function(e,t,r){if(this.dirty){this.meshes.clear(),e.__immediateMode__=!0;var n=e.renderLists._get(t,r);this.changeMaterials(n.opaque),this.changeMaterials(n.transparent);var i=t.background,o=t.environment;t.background=null,t.environment=null;var a=e.shadowMap.enable;e.setRenderTarget(this.pickingTexture),e.clear(),e.render(t,r),e.shadowMap.enable=a,t.background=i,t.environment=o;var s=this.pickingTexture;e.readRenderTargetPixels(s,0,0,s.width,s.height,this.pixelBuffer),this.resumeMaterials(n.opaque),this.resumeMaterials(n.transparent),e.__immediateMode__=!1,this.dirty=!1}},e.prototype.pick=function(e,t){var r=this.pickingScene,n=this.pickingCamera,i=this.pickingRenderer;r&&n&&i&&this.updatePickingTexture(i.renderer,r,n);var o=this.pickingTexture.width,a=this.pickingTexture.height;if(e=Math.round(e),t=Math.round(t),e<0||e>=o)return null;if(t<0||t>=a)return null;var s=this.pixelBuffer,c=e+(a-t-1)*o,l=255*s[4*c+2]*255+255*s[4*c+1]+s[4*c+0];if(isNaN(l))return null;var u=this.meshes.get(l);return u||null},be()(e,[{key:"needsUpdate",set:function(e){e&&(this.dirty=!0)}}]),e}(),Le=r(/*! ../libs/three/build/three.module.js */"./src/libs/three/build/three.module.js"),Re=function(e){var t=document.createElement("iframe");if(t.src=e,t.style.border="none",null!==navigator.platform.match(/iP(hone|od|ad)/)){t.style.width="100%",t.style.height="100%";var r=document.createElement("div");return r.appendChild(t),r.style.overflow="scroll",r.style.webkitOverflowScrolling="touch",r}return t},Pe=function(e){var t=document.createElement("img");return t.src=e,t},Ce=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i()(this,e),this.domElement=null,this.planeSize=[1,.5625],this.mixer=null,this.object=null,this.node=null,this.init(t)}return e.prototype.buildNode=function(){var e=this;this.node=new Le.Scene,this.node.add(this.object),this.node.addEventListener("dispose",(function(){e.object.parent.remove(e.object),e.domElement=null,e.mixer=null,e.object=null,e.node=null})),this.node.domElement=this.domElement,this.mixer.scene.add(this.node)},e.prototype.init=function(e){this.domElement=e.domElement,this.mixer=e.mixer;var t=e.elementWidth;this.planeSize=$.Utils.parseValue(e.planeSize,this.planeSize);var r=(t=t)/this.aspectRatio,n=this.domElement.style;n.width=t+"px",n.height=r+"px",this.object=new f(this.domElement);var i=this.mixer.cssFactor;this.object.scale.set(1,1,1).multiplyScalar(i),this.buildNode()},be()(e,[{key:"aspectRatio",get:function(){return this.planeSize[0]/this.planeSize[1]}}]),e}(),je=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i()(this,e),this.scene=null,this.renderer=null,this.domElement=null,this.cssFactor=.001,this.init(t)}return e.prototype.init=function(e){this.domElement=e.domElement,this.scene=new Le.Scene,this.renderer=new v;var t=e.width,r=e.height;t&&r&&this.renderer.setSize(t,r);var n=this.renderer.domElement.style;n.position="absolute",n.top=0,this.domElement.appendChild(this.renderer.domElement)},e.prototype.resize=function(e,t){this.renderer.setSize(e,t)},e.prototype.render=function(e){var t=this.scene;t.children.length&&this.renderer.render(t,e)},e.prototype.createIframeObject=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.url;e.domElement=Re(t),e.mixer=this;var r=new Ce(e);return r.node},e.prototype.createImageObject=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.url;e.domElement=Pe(t),e.mixer=this;var r=new Ce(e);return r.node},e}(),Oe=function(){function e(t){return i()(this,e),this.maxCount=t,this.curIndex=0,this.deletedIndexs=[],this}return e.prototype.resize=function(e){this.maxCount=e},e.prototype.allocate=function(){return this.deletedIndexs.length>0?this.deletedIndexs.shift():this.isFull()?-1:this.curIndex++},e.prototype.free=function(e){this.deletedIndexs.push(e)},e.prototype.isFull=function(){return!(this.deletedIndexs.length>0)&&this.curIndex>=this.maxCount},be()(e,[{key:"freeNumber",get:function(){return this.deletedIndexs.length+(this.maxCount-this.curIndex)}},{key:"allocatedNumber",get:function(){return this.curIndex-this.deletedIndexs.length}}]),e}(),De=r(/*! ../libs/three/build/three.module.js */"./src/libs/three/build/three.module.js"),Ie=null,Ne=new De.Matrix4,Ue=new De.Vector3(1e-9,1e-9,1e-9),ze=function(){(Ie=new De.MeshDepthMaterial({depthPacking:De.RGBADepthPacking})).instancing=!0,ze=null},Fe=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,e),ze&&ze(),this.maxCount=0,this.indexAllocator=null,this.visibleAttributes=null,this.attributes={},this.originalGeometry=null,this.originalMaterial=null,this.mesh=null,this.meshes=new ye.a,this.init(t),this}return e.prototype.createInstancedBufferAttribute=function(e,t){t=t||new Float32Array(this.maxCount*e);var r=new De.InstancedBufferAttribute(t,e);return r.setUsage(De.DynamicDrawUsage),r},e.prototype.createInstancedMaterial=function(e){var t=void 0;return Array.isArray(e)?t=e.map((function(e){var t=e.clone();return t.instancing=!0,t})):(t=e.clone()).instancing=!0,t},e.prototype.createInstanceGeometry=function(e,t){if(!e.isBufferGeometry){var r=new De.BufferGeometry;r.fromGeometry(e),e=r}var n=new De.InstancedBufferGeometry;for(var i in n.maxInstancedCount=0,e.index&&(n.index=e.index),e.groups&&e.groups.length>0&&(n.groups=e.groups),e.attributes)n.setAttribute(i,e.attributes[i]);for(var o in this.attributes)n.setAttribute(o,this.attributes[o]);return t&&n.applyMatrix4(t),n},e.prototype.init=function(e){var t=e.geometry,r=e.material,n=e.matrixWorld;this.originalGeometry=t,this.originalMaterial=r,this.maxCount=e.maxCount||1024,this.visibleAttributes=new Int8Array(this.maxCount);for(var i=0;i<this.maxCount;i++)this.visibleAttributes[i]=!0;this.indexAllocator=new Oe(this.maxCount),this.attributes.instanceID=this.createInstancedBufferAttribute(1);var o=this.createInstanceGeometry(t,n),a=this.createInstancedMaterial(r);this.mesh=new De.InstancedMesh(o,a,this.maxCount),this.mesh.frustumCulled=!1,this.mesh.customDepthMaterial=Ie,this.mesh.castShadow=!0,this.mesh.receiveShadow=!0,this.mesh.userData.mainInstancedMesh=this,this.mesh.instanceMatrix.setUsage(De.DynamicDrawUsage)},e.prototype.isFull=function(){return this.indexAllocator.isFull()},e.prototype.allocate=function(e){var t=this.indexAllocator.allocate();return-1===t?-1:(this.mesh.geometry.maxInstancedCount=this.indexAllocator.allocatedNumber,this.meshes.set(t,e),t)},e.prototype.free=function(e){this.updateVisible(e,!1),this.indexAllocator.free(e),this.meshes.delete(e)},e.prototype.getVisible=function(e){return this.visibleAttributes[e]},e.prototype.updateVisible=function(e,t){this.visibleAttributes[e]=t},e.prototype.updateMatrixWorld=function(e,t){this.visibleAttributes[e]?this.mesh.setMatrixAt(e,t):(Ne.makeScale(Ue).multiply(t),this.mesh.setMatrixAt(e,Ne)),this.mesh.instanceMatrix.needsUpdate=!0},e.prototype.updateInstanceID=function(e,t){var r=this.attributes.instanceID;r.array[e]=t,r.needsUpdate=!0},e.prototype.addRef=function(){return this.refCount=this.refCount||1,this.refCount++,this.refCount},e.prototype.dispose=function(){return(void 0===this.refCount||(this.refCount--,!this.refCount))&&(this.mesh.dispose(),this.originalGeometry=null,this.originalMaterial=null,!0)},e}(),Be=r(/*! ../../libs/three/build/three.module.js */"./src/libs/three/build/three.module.js"),Ge=new ye.a;var Ve=function(){function e(){i()(this,e),this.textWidth=null,this.textHeight=null,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d")}return e.prototype.drawText=function(e,t){var r=this;this.ctx.font=t.font;var n=function(e){var t=Ge.get(e);if(!t){var r=document.getElementsByTagName("body")[0],n=document.createElement("div"),i=document.createTextNode("MÉq");n.appendChild(i),n.setAttribute("style","font:"+e+";position:absolute;top:0;left:0"),r.appendChild(n),t=n.offsetHeight,Ge.set(e,t),r.removeChild(n)}return t}(t.font),i=(e||"").toString().split("\n");this.textWidth=Math.max.apply(null,i.map((function(e){return Math.ceil(r.ctx.measureText(e).width)}))),this.textHeight=n+n*t.lineHeight*(i.length-1),this.canvas.width=Math.max(2,Be.Math.ceilPowerOfTwo(this.textWidth+2*t.horizontalPadding)),this.canvas.height=Math.max(2,Be.Math.ceilPowerOfTwo(this.textHeight+2*t.verticalPadding)),this.ctx.font=t.font,this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),t.backgroundColor&&(this.ctx.fillStyle=t.backgroundColor,this.ctx.fillRect(0,0,this.textWidth+2*t.horizontalPadding,this.textHeight+2*t.verticalPadding)),this.ctx.fillStyle=t.fillStyle,1===t.align[0]?this.ctx.textAlign="left":0===t.align[0]?this.ctx.textAlign="center":this.ctx.textAlign="right",this.ctx.textBaseline="top",this.ctx.shadowColor=t.shadowColor,this.ctx.shadowBlur=t.shadowBlur,this.ctx.shadowOffsetX=t.shadowOffsetX,this.ctx.shadowOffsetY=t.shadowOffsetY;for(var o=this.textWidth*(.5-.5*t.align[0]),a=.5*(n*t.lineHeight-n),s=0;s<i.length;s++)this.ctx.fillText(i[s],o+t.horizontalPadding,n*t.lineHeight*s+t.verticalPadding+a);return this.canvas},be()(e,[{key:"width",get:function(){return this.canvas.width}},{key:"height",get:function(){return this.canvas.height}}]),e}(),He=r(/*! ../../libs/three/build/three.module.js */"./src/libs/three/build/three.module.js"),ke=function(e){function t(){var r;i()(this,t);var n=we()(this,e.call(this));return n._align=[0,0],n._font="30px Arial",n._fillStyle="#FFFFFF",n._shadowColor="rgba(0, 0, 0, 0)",n._shadowBlur=0,n._shadowOffsetX=0,n._shadowOffsetY=0,n._lineHeight=1.2,n._backgroundColor="transparent",n._horizontalPadding=0,n._verticalPadding=0,n._align=[0,0],n._side=He.DoubleSide,n._antialias=!0,n._canvas=new Ve,n._texture=null,n._material=null,r=n,we()(n,r)}return Se()(t,e),t.prototype.init=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._align=[0,0],this._font=$.Utils.parseValue(e.font,this._font),this._fillStyle=$.Utils.parseValue(e.fillStyle,this._fillStyle),this._shadowColor=$.Utils.parseValue(e.shadowColor,this._shadowColor),this._shadowBlur=$.Utils.parseValue(e.shadowBlur,this._shadowBlur),this._shadowOffsetX=$.Utils.parseValue(e.shadowOffsetX,this._shadowOffsetX),this._shadowOffsetY=$.Utils.parseValue(e.shadowOffsetY,this._shadowOffsetY),this._lineHeight=$.Utils.parseValue(e.lineHeight,this._lineHeight),this._backgroundColor=$.Utils.parseValue(e.backgroundColor,this._backgroundColor),this._horizontalPadding=$.Utils.parseValue(e.horizontalPadding,this._horizontalPadding),this._verticalPadding=$.Utils.parseValue(e.verticalPadding,this._verticalPadding),this._align=$.Utils.parseValue(e.align,this._align),this._side=$.Utils.parseValue(e.side,this._side),this._antialias=$.Utils.parseValue(e.antialias,this._antialias),this._canvas=new Ve,this._texture=null,this.text=$.Utils.parseValue(e.text,"")},t.prototype.raycast=function(){},t.prototype.updateText=function(){},t.prototype.dispose=function(){this.texture&&this.texture.dispose()},t.prototype.applyAntiAlias=function(){!1===this.antialias&&(this.texture.magFilter=He.NearestFilter,this.texture.minFilter=He.LinearMipMapLinearFilter)},be()(t,[{key:"width",get:function(){return this.canvas.textWidth}},{key:"height",get:function(){return this.canvas.textHeight}},{key:"text",get:function(){return this._text},set:function(e){this._text!==e&&(this._text=e,this.updateText())}},{key:"font",get:function(){return this._font},set:function(e){this._font!==e&&(this._font=e,this.updateText())}},{key:"fillStyle",get:function(){return this._fillStyle},set:function(e){this._fillStyle!==e&&(this._fillStyle=e,this.updateText())}},{key:"align",get:function(){return this._align},set:function(e){this._align=e}}]),t}(He.Object3D),We=r(/*! ../../libs/three/build/three.module.js */"./src/libs/three/build/three.module.js"),qe=function(e){function t(r){var n;i()(this,t);var o=we()(this,e.call(this));return o._sprite=null,o.init(r),n=o,we()(o,n)}return Se()(t,e),t.prototype.updateText=function(){this._canvas.drawText(this._text,{font:this._font,fillStyle:this._fillStyle,shadowBlur:this._shadowBlur,shadowColor:this._shadowColor,shadowOffsetX:this._shadowOffsetX,shadowOffsetY:this._shadowOffsetY,lineHeight:this._lineHeight,align:this._align,backgroundColor:this._backgroundColor,horizontalPadding:this._horizontalPadding,verticalPadding:this._verticalPadding}),this.dispose(),this._texture=new We.Texture(this._canvas.canvas),this._texture.needsUpdate=!0,this.applyAntiAlias(),this._material?this._material.map=this._texture:this._material=new We.SpriteMaterial({map:this._texture}),this._sprite||(this._sprite=new We.Sprite(this._material),this.add(this._sprite)),this._sprite.scale.set(this._canvas.width,this._canvas.height,1),this.updateAlign()},t.prototype.updateAlign=function(){this._sprite&&(this._sprite.center.x=(.5-.5*this._align[0])*this._canvas.textWidth/this._canvas.width,this._sprite.center.y=1-(.5*this._align[1]+.5)*this._canvas.textHeight/this._canvas.height)},be()(t,[{key:"align",get:function(){return this._align},set:function(e){this._align=e,this.updateAlign()}}]),t}(ke),Xe=r(/*! ../../libs/three/build/three.module.js */"./src/libs/three/build/three.module.js"),Ye=function(e){function t(r){var n;i()(this,t);var o=we()(this,e.call(this));return o._mesh=null,o.init(r),n=o,we()(o,n)}return Se()(t,e),t.prototype.updateText=function(){this.dispose(),this._canvas.drawText(this._text,{font:this._font,fillStyle:this._fillStyle,shadowBlur:this._shadowBlur,shadowColor:this._shadowColor,shadowOffsetX:this._shadowOffsetX,shadowOffsetY:this._shadowOffsetY,lineHeight:this._lineHeight,align:this._align,backgroundColor:this._backgroundColor,horizontalPadding:this._horizontalPadding,verticalPadding:this._verticalPadding}),this._texture=new Xe.Texture(this._canvas.canvas),this._texture.needsUpdate=!0,this.applyAntiAlias(),this._material?this._material.map=this._texture:(this._material=new Xe.MeshBasicMaterial({map:this._texture,side:this._side}),this._material.transparent=!0),this._mesh||(this._geometry=new Xe.PlaneGeometry(this._canvas.width,this._canvas.height),this._mesh=new Xe.Mesh(this._geometry,this._material),this.add(this._mesh)),this._mesh.position.x=this._canvas.width/2-this._canvas.textWidth/2+this._canvas.textWidth/2*this._align[0],this._mesh.position.y=-this._canvas.height/2+this._canvas.textHeight/2*this._align[1],this._geometry.vertices[0].x=this._geometry.vertices[2].x=-this._canvas.width/2,this._geometry.vertices[1].x=this._geometry.vertices[3].x=this._canvas.width/2,this._geometry.vertices[0].y=this._geometry.vertices[1].y=this._canvas.height/2,this._geometry.vertices[2].y=this._geometry.vertices[3].y=-this._canvas.height/2,this._geometry.verticesNeedUpdate=!0},t}(ke),Ze=r(/*! ../../libs/three/build/three.module.js */"./src/libs/three/build/three.module.js"),Je=function(e){function t(){var r;i()(this,t);var n=we()(this,e.call(this));return n.texture=new Ze.Texture,n.sprite=null,r=n,we()(n,r)}return Se()(t,e),t.prototype.updateImage=function(e,t){var r=this.texture;if(r.image=e,r.needsUpdate=!0,this.sprite)this.sprite.material.map=this.texture;else{var n=new t({transparent:!0,map:this.texture});this.sprite=new Ze.Sprite(n),this.add(this.sprite)}},be()(t,[{key:"image",get:function(){return this.texture.image}}]),t}(Ze.Object3D),Ke=r(/*! ../../libs/three/build/three.module.js */"./src/libs/three/build/three.module.js"),Qe=function(e){function t(){var r;i()(this,t);var n=we()(this,e.call(this));return r=n,we()(n,r)}return Se()(t,e),t.prototype.updateImage=function(t){e.prototype.updateImage.call(this,t,Ke.SpriteMaterial)},t}(Je),$e=r(/*! ../../libs/three/build/three.module.js */"./src/libs/three/build/three.module.js"),et=function(e){function t(){var r;i()(this,t);var n=we()(this,e.call(this));return r=n,we()(n,r)}return Se()(t,e),t.prototype.updateImage=function(t){e.prototype.updateImage.call(this,t,$e.MeshBasicMaterial)},t}(Je),tt=r(/*! ../../libs/three/build/three.module.js */"./src/libs/three/build/three.module.js"),rt=function(e){function t(r){var n;i()(this,t);var o=we()(this,e.call(this));return o.points=[],n=o,we()(o,n)}return Se()(t,e),t.prototype.init=function(e){var t=e.points||[];t.length&&(this.points=t.map((function(e){return new tt.Vector3(e[0],e[1],e[2])})),this.onUpdatePoints())},t.prototype.onUpdatePoints=function(){},t.prototype.clearPoints=function(){this.points=[],this.onUpdatePoints()},t.prototype.insertPoint=function(e,t){var r=$.Utils.parseVector3(t);this.points.splice(e,0,r),this.onUpdatePoints()},t.prototype.addPoint=function(e){var t=$.Utils.parseVector3(e);return this.points.push(t),this.onUpdatePoints(),this.points.length-1},t.prototype.removePoint=function(e){return!(e<0||e>=this.points.length)&&(this.points.splice(e,1),this.onUpdatePoints(),!0)},t.prototype.setPoint=function(e,t){if(e<0||e>=this.points.length)return!1;if(!t)return!1;var r=$.Utils.parseVector3(t);return this.points[e].copy(r),this.onUpdatePoints(),!0},t.prototype.setPoints=function(e){this.points=e.map((function(e){return $.Utils.parseVector3(e)})),this.onUpdatePoints()},t.prototype.getPoint=function(e){return e<0||e>=this.points.length?null:this.points[e].clone()},be()(t,[{key:"length",get:function(){var e=this.points;if(e.length<=1)return 0;for(var t=0,r=1;r<e.length;r++){t+=e[r].distanceTo(e[r-1])}return t}}]),t}(tt.Object3D),nt=r(/*! ./three/build/three.module.js */"./src/libs/three/build/three.module.js"),it=function(){this.pos=new nt.Vector3,this.dir=new nt.Vector3,this.right=new nt.Vector3,this.up=new nt.Vector3,this.dist=0,this.widthScale=1};it.prototype.lerpPathPoints=function(e,t,r){this.pos.lerpVectors(e.pos,t.pos,r),this.dir.lerpVectors(e.dir,t.dir,r),this.up.lerpVectors(e.up,t.up,r),this.right.lerpVectors(e.right,t.right,r),this.dist=(t.dist-e.dist)*r+e.dist,this.widthScale=(t.widthScale-e.widthScale)*r+e.widthScale},it.prototype.copy=function(e){this.pos.copy(e.pos),this.dir.copy(e.dir),this.up.copy(e.up),this.right.copy(e.right),this.dist=e.dist,this.widthScale=e.widthScale};var ot=function(){this.array=[],this.count=0};ot.prototype.set=function(e,t,r,n,i){if((e=e.slice(0)).length<2)return this.count=0,void console.warn("PathPointList: points length less than 2.");t=void 0!==t?t:.1,r=void 0!==r?r:10,(i=void 0!==i&&i)&&!e[0].equals(e[e.length-1])&&e.push((new nt.Vector3).copy(e[0]));for(var o=0,a=e.length;o<a;o++)if(0===o)this._start(e[o],e[o+1],n);else if(o===a-1)if(i){this._corner(e[o],e[1],t,r,n);var s=this.array[0].dist;this.array[0].copy(this.array[this.count-1]),this.array[0].dist=s}else this._end(e[o]);else this._corner(e[o],e[o+1],t,r,n)},ot.prototype.distance=function(){return 0==this.count?0:this.array[this.count-1].dist},ot.prototype._start=function(e,t,r){this.count=0;var n=this._getByIndex(this.count);if(n.pos.copy(e),n.dir.subVectors(t,e),r)n.up.copy(r);else{var i=Number.MAX_VALUE,o=Math.abs(n.dir.x),a=Math.abs(n.dir.y),s=Math.abs(n.dir.z);o<i&&(i=o,n.up.set(1,0,0)),a<i&&(i=a,n.up.set(0,1,0)),s<i&&n.up.set(0,0,1)}n.right.crossVectors(n.dir,n.up).normalize(),n.up.crossVectors(n.right,n.dir).normalize(),n.dist=0,n.widthScale=1,n.dir.normalize(),this.count++};var at=new nt.Vector3,st=new nt.Vector3,ct=new nt.Vector3,lt=new nt.Matrix4,ut=new nt.QuadraticBezierCurve3;ot.prototype._corner=function(e,t,r,n,i){if(r>0&&n>0){for(var o=this.array[this.count-1],a=this._getCornerBezierCurve(o.pos,e,t,r,ut).getPoints(n),s=0;s<n;s+=1)this._hardCorner(a[s],a[s+1],i);a[n].equals(t)||this._hardCorner(a[n],t,i)}else this._hardCorner(e,t,i)},ot.prototype._hardCorner=function(e,t,r){var n=this.array[this.count-1],i=this._getByIndex(this.count),o=at.subVectors(e,n.pos),a=st.subVectors(t,e),s=o.length();if(o.normalize(),a.normalize(),i.pos.copy(e),i.dir.addVectors(o,a),i.dir.normalize(),r)1===i.dir.dot(r)?i.right.crossVectors(a,r).normalize():i.right.crossVectors(i.dir,r).normalize(),i.up.crossVectors(i.right,i.dir).normalize();else{i.up.copy(n.up);var c=ct.crossVectors(n.dir,i.dir);if(c.length()>Number.EPSILON){c.normalize();var l=Math.acos(Math.min(Math.max(n.dir.dot(i.dir),-1),1));i.up.applyMatrix4(lt.makeRotationAxis(c,l))}i.right.crossVectors(i.dir,i.up).normalize()}i.dist=n.dist+s;var u=o.dot(a);i.widthScale=Math.min(1/Math.sqrt((1+u)/2),1.414213562373)||1,this.count++},ot.prototype._end=function(e){var t=this.array[this.count-1],r=this._getByIndex(this.count);r.pos.copy(e),r.dir.subVectors(e,t.pos);var n=r.dir.length();r.dir.normalize(),r.up.copy(t.up);var i=at.crossVectors(t.dir,r.dir);if(i.length()>Number.EPSILON){i.normalize();var o=Math.acos(Math.min(Math.max(t.dir.dot(r.dir),-1),1));r.up.applyMatrix4(lt.makeRotationAxis(i,o))}r.right.crossVectors(r.dir,r.up).normalize(),r.dist=t.dist+n,r.widthScale=1,this.count++},ot.prototype._getByIndex=function(e){return this.array[e]||(this.array[e]=new it),this.array[e]},ot.prototype._getCornerBezierCurve=function(e,t,r,n,i){var o=at.subVectors(t,e),a=st.subVectors(r,t),s=o.length(),c=a.length();return o.normalize(),a.normalize(),s>n?i.v0.copy(t).sub(o.multiplyScalar(n)):i.v0.copy(e),i.v1.copy(t),c>n?i.v2.copy(t).add(a.multiplyScalar(n)):i.v2.copy(r),i};var ht=function(){this._drawing=!1,this._includeDrawingPoint=!1,this._points=[],this._lastPoint=new nt.Vector3,this._lastFixedPoint=new nt.Vector3,this.fixRadius=.5,this.height=.1,this._cornerRadius=.2,this._cornerSplit=10,this._pathPointList=new ot,this._dirty=!0,this.up=new nt.Vector3(0,1,0)};Object.defineProperty(ht.prototype,"cornerRadius",{set:function(e){this._cornerRadius=e,this._dirty=!0},get:function(){return this._cornerRadius}}),Object.defineProperty(ht.prototype,"cornerSplit",{set:function(e){this._cornerSplit=e,this._dirty=!0},get:function(){return this._cornerSplit}}),ht.prototype.getPoints=function(){if(this._includeDrawingPoint&&(this._points.pop(),this._includeDrawingPoint=!1),this._drawing&&this._points.length>0){var e=this._getLastFixedPoint();e&&(this._points.push(e),this._includeDrawingPoint=!0)}return this._points},ht.prototype.getPathPointList=function(){return(this._drawing||this._dirty)&&(this._pathPointList.set(this.getPoints(),this._cornerRadius,this._cornerSplit,this.up),this._dirty=!1),this._pathPointList},ht.prototype.update=function(e){this._lastPoint.copy(e),this._lastPoint.y+=this.height},ht.prototype.confirm=function(){this._drawing=!0;var e=this._getLastFixedPoint();e&&(this._includeDrawingPoint&&(this._points.pop(),this._includeDrawingPoint=!1),this._points.push(e.clone())),this._dirty=!0},ht.prototype.start=function(){this._drawing=!0,this._dirty=!0},ht.prototype.stop=function(){this._drawing=!1,this._dirty=!0},ht.prototype.clear=function(){this._drawing=!1,this._includeDrawingPoint=!1,this._points=[],this._dirty=!0};var dt=new nt.Vector3;var pt=new nt.Vector3,ft=new nt.Vector3;ht.prototype._getLastFixedPoint=function(){if(this._lastFixedPoint.copy(this._lastPoint),this._points.length>0){var e=this._includeDrawingPoint?this._points[this._points.length-2]:this._points[this._points.length-1];if(r=e,n=this._lastFixedPoint,dt.copy(n).sub(r).length()<this.fixRadius&&(dt.normalize().multiplyScalar(this.fixRadius),this._lastFixedPoint.copy(e).add(dt)),this._includeDrawingPoint?this._points.length>2:this._points.length>1){var t=this._includeDrawingPoint?this._points[this._points.length-3]:this._points[this._points.length-2];if(pt.subVectors(e,t),ft.subVectors(this._lastFixedPoint,e),pt.normalize(),ft.normalize(),pt.multiplyScalar(-1).dot(ft)>.99)return null}}var r,n;return this._lastFixedPoint};var mt=function(e){nt.BufferGeometry.call(this),e=e||3e3,this.setAttribute?(this.setAttribute("position",new nt.BufferAttribute(new Float32Array(3*e),3).setUsage(nt.DynamicDrawUsage)),this.setAttribute("normal",new nt.BufferAttribute(new Float32Array(3*e),3).setUsage(nt.DynamicDrawUsage)),this.setAttribute("uv",new nt.BufferAttribute(new Float32Array(2*e),2).setUsage(nt.DynamicDrawUsage))):(this.addAttribute("position",new nt.BufferAttribute(new Float32Array(3*e),3).setDynamic(!0)),this.addAttribute("normal",new nt.BufferAttribute(new Float32Array(3*e),3).setDynamic(!0)),this.addAttribute("uv",new nt.BufferAttribute(new Float32Array(2*e),2).setDynamic(!0))),this.drawRange.start=0,this.drawRange.count=0};mt.prototype=Object.assign(Object.create(nt.BufferGeometry.prototype),{constructor:mt,update:function(e,t){t=t||{};var r=this._updateAttributes(e,t);this.drawRange.count=r},_resizeAttribute:function(e,t,r){for(;t.array.length<r;){var n=t.array.length,i=new nt.BufferAttribute(new Float32Array(2*n),t.itemSize,t.normalized);i.name=t.name,i.usage=t.usage,this.setAttribute?this.setAttribute(e,i):this.addAttribute(e,i),t=i}},_updateAttributes:function(e,t){var r=t.width||.1,n=void 0!==t.progress?t.progress:1,i=void 0===t.arrow||t.arrow,o=void 0!==t.side?t.side:"both",a=0,s=[],c=[],l=[],u=new nt.Vector3,h=new nt.Vector3;function d(e,t,r){e.dir;var n=e.up,i=e.right;"left"!==o?u.copy(i).multiplyScalar(t*e.widthScale):u.set(0,0,0),"right"!==o?h.copy(i).multiplyScalar(-t*e.widthScale):h.set(0,0,0),u.add(e.pos),h.add(e.pos),s.push(h.x,h.y,h.z,u.x,u.y,u.z),c.push(n.x,n.y,n.z,n.x,n.y,n.z),l.push(r,0,r,1),a+=2}var p=new nt.Vector3;var f=e.distance();if(0==f)return 0;var m,g=n*f;if(g>0)for(var v=0;v<e.count;v++){var y=e.array[v];if(y.dist>g){var _=e.array[v-1];m=new it;var b=(g-_.dist)/(y.dist-_.dist);m.lerpPathPoints(_,y,b),d(m,r/2,m.dist/("both"!==o?r/2:r));break}d(y,r/2,y.dist/("both"!==o?r/2:r))}else m=e.array[0];i&&function(e,t,r){var n=e.dir,i=e.up,d=e.right;"left"!==o?u.copy(d).multiplyScalar(2*t):u.set(0,0,0),"right"!==o?h.copy(d).multiplyScalar(2*-t):h.set(0,0,0),p.copy(n).setLength(3*t),u.add(e.pos),h.add(e.pos),p.add(e.pos),s.push(h.x,h.y,h.z,u.x,u.y,u.z,p.x,p.y,p.z),c.push(i.x,i.y,i.z,i.x,i.y,i.z,i.x,i.y,i.z),l.push(r,"both"!==o?"right"!==o?-2:0:-.5,r,"both"!==o?"left"!==o?2:0:1.5,r+3*t/("both"!==o?t:2*t),"both"!==o?0:.5),a+=3}(m=m||e.array[e.count-1],r/2,m.dist/("both"!==o?r/2:r));var x=this.getAttribute("position"),w=this.getAttribute("normal"),M=this.getAttribute("uv");return this._resizeAttribute("position",x,s.length),this._resizeAttribute("normal",w,c.length),this._resizeAttribute("uv",M,l.length),x=this.getAttribute("position"),w=this.getAttribute("normal"),M=this.getAttribute("uv"),x.array.set(s,0),w.array.set(c,0),M.array.set(l,0),x.updateRange.count=s.length,w.updateRange.count=c.length,M.updateRange.count=l.length,x.needsUpdate=!0,w.needsUpdate=!0,M.needsUpdate=!0,a}});var gt=function(e){mt.call(this,e||1e3),this.setIndex(new Array(2*(e||1e3)))};gt.prototype=Object.assign(Object.create(mt.prototype),{constructor:gt,_resizeIndex:function(e,t){for(;e.array.length<t;){var r=e.array.length,n=new nt.BufferAttribute(2*r>65535?new Uint32Array(2*r):new Uint16Array(2*r),1);n.name=e.name,n.usage=e.usage,this.setIndex(n),e=n}},_updateAttributes:function(e,t){var r=t.radius||.1,n=t.radialSegments||8;n=Math.max(2,n);var i=t.startRad||0,o=void 0!==t.progress?t.progress:1,a=0,s=[],c=[],l=[],u=[],h=0,d=new nt.Vector3;function p(e,t,r,n){for(var o=0===s.length,p=0;p<=r;p++){var f=p;f==r&&(f=0),d.copy(e.up).applyAxisAngle(e.dir,i+2*Math.PI*f/r).normalize(),s.push(e.pos.x+d.x*t*e.widthScale,e.pos.y+d.y*t*e.widthScale,e.pos.z+d.z*t*e.widthScale),c.push(d.x,d.y,d.z),l.push(n,p/r),h++}if(!o)for(var m=h-2*(r+1),g=h-(r+1),v=0;v<r;v++)u.push(g+v,m+v,m+v+1,g+v,m+v+1,g+v+1),a+=6}var f=o*e.distance();if(0==f)return 0;if(f>0)for(var m=0;m<e.count;m++){var g=e.array[m];if(g.dist>f){var v=e.array[m-1],y=new it,_=(f-v.dist)/(g.dist-v.dist);y.lerpPathPoints(v,g,_),p(y,r,n,y.dist/(2*r*Math.PI));break}p(g,r,n,g.dist/(2*r*Math.PI))}var b=this.getAttribute("position"),x=this.getAttribute("normal"),w=this.getAttribute("uv"),M=this.getIndex();return this._resizeAttribute("position",b,s.length),this._resizeAttribute("normal",x,c.length),this._resizeAttribute("uv",w,l.length),this._resizeIndex(M,u.length),b=this.getAttribute("position"),x=this.getAttribute("normal"),w=this.getAttribute("uv"),M=this.getIndex(),b.array.set(s,0),x.array.set(c,0),w.array.set(l,0),M.set(u,0),b.updateRange.count=s.length,x.updateRange.count=c.length,w.updateRange.count=l.length,M.updateRange.count=u.length,b.needsUpdate=!0,x.needsUpdate=!0,w.needsUpdate=!0,M.needsUpdate=!0,a}});var vt=r(/*! ../../libs/three/build/three.module.js */"./src/libs/three/build/three.module.js"),yt=function(e){function t(r){var n;i()(this,t);var o=we()(this,e.call(this,r));return o.pathTexture=null,o.pathWidth=$.Utils.parseValue(r.width,1),o.pathCornerRadius=$.Utils.parseValue(r.cornerRadius,.3),o.pathCornerSegments=$.Utils.parseValue(r.cornerSegments,10),o.pathPointList=null,o.pathGeometry=null,o.pathLine=null,n=o,we()(o,n)}return Se()(t,e),t.prototype.onUpdatePoints=function(){var e=this.points;if(!e.length)return!1;this.pathPointList=this.pathPointList||new ot;var t=new vt.Vector3(0,1,0);return this.pathPointList.set(e,this.pathCornerRadius,this.pathCornerSegments,t),!0},be()(t,[{key:"texture",get:function(){var e=this.pathLine;if(!e)return null;var t=e.material;return t?t.map:null},set:function(e){var t=this.pathLine;if(t){var r=t.material;r&&(r.map=e,r.map.wrapS=vt.RepeatWrapping,r.map.wrapT=vt.RepeatWrapping,r.needsUpdate=!0)}}},{key:"width",get:function(){return this.pathWidth},set:function(e){this.pathWidth=e,this.onUpdatePoints()}},{key:"cornerRadius",get:function(){return this.pathCornerRadius},set:function(e){this.pathCornerRadius=e,this.onUpdatePoints()}},{key:"cornerSegments",get:function(){return this.pathCornerSegments},set:function(e){this.pathCornerSegments=e,this.onUpdatePoints()}}]),t}(rt),_t=r(/*! ../../libs/three/build/three.module.js */"./src/libs/three/build/three.module.js"),bt=r(/*! ../../libs/three/examples/jsm/utils/BufferGeometryUtils.js */"./src/libs/three/examples/jsm/utils/BufferGeometryUtils.js").BufferGeometryUtils,xt=function(e){function t(r){var n;i()(this,t);var o=we()(this,e.call(this,r));return o.pathArrowCaption=$.Utils.parseValue(r.arrowCaption,!0),o.pathSide=$.Utils.parseValue(r.side,"both"),o.pathProgress=$.Utils.parseValue(r.progress,1),o.pathGeometry=null,o.init(r),n=o,we()(o,n)}return Se()(t,e),t.prototype.updatePathGeometry=function(){this.pathGeometry=this.pathGeometry||new mt,this.pathGeometry.update(this.pathPointList,{width:this.pathWidth,arrow:this.pathArrowCaption,side:this.pathSide,progress:this.pathProgress}),this.pathGeometry.computeBoundingSphere()},t.prototype.onUpdatePoints=function(){if(!e.prototype.onUpdatePoints.call(this))return!1;if(this.updatePathGeometry(),!this.pathLine){var t=new _t.MeshBasicMaterial({transparent:!0});this.pathGeometry=bt.toTrianglesDrawMode(this.pathGeometry,_t.TriangleStripDrawMode),this.pathLine=new _t.Mesh(this.pathGeometry,t),this.add(this.pathLine)}return!0},be()(t,[{key:"progress",set:function(e){this.pathProgress=e,this.updatePathGeometry()}},{key:"arrowCaption",set:function(e){this.pathArrowCaption=e,this.updatePathGeometry()},get:function(){return this.pathArrowCaption}}]),t}(yt),wt=r(/*! ../../libs/three/build/three.module.js */"./src/libs/three/build/three.module.js"),Mt=function(e){function t(r){var n;i()(this,t);var o=we()(this,e.call(this,r));return o.pathWidth=$.Utils.parseValue(r.width,.2),o.pathRadialSegments=$.Utils.parseValue(r.radialSegments,8),o.pathStartRad=$.Utils.parseValue(r.startRad,8),o.pathProgress=$.Utils.parseValue(r.progress,1),o.pathGeometry=null,o.init(r),n=o,we()(o,n)}return Se()(t,e),t.prototype.updatePathGeometry=function(){this.pathGeometry=this.pathGeometry||new gt,this.pathGeometry.update(this.pathPointList,{radius:this.pathWidth,radialSegments:this.pathRadialSegments,startRad:this.pathStartRad,progress:this.pathProgress}),this.pathGeometry.computeBoundingSphere()},t.prototype.onUpdatePoints=function(){if(!e.prototype.onUpdatePoints.call(this))return!1;if(this.updatePathGeometry(),!this.pathLine){var t=new wt.MeshBasicMaterial({transparent:!0});this.pathLine=new wt.Mesh(this.pathGeometry,t),this.add(this.pathLine)}return!0},be()(t,[{key:"progress",set:function(e){this.pathProgress=e,this.updatePathGeometry()}},{key:"radialSegments",get:function(){return this.pathRadialSegments},set:function(e){this.pathRadialSegments=e,this.updatePathGeometry()}}]),t}(yt),St=r(/*! ../../libs/three/build/three.module.js */"./src/libs/three/build/three.module.js"),Tt=function(e){function t(r){var n;i()(this,t);var o=we()(this,e.call(this,r));return o.pathProgress=$.Utils.parseValue(r.progress,1),o.pathGeometry=null,o.init(r),n=o,we()(o,n)}return Se()(t,e),t.prototype.updatePathGeometry=function(){var e=this.points;if(!e.length)return!1;if(this.pathGeometry=this.pathGeometry||new St.BufferGeometry,this.pathGeometry.setFromPoints(e),!this.pathLine){var t=new St.LineBasicMaterial({transparent:!0});this.pathLine=new St.Line(this.pathGeometry,t),this.add(this.pathLine)}return this.pathLine.computeLineDistances(),!0},t.prototype.onUpdatePoints=function(){e.prototype.onUpdatePoints.call(this),this.updatePathGeometry()},be()(t,[{key:"progress",set:function(e){this.pathProgress=e,this.updatePathGeometry()}}]),t}(rt),Et={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","\tvec4 texel = texture2D( tDiffuse, vUv );","\tgl_FragColor = opacity * texel;","}"].join("\n")},At=r("./node_modules/babel-runtime/core-js/object/assign.js"),Lt=r.n(At),Rt=r(/*! ../libs/three/build/three.module.js */"./src/libs/three/build/three.module.js"),Pt=new Rt.OrthographicCamera(-1,1,1,-1,0,1),Ct=new Rt.Scene,jt=new Rt.Mesh(new Rt.PlaneBufferGeometry(2,2),null);jt.frustumCulled=!1,Ct.add(jt);var Ot=new Rt.Color,Dt=function(){function e(t,r,n,o){i()(this,e),this.clear=!0,this.clearColor=new Rt.Color(0,0,0),this.clearAlpha=1,this.textureID=void 0!==r?r:"tDiffuse",this.resolutionID=void 0!==n?n:"resolution",this.resolutionScaler=void 0!==o?o:1,t instanceof Rt.ShaderMaterial?(this.uniforms=t.uniforms,this.material=t):t&&(this.uniforms=Rt.UniformsUtils.clone(t.uniforms),this.material=new Rt.ShaderMaterial({defines:Lt()({},t.defines),uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader}))}return e.prototype.setSize=function(e,t){this.uniforms[this.resolutionID]&&this.uniforms[this.resolutionID].value.set(this.resolutionScaler/e,this.resolutionScaler/t)},e.prototype.render=function(e,t,r){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=r.texture);var n=e.getClearAlpha(),i=e.autoClear;e.autoClear=!1,this.clear&&(Ot.copy(e.getClearColor()),e.setClearColor(this.clearColor,this.clearAlpha)),jt.material=this.material,e.setRenderTarget(void 0!==t?t:null),this.clear&&e.clear(),e.render(Ct,Pt),this.clear&&e.setClearColor(Ot,n),e.autoClear=i},e}(),It=r(/*! ../../libs/three/build/three.module.js */"./src/libs/three/build/three.module.js"),Nt=function(e,t){return e.isSpriteMaterial?t.sprite:e.instancing?t.instancing:t.normal},Ut=function(e,t){var r=t.mode;if("simpleUV"==r){if(function(e){return!e.isShaderMaterial}(e)&&(n=function(e,t){var r=Nt(e,t),n=e.map;return n?r[n.wrapS]||r[n.wrapT]:r[It.RepeatWrapping]}(e,i=t.overrideMaterials)))return n}else if("wireframe"==r&&function(e){return!e.isShaderMaterial&&(!e.isLineBasicMaterial&&!e.isLineDashedMaterial)}(e)){var n,i=t.wireframeOverrideMaterials;if(n=Nt(e,i))return n}return e},zt=new It.Vector3,Ft=function(){function e(){return i()(this,e),this.sceneInfo=this.buildSceneInfo(),this.singleStepInfo=this.buildSingleStepInfo(),this.materialInfo=this.buildMaterialInfo(),this.lightInfo=this.buildLightInfo(),this.processLightFunctions(),this}return e.prototype.buildDiffuseTextureCanvas=function(){var e=10,t=10,r=128/e,n=128/t,i=["rgb(64,0,0)","rgb(0,0,64)"],o=document.createElement("canvas");o.width=128,o.height=128;for(var a=o.getContext("2d"),s=0;s<t;s++)for(var c=0;c<e;c++)a.fillStyle=i[(c+s)%2],a.fillRect(c*r,s*n,r,n);return o},e.prototype.buildSceneInfo=function(){return{visible:!0,distance:0}},e.prototype.buildSingleStepInfo=function(){var e={transparent:!0,depthTest:!1,side:It.DoubleSide},t={enable:!1,interval:1e3,renderableNodes:[],renderableScenes:[],flickerTimes:6,flickerMaterials:{normal:new It.MeshBasicMaterial(e),instancing:new It.MeshBasicMaterial(e),sprite:new It.SpriteMaterial(e)}};return t.flickerMaterials.instancing.instancing=!0,Object.defineProperty(t,"flickerInterval",{get:function(){return this.interval/this.flickerTimes}}),t},e.prototype.buildMaterialInfo=function(){var e=this.buildDiffuseTextureCanvas(),t={};t[It.RepeatWrapping]=new It.Texture(e),t[It.RepeatWrapping].wrapS=It.RepeatWrapping,t[It.RepeatWrapping].wrapT=It.RepeatWrapping,t[It.RepeatWrapping].needsUpdate=!0,t[It.ClampToEdgeWrapping]=new It.Texture(e),t[It.ClampToEdgeWrapping].wrapS=It.ClampToEdgeWrapping,t[It.ClampToEdgeWrapping].wrapT=It.ClampToEdgeWrapping,t[It.ClampToEdgeWrapping].needsUpdate=!0,t[It.MirroredRepeatWrapping]=new It.Texture(e),t[It.MirroredRepeatWrapping].wrapS=It.MirroredRepeatWrapping,t[It.MirroredRepeatWrapping].wrapT=It.MirroredRepeatWrapping,t[It.MirroredRepeatWrapping].needsUpdate=!0;var r={enable:!1,mode:"default",precision:"default",overrideMaterials:{normal:{},instancing:{},sprite:{}},wireframeColor:16777215,wireframeOverrideMaterials:{normal:new It.MeshBasicMaterial({wireframe:!0}),instancing:new It.MeshBasicMaterial({wireframe:!0})}},n=r.overrideMaterials;return n.normal[It.RepeatWrapping]=new It.MeshBasicMaterial({map:t[It.RepeatWrapping]}),n.normal[It.ClampToEdgeWrapping]=new It.MeshBasicMaterial({map:t[It.ClampToEdgeWrapping]}),n.normal[It.MirroredRepeatWrapping]=new It.MeshBasicMaterial({map:t[It.MirroredRepeatWrapping]}),n.instancing[It.RepeatWrapping]=new It.MeshBasicMaterial({map:t[It.RepeatWrapping]}),n.instancing[It.RepeatWrapping].instancing=!0,n.instancing[It.ClampToEdgeWrapping]=new It.MeshBasicMaterial({map:t[It.ClampToEdgeWrapping]}),n.instancing[It.ClampToEdgeWrapping].instancing=!0,n.instancing[It.MirroredRepeatWrapping]=new It.MeshBasicMaterial({map:t[It.MirroredRepeatWrapping]}),n.instancing[It.MirroredRepeatWrapping].instancing=!0,n.sprite[It.RepeatWrapping]=new It.SpriteMaterial({map:t[It.RepeatWrapping]}),n.sprite[It.ClampToEdgeWrapping]=new It.SpriteMaterial({map:t[It.ClampToEdgeWrapping]}),n.sprite[It.MirroredRepeatWrapping]=new It.SpriteMaterial({map:t[It.MirroredRepeatWrapping]}),r},e.prototype.buildLightInfo=function(){return{enable:!0,helper:!1,shadow:!0,lights:[],helpers:[],onOutputLog:function(){},onAddLight:function(){},onRemoveLight:function(){}}},e.prototype.createLightHelper=function(e){var t=null;return e.isDirectionalLight?t=new It.DirectionalLightHelper(e):e.isPointLight?t=new It.PointLightHelper(e):e.isSpotLight?t=new It.SpotLightHelper(e):e.HemisphereLight&&(t=new It.HemisphereLightHelper(e)),t&&(t.visible=!1,e.add(t)),t},e.prototype.deleteLightHelper=function(e){e&&e.parent&&(e.parent.remove(e),e.dispose())},e.prototype.getRoot=function(e){var t=e.parent;if(!t)return e;for(;t.parent;)t=t.parent;return t},e.prototype.traverseLight=function(e,t){e.traverse((function(e){e.isLight&&t(e)}))},e.prototype.processLightFunctions=function(){var e=this,t=It.Object3D.prototype.dispatchEvent;It.Object3D.prototype.dispatchEvent=function(r){var n=this;!function(t,r,n){var i=e.getRoot(t).userData.hookers;if(i){var o=i.light;if(o){var a=r.type;if("added"==a){var s=o.onAddLight;$.Utils.isFunction(s)&&n(s)}else if("removed"==a){var c=o.onRemoveLight;$.Utils.isFunction(c)&&n(c)}}}}(this,r,(function(t){e.traverseLight(n,(function(e){t(e)}))})),t.call(this,r)}},e.prototype.processScene=function(e){var t=this.sceneInfo;e.visible=t.visible,this.processSceneHookers(e),this.processSceneLights(e)},e.prototype.processSceneHookers=function(e){var t=this,r=e.userData,n=r.hookers;if(!n){n={},r.hookers=n;var i=this.lightInfo,o=i.lights,a=i.helpers;n.light={helper:!1,onAddLight:function(e){o.push(e);var r=t.createLightHelper(e);a.push(r),i.onAddLight(e)},onRemoveLight:function(e){var r=o.indexOf(e);-1!==r&&(o.splice(r,1),t.deleteLightHelper(a[r]),a.splice(r,1)),i.onRemoveLight(e)}},this.traverseLight(e,(function(e){n.light.onAddLight(e)}))}},e.prototype.processSceneLights=function(e){var t=this.lightInfo,r=t.helpers,n=e.userData.hookers.light;t.helper?n.helper?r.forEach((function(e){e&&(e.visible=!0)})):(n.helper=!0,r.forEach((function(e){e&&e.update()}))):n.helper&&(n.helper=!1,r.forEach((function(e){e&&(e.visible=!1)})))},e.prototype.processRenderer=function(e){var t=this,r=this.sceneInfo,n=this.materialInfo,i=this.lightInfo,o=[],a=function(e,t,n){if("BackgroundCubeMaterial"!=n.material.type&&(0!==r.distance&&(zt.setFromMatrixPosition(n.matrixWorld),zt.distanceTo(t.position)>r.distance)))return!1;return!0},s=e.renderStates.get;e.renderStates._get=e.renderStates.get,e.renderStates.get=function(e,t){var r=s.call(this,e,t);return r.__prev_pushLight__=r.__prev_pushLight__||r.pushLight,r.pushLight=function(e){i.enable&&r.__prev_pushLight__.call(r,e)},r.__prev_pushShadow__=r.__prev_pushShadow__||r.pushShadow,r.pushShadow=function(e){if(!i.shadow)return e.castShadow=!1,void o.push(e);r.__prev_pushShadow__.call(r,e)},r};var c=e.renderLists.get;e.renderLists._get=e.renderLists.get,e.renderLists.get=function(t,r){var i=c.call(this,t,r);return i.__prev_push__=i.__prev_push__||i.push,i.push=function(e,t,o,s,c,l){if(a(0,r,e)){var u=Ut(o,n);i.__prev_push__.call(i,e,t,u,s,c,l)}},i.__prev_unshift__=i.__prev_unshift__||i.unshift,i.unshift=function(e,t,o,s,c,l){if(a(0,r,e)){var u=Ut(o,n);i.__prev_unshift__.call(i,e,t,u,s,c,l)}},e.__immediateMode__&&(i.__prev_init__=i.init,i.init=function(){},i.__prev_sort__=i.sort,i.sort=function(){}),i};var l=e.render;return e.render=function(r,n){if(t.processScene(r),this.__immediateMode__&&(e.__prev_sortObjects__=e.sortObjects,e.sortObjects=!1,r.__prev_visible__=r.visible,r.visible=!1,r.__prev_autoUpdate__=r.autoUpdate,r.autoUpdate=!1),l.call(this,r,n),o.forEach((function(e){e.castShadow=!0})),o.length=0,this.__immediateMode__){var i=c.call(this,r,n);r.visible=r.__prev_visible__,r.autoUpdate=r.__prev_autoUpdate__,i.init=i.__prev_init__,i.sort=i.__prev_sort__,this.sortObjects=this.__prev_sortObjects__,this.__immediateMode__=!1}},e},e.prototype.getFlickerMaterial=function(e,t,r){var n=this.singleStepInfo.flickerMaterials,i=(r=t.isInstancedMesh?n.instancing:r.isSpriteMaterial?n.sprite:n.normal).color;return 0===e?(i.r=1,i.g=0,i.b=0):(i.r=0,i.g=1,i.b=0),r},e.prototype.resumeNode=function(e){e.__render_debug_prevBeforeRender__&&(e.onBeforeRender=e.__render_debug_prevBeforeRender__,delete e.__render_debug_prevBeforeRender__),e.__render_debug_prevMaterial__&&(e.material=e.__render_debug_prevMaterial__,delete e.__render_debug_prevMaterial__)},e.prototype.enableSingleStep=function(e){var t=this,r=this.singleStepInfo;(r.enable=e,e)||(r.renderableNodes.forEach((function(e){e.node.visible=e.prevVisible})),THING.App.current.root.node.traverseRenderableNodes((function(e){t.resumeNode(e)})));r.renderableNodes=[],r.renderableScenes=[]},e.prototype.processSingleStep=function(e){var t=this.singleStepInfo,r=t.renderableNodes,n=t.renderableScenes;if(r.length){var i=r[0],o=i.node;i.startTime=i.startTime||$.Utils.getCurrentTime();var a=$.Utils.getElapsedTime(i.startTime)/t.flickerInterval,s=Math.floor(a%2);if(o.visible=!0,o.__render_debug_prevMaterial__=o.__render_debug_prevMaterial__||o.material,$.Utils.isArray(o.material))for(var c=0;c<o.material.length;c++)o.material[c]=this.getFlickerMaterial(s,o,o.material[c]);else o.material=this.getFlickerMaterial(s,o,o.material);a>=t.flickerTimes&&(this.resumeNode(o),r.shift())}else n.forEach((function(e){e.traverseRenderableNodes((function(e){e.__render_debug_prevBeforeRender__||(e.__render_debug_prevBeforeRender__=e.onBeforeRender,e.onBeforeRender=function(){r.push({node:this,prevVisible:this.visible}),this.visible=!1,this.__render_debug_prevBeforeRender__&&(this.onBeforeRender=this.__render_debug_prevBeforeRender__,delete this.__render_debug_prevBeforeRender__)})}))})),n.length=0;-1===(s=n.indexOf(e))&&n.push(e)},e.prototype.processMaterialPrecision=function(e){var t=this.materialInfo,r=t.precision;r&&("default"==r&&(r=""),t.precision="",e.getMaterials().forEach((function(e){e.precision=r,e.needsUpdate=!0})))},e.prototype.setMaterialMode=function(e){this.materialInfo.mode=e},e.prototype.setMaterialWireframeColor=function(e){var t=this.materialInfo;t.wireframeColor=r;var r=$.Utils.parseColor(e),n=t.wireframeOverrideMaterials;for(var i in n)n[i].color=r},e.prototype.setMaterialPrecision=function(e){this.materialInfo.precision=e},e.prototype.enableLight=function(e){this.lightInfo.enable=e},e.prototype.enableLightShadow=function(e){this.lightInfo.shadow=e},e.prototype.process=function(e){var t=this.singleStepOptions;this.materialOptions.precision&&this.processMaterialPrecision(e),t.enable&&this.processSingleStep(e)},be()(e,[{key:"sceneOptions",get:function(){var e=this.sceneInfo;return{visible:e.visible,distance:e.distance}},set:function(e){var t=this.sceneInfo;t.visible=$.Utils.parseValue(e.visible,t.visible),t.distance=$.Utils.parseValue(e.distance,t.distance)}},{key:"singleStepOptions",get:function(){var e=this.singleStepInfo;return{enable:e.enable,interval:e.interval,flickerTimes:e.flickerTimes}},set:function(e){var t=this.singleStepInfo,r=$.Utils.parseValue(e.enable,t.enable);r!=t.enable&&this.enableSingleStep(r),t.interval=Math.max(1,$.Utils.parseValue(e.interval,t.interval)),t.flickerTimes=$.Utils.parseValue(e.flickerTimes,t.flickerTimes)}},{key:"materialOptions",get:function(){var e=this.materialInfo;return{enable:e.enable,mode:e.mode,wireframeColor:e.wireframeColor,precision:e.precision}},set:function(e){var t=this.materialInfo,r=$.Utils.parseValue(e.mode,t.mode);r!=t.mode&&this.setMaterialMode(r);var n=$.Utils.parseValue(e.wireframeColor,t.wireframeColor);n!=t.wireframeColor&&this.setMaterialWireframeColor(n);var i=$.Utils.parseValue(e.precision,t.precision);i!=t.precision&&this.setMaterialPrecision(i)}},{key:"lightOptions",get:function(){var e=this.lightInfo;return{enable:e.enable,helper:e.helper,shadow:e.shadow,lights:e.lights,onAddLight:e.onAddLight,onRemoveLight:e.onRemoveLight}},set:function(e){var t=this.lightInfo;t.enable=$.Utils.parseValue(e.enable,t.enable),t.helper=$.Utils.parseValue(e.helper,t.helper),t.shadow=$.Utils.parseValue(e.shadow,t.shadow),t.onAddLight=e.onAddLight||t.onAddLight,t.onRemoveLight=e.onRemoveLight||t.onRemoveLight}}]),e}(),Bt=r(/*! ../../libs/three/build/three.module.js */"./src/libs/three/build/three.module.js"),Gt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i()(this,e),this.renderer=null,this.renderTarget0=null,this.copyPass=null,this.debug=null,this.init(t),this}return e.prototype.createRenderTarget=function(){var e=new Bt.Vector2;this.renderer.getDrawingBufferSize(e);var t=e.x,r=e.y,n={minFilter:Bt.LinearFilter,magFilter:Bt.LinearFilter,format:Bt.RGBAFormat};return new Bt.WebGLMultisampleRenderTarget(t,r,n)},e.prototype.init=function(e){this.renderer=new Bt.WebGLRenderer(e),this.renderer.info.autoReset=!1,this.renderTarget0=this.createRenderTarget(),this.copyPass=new Dt(Et),this.debug=new Ft,this.debug.processRenderer(this.renderer)},e.prototype.setSize=function(e,t){this.renderTarget0.setSize(e,t),this.renderer.setSize(e,t)},e.prototype.clear=function(){this.renderer.clear()},e.prototype.begin=function(){this.renderer.info.reset()},e.prototype.end=function(){},e.prototype.render=function(e,t,r){this.debug.process(e);var n=this.renderer,i=this.renderTarget0;n.setRenderTarget(i),n.clear(),n.render(e,t),this.copyPass.render(n,r,i)},e.prototype.renderOverlay=function(e,t){var r=this.renderer;r.setRenderTarget(null),r.clear(!1,!0,!1);var n=r.autoClear;r.autoClear=!1,r.render(e,t),r.autoClear=n},e.prototype.setRenderTarget=function(e){this.renderer.setRenderTarget(e)},e.prototype.setClearColor=function(e){this.renderer.setClearColor(e)},e.prototype.setPixelRatio=function(e){this.renderer.setPixelRatio(e)},e.prototype.readRenderTargetPixels=function(e,t,r,n,i){this.renderer.readRenderTargetPixels(this.renderTarget0,e,t,r,n,i)},be()(e,[{key:"shadowMap",get:function(){return this.renderer.shadowMap.enabled},set:function(e){this.renderer.shadowMap.enabled=e}},{key:"shadowMapType",get:function(){switch(this.renderer.shadowMap.type){case BasicShadowMap:return"BasicShadowMap";case PCFShadowMap:return"PCFShadowMap";case PCFSoftShadowMap:return"PCFSoftShadowMap";case VSMShadowMap:return"VSMShadowMap";default:return""}},set:function(e){var t;switch(e){case"BasicShadowMap":t=Bt.BasicShadowMap;break;case"PCFShadowMap":t=Bt.PCFShadowMap;break;case"PCFSoftShadowMap":t=Bt.PCFSoftShadowMap;break;case"VSMShadowMap":t=Bt.VSMShadowMap}t&&(this.renderer.shadowMap.type=t)}},{key:"info",get:function(){return this.renderer.info}},{key:"renderLists",get:function(){return this.renderer.renderLists}},{key:"domElement",get:function(){return this.renderer.domElement}}]),e}(),Vt=r(/*! ../libs/three/build/three.module.js */"./src/libs/three/build/three.module.js"),Ht=r(/*! ../common/Utils */"./src/common/Utils.js").Utils,kt={Clock:Vt.Clock,Color:Vt.Color,Vector2:Vt.Vector2,Vector3:Vt.Vector3,Matrix3:Vt.Matrix3,Matrix4:Vt.Matrix4,Euler:Vt.Euler,Quaternion:Vt.Quaternion,Spherical:Vt.Spherical,Raycaster:Vt.Raycaster,Box3:Vt.Box3,Box3Helper:Vt.Box3Helper,AxesHelper:Vt.AxesHelper,VertexNormalsHelper:u,Object3D:Vt.Object3D,Group:Vt.Group,Scene:Vt.Scene,OrthographicCamera:Vt.OrthographicCamera,PerspectiveCamera:Vt.PerspectiveCamera,StereoCamera:Vt.StereoCamera,BoxGeometry:Vt.BoxGeometry,CircleGeometry:Vt.CircleGeometry,SphereGeometry:Vt.SphereGeometry,PlaneGeometry:Vt.PlaneGeometry,CylinderGeometry:Vt.CylinderGeometry,TetrahedronGeometry:Vt.TetrahedronGeometry,ExtrudeBufferGeometry:Vt.ExtrudeBufferGeometry,Mesh:Vt.Mesh,MeshBasicMaterial:Vt.MeshBasicMaterial,MeshLambertMaterial:Vt.MeshLambertMaterial,MeshPhongMaterial:Vt.MeshPhongMaterial,MeshToonMaterial:Vt.MeshToonMaterial,SpriteMaterial:Vt.SpriteMaterial,AmbientLight:Vt.AmbientLight,DirectionalLight:Vt.DirectionalLight,HemisphereLight:Vt.HemisphereLight,PointLight:Vt.PointLight,RectAreaLight:Vt.RectAreaLight,SpotLight:Vt.SpotLight,DirectionalLightHelper:Vt.DirectionalLightHelper,PointLightHelper:Vt.PointLightHelper,SpotLightHelper:Vt.SpotLightHelper,HemisphereLightHelper:Vt.HemisphereLightHelper,AnimationClip:Vt.AnimationClip,AnimationMixer:Vt.AnimationMixer,Texture:Vt.Texture,CubeTexture:Vt.CubeTexture,CSS3DRenderer:v,GLTFLoader:h,OrbitControls:d,CameraControls:k,GPUPicker:Ae,HTMLMixer:je,InstancedMesh:Fe,SpriteText2D:qe,MeshText2D:Ye,SpriteImage2D:Qe,MeshImage2D:et,PolygonRouteLine:xt,PolygonPipeLine:Mt,PixelLine:Tt,Renderer:Gt};k.install({THREE:Vt});var Wt=function(e,t){var r=kt[e];if(!r)return null;switch(e){case"Vector3":return new r(Ht.parseValue(t.x,0),Ht.parseValue(t.y,0),Ht.parseValue(t.z,0));case"Color":var n=t.color;if(n){var i=t.defaultValue;return Ht.parseColor(n,i)}return new r;case"Spherical":return new r(Ht.parseVector3(t.radius,1),Ht.parseVector3(t.phi,0),Ht.parseVector3(t.theta,0));case"Box3":return new r(Ht.parseVector3(t.min),Ht.parseVector3(t.max));case"Box3Helper":return new r(t.box,d=Ht.parseColor(t.color,16777215));case"AxesHelper":return new r(t.size||1);case"VertexNormalsHelper":return new r(t.object,t.size||1,d=t.color||16711680,b=t.width||1);case"Group":var o=new r;return o.name=Ht.parseValue(t.name,""),(a=t.parent)&&a.add(o),o;case"Scene":var a,s=new r;return s.name=Ht.parseValue(t.name,""),(a=t.parent)&&a.add(s),s;case"OrthographicCamera":return new r(Ht.parseValue(t.left,-1),Ht.parseValue(t.right,1),Ht.parseValue(t.top,1),Ht.parseValue(t.bottom,-1),Ht.parseValue(t.near,-1e4),Ht.parseValue(t.far,1e4));case"PerspectiveCamera":return new r(Ht.parseValue(t.fov,50),Ht.parseValue(t.aspect,1),Ht.parseValue(t.near,.1),Ht.parseValue(t.far,1e4));case"AnimationMixer":return new r(t.node);case"Texture":case"CubeTexture":return new r(t.image);case"CSS3DRenderer":var c=new r;return(l=c.domElement).style.position="absolute",l.style.top="0",l.style.pointerEvents="none",c;case"OrbitControls":return(u=new r(t.camera,l=t.domElement)).minDistance=Ht.parseValue(t.minDistance,1e-4),u.minZoom=Ht.parseValue(t.minZoom,.15),u.maxZoom=Ht.parseValue(t.maxZoom,8),u.autoRotate=Ht.parseValue(t.autoRotate,!1),u.enableDamping=Ht.parseValue(t.enableDamping,!0),u.minPolarAngle=Ht.parseValue(t.minPolarAngle,0),u.maxPolarAngle=Ht.parseValue(t.maxPolarAngle,Math.PI),u.keyPanSpeed=Ht.parseValue(t.keyPanSpeed,.1),u.panSpeed=Ht.parseValue(t.panSpeed,.1),u.rotateSpeed=Ht.parseValue(t.rotateSpeed,.07),u.dampingFactor=Ht.parseValue(t.dampingFactor,.078),u.screenSpacePanning=Ht.parseValue(t.screenSpacePanning,!0),u.enabled=Ht.parseValue(t.enabled,!0),u;case"CameraControls":var l,u;return(u=new r(t.camera,l=t.domElement)).minDistance=Ht.parseValue(t.minDistance,1e-4),u.minZoom=Ht.parseValue(t.minZoom,.15),u.maxZoom=Ht.parseValue(t.maxZoom,8),u.minPolarAngle=Ht.parseValue(t.minPolarAngle,0),u.maxPolarAngle=Ht.parseValue(t.maxPolarAngle,Math.PI),u.dampingFactor=Ht.parseValue(t.dampingFactor,.078),u.enabled=Ht.parseValue(t.enabled,!0),u;case"BoxGeometry":return new r(b=t.width,x=t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments);case"CircleGeometry":return new r(t.radius,t.segments,t.thetaStart,t.thetaLength);case"SphereGeometry":t.radius;return new r(b,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength);case"PlaneGeometry":return new r(b=t.width,x=t.height,t.widthSegments,t.heightSegments);case"CylinderGeometry":return new r(t.radiusTop,t.radiusBottom,x=t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength);case"TetrahedronGeometry":return new r(t.radius,t.detail);case"Mesh":var h=new r(t.geometry,t.material);return h.name=Ht.parseValue(t.name,h.name),h;case"MeshBasicMaterial":case"MeshLambertMaterial":case"MeshPhongMaterial":case"MeshToonMaterial":case"SpriteMaterial":return function(e,t){var r=t.type;delete t.type;var n=Ht.parseSide(t.side);delete t.side;var i=new e(t);return 1!==t.opacity&&(i.transparent=!0),i.side=n,t.type=r,i}(r,t);case"AmbientLight":return new r(d=Ht.parseColor(t.color),f=t.intensity);case"DirectionalLight":var d=Ht.parseColor(t.color),p=Ht.parseVector3(t.target),f=t.intensity,m=Ht.parseValue(t.castShadow,!1);return(S=new r(d,f)).castShadow=m,p&&(S.target=p),S;case"HemisphereLight":var g=Ht.parseColor(t.skyColor),v=Ht.parseColor(t.groundColor);f=t.intensity,m=Ht.parseValue(t.castShadow,!1);return(S=new r(g,v,f)).castShadow=m,S;case"PointLight":d=Ht.parseColor(t.color),f=t.intensity;var y=t.distance,_=t.decay;m=Ht.parseValue(t.castShadow,!1);return(S=new r(d,f,y,_)).castShadow=m,S;case"RectAreaLight":d=Ht.parseColor(t.color),f=t.intensity;var b=t.width,x=t.height;m=Ht.parseValue(t.castShadow,!1);return(S=new r(d,f,b,x)).castShadow=m,S;case"SpotLight":d=Ht.parseColor(t.color),p=Ht.parseVector3(t.target),f=t.intensity,y=t.distance;var w=t.angle,M=t.penumbra;_=t.decay,m=Ht.parseValue(t.castShadow,!1);return(S=new r(d,f,y,w,M,_)).castShadow=m,p&&(S.target=p),S;case"DirectionalLightHelper":case"PointLightHelper":case"SpotLightHelper":case"HemisphereLightHelper":var S;return new r(S=t.light);case"HTMLMixer":return new je(t);case"InstancedMesh":return new Fe(t);case"SpriteText2D":return new qe(t);case"MeshText2D":return new Ye(t);case"SpriteImage2D":return new Qe(t);case"MeshImage2D":return new et(t);case"PolygonRouteLine":return new xt(t);case"PolygonPipeLine":return new Mt(t);case"PixelLine":return new Tt(t);case"Renderer":return new Gt(t);default:return new r}},qt=function(){function e(){return i()(this,e),this}return e.prototype.create=function(e,t){var r;Ht.isString(e)?(r=e,t=t||{}):(r=e.type,t=e||{});var n=Wt(r,t);return n||null},e}();r(/*! ./libs/three/build/three.module.js */"./src/libs/three/build/three.module.js");window.THING=window.THING||{},window.THING.Plugins=window.THING.Plugins||{},window.THING.Plugins.THREE=window.THING.Plugins.THREE||{},window.THING.Plugins.THREE.Factory=qt},0:
/*!***************************!*\
  !*** multi ./src/main.js ***!
  \***************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){e.exports=r(/*! ./src/main.js */"./src/main.js")}});